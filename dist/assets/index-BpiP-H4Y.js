var $1=Object.defineProperty;var eE=i=>{throw TypeError(i)};var B1=(i,e,s)=>e in i?$1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var Hn=(i,e,s)=>B1(i,typeof e!="symbol"?e+"":e,s),Uy=(i,e,s)=>e.has(i)||eE("Cannot "+s);var et=(i,e,s)=>(Uy(i,e,"read from private field"),s?s.call(i):e.get(i)),Dt=(i,e,s)=>e.has(i)?eE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,s),Pt=(i,e,s,a)=>(Uy(i,e,"write to private field"),a?a.call(i,s):e.set(i,s),s),wt=(i,e,s)=>(Uy(i,e,"access private method"),s);var ds=(i,e,s,a)=>({set _(o){Pt(i,e,o,s)},get _(){return et(i,e,a)}});function _mergeNamespaces(i,e){for(var s=0;s<e.length;s++){const a=e[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in i)){const j=Object.getOwnPropertyDescriptor(a,o);j&&Object.defineProperty(i,o,j.get?j:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const j of o)if(j.type==="childList")for(const _e of j.addedNodes)_e.tagName==="LINK"&&_e.rel==="modulepreload"&&a(_e)}).observe(document,{childList:!0,subtree:!0});function s(o){const j={};return o.integrity&&(j.integrity=o.integrity),o.referrerPolicy&&(j.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?j.credentials="include":o.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function a(o){if(o.ep)return;o.ep=!0;const j=s(o);fetch(o.href,j)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var s=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var o=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return i[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$2.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$2}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,e,s){var a,o={},j=null,_e=null;if(e!=null)for(a in e.ref!==void 0&&(_e=e.ref),e.key!==void 0&&(j=""+e.key),e)J.call(e,a)&&!L$2.hasOwnProperty(a)&&(o[a]=e[a]);var nt=arguments.length-2;if(nt===1)o.children=s;else if(1<nt){for(var tt=Array(nt),st=0;st<nt;st++)tt[st]=arguments[st+2];o.children=tt}if(i&&i.defaultProps)for(a in nt=i.defaultProps,nt)o[a]===void 0&&(o[a]=nt[a]);return{$$typeof:l$1,type:i,key:j,ref:_e,props:o,_owner:K$1.current}}function N$2(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$2=/\/+/g;function Q$2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$2(i,e,s,a,o){var j=typeof i;(j==="undefined"||j==="boolean")&&(i=null);var _e=!1;if(i===null)_e=!0;else switch(j){case"string":case"number":_e=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:_e=!0}}if(_e)return _e=i,o=o(_e),i=a===""?"."+Q$2(_e,0):a,I$2(o)?(s="",i!=null&&(s=i.replace(P$2,"$&/")+"/"),R$2(o,e,s,"",function(st){return st})):o!=null&&(O$2(o)&&(o=N$2(o,s+(!o.key||_e&&_e.key===o.key?"":(""+o.key).replace(P$2,"$&/")+"/")+i)),e.push(o)),1;if(_e=0,a=a===""?".":a+":",I$2(i))for(var nt=0;nt<i.length;nt++){j=i[nt];var tt=a+Q$2(j,nt);_e+=R$2(j,e,s,tt,o)}else if(tt=A$2(i),typeof tt=="function")for(i=tt.call(i),nt=0;!(j=i.next()).done;)j=j.value,tt=a+Q$2(j,nt++),_e+=R$2(j,e,s,tt,o);else if(j==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return _e}function S$2(i,e,s){if(i==null)return i;var a=[],o=0;return R$2(i,a,"","",function(j){return e.call(s,j,o++)}),a}function T$2(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(i,e,s){S$2(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$2(i,function(){e++}),e},toArray:function(i){return S$2(i,function(e){return e})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var a=C$2({},i.props),o=i.key,j=i.ref,_e=i._owner;if(e!=null){if(e.ref!==void 0&&(j=e.ref,_e=K$1.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var nt=i.type.defaultProps;for(tt in e)J.call(e,tt)&&!L$2.hasOwnProperty(tt)&&(a[tt]=e[tt]===void 0&&nt!==void 0?nt[tt]:e[tt])}var tt=arguments.length-2;if(tt===1)a.children=s;else if(1<tt){nt=Array(tt);for(var st=0;st<tt;st++)nt[st]=arguments[st+2];a.children=nt}return{$$typeof:l$1,type:i.type,key:o,ref:j,props:a,_owner:_e}};react_production_min.createContext=function(i){return i={$$typeof:u$1,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var e=M$2.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$2}};react_production_min.memo=function(i,e){return{$$typeof:x$1,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$1.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$1.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$1.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,e,s){var a,o={},j=null,_e=null;s!==void 0&&(j=""+s),e.key!==void 0&&(j=""+e.key),e.ref!==void 0&&(_e=e.ref);for(a in e)m$2.call(e,a)&&!p$2.hasOwnProperty(a)&&(o[a]=e[a]);if(i&&i.defaultProps)for(a in e=i.defaultProps,e)o[a]===void 0&&(o[a]=e[a]);return{$$typeof:k$1,type:i,key:j,ref:_e,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Ut,_t){var $t=Ut.length;Ut.push(_t);e:for(;0<$t;){var Xt=$t-1>>>1,Ct=Ut[Xt];if(0<o(Ct,_t))Ut[Xt]=_t,Ut[$t]=Ct,$t=Xt;else break e}}function s(Ut){return Ut.length===0?null:Ut[0]}function a(Ut){if(Ut.length===0)return null;var _t=Ut[0],$t=Ut.pop();if($t!==_t){Ut[0]=$t;e:for(var Xt=0,Ct=Ut.length,yt=Ct>>>1;Xt<yt;){var Et=2*(Xt+1)-1,St=Ut[Et],Ft=Et+1,kt=Ut[Ft];if(0>o(St,$t))Ft<Ct&&0>o(kt,St)?(Ut[Xt]=kt,Ut[Ft]=$t,Xt=Ft):(Ut[Xt]=St,Ut[Et]=$t,Xt=Et);else if(Ft<Ct&&0>o(kt,$t))Ut[Xt]=kt,Ut[Ft]=$t,Xt=Ft;else break e}}return _t}function o(Ut,_t){var $t=Ut.sortIndex-_t.sortIndex;return $t!==0?$t:Ut.id-_t.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;i.unstable_now=function(){return j.now()}}else{var _e=Date,nt=_e.now();i.unstable_now=function(){return _e.now()-nt}}var tt=[],st=[],rt=1,at=null,it=3,ct=!1,ot=!1,ut=!1,dt=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Ut){for(var _t=s(st);_t!==null;){if(_t.callback===null)a(st);else if(_t.startTime<=Ut)a(st),_t.sortIndex=_t.expirationTime,e(tt,_t);else break;_t=s(st)}}function mt(Ut){if(ut=!1,xt(Ut),!ot)if(s(tt)!==null)ot=!0,Wt(ft);else{var _t=s(st);_t!==null&&Bt(mt,_t.startTime-Ut)}}function ft(Ut,_t){ot=!1,ut&&(ut=!1,lt(vt),vt=-1),ct=!0;var $t=it;try{for(xt(_t),at=s(tt);at!==null&&(!(at.expirationTime>_t)||Ut&&!bt());){var Xt=at.callback;if(typeof Xt=="function"){at.callback=null,it=at.priorityLevel;var Ct=Xt(at.expirationTime<=_t);_t=i.unstable_now(),typeof Ct=="function"?at.callback=Ct:at===s(tt)&&a(tt),xt(_t)}else a(tt);at=s(tt)}if(at!==null)var yt=!0;else{var Et=s(st);Et!==null&&Bt(mt,Et.startTime-_t),yt=!1}return yt}finally{at=null,it=$t,ct=!1}}var gt=!1,pt=null,vt=-1,At=5,Rt=-1;function bt(){return!(i.unstable_now()-Rt<At)}function Tt(){if(pt!==null){var Ut=i.unstable_now();Rt=Ut;var _t=!0;try{_t=pt(!0,Ut)}finally{_t?Lt():(gt=!1,pt=null)}}else gt=!1}var Lt;if(typeof ht=="function")Lt=function(){ht(Tt)};else if(typeof MessageChannel<"u"){var Yt=new MessageChannel,zt=Yt.port2;Yt.port1.onmessage=Tt,Lt=function(){zt.postMessage(null)}}else Lt=function(){dt(Tt,0)};function Wt(Ut){pt=Ut,gt||(gt=!0,Lt())}function Bt(Ut,_t){vt=dt(function(){Ut(i.unstable_now())},_t)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ut){Ut.callback=null},i.unstable_continueExecution=function(){ot||ct||(ot=!0,Wt(ft))},i.unstable_forceFrameRate=function(Ut){0>Ut||125<Ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):At=0<Ut?Math.floor(1e3/Ut):5},i.unstable_getCurrentPriorityLevel=function(){return it},i.unstable_getFirstCallbackNode=function(){return s(tt)},i.unstable_next=function(Ut){switch(it){case 1:case 2:case 3:var _t=3;break;default:_t=it}var $t=it;it=_t;try{return Ut()}finally{it=$t}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ut,_t){switch(Ut){case 1:case 2:case 3:case 4:case 5:break;default:Ut=3}var $t=it;it=Ut;try{return _t()}finally{it=$t}},i.unstable_scheduleCallback=function(Ut,_t,$t){var Xt=i.unstable_now();switch(typeof $t=="object"&&$t!==null?($t=$t.delay,$t=typeof $t=="number"&&0<$t?Xt+$t:Xt):$t=Xt,Ut){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=$t+Ct,Ut={id:rt++,callback:_t,priorityLevel:Ut,startTime:$t,expirationTime:Ct,sortIndex:-1},$t>Xt?(Ut.sortIndex=$t,e(st,Ut),s(tt)===null&&Ut===s(st)&&(ut?(lt(vt),vt=-1):ut=!0,Bt(mt,$t-Xt))):(Ut.sortIndex=Ct,e(tt,Ut),ot||ct||(ot=!0,Wt(ft))),Ut},i.unstable_shouldYield=bt,i.unstable_wrapCallback=function(Ut){var _t=it;return function(){var $t=it;it=_t;try{return Ut.apply(this,arguments)}finally{it=$t}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,s,a){if(e===null||typeof e>"u"||pa(i,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(i,e,s,a,o,j,_e){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=j,this.removeEmptyString=_e}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z$1[e]=new v$1(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v$1(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,s,a){var o=z$1.hasOwnProperty(e)?z$1[e]:null;(o!==null?o.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,o,a)&&(s=null),a||o===null?oa(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):o.mustUseProperty?i[o.propertyName]=s===null?o.type===3?!1:"":s:(e=o.attributeName,a=o.attributeNamespace,s===null?i.removeAttribute(e):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,a?i.setAttributeNS(a,e,s):i.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(st){var a=st}Reflect.construct(i,[],e)}else{try{e.call()}catch(st){a=st}i.call(e.prototype)}else{try{throw Error()}catch(st){a=st}i()}}catch(st){if(st&&a&&typeof st.stack=="string"){for(var o=st.stack.split(`
`),j=a.stack.split(`
`),_e=o.length-1,nt=j.length-1;1<=_e&&0<=nt&&o[_e]!==j[nt];)nt--;for(;1<=_e&&0<=nt;_e--,nt--)if(o[_e]!==j[nt]){if(_e!==1||nt!==1)do if(_e--,nt--,0>nt||o[_e]!==j[nt]){var tt=`
`+o[_e].replace(" at new "," at ");return i.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",i.displayName)),tt}while(1<=_e&&0<=nt);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),a=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,j=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(_e){a=""+_e,j.call(this,_e)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(_e){a=""+_e},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return i&&(a=Ta(i)?i.checked?"true":"false":i.value),i=a,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var s=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),i._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(a==="submit"||a==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,e,s,a){if(i=i.options,e){e={};for(var o=0;o<s.length;o++)e["$"+s[o]]=!0;for(s=0;s<i.length;s++)o=e.hasOwnProperty("$"+i[s].value),i[s].selected!==o&&(i[s].selected=o),o&&a&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,o=0;o<i.length;o++){if(i[o].value===s){i[o].selected=!0,a&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p$1(92));if(eb(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa(s)}}function ib(i,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),a!=null&&(i.defaultValue=""+a)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,o){MSApp.execUnsafeLocalFunction(function(){return i(e,s,a,o)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,o=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?i.setProperty(s,o):i[s]=o}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$1(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,s){if(Ib)return i(e,s);Ib=!0;try{return Gb(i,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var s=i.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(i=i.type,a=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!a;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$1(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,s,a,o,j,_e,nt,tt){var st=Array.prototype.slice.call(arguments,3);try{e.apply(s,st)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,s,a,o,j,_e,nt,tt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,s,a,o,j,_e,nt,tt){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=st)}}function Vb(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$1(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p$1(188));return e!==i?null:i}for(var s=i,a=e;;){var o=s.return;if(o===null)break;var j=o.alternate;if(j===null){if(a=o.return,a!==null){s=a;continue}break}if(o.child===j.child){for(j=o.child;j;){if(j===s)return Xb(o),i;if(j===a)return Xb(o),e;j=j.sibling}throw Error(p$1(188))}if(s.return!==a.return)s=o,a=j;else{for(var _e=!1,nt=o.child;nt;){if(nt===s){_e=!0,s=o,a=j;break}if(nt===a){_e=!0,a=o,s=j;break}nt=nt.sibling}if(!_e){for(nt=j.child;nt;){if(nt===s){_e=!0,s=j,a=o;break}if(nt===a){_e=!0,a=j,s=o;break}nt=nt.sibling}if(!_e)throw Error(p$1(189))}}if(s.alternate!==a)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var s=i.pendingLanes;if(s===0)return 0;var a=0,o=i.suspendedLanes,j=i.pingedLanes,_e=s&268435455;if(_e!==0){var nt=_e&~o;nt!==0?a=tc(nt):(j&=_e,j!==0&&(a=tc(j)))}else _e=s&~o,_e!==0?a=tc(_e):j!==0&&(a=tc(j));if(a===0)return 0;if(e!==0&&e!==a&&!(e&o)&&(o=a&-a,j=e&-e,o>=j||o===16&&(j&4194240)!==0))return e;if(a&4&&(a|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=a;0<e;)s=31-oc(e),o=1<<s,a|=i[s],e&=~o;return a}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var s=i.suspendedLanes,a=i.pingedLanes,o=i.expirationTimes,j=i.pendingLanes;0<j;){var _e=31-oc(j),nt=1<<_e,tt=o[_e];tt===-1?(!(nt&s)||nt&a)&&(o[_e]=vc(nt,e)):tt<=e&&(i.expiredLanes|=nt),j&=~nt}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=s}function Bc(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var a=i.eventTimes;for(i=i.expirationTimes;0<s;){var o=31-oc(s),j=1<<o;e[o]=0,a[o]=-1,i[o]=-1,s&=~j}}function Cc(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var a=31-oc(s),o=1<<a;o&e|i[a]&e&&(i[a]|=e),s&=~o}}var C$1=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,s,a,o,j){return i===null||i.nativeEvent!==j?(i={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:j,targetContainers:[o]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=a,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function Uc(i,e,s,a,o){switch(e){case"focusin":return Lc=Tc(Lc,i,e,s,a,o),!0;case"dragenter":return Mc=Tc(Mc,i,e,s,a,o),!0;case"mouseover":return Nc=Tc(Nc,i,e,s,a,o),!0;case"pointerover":var j=o.pointerId;return Oc.set(j,Tc(Oc.get(j)||null,i,e,s,a,o)),!0;case"gotpointercapture":return j=o.pointerId,Pc.set(j,Tc(Pc.get(j)||null,i,e,s,a,o)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc(i,e,s){Xc(i)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(o){return ad(o,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===i&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===i&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,s,a){var o=C$1,j=cd.transition;cd.transition=null;try{C$1=1,fd(i,e,s,a)}finally{C$1=o,cd.transition=j}}function gd(i,e,s,a){var o=C$1,j=cd.transition;cd.transition=null;try{C$1=4,fd(i,e,s,a)}finally{C$1=o,cd.transition=j}}function fd(i,e,s,a){if(dd){var o=Yc(i,e,s,a);if(o===null)hd(i,e,a,id,s),Sc(i,a);else if(Uc(o,i,e,s,a))a.stopPropagation();else if(Sc(i,a),e&4&&-1<Rc.indexOf(i)){for(;o!==null;){var j=Cb(o);if(j!==null&&Ec(j),j=Yc(i,e,s,a),j===null&&hd(i,e,a,id,s),j===o)break;o=j}o!==null&&a.stopPropagation()}else hd(i,e,a,null,s)}}var id=null;function Yc(i,e,s,a){if(id=null,i=xb(a),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,s=e.length,a,o="value"in kd?kd.value:kd.textContent,j=o.length;for(i=0;i<s&&e[i]===o[i];i++);var _e=s-i;for(a=1;a<=_e&&e[s-a]===o[j-a];a++);return md=o.slice(i,1<a?1-a:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(s,a,o,j,_e){this._reactName=s,this._targetInst=o,this.type=a,this.nativeEvent=j,this.target=_e,this.currentTarget=null;for(var nt in i)i.hasOwnProperty(nt)&&(s=i[nt],this[nt]=s?s(j):j[nt]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,s,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),i.push({event:s,listeners:e}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re,e)}}function Ce(i,e,s){i==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var o=s[a];if(!ja.call(e,o)||!He(i[o],e[o]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var s=Je(i);i=0;for(var a;s;){if(s.nodeType===3){if(a=i+s.textContent.length,i<=e&&a>=e)return{node:s,offset:e-i};i=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),s=i.focusedElem,a=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(e=a.start,i=a.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var o=s.textContent.length,j=Math.min(a.start,o);a=a.end===void 0?j:Math.min(a.end,o),!i.extend&&j>a&&(o=a,a=j,j=o),o=Ke(s,j);var _e=Ke(s,a);o&&_e&&(i.rangeCount!==1||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==_e.node||i.focusOffset!==_e.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),i.removeAllRanges(),j>a?(i.addRange(e),i.extend(_e.node,_e.offset)):(e.setEnd(_e.node,_e.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),i.push({event:e,listeners:a}),e.target=Qe)))}function Ve(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[i]=e[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var a=i.type||"unknown-event";i.currentTarget=s,Ub(a,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var a=i[s],o=a.event;a=a.listeners;e:{var j=void 0;if(e)for(var _e=a.length-1;0<=_e;_e--){var nt=a[_e],tt=nt.instance,st=nt.currentTarget;if(nt=nt.listener,tt!==j&&o.isPropagationStopped())break e;nf(o,nt,st),j=tt}else for(_e=0;_e<a.length;_e++){if(nt=a[_e],tt=nt.instance,st=nt.currentTarget,nt=nt.listener,tt!==j&&o.isPropagationStopped())break e;nf(o,nt,st),j=tt}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D$1(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=i+"__bubble";s.has(a)||(pf(e,i,2,!1),s.add(a))}function qf(i,e,s){var a=0;e&&(a|=4),pf(s,i,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,a){switch(jd(e)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}s=o.bind(null,e,s,i),o=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),a?o!==void 0?i.addEventListener(e,s,{capture:!0,passive:o}):i.addEventListener(e,s,!0):o!==void 0?i.addEventListener(e,s,{passive:o}):i.addEventListener(e,s,!1)}function hd(i,e,s,a,o){var j=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var _e=a.tag;if(_e===3||_e===4){var nt=a.stateNode.containerInfo;if(nt===o||nt.nodeType===8&&nt.parentNode===o)break;if(_e===4)for(_e=a.return;_e!==null;){var tt=_e.tag;if((tt===3||tt===4)&&(tt=_e.stateNode.containerInfo,tt===o||tt.nodeType===8&&tt.parentNode===o))return;_e=_e.return}for(;nt!==null;){if(_e=Wc(nt),_e===null)return;if(tt=_e.tag,tt===5||tt===6){a=j=_e;continue e}nt=nt.parentNode}}a=a.return}Jb(function(){var st=j,rt=xb(s),at=[];e:{var it=df.get(i);if(it!==void 0){var ct=td,ot=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":ct=Rd;break;case"focusin":ot="focus",ct=Fd;break;case"focusout":ot="blur",ct=Fd;break;case"beforeblur":case"afterblur":ct=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=Vd;break;case $e:case af:case bf:ct=Hd;break;case cf:ct=Xd;break;case"scroll":ct=vd;break;case"wheel":ct=Zd;break;case"copy":case"cut":case"paste":ct=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Td}var ut=(e&4)!==0,dt=!ut&&i==="scroll",lt=ut?it!==null?it+"Capture":null:it;ut=[];for(var ht=st,xt;ht!==null;){xt=ht;var mt=xt.stateNode;if(xt.tag===5&&mt!==null&&(xt=mt,lt!==null&&(mt=Kb(ht,lt),mt!=null&&ut.push(tf(ht,mt,xt)))),dt)break;ht=ht.return}0<ut.length&&(it=new ct(it,ot,null,s,rt),at.push({event:it,listeners:ut}))}}if(!(e&7)){e:{if(it=i==="mouseover"||i==="pointerover",ct=i==="mouseout"||i==="pointerout",it&&s!==wb&&(ot=s.relatedTarget||s.fromElement)&&(Wc(ot)||ot[uf]))break e;if((ct||it)&&(it=rt.window===rt?rt:(it=rt.ownerDocument)?it.defaultView||it.parentWindow:window,ct?(ot=s.relatedTarget||s.toElement,ct=st,ot=ot?Wc(ot):null,ot!==null&&(dt=Vb(ot),ot!==dt||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(ct=null,ot=st),ct!==ot)){if(ut=Bd,mt="onMouseLeave",lt="onMouseEnter",ht="mouse",(i==="pointerout"||i==="pointerover")&&(ut=Td,mt="onPointerLeave",lt="onPointerEnter",ht="pointer"),dt=ct==null?it:ue(ct),xt=ot==null?it:ue(ot),it=new ut(mt,ht+"leave",ct,s,rt),it.target=dt,it.relatedTarget=xt,mt=null,Wc(rt)===st&&(ut=new ut(lt,ht+"enter",ot,s,rt),ut.target=xt,ut.relatedTarget=dt,mt=ut),dt=mt,ct&&ot)t:{for(ut=ct,lt=ot,ht=0,xt=ut;xt;xt=vf(xt))ht++;for(xt=0,mt=lt;mt;mt=vf(mt))xt++;for(;0<ht-xt;)ut=vf(ut),ht--;for(;0<xt-ht;)lt=vf(lt),xt--;for(;ht--;){if(ut===lt||lt!==null&&ut===lt.alternate)break t;ut=vf(ut),lt=vf(lt)}ut=null}else ut=null;ct!==null&&wf(at,it,ct,ut,!1),ot!==null&&dt!==null&&wf(at,dt,ot,ut,!0)}}e:{if(it=st?ue(st):window,ct=it.nodeName&&it.nodeName.toLowerCase(),ct==="select"||ct==="input"&&it.type==="file")var ft=ve;else if(me(it))if(we)ft=Fe;else{ft=De;var gt=Ce}else(ct=it.nodeName)&&ct.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(ft=Ee);if(ft&&(ft=ft(i,st))){ne(at,ft,s,rt);break e}gt&&gt(i,it,st),i==="focusout"&&(gt=it._wrapperState)&&gt.controlled&&it.type==="number"&&cb(it,"number",it.value)}switch(gt=st?ue(st):window,i){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(at,s,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(at,s,rt)}var pt;if(ae)e:{switch(i){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge(i,s)&&(vt="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(vt="onCompositionStart");vt&&(de&&s.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(pt=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),gt=oe(st,vt),0<gt.length&&(vt=new Ld(vt,i,null,s,rt),at.push({event:vt,listeners:gt}),pt?vt.data=pt:(pt=he(s),pt!==null&&(vt.data=pt)))),(pt=ce?je(i,s):ke(i,s))&&(st=oe(st,"onBeforeInput"),0<st.length&&(rt=new Ld("onBeforeInput","beforeinput",null,s,rt),at.push({event:rt,listeners:st}),rt.data=pt))}se(at,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe(i,e){for(var s=e+"Capture",a=[];i!==null;){var o=i,j=o.stateNode;o.tag===5&&j!==null&&(o=j,j=Kb(i,s),j!=null&&a.unshift(tf(i,j,o)),j=Kb(i,e),j!=null&&a.push(tf(i,j,o))),i=i.return}return a}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,a,o){for(var j=e._reactName,_e=[];s!==null&&s!==a;){var nt=s,tt=nt.alternate,st=nt.stateNode;if(tt!==null&&tt===a)break;nt.tag===5&&st!==null&&(nt=st,o?(tt=Kb(s,j),tt!=null&&_e.unshift(tf(s,tt,nt))):o||(tt=Kb(s,j),tt!=null&&_e.push(tf(s,tt,nt)))),s=s.return}_e.length!==0&&i.push({event:e,listeners:_e})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,a=0;do{var o=s.nextSibling;if(i.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(a===0){i.removeChild(o),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=o}while(s);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E$1(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var a=i.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var o={},j;for(j in s)o[j]=e[j];return a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(i,e,s){if(H$1.current!==Vf)throw Error(p$1(168));G(H$1,e),G(Wf,s)}function bg(i,e,s){var a=i.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var o in a)if(!(o in e))throw Error(p$1(108,Ra(i)||"Unknown",o));return A$1({},s,a)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,i),G(Wf,Wf.current),!0}function dg(i,e,s){var a=i.stateNode;if(!a)throw Error(p$1(169));s?(i=bg(i,e,Xf),a.__reactInternalMemoizedMergedChildContext=i,E$1(Wf),E$1(H$1),G(H$1,i)):E$1(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C$1;try{var s=eg;for(C$1=1;i<s.length;i++){var a=s[i];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),o}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var a=rg;i=sg;var o=32-oc(a)-1;a&=~(1<<o),s+=1;var j=32-oc(e)+o;if(30<j){var _e=o-o%5;j=(a&(1<<_e)-1).toString(32),a>>=_e,o-=_e,rg=1<<32-oc(e)+o|s<<o|a,sg=j+i}else rg=1<<j|s<<o|a,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I$1){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p$1(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(i,e)?Ag(a,s):(i.flags=i.flags&-4097|2,I$1=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I$1=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I$1)return Fg(i),I$1=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var a=s.stateNode}if(!a)throw Error(p$1(147,i));var o=a,j=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===j?e.ref:(e=function(_e){var nt=o.refs;_e===null?delete nt[j]:nt[j]=_e},e._stringRef=j,e)}if(typeof i!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,i))}return i}function Mg(i,e){throw i=Object.prototype.toString.call(e),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Ng(i){var e=i._init;return e(i._payload)}function Og(i){function e(lt,ht){if(i){var xt=lt.deletions;xt===null?(lt.deletions=[ht],lt.flags|=16):xt.push(ht)}}function s(lt,ht){if(!i)return null;for(;ht!==null;)e(lt,ht),ht=ht.sibling;return null}function a(lt,ht){for(lt=new Map;ht!==null;)ht.key!==null?lt.set(ht.key,ht):lt.set(ht.index,ht),ht=ht.sibling;return lt}function o(lt,ht){return lt=Pg(lt,ht),lt.index=0,lt.sibling=null,lt}function j(lt,ht,xt){return lt.index=xt,i?(xt=lt.alternate,xt!==null?(xt=xt.index,xt<ht?(lt.flags|=2,ht):xt):(lt.flags|=2,ht)):(lt.flags|=1048576,ht)}function _e(lt){return i&&lt.alternate===null&&(lt.flags|=2),lt}function nt(lt,ht,xt,mt){return ht===null||ht.tag!==6?(ht=Qg(xt,lt.mode,mt),ht.return=lt,ht):(ht=o(ht,xt),ht.return=lt,ht)}function tt(lt,ht,xt,mt){var ft=xt.type;return ft===ya?rt(lt,ht,xt.props.children,mt,xt.key):ht!==null&&(ht.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===ht.type)?(mt=o(ht,xt.props),mt.ref=Lg(lt,ht,xt),mt.return=lt,mt):(mt=Rg(xt.type,xt.key,xt.props,null,lt.mode,mt),mt.ref=Lg(lt,ht,xt),mt.return=lt,mt)}function st(lt,ht,xt,mt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==xt.containerInfo||ht.stateNode.implementation!==xt.implementation?(ht=Sg(xt,lt.mode,mt),ht.return=lt,ht):(ht=o(ht,xt.children||[]),ht.return=lt,ht)}function rt(lt,ht,xt,mt,ft){return ht===null||ht.tag!==7?(ht=Tg(xt,lt.mode,mt,ft),ht.return=lt,ht):(ht=o(ht,xt),ht.return=lt,ht)}function at(lt,ht,xt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=Qg(""+ht,lt.mode,xt),ht.return=lt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return xt=Rg(ht.type,ht.key,ht.props,null,lt.mode,xt),xt.ref=Lg(lt,null,ht),xt.return=lt,xt;case wa:return ht=Sg(ht,lt.mode,xt),ht.return=lt,ht;case Ha:var mt=ht._init;return at(lt,mt(ht._payload),xt)}if(eb(ht)||Ka(ht))return ht=Tg(ht,lt.mode,xt,null),ht.return=lt,ht;Mg(lt,ht)}return null}function it(lt,ht,xt,mt){var ft=ht!==null?ht.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return ft!==null?null:nt(lt,ht,""+xt,mt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===ft?tt(lt,ht,xt,mt):null;case wa:return xt.key===ft?st(lt,ht,xt,mt):null;case Ha:return ft=xt._init,it(lt,ht,ft(xt._payload),mt)}if(eb(xt)||Ka(xt))return ft!==null?null:rt(lt,ht,xt,mt,null);Mg(lt,xt)}return null}function ct(lt,ht,xt,mt,ft){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return lt=lt.get(xt)||null,nt(ht,lt,""+mt,ft);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return lt=lt.get(mt.key===null?xt:mt.key)||null,tt(ht,lt,mt,ft);case wa:return lt=lt.get(mt.key===null?xt:mt.key)||null,st(ht,lt,mt,ft);case Ha:var gt=mt._init;return ct(lt,ht,xt,gt(mt._payload),ft)}if(eb(mt)||Ka(mt))return lt=lt.get(xt)||null,rt(ht,lt,mt,ft,null);Mg(ht,mt)}return null}function ot(lt,ht,xt,mt){for(var ft=null,gt=null,pt=ht,vt=ht=0,At=null;pt!==null&&vt<xt.length;vt++){pt.index>vt?(At=pt,pt=null):At=pt.sibling;var Rt=it(lt,pt,xt[vt],mt);if(Rt===null){pt===null&&(pt=At);break}i&&pt&&Rt.alternate===null&&e(lt,pt),ht=j(Rt,ht,vt),gt===null?ft=Rt:gt.sibling=Rt,gt=Rt,pt=At}if(vt===xt.length)return s(lt,pt),I$1&&tg(lt,vt),ft;if(pt===null){for(;vt<xt.length;vt++)pt=at(lt,xt[vt],mt),pt!==null&&(ht=j(pt,ht,vt),gt===null?ft=pt:gt.sibling=pt,gt=pt);return I$1&&tg(lt,vt),ft}for(pt=a(lt,pt);vt<xt.length;vt++)At=ct(pt,lt,vt,xt[vt],mt),At!==null&&(i&&At.alternate!==null&&pt.delete(At.key===null?vt:At.key),ht=j(At,ht,vt),gt===null?ft=At:gt.sibling=At,gt=At);return i&&pt.forEach(function(bt){return e(lt,bt)}),I$1&&tg(lt,vt),ft}function ut(lt,ht,xt,mt){var ft=Ka(xt);if(typeof ft!="function")throw Error(p$1(150));if(xt=ft.call(xt),xt==null)throw Error(p$1(151));for(var gt=ft=null,pt=ht,vt=ht=0,At=null,Rt=xt.next();pt!==null&&!Rt.done;vt++,Rt=xt.next()){pt.index>vt?(At=pt,pt=null):At=pt.sibling;var bt=it(lt,pt,Rt.value,mt);if(bt===null){pt===null&&(pt=At);break}i&&pt&&bt.alternate===null&&e(lt,pt),ht=j(bt,ht,vt),gt===null?ft=bt:gt.sibling=bt,gt=bt,pt=At}if(Rt.done)return s(lt,pt),I$1&&tg(lt,vt),ft;if(pt===null){for(;!Rt.done;vt++,Rt=xt.next())Rt=at(lt,Rt.value,mt),Rt!==null&&(ht=j(Rt,ht,vt),gt===null?ft=Rt:gt.sibling=Rt,gt=Rt);return I$1&&tg(lt,vt),ft}for(pt=a(lt,pt);!Rt.done;vt++,Rt=xt.next())Rt=ct(pt,lt,vt,Rt.value,mt),Rt!==null&&(i&&Rt.alternate!==null&&pt.delete(Rt.key===null?vt:Rt.key),ht=j(Rt,ht,vt),gt===null?ft=Rt:gt.sibling=Rt,gt=Rt);return i&&pt.forEach(function(Tt){return e(lt,Tt)}),I$1&&tg(lt,vt),ft}function dt(lt,ht,xt,mt){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var ft=xt.key,gt=ht;gt!==null;){if(gt.key===ft){if(ft=xt.type,ft===ya){if(gt.tag===7){s(lt,gt.sibling),ht=o(gt,xt.props.children),ht.return=lt,lt=ht;break e}}else if(gt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===gt.type){s(lt,gt.sibling),ht=o(gt,xt.props),ht.ref=Lg(lt,gt,xt),ht.return=lt,lt=ht;break e}s(lt,gt);break}else e(lt,gt);gt=gt.sibling}xt.type===ya?(ht=Tg(xt.props.children,lt.mode,mt,xt.key),ht.return=lt,lt=ht):(mt=Rg(xt.type,xt.key,xt.props,null,lt.mode,mt),mt.ref=Lg(lt,ht,xt),mt.return=lt,lt=mt)}return _e(lt);case wa:e:{for(gt=xt.key;ht!==null;){if(ht.key===gt)if(ht.tag===4&&ht.stateNode.containerInfo===xt.containerInfo&&ht.stateNode.implementation===xt.implementation){s(lt,ht.sibling),ht=o(ht,xt.children||[]),ht.return=lt,lt=ht;break e}else{s(lt,ht);break}else e(lt,ht);ht=ht.sibling}ht=Sg(xt,lt.mode,mt),ht.return=lt,lt=ht}return _e(lt);case Ha:return gt=xt._init,dt(lt,ht,gt(xt._payload),mt)}if(eb(xt))return ot(lt,ht,xt,mt);if(Ka(xt))return ut(lt,ht,xt,mt);Mg(lt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,ht!==null&&ht.tag===6?(s(lt,ht.sibling),ht=o(ht,xt),ht.return=lt,lt=ht):(s(lt,ht),ht=Qg(xt,lt.mode,mt),ht.return=lt,lt=ht),_e(lt)):s(lt,ht)}return dt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var e=Wg.current;E$1(Wg),i._currentValue=e}function bh(i,e,s){for(;i!==null;){var a=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),i===s)break;i=i.return}}function ch(i,e){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(dh=!0),i.firstContext=null)}function eh(i){var e=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return e}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,e,s,a){var o=e.interleaved;return o===null?(s.next=s,gh(e)):(s.next=o.next,o.next=s),e.interleaved=s,ih(i,a)}function ih(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(i,e,s){var a=i.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),a.pending=e,ih(i,s)}return o=a.interleaved,o===null?(e.next=e,gh(a)):(e.next=o.next,o.next=e),a.interleaved=e,ih(i,s)}function oh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}function ph(i,e){var s=i.updateQueue,a=i.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var o=null,j=null;if(s=s.firstBaseUpdate,s!==null){do{var _e={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};j===null?o=j=_e:j=j.next=_e,s=s.next}while(s!==null);j===null?o=j=e:j=j.next=e}else o=j=e;s={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:j,shared:a.shared,effects:a.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function qh(i,e,s,a){var o=i.updateQueue;jh=!1;var j=o.firstBaseUpdate,_e=o.lastBaseUpdate,nt=o.shared.pending;if(nt!==null){o.shared.pending=null;var tt=nt,st=tt.next;tt.next=null,_e===null?j=st:_e.next=st,_e=tt;var rt=i.alternate;rt!==null&&(rt=rt.updateQueue,nt=rt.lastBaseUpdate,nt!==_e&&(nt===null?rt.firstBaseUpdate=st:nt.next=st,rt.lastBaseUpdate=tt))}if(j!==null){var at=o.baseState;_e=0,rt=st=tt=null,nt=j;do{var it=nt.lane,ct=nt.eventTime;if((a&it)===it){rt!==null&&(rt=rt.next={eventTime:ct,lane:0,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null});e:{var ot=i,ut=nt;switch(it=e,ct=s,ut.tag){case 1:if(ot=ut.payload,typeof ot=="function"){at=ot.call(ct,at,it);break e}at=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=ut.payload,it=typeof ot=="function"?ot.call(ct,at,it):ot,it==null)break e;at=A$1({},at,it);break e;case 2:jh=!0}}nt.callback!==null&&nt.lane!==0&&(i.flags|=64,it=o.effects,it===null?o.effects=[nt]:it.push(nt))}else ct={eventTime:ct,lane:it,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},rt===null?(st=rt=ct,tt=at):rt=rt.next=ct,_e|=it;if(nt=nt.next,nt===null){if(nt=o.shared.pending,nt===null)break;it=nt,nt=it.next,it.next=null,o.lastBaseUpdate=it,o.shared.pending=null}}while(!0);if(rt===null&&(tt=at),o.baseState=tt,o.firstBaseUpdate=st,o.lastBaseUpdate=rt,e=o.shared.interleaved,e!==null){o=e;do _e|=o.lane,o=o.next;while(o!==e)}else j===null&&(o.shared.lanes=0);rh|=_e,i.lanes=_e,i.memoizedState=at}}function sh(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var a=i[e],o=a.callback;if(o!==null){if(a.callback=null,a=s,typeof o!="function")throw Error(p$1(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p$1(174));return i}function yh(i,e){switch(G(wh,e),G(vh,i),G(uh,th),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E$1(uh),G(uh,e)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(i){xh(wh.current);var e=xh(uh.current),s=lb(e,i.type);e!==s&&(G(vh,i),G(uh,s))}function Bh(i){vh.current===i&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He(i[s],e[s]))return!1;return!0}function Nh(i,e,s,a,o,j){if(Hh=j,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=s(a,o),Jh){j=0;do{if(Jh=!1,Kh=0,25<=j)throw Error(p$1(301));j+=1,O$1=N$1=null,e.updateQueue=null,Fh.current=Qh,i=s(a,o)}while(Jh)}if(Fh.current=Rh,e=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,e)throw Error(p$1(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i,O$1}function Uh(){if(N$1===null){var i=M$1.alternate;i=i!==null?i.memoizedState:null}else i=N$1.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N$1=i;else{if(i===null)throw Error(p$1(310));N$1=i,i={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i}return O$1}function Vh(i,e){return typeof e=="function"?e(i):e}function Wh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var a=N$1,o=a.baseQueue,j=s.pending;if(j!==null){if(o!==null){var _e=o.next;o.next=j.next,j.next=_e}a.baseQueue=o=j,s.pending=null}if(o!==null){j=o.next,a=a.baseState;var nt=_e=null,tt=null,st=j;do{var rt=st.lane;if((Hh&rt)===rt)tt!==null&&(tt=tt.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),a=st.hasEagerState?st.eagerState:i(a,st.action);else{var at={lane:rt,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};tt===null?(nt=tt=at,_e=a):tt=tt.next=at,M$1.lanes|=rt,rh|=rt}st=st.next}while(st!==null&&st!==j);tt===null?_e=a:tt.next=nt,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=_e,e.baseQueue=tt,s.lastRenderedState=a}if(i=s.interleaved,i!==null){o=i;do j=o.lane,M$1.lanes|=j,rh|=j,o=o.next;while(o!==i)}else o===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var a=s.dispatch,o=s.pending,j=e.memoizedState;if(o!==null){s.pending=null;var _e=o=o.next;do j=i(j,_e.action),_e=_e.next;while(_e!==o);He(j,e.memoizedState)||(dh=!0),e.memoizedState=j,e.baseQueue===null&&(e.baseState=j),s.lastRenderedState=j}return[j,a]}function Yh(){}function Zh(i,e){var s=M$1,a=Uh(),o=e(),j=!He(a.memoizedState,o);if(j&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,s,a,i),[i]),a.getSnapshot!==e||j||O$1!==null&&O$1.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,o,e),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(s,e,o)}return o}function di(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function ci(i,e,s,a){e.value=s,e.getSnapshot=a,ei(e)&&fi(i)}function ai(i,e,s){return s(function(){ei(e)&&fi(i)})}function ei(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He(i,s)}catch{return!0}}function fi(i){var e=ih(i,1);e!==null&&gi(e,i,1,-1)}function hi(i){var e=Th();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},e.queue=i,i=i.dispatch=ii.bind(null,M$1,i),[e.memoizedState,i]}function bi(i,e,s,a){return i={tag:i,create:e,destroy:s,deps:a,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(a=s.next,s.next=i,i.next=a,e.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,e,s,a){var o=Th();M$1.flags|=i,o.memoizedState=bi(1|e,s,void 0,a===void 0?null:a)}function li(i,e,s,a){var o=Uh();a=a===void 0?null:a;var j=void 0;if(N$1!==null){var _e=N$1.memoizedState;if(j=_e.destroy,a!==null&&Mh(a,_e.deps)){o.memoizedState=bi(e,s,j,a);return}}M$1.flags|=i,o.memoizedState=bi(1|e,s,j,a)}function mi(i,e){return ki(8390656,8,i,e)}function $h(i,e){return li(2048,8,i,e)}function ni(i,e){return li(4,2,i,e)}function oi(i,e){return li(4,4,i,e)}function pi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function qi(i,e,s){return s=s!=null?s.concat([i]):null,li(4,4,pi.bind(null,e,i),s)}function ri(){}function si(i,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s.memoizedState=[i,e],i)}function ti(i,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(i=i(),s.memoizedState=[i,e],i)}function ui(i,e,s){return Hh&21?(He(s,e)||(s=yc(),M$1.lanes|=s,rh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=s)}function vi(i,e){var s=C$1;C$1=s!==0&&4>s?s:4,i(!0);var a=Gh.transition;Gh.transition={};try{i(!1),e()}finally{C$1=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(i,e,s){var a=yi(i);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(e,s);else if(s=hh(i,e,s,a),s!==null){var o=R$1();gi(s,i,a,o),Bi(s,e,a)}}function ii(i,e,s){var a=yi(i),o={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(e,o);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=e.lastRenderedReducer,j!==null))try{var _e=e.lastRenderedState,nt=j(_e,s);if(o.hasEagerState=!0,o.eagerState=nt,He(nt,_e)){var tt=e.interleaved;tt===null?(o.next=o,gh(e)):(o.next=tt.next,tt.next=o),e.interleaved=o;return}}catch{}finally{}s=hh(i,e,o,a),s!==null&&(o=R$1(),gi(s,i,a,o),Bi(s,e,a))}}function zi(i){var e=i.alternate;return i===M$1||e!==null&&e===M$1}function Ai(i,e){Jh=Ih=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Bi(i,e,s){if(s&4194240){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,e){return Th().memoizedState=[i,e===void 0?null:e],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ki(4194308,4,pi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ki(4194308,4,i,e)},useInsertionEffect:function(i,e){return ki(4,2,i,e)},useMemo:function(i,e){var s=Th();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var a=Th();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},a.queue=i,i=i.dispatch=xi.bind(null,M$1,i),[a.memoizedState,i]},useRef:function(i){var e=Th();return i={current:i},e.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),e=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var a=M$1,o=Th();if(I$1){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=e(),Q$1===null)throw Error(p$1(349));Hh&30||di(a,e,s)}o.memoizedState=s;var j={value:s,getSnapshot:e};return o.queue=j,mi(ai.bind(null,a,j,i),[i]),a.flags|=2048,bi(9,ci.bind(null,a,j,s,e),void 0,null),s},useId:function(){var i=Th(),e=Q$1.identifierPrefix;if(I$1){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return ui(e,N$1.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return N$1===null?e.memoizedState=i:ui(e,N$1.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,e){if(i&&i.defaultProps){e=A$1({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}function Di(i,e,s,a){e=i.memoizedState,s=s(a,e),s=s==null?e:A$1({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var a=R$1(),o=yi(i),j=mh(a,o);j.payload=e,s!=null&&(j.callback=s),e=nh(i,j,o),e!==null&&(gi(e,i,o,a),oh(e,i,o))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var a=R$1(),o=yi(i),j=mh(a,o);j.tag=1,j.payload=e,s!=null&&(j.callback=s),e=nh(i,j,o),e!==null&&(gi(e,i,o,a),oh(e,i,o))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=R$1(),a=yi(i),o=mh(s,a);o.tag=2,e!=null&&(o.callback=e),e=nh(i,o,a),e!==null&&(gi(e,i,a,s),oh(e,i,a))}};function Fi(i,e,s,a,o,j,_e){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(a,j,_e):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,a)||!Ie(o,j):!0}function Gi(i,e,s){var a=!1,o=Vf,j=e.contextType;return typeof j=="object"&&j!==null?j=eh(j):(o=Zf(e)?Xf:H$1.current,a=e.contextTypes,j=(a=a!=null)?Yf(i,o):Vf),e=new e(s,j),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,i.stateNode=e,e._reactInternals=i,a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=j),e}function Hi(i,e,s,a){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==i&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(i,e,s,a){var o=i.stateNode;o.props=s,o.state=i.memoizedState,o.refs={},kh(i);var j=e.contextType;typeof j=="object"&&j!==null?o.context=eh(j):(j=Zf(e)?Xf:H$1.current,o.context=Yf(i,j)),o.state=i.memoizedState,j=e.getDerivedStateFromProps,typeof j=="function"&&(Di(i,e,j,s),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(i,s,o,a),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var o=s}catch(j){o=`
Error generating stack: `+j.message+`
`+j.stack}return{value:i,source:e,stack:o,digest:null}}function Ki(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Li(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(i,e)},s}function Qi(i,e,s){s=mh(-1,s),s.tag=3;var a=i.type.getDerivedStateFromError;if(typeof a=="function"){var o=e.value;s.payload=function(){return a(o)},s.callback=function(){Li(i,e)}}var j=i.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(s.callback=function(){Li(i,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _e=e.stack;this.componentDidCatch(e.value,{componentStack:_e!==null?_e:""})}),s}function Si(i,e,s){var a=i.pingCache;if(a===null){a=i.pingCache=new Mi;var o=new Set;a.set(e,o)}else o=a.get(e),o===void 0&&(o=new Set,a.set(e,o));o.has(s)||(o.add(s),i=Ti.bind(null,i,e,s),e.then(i,i))}function Ui(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Vi(i,e,s,a,o){return i.mode&1?(i.flags|=65536,i.lanes=o,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),i)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(i,e,s,a){e.child=i===null?Vg(e,null,s,a):Ug(e,i.child,s,a)}function Yi(i,e,s,a,o){s=s.render;var j=e.ref;return ch(e,o),a=Nh(i,e,s,a,j,o),s=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&s&&vg(e),e.flags|=1,Xi(i,e,a,o),e.child)}function $i(i,e,s,a,o){if(i===null){var j=s.type;return typeof j=="function"&&!aj(j)&&j.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=j,bj(i,e,j,a,o)):(i=Rg(s.type,null,a,e,e.mode,o),i.ref=e.ref,i.return=e,e.child=i)}if(j=i.child,!(i.lanes&o)){var _e=j.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(_e,a)&&i.ref===e.ref)return Zi(i,e,o)}return e.flags|=1,i=Pg(j,a),i.ref=e.ref,i.return=e,e.child=i}function bj(i,e,s,a,o){if(i!==null){var j=i.memoizedProps;if(Ie(j,a)&&i.ref===e.ref)if(dh=!1,e.pendingProps=a=j,(i.lanes&o)!==0)i.flags&131072&&(dh=!0);else return e.lanes=i.lanes,Zi(i,e,o)}return cj(i,e,s,a,o)}function dj(i,e,s){var a=e.pendingProps,o=a.children,j=i!==null?i.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return i=j!==null?j.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=j!==null?j.baseLanes:s,G(ej,fj),fj|=a}else j!==null?(a=j.baseLanes|s,e.memoizedState=null):a=s,G(ej,fj),fj|=a;return Xi(i,e,o,s),e.child}function gj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(i,e,s,a,o){var j=Zf(s)?Xf:H$1.current;return j=Yf(e,j),ch(e,o),s=Nh(i,e,s,a,j,o),a=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&a&&vg(e),e.flags|=1,Xi(i,e,s,o),e.child)}function hj(i,e,s,a,o){if(Zf(s)){var j=!0;cg(e)}else j=!1;if(ch(e,o),e.stateNode===null)ij(i,e),Gi(e,s,a),Ii(e,s,a,o),a=!0;else if(i===null){var _e=e.stateNode,nt=e.memoizedProps;_e.props=nt;var tt=_e.context,st=s.contextType;typeof st=="object"&&st!==null?st=eh(st):(st=Zf(s)?Xf:H$1.current,st=Yf(e,st));var rt=s.getDerivedStateFromProps,at=typeof rt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";at||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(nt!==a||tt!==st)&&Hi(e,_e,a,st),jh=!1;var it=e.memoizedState;_e.state=it,qh(e,a,_e,o),tt=e.memoizedState,nt!==a||it!==tt||Wf.current||jh?(typeof rt=="function"&&(Di(e,s,rt,a),tt=e.memoizedState),(nt=jh||Fi(e,s,nt,a,it,tt,st))?(at||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(e.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=tt),_e.props=a,_e.state=tt,_e.context=st,a=nt):(typeof _e.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{_e=e.stateNode,lh(i,e),nt=e.memoizedProps,st=e.type===e.elementType?nt:Ci(e.type,nt),_e.props=st,at=e.pendingProps,it=_e.context,tt=s.contextType,typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(s)?Xf:H$1.current,tt=Yf(e,tt));var ct=s.getDerivedStateFromProps;(rt=typeof ct=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(nt!==at||it!==tt)&&Hi(e,_e,a,tt),jh=!1,it=e.memoizedState,_e.state=it,qh(e,a,_e,o);var ot=e.memoizedState;nt!==at||it!==ot||Wf.current||jh?(typeof ct=="function"&&(Di(e,s,ct,a),ot=e.memoizedState),(st=jh||Fi(e,s,st,a,it,ot,tt)||!1)?(rt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(a,ot,tt),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(a,ot,tt)),typeof _e.componentDidUpdate=="function"&&(e.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof _e.componentDidUpdate!="function"||nt===i.memoizedProps&&it===i.memoizedState||(e.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||nt===i.memoizedProps&&it===i.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=ot),_e.props=a,_e.state=ot,_e.context=tt,a=st):(typeof _e.componentDidUpdate!="function"||nt===i.memoizedProps&&it===i.memoizedState||(e.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||nt===i.memoizedProps&&it===i.memoizedState||(e.flags|=1024),a=!1)}return jj(i,e,s,a,j,o)}function jj(i,e,s,a,o,j){gj(i,e);var _e=(e.flags&128)!==0;if(!a&&!_e)return o&&dg(e,s,!1),Zi(i,e,j);a=e.stateNode,Wi.current=e;var nt=_e&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,i!==null&&_e?(e.child=Ug(e,i.child,null,j),e.child=Ug(e,null,nt,j)):Xi(i,e,nt,j),e.memoizedState=a.state,o&&dg(e,s,!0),e.child}function kj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),yh(i,e.containerInfo)}function lj(i,e,s,a,o){return Ig(),Jg(o),e.flags|=256,Xi(i,e,s,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,e,s){var a=e.pendingProps,o=L$1.current,j=!1,_e=(e.flags&128)!==0,nt;if((nt=_e)||(nt=i!==null&&i.memoizedState===null?!1:(o&2)!==0),nt?(j=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(o|=1),G(L$1,o&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(_e=a.children,i=a.fallback,j?(a=e.mode,j=e.child,_e={mode:"hidden",children:_e},!(a&1)&&j!==null?(j.childLanes=0,j.pendingProps=_e):j=pj(_e,a,0,null),i=Tg(i,a,s,null),j.return=e,i.return=e,j.sibling=i,e.child=j,e.child.memoizedState=nj(s),e.memoizedState=mj,i):qj(e,_e));if(o=i.memoizedState,o!==null&&(nt=o.dehydrated,nt!==null))return rj(i,e,_e,a,nt,o,s);if(j){j=a.fallback,_e=e.mode,o=i.child,nt=o.sibling;var tt={mode:"hidden",children:a.children};return!(_e&1)&&e.child!==o?(a=e.child,a.childLanes=0,a.pendingProps=tt,e.deletions=null):(a=Pg(o,tt),a.subtreeFlags=o.subtreeFlags&14680064),nt!==null?j=Pg(nt,j):(j=Tg(j,_e,s,null),j.flags|=2),j.return=e,a.return=e,a.sibling=j,e.child=a,a=j,j=e.child,_e=i.child.memoizedState,_e=_e===null?nj(s):{baseLanes:_e.baseLanes|s,cachePool:null,transitions:_e.transitions},j.memoizedState=_e,j.childLanes=i.childLanes&~s,e.memoizedState=mj,a}return j=i.child,i=j.sibling,a=Pg(j,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=a,e.memoizedState=null,a}function qj(i,e){return e=pj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function sj(i,e,s,a){return a!==null&&Jg(a),Ug(e,i.child,null,s),i=qj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function rj(i,e,s,a,o,j,_e){if(s)return e.flags&256?(e.flags&=-257,a=Ki(Error(p$1(422))),sj(i,e,_e,a)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(j=a.fallback,o=e.mode,a=pj({mode:"visible",children:a.children},o,0,null),j=Tg(j,o,_e,null),j.flags|=2,a.return=e,j.return=e,a.sibling=j,e.child=a,e.mode&1&&Ug(e,i.child,null,_e),e.child.memoizedState=nj(_e),e.memoizedState=mj,j);if(!(e.mode&1))return sj(i,e,_e,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var nt=a.dgst;return a=nt,j=Error(p$1(419)),a=Ki(j,a,void 0),sj(i,e,_e,a)}if(nt=(_e&i.childLanes)!==0,dh||nt){if(a=Q$1,a!==null){switch(_e&-_e){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|_e)?0:o,o!==0&&o!==j.retryLane&&(j.retryLane=o,ih(i,o),gi(a,i,o,-1))}return tj(),a=Ki(Error(p$1(421))),sj(i,e,_e,a)}return o.data==="$?"?(e.flags|=128,e.child=i.child,e=uj.bind(null,i),o._reactRetry=e,null):(i=j.treeContext,yg=Lf(o.nextSibling),xg=e,I$1=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(i,e,s){i.lanes|=e;var a=i.alternate;a!==null&&(a.lanes|=e),bh(i.return,e,s)}function wj(i,e,s,a,o){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:o}:(j.isBackwards=e,j.rendering=null,j.renderingStartTime=0,j.last=a,j.tail=s,j.tailMode=o)}function xj(i,e,s){var a=e.pendingProps,o=a.revealOrder,j=a.tail;if(Xi(i,e,a.children,s),a=L$1.current,a&2)a=a&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,s,e);else if(i.tag===19)vj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}a&=1}if(G(L$1,a),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(s=e.child,o=null;s!==null;)i=s.alternate,i!==null&&Ch(i)===null&&(o=s),s=s.sibling;s=o,s===null?(o=e.child,e.child=null):(o=s.sibling,s.sibling=null),wj(e,!1,o,s,j);break;case"backwards":for(s=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&Ch(i)===null){e.child=o;break}i=o.sibling,o.sibling=s,s=o,o=i}wj(e,!0,s,null,j);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Zi(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p$1(153));if(e.child!==null){for(i=e.child,s=Pg(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=Pg(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(i,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,o=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L$1,L$1.current&1),e.flags|=128,null):s&e.child.childLanes?oj(i,e,s):(G(L$1,L$1.current&1),i=Zi(i,e,s),i!==null?i.sibling:null);G(L$1,L$1.current&1);break;case 19:if(a=(s&e.childLanes)!==0,i.flags&128){if(a)return xj(i,e,s);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L$1,L$1.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(i,e,s)}return Zi(i,e,s)}var zj,Aj,Bj,Cj;zj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(i,e,s,a){var o=i.memoizedProps;if(o!==a){i=e.stateNode,xh(uh.current);var j=null;switch(s){case"input":o=Ya(i,o),a=Ya(i,a),j=[];break;case"select":o=A$1({},o,{value:void 0}),a=A$1({},a,{value:void 0}),j=[];break;case"textarea":o=gb(i,o),a=gb(i,a),j=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(i.onclick=Bf)}ub(s,a);var _e;s=null;for(st in o)if(!a.hasOwnProperty(st)&&o.hasOwnProperty(st)&&o[st]!=null)if(st==="style"){var nt=o[st];for(_e in nt)nt.hasOwnProperty(_e)&&(s||(s={}),s[_e]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?j||(j=[]):(j=j||[]).push(st,null));for(st in a){var tt=a[st];if(nt=o!=null?o[st]:void 0,a.hasOwnProperty(st)&&tt!==nt&&(tt!=null||nt!=null))if(st==="style")if(nt){for(_e in nt)!nt.hasOwnProperty(_e)||tt&&tt.hasOwnProperty(_e)||(s||(s={}),s[_e]="");for(_e in tt)tt.hasOwnProperty(_e)&&nt[_e]!==tt[_e]&&(s||(s={}),s[_e]=tt[_e])}else s||(j||(j=[]),j.push(st,s)),s=tt;else st==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,nt=nt?nt.__html:void 0,tt!=null&&nt!==tt&&(j=j||[]).push(st,tt)):st==="children"?typeof tt!="string"&&typeof tt!="number"||(j=j||[]).push(st,""+tt):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(tt!=null&&st==="onScroll"&&D$1("scroll",i),j||nt===tt||(j=[])):(j=j||[]).push(st,tt))}s&&(j=j||[]).push("style",s);var st=j;(e.updateQueue=st)&&(e.flags|=4)}};Cj=function(i,e,s,a){s!==a&&(e.flags|=4)};function Dj(i,e){if(!I$1)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:a.sibling=null}}function S$1(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,a=0;if(e)for(var o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=i,o=o.sibling;else for(o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=i,o=o.sibling;return i.subtreeFlags|=a,i.childLanes=s,e}function Ej(i,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return a=e.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,e),S$1(e),null;case 5:Bh(e);var o=xh(wh.current);if(s=e.type,i!==null&&e.stateNode!=null)Bj(i,e,s,a,o),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p$1(166));return S$1(e),null}if(i=xh(uh.current),Gg(e)){a=e.stateNode,s=e.type;var j=e.memoizedProps;switch(a[Of]=e,a[Pf]=j,i=(e.mode&1)!==0,s){case"dialog":D$1("cancel",a),D$1("close",a);break;case"iframe":case"object":case"embed":D$1("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D$1(lf[o],a);break;case"source":D$1("error",a);break;case"img":case"image":case"link":D$1("error",a),D$1("load",a);break;case"details":D$1("toggle",a);break;case"input":Za(a,j),D$1("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!j.multiple},D$1("invalid",a);break;case"textarea":hb(a,j),D$1("invalid",a)}ub(s,j),o=null;for(var _e in j)if(j.hasOwnProperty(_e)){var nt=j[_e];_e==="children"?typeof nt=="string"?a.textContent!==nt&&(j.suppressHydrationWarning!==!0&&Af(a.textContent,nt,i),o=["children",nt]):typeof nt=="number"&&a.textContent!==""+nt&&(j.suppressHydrationWarning!==!0&&Af(a.textContent,nt,i),o=["children",""+nt]):ea.hasOwnProperty(_e)&&nt!=null&&_e==="onScroll"&&D$1("scroll",a)}switch(s){case"input":Va(a),db(a,j,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(a.onclick=Bf)}a=o,e.updateQueue=a,a!==null&&(e.flags|=4)}else{_e=o.nodeType===9?o:o.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=_e.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof a.is=="string"?i=_e.createElement(s,{is:a.is}):(i=_e.createElement(s),s==="select"&&(_e=i,a.multiple?_e.multiple=!0:a.size&&(_e.size=a.size))):i=_e.createElementNS(i,s),i[Of]=e,i[Pf]=a,zj(i,e,!1,!1),e.stateNode=i;e:{switch(_e=vb(s,a),s){case"dialog":D$1("cancel",i),D$1("close",i),o=a;break;case"iframe":case"object":case"embed":D$1("load",i),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D$1(lf[o],i);o=a;break;case"source":D$1("error",i),o=a;break;case"img":case"image":case"link":D$1("error",i),D$1("load",i),o=a;break;case"details":D$1("toggle",i),o=a;break;case"input":Za(i,a),o=Ya(i,a),D$1("invalid",i);break;case"option":o=a;break;case"select":i._wrapperState={wasMultiple:!!a.multiple},o=A$1({},a,{value:void 0}),D$1("invalid",i);break;case"textarea":hb(i,a),o=gb(i,a),D$1("invalid",i);break;default:o=a}ub(s,o),nt=o;for(j in nt)if(nt.hasOwnProperty(j)){var tt=nt[j];j==="style"?sb(i,tt):j==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,tt!=null&&nb(i,tt)):j==="children"?typeof tt=="string"?(s!=="textarea"||tt!=="")&&ob(i,tt):typeof tt=="number"&&ob(i,""+tt):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?tt!=null&&j==="onScroll"&&D$1("scroll",i):tt!=null&&ta(i,j,tt,_e))}switch(s){case"input":Va(i),db(i,a,!1);break;case"textarea":Va(i),jb(i);break;case"option":a.value!=null&&i.setAttribute("value",""+Sa(a.value));break;case"select":i.multiple=!!a.multiple,j=a.value,j!=null?fb(i,!!a.multiple,j,!1):a.defaultValue!=null&&fb(i,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(i&&e.stateNode!=null)Cj(i,e,i.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p$1(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(j=a.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(a.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(i.mode&1)!==0)}j&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S$1(e),null;case 13:if(E$1(L$1),a=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,j=!1;else if(j=Gg(e),a!==null&&a.dehydrated!==null){if(i===null){if(!j)throw Error(p$1(318));if(j=e.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(p$1(317));j[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),j=!1}else zg!==null&&(Fj(zg),zg=null),j=!0;if(!j)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(i!==null&&i.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(i===null||L$1.current&1?T$1===0&&(T$1=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(i,e),i===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E$1(L$1),j=e.memoizedState,j===null)return S$1(e),null;if(a=(e.flags&128)!==0,_e=j.rendering,_e===null)if(a)Dj(j,!1);else{if(T$1!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(_e=Ch(i),_e!==null){for(e.flags|=128,Dj(j,!1),a=_e.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)j=s,i=a,j.flags&=14680066,_e=j.alternate,_e===null?(j.childLanes=0,j.lanes=i,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=_e.childLanes,j.lanes=_e.lanes,j.child=_e.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=_e.memoizedProps,j.memoizedState=_e.memoizedState,j.updateQueue=_e.updateQueue,j.type=_e.type,i=_e.dependencies,j.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(L$1,L$1.current&1|2),e.child}i=i.sibling}j.tail!==null&&B$1()>Gj&&(e.flags|=128,a=!0,Dj(j,!1),e.lanes=4194304)}else{if(!a)if(i=Ch(_e),i!==null){if(e.flags|=128,a=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(j,!0),j.tail===null&&j.tailMode==="hidden"&&!_e.alternate&&!I$1)return S$1(e),null}else 2*B$1()-j.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,a=!0,Dj(j,!1),e.lanes=4194304);j.isBackwards?(_e.sibling=e.child,e.child=_e):(s=j.last,s!==null?s.sibling=_e:e.child=_e,j.last=_e)}return j.tail!==null?(e=j.tail,j.rendering=e,j.tail=e.sibling,j.renderingStartTime=B$1(),e.sibling=null,s=L$1.current,G(L$1,a?s&1|2:s&1),e):(S$1(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$1(L$1),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(i,e,a)}else s.current=null}function Mj(i,e,s){try{s()}catch(a){W(i,e,a)}}var Nj=!1;function Oj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var o=a.anchorOffset,j=a.focusNode;a=a.focusOffset;try{s.nodeType,j.nodeType}catch{s=null;break e}var _e=0,nt=-1,tt=-1,st=0,rt=0,at=i,it=null;t:for(;;){for(var ct;at!==s||o!==0&&at.nodeType!==3||(nt=_e+o),at!==j||a!==0&&at.nodeType!==3||(tt=_e+a),at.nodeType===3&&(_e+=at.nodeValue.length),(ct=at.firstChild)!==null;)it=at,at=ct;for(;;){if(at===i)break t;if(it===s&&++st===o&&(nt=_e),it===j&&++rt===a&&(tt=_e),(ct=at.nextSibling)!==null)break;at=it,it=at.parentNode}at=ct}s=nt===-1||tt===-1?null:{start:nt,end:tt}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var ot=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var ut=ot.memoizedProps,dt=ot.memoizedState,lt=e.stateNode,ht=lt.getSnapshotBeforeUpdate(e.elementType===e.type?ut:Ci(e.type,ut),dt);lt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var xt=e.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(mt){W(e,e.return,mt)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return ot=Nj,Nj=!1,ot}function Pj(i,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&i)===i){var j=o.destroy;o.destroy=void 0,j!==void 0&&Mj(e,s,j)}o=o.next}while(o!==a)}}function Qj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Rj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Sj(i){var e=i.alternate;e!==null&&(i.alternate=null,Sj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(i=i.child,i!==null))for(Vj(i,e,s),i=i.sibling;i!==null;)Vj(i,e,s),i=i.sibling}function Wj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(a!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}var X=null,Xj=!1;function Yj(i,e,s){for(s=s.child;s!==null;)Zj(i,e,s),s=s.sibling}function Zj(i,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var a=X,o=Xj;X=null,Yj(i,e,s),X=a,Xj=o,X!==null&&(Xj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:a=X,o=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(i,e,s),X=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var j=o,_e=j.destroy;j=j.tag,_e!==void 0&&(j&2||j&4)&&Mj(s,e,_e),o=o.next}while(o!==a)}Yj(i,e,s);break;case 1:if(!U&&(Lj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(nt){W(s,e,nt)}Yj(i,e,s);break;case 21:Yj(i,e,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Yj(i,e,s),U=a):Yj(i,e,s);break;default:Yj(i,e,s)}}function ak(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Kj),e.forEach(function(a){var o=bk.bind(null,i,a);s.has(a)||(s.add(a),a.then(o,o))})}}function ck(i,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];try{var j=i,_e=e,nt=_e;e:for(;nt!==null;){switch(nt.tag){case 5:X=nt.stateNode,Xj=!1;break e;case 3:X=nt.stateNode.containerInfo,Xj=!0;break e;case 4:X=nt.stateNode.containerInfo,Xj=!0;break e}nt=nt.return}if(X===null)throw Error(p$1(160));Zj(j,_e,o),X=null,Xj=!1;var tt=o.alternate;tt!==null&&(tt.return=null),o.return=null}catch(st){W(o,e,st)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,i),e=e.sibling}function dk(i,e){var s=i.alternate,a=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(e,i),ek(i),a&4){try{Pj(3,i,i.return),Qj(3,i)}catch(ut){W(i,i.return,ut)}try{Pj(5,i,i.return)}catch(ut){W(i,i.return,ut)}}break;case 1:ck(e,i),ek(i),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,i),ek(i),a&512&&s!==null&&Lj(s,s.return),i.flags&32){var o=i.stateNode;try{ob(o,"")}catch(ut){W(i,i.return,ut)}}if(a&4&&(o=i.stateNode,o!=null)){var j=i.memoizedProps,_e=s!==null?s.memoizedProps:j,nt=i.type,tt=i.updateQueue;if(i.updateQueue=null,tt!==null)try{nt==="input"&&j.type==="radio"&&j.name!=null&&ab(o,j),vb(nt,_e);var st=vb(nt,j);for(_e=0;_e<tt.length;_e+=2){var rt=tt[_e],at=tt[_e+1];rt==="style"?sb(o,at):rt==="dangerouslySetInnerHTML"?nb(o,at):rt==="children"?ob(o,at):ta(o,rt,at,st)}switch(nt){case"input":bb(o,j);break;case"textarea":ib(o,j);break;case"select":var it=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!j.multiple;var ct=j.value;ct!=null?fb(o,!!j.multiple,ct,!1):it!==!!j.multiple&&(j.defaultValue!=null?fb(o,!!j.multiple,j.defaultValue,!0):fb(o,!!j.multiple,j.multiple?[]:"",!1))}o[Pf]=j}catch(ut){W(i,i.return,ut)}}break;case 6:if(ck(e,i),ek(i),a&4){if(i.stateNode===null)throw Error(p$1(162));o=i.stateNode,j=i.memoizedProps;try{o.nodeValue=j}catch(ut){W(i,i.return,ut)}}break;case 3:if(ck(e,i),ek(i),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ut){W(i,i.return,ut)}break;case 4:ck(e,i),ek(i);break;case 13:ck(e,i),ek(i),o=i.child,o.flags&8192&&(j=o.memoizedState!==null,o.stateNode.isHidden=j,!j||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B$1())),a&4&&ak(i);break;case 22:if(rt=s!==null&&s.memoizedState!==null,i.mode&1?(U=(st=U)||rt,ck(e,i),U=st):ck(e,i),ek(i),a&8192){if(st=i.memoizedState!==null,(i.stateNode.isHidden=st)&&!rt&&i.mode&1)for(V=i,rt=i.child;rt!==null;){for(at=V=rt;V!==null;){switch(it=V,ct=it.child,it.tag){case 0:case 11:case 14:case 15:Pj(4,it,it.return);break;case 1:Lj(it,it.return);var ot=it.stateNode;if(typeof ot.componentWillUnmount=="function"){a=it,s=it.return;try{e=a,ot.props=e.memoizedProps,ot.state=e.memoizedState,ot.componentWillUnmount()}catch(ut){W(a,s,ut)}}break;case 5:Lj(it,it.return);break;case 22:if(it.memoizedState!==null){gk(at);continue}}ct!==null?(ct.return=it,V=ct):gk(at)}rt=rt.sibling}e:for(rt=null,at=i;;){if(at.tag===5){if(rt===null){rt=at;try{o=at.stateNode,st?(j=o.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(nt=at.stateNode,tt=at.memoizedProps.style,_e=tt!=null&&tt.hasOwnProperty("display")?tt.display:null,nt.style.display=rb("display",_e))}catch(ut){W(i,i.return,ut)}}}else if(at.tag===6){if(rt===null)try{at.stateNode.nodeValue=st?"":at.memoizedProps}catch(ut){W(i,i.return,ut)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===i)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===i)break e;for(;at.sibling===null;){if(at.return===null||at.return===i)break e;rt===at&&(rt=null),at=at.return}rt===at&&(rt=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:ck(e,i),ek(i),a&4&&ak(i);break;case 21:break;default:ck(e,i),ek(i)}}function ek(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p$1(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var j=Uj(i);Wj(i,j,o);break;case 3:case 4:var _e=a.stateNode.containerInfo,nt=Uj(i);Vj(i,nt,_e);break;default:throw Error(p$1(161))}}catch(tt){W(i,i.return,tt)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function hk(i,e,s){V=i,ik(i)}function ik(i,e,s){for(var a=(i.mode&1)!==0;V!==null;){var o=V,j=o.child;if(o.tag===22&&a){var _e=o.memoizedState!==null||Jj;if(!_e){var nt=o.alternate,tt=nt!==null&&nt.memoizedState!==null||U;nt=Jj;var st=U;if(Jj=_e,(U=tt)&&!st)for(V=o;V!==null;)_e=V,tt=_e.child,_e.tag===22&&_e.memoizedState!==null?jk(o):tt!==null?(tt.return=_e,V=tt):jk(o);for(;j!==null;)V=j,ik(j),j=j.sibling;V=o,Jj=nt,U=st}kk(i)}else o.subtreeFlags&8772&&j!==null?(j.return=o,V=j):kk(i)}}function kk(i){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(s===null)a.componentDidMount();else{var o=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);a.componentDidUpdate(o,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var j=e.updateQueue;j!==null&&sh(e,j,a);break;case 3:var _e=e.updateQueue;if(_e!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,_e,s)}break;case 5:var nt=e.stateNode;if(s===null&&e.flags&4){s=nt;var tt=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":tt.autoFocus&&s.focus();break;case"img":tt.src&&(s.src=tt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var st=e.alternate;if(st!==null){var rt=st.memoizedState;if(rt!==null){var at=rt.dehydrated;at!==null&&bd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||e.flags&512&&Rj(e)}catch(it){W(e,e.return,it)}}if(e===i){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function gk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function jk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(tt){W(e,s,tt)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var o=e.return;try{a.componentDidMount()}catch(tt){W(e,o,tt)}}var j=e.return;try{Rj(e)}catch(tt){W(e,j,tt)}break;case 5:var _e=e.return;try{Rj(e)}catch(tt){W(e,_e,tt)}}}catch(tt){W(e,e.return,tt)}if(e===i){V=null;break}var nt=e.sibling;if(nt!==null){nt.return=e.return,V=nt;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q$1=null,Y=null,Z=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C$1,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,e,s,a){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(i,s,a),(!(K&2)||i!==Q$1)&&(i===Q$1&&(!(K&2)&&(qk|=s),T$1===4&&Ck(i,Z)),Dk(i,a),s===1&&K===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(i,e){var s=i.callbackNode;wc(i,e);var a=uc(i,i===Q$1?Z:0);if(a===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(e=a&-a,i.callbackPriority!==e){if(s!=null&&bc(s),e===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Gk(i,e){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var s=i.callbackNode;if(Hk()&&i.callbackNode!==s)return null;var a=uc(i,i===Q$1?Z:0);if(a===0)return null;if(a&30||a&i.expiredLanes||e)e=Ik(i,a);else{e=a;var o=K;K|=2;var j=Jk();(Q$1!==i||Z!==e)&&(uk=null,Gj=B$1()+500,Kk(i,e));do try{Lk();break}catch(nt){Mk(i,nt)}while(!0);$g(),mk.current=j,K=o,Y!==null?e=0:(Q$1=null,Z=0,e=T$1)}if(e!==0){if(e===2&&(o=xc(i),o!==0&&(a=o,e=Nk(i,o))),e===1)throw s=pk,Kk(i,0),Ck(i,a),Dk(i,B$1()),s;if(e===6)Ck(i,a);else{if(o=i.current.alternate,!(a&30)&&!Ok(o)&&(e=Ik(i,a),e===2&&(j=xc(i),j!==0&&(a=j,e=Nk(i,j))),e===1))throw s=pk,Kk(i,0),Ck(i,a),Dk(i,B$1()),s;switch(i.finishedWork=o,i.finishedLanes=a,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,a),(a&130023424)===a&&(e=fk+500-B$1(),10<e)){if(uc(i,0)!==0)break;if(o=i.suspendedLanes,(o&a)!==a){R$1(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),e);break}Pk(i,tk,uk);break;case 4:if(Ck(i,a),(a&4194240)===a)break;for(e=i.eventTimes,o=-1;0<a;){var _e=31-oc(a);j=1<<_e,_e=e[_e],_e>o&&(o=_e),a&=~j}if(a=o,a=B$1()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),a);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(i,B$1()),i.callbackNode===s?Gk.bind(null,i):null}function Nk(i,e){var s=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,e).flags|=256),i=Ik(i,e),i!==2&&(e=tk,tk=s,e!==null&&Fj(e)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var o=s[a],j=o.getSnapshot;o=o.value;try{if(!He(j(),o))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(i,e){for(e&=~rk,e&=~qk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;i[s]=-1,e&=~a}}function Ek(i){if(K&6)throw Error(p$1(327));Hk();var e=uc(i,0);if(!(e&1))return Dk(i,B$1()),null;var s=Ik(i,e);if(i.tag!==0&&s===2){var a=xc(i);a!==0&&(e=a,s=Nk(i,a))}if(s===1)throw s=pk,Kk(i,0),Ck(i,e),Dk(i,B$1()),s;if(s===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Pk(i,tk,uk),Dk(i,B$1()),null}function Qk(i,e){var s=K;K|=1;try{return i(e)}finally{K=s,K===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok.transition,a=C$1;try{if(ok.transition=null,C$1=1,i)return i()}finally{C$1=a,ok.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q$1=i,Y=i=Pg(i.current,null),Z=fj=e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],a=s.interleaved,a!==null){s.interleaved=null;var o=a.next,j=s.pending;if(j!==null){var _e=j.next;j.next=o,a.next=_e}s.pending=a}fh=null}return i}function Mk(i,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T$1=1,pk=e,Y=null;break}e:{var j=i,_e=s.return,nt=s,tt=e;if(e=Z,nt.flags|=32768,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var st=tt,rt=nt,at=rt.tag;if(!(rt.mode&1)&&(at===0||at===11||at===15)){var it=rt.alternate;it?(rt.updateQueue=it.updateQueue,rt.memoizedState=it.memoizedState,rt.lanes=it.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var ct=Ui(_e);if(ct!==null){ct.flags&=-257,Vi(ct,_e,nt,j,e),ct.mode&1&&Si(j,st,e),e=ct,tt=st;var ot=e.updateQueue;if(ot===null){var ut=new Set;ut.add(tt),e.updateQueue=ut}else ot.add(tt);break e}else{if(!(e&1)){Si(j,st,e),tj();break e}tt=Error(p$1(426))}}else if(I$1&&nt.mode&1){var dt=Ui(_e);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),Vi(dt,_e,nt,j,e),Jg(Ji(tt,nt));break e}}j=tt=Ji(tt,nt),T$1!==4&&(T$1=2),sk===null?sk=[j]:sk.push(j),j=_e;do{switch(j.tag){case 3:j.flags|=65536,e&=-e,j.lanes|=e;var lt=Ni(j,tt,e);ph(j,lt);break e;case 1:nt=tt;var ht=j.type,xt=j.stateNode;if(!(j.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Ri===null||!Ri.has(xt)))){j.flags|=65536,e&=-e,j.lanes|=e;var mt=Qi(j,nt,e);ph(j,mt);break e}}j=j.return}while(j!==null)}Sk(s)}catch(ft){e=ft,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z)}function Ik(i,e){var s=K;K|=2;var a=Jk();(Q$1!==i||Z!==e)&&(uk=null,Kk(i,e));do try{Tk();break}catch(o){Mk(i,o)}while(!0);if($g(),K=s,mk.current=a,Y!==null)throw Error(p$1(261));return Q$1=null,Z=0,T$1}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(i){var e=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,e===null?Sk(i):Y=e,nk.current=null}function Sk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T$1=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T$1===0&&(T$1=5)}function Pk(i,e,s){var a=C$1,o=ok.transition;try{ok.transition=null,C$1=1,Wk(i,e,s,a)}finally{ok.transition=o,C$1=a}return null}function Wk(i,e,s,a){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));s=i.finishedWork;var o=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var j=s.lanes|s.childLanes;if(Bc(i,j),i===Q$1&&(Y=Q$1=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),j=(s.flags&15990)!==0,s.subtreeFlags&15990||j){j=ok.transition,ok.transition=null;var _e=C$1;C$1=1;var nt=K;K|=4,nk.current=null,Oj(i,s),dk(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,hk(s),dc(),K=nt,C$1=_e,ok.transition=j}else i.current=s;if(vk&&(vk=!1,wk=i,xk=o),j=i.pendingLanes,j===0&&(Ri=null),mc(s.stateNode),Dk(i,B$1()),e!==null)for(a=i.onRecoverableError,s=0;s<e.length;s++)o=e[s],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),j=i.pendingLanes,j&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),e=ok.transition,s=C$1;try{if(ok.transition=null,C$1=16>i?16:i,wk===null)var a=!1;else{if(i=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var o=K;for(K|=4,V=i.current;V!==null;){var j=V,_e=j.child;if(V.flags&16){var nt=j.deletions;if(nt!==null){for(var tt=0;tt<nt.length;tt++){var st=nt[tt];for(V=st;V!==null;){var rt=V;switch(rt.tag){case 0:case 11:case 15:Pj(8,rt,j)}var at=rt.child;if(at!==null)at.return=rt,V=at;else for(;V!==null;){rt=V;var it=rt.sibling,ct=rt.return;if(Sj(rt),rt===st){V=null;break}if(it!==null){it.return=ct,V=it;break}V=ct}}}var ot=j.alternate;if(ot!==null){var ut=ot.child;if(ut!==null){ot.child=null;do{var dt=ut.sibling;ut.sibling=null,ut=dt}while(ut!==null)}}V=j}}if(j.subtreeFlags&2064&&_e!==null)_e.return=j,V=_e;else e:for(;V!==null;){if(j=V,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Pj(9,j,j.return)}var lt=j.sibling;if(lt!==null){lt.return=j.return,V=lt;break e}V=j.return}}var ht=i.current;for(V=ht;V!==null;){_e=V;var xt=_e.child;if(_e.subtreeFlags&2064&&xt!==null)xt.return=_e,V=xt;else e:for(_e=ht;V!==null;){if(nt=V,nt.flags&2048)try{switch(nt.tag){case 0:case 11:case 15:Qj(9,nt)}}catch(ft){W(nt,nt.return,ft)}if(nt===_e){V=null;break e}var mt=nt.sibling;if(mt!==null){mt.return=nt.return,V=mt;break e}V=nt.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}a=!0}return a}finally{C$1=s,ok.transition=e}}return!1}function Xk(i,e,s){e=Ji(s,e),e=Ni(i,e,1),i=nh(i,e,1),e=R$1(),i!==null&&(Ac(i,1,e),Dk(i,e))}function W(i,e,s){if(i.tag===3)Xk(i,i,s);else for(;e!==null;){if(e.tag===3){Xk(e,i,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){i=Ji(s,i),i=Qi(e,i,1),e=nh(e,i,1),i=R$1(),e!==null&&(Ac(e,1,i),Dk(e,i));break}}e=e.return}}function Ti(i,e,s){var a=i.pingCache;a!==null&&a.delete(e),e=R$1(),i.pingedLanes|=i.suspendedLanes&s,Q$1===i&&(Z&s)===s&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B$1()-fk?Kk(i,0):rk|=s),Dk(i,e)}function Yk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R$1();i=ih(i,e),i!==null&&(Ac(i,e,s),Dk(i,s))}function uj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(i,s)}function bk(i,e){var s=0;switch(i.tag){case 13:var a=i.stateNode,o=i.memoizedState;o!==null&&(s=o.retryLane);break;case 19:a=i.stateNode;break;default:throw Error(p$1(314))}a!==null&&a.delete(e),Yk(i,s)}var Vk;Vk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return dh=!1,yj(i,e,s);dh=!!(i.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(i,e),i=e.pendingProps;var o=Yf(e,H$1.current);ch(e,s),o=Nh(null,e,a,i,o,s);var j=Sh();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(j=!0,cg(e)):j=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(e),o.updater=Ei,e.stateNode=o,o._reactInternals=e,Ii(e,a,i,s),e=jj(null,e,a,!0,j,s)):(e.tag=0,I$1&&j&&vg(e),Xi(null,e,o,s),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(i,e),i=e.pendingProps,o=a._init,a=o(a._payload),e.type=a,o=e.tag=Zk(a),i=Ci(a,i),o){case 0:e=cj(null,e,a,i,s);break e;case 1:e=hj(null,e,a,i,s);break e;case 11:e=Yi(null,e,a,i,s);break e;case 14:e=$i(null,e,a,Ci(a.type,i),s);break e}throw Error(p$1(306,a,""))}return e;case 0:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),cj(i,e,a,o,s);case 1:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),hj(i,e,a,o,s);case 3:e:{if(kj(e),i===null)throw Error(p$1(387));a=e.pendingProps,j=e.memoizedState,o=j.element,lh(i,e),qh(e,a,null,s);var _e=e.memoizedState;if(a=_e.element,j.isDehydrated)if(j={element:a,isDehydrated:!1,cache:_e.cache,pendingSuspenseBoundaries:_e.pendingSuspenseBoundaries,transitions:_e.transitions},e.updateQueue.baseState=j,e.memoizedState=j,e.flags&256){o=Ji(Error(p$1(423)),e),e=lj(i,e,a,s,o);break e}else if(a!==o){o=Ji(Error(p$1(424)),e),e=lj(i,e,a,s,o);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,s=Vg(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===o){e=Zi(i,e,s);break e}Xi(i,e,a,s)}e=e.child}return e;case 5:return Ah(e),i===null&&Eg(e),a=e.type,o=e.pendingProps,j=i!==null?i.memoizedProps:null,_e=o.children,Ef(a,o)?_e=null:j!==null&&Ef(a,j)&&(e.flags|=32),gj(i,e),Xi(i,e,_e,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return oj(i,e,s);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,i===null?e.child=Ug(e,null,a,s):Xi(i,e,a,s),e.child;case 11:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),Yi(i,e,a,o,s);case 7:return Xi(i,e,e.pendingProps,s),e.child;case 8:return Xi(i,e,e.pendingProps.children,s),e.child;case 12:return Xi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,o=e.pendingProps,j=e.memoizedProps,_e=o.value,G(Wg,a._currentValue),a._currentValue=_e,j!==null)if(He(j.value,_e)){if(j.children===o.children&&!Wf.current){e=Zi(i,e,s);break e}}else for(j=e.child,j!==null&&(j.return=e);j!==null;){var nt=j.dependencies;if(nt!==null){_e=j.child;for(var tt=nt.firstContext;tt!==null;){if(tt.context===a){if(j.tag===1){tt=mh(-1,s&-s),tt.tag=2;var st=j.updateQueue;if(st!==null){st=st.shared;var rt=st.pending;rt===null?tt.next=tt:(tt.next=rt.next,rt.next=tt),st.pending=tt}}j.lanes|=s,tt=j.alternate,tt!==null&&(tt.lanes|=s),bh(j.return,s,e),nt.lanes|=s;break}tt=tt.next}}else if(j.tag===10)_e=j.type===e.type?null:j.child;else if(j.tag===18){if(_e=j.return,_e===null)throw Error(p$1(341));_e.lanes|=s,nt=_e.alternate,nt!==null&&(nt.lanes|=s),bh(_e,s,e),_e=j.sibling}else _e=j.child;if(_e!==null)_e.return=j;else for(_e=j;_e!==null;){if(_e===e){_e=null;break}if(j=_e.sibling,j!==null){j.return=_e.return,_e=j;break}_e=_e.return}j=_e}Xi(i,e,o.children,s),e=e.child}return e;case 9:return o=e.type,a=e.pendingProps.children,ch(e,s),o=eh(o),a=a(o),e.flags|=1,Xi(i,e,a,s),e.child;case 14:return a=e.type,o=Ci(a,e.pendingProps),o=Ci(a.type,o),$i(i,e,a,o,s);case 15:return bj(i,e,e.type,e.pendingProps,s);case 17:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Ci(a,o),ij(i,e),e.tag=1,Zf(a)?(i=!0,cg(e)):i=!1,ch(e,s),Gi(e,a,o),Ii(e,a,o,s),jj(null,e,a,!0,i,s);case 19:return xj(i,e,s);case 22:return dj(i,e,s)}throw Error(p$1(156,e.tag))};function Fk(i,e){return ac(i,e)}function $k(i,e,s,a){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,a){return new $k(i,e,s,a)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function Rg(i,e,s,a,o,j){var _e=2;if(a=i,typeof i=="function")aj(i)&&(_e=1);else if(typeof i=="string")_e=5;else e:switch(i){case ya:return Tg(s.children,o,j,e);case za:_e=8,o|=8;break;case Aa:return i=Bg(12,s,e,o|2),i.elementType=Aa,i.lanes=j,i;case Ea:return i=Bg(13,s,e,o),i.elementType=Ea,i.lanes=j,i;case Fa:return i=Bg(19,s,e,o),i.elementType=Fa,i.lanes=j,i;case Ia:return pj(s,o,j,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:_e=10;break e;case Ca:_e=9;break e;case Da:_e=11;break e;case Ga:_e=14;break e;case Ha:_e=16,a=null;break e}throw Error(p$1(130,i==null?i:typeof i,""))}return e=Bg(_e,s,e,o),e.elementType=i,e.type=a,e.lanes=j,e}function Tg(i,e,s,a){return i=Bg(7,i,a,e),i.lanes=s,i}function pj(i,e,s,a){return i=Bg(22,i,a,e),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function Qg(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function Sg(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function al(i,e,s,a,o){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(i,e,s,a,o,j,_e,nt,tt){return i=new al(i,e,s,nt,tt),e===1?(e=1,j===!0&&(e|=8)):e=0,j=Bg(3,null,null,e),i.current=j,j.stateNode=i,j.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(j),i}function cl(i,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:i,containerInfo:e,implementation:s}}function dl(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p$1(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function el(i,e,s,a,o,j,_e,nt,tt){return i=bl(s,a,!0,i,o,j,_e,nt,tt),i.context=dl(null),s=i.current,a=R$1(),o=yi(s),j=mh(a,o),j.callback=e??null,nh(s,j,o),i.current.lanes=o,Ac(i,o,a),Dk(i,a),i}function fl(i,e,s,a){var o=e.current,j=R$1(),_e=yi(o);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(j,_e),e.payload={element:i},a=a===void 0?null:a,a!==null&&(e.callback=a),i=nh(o,e,_e),i!==null&&(gi(i,o,_e,j),oh(i,o,_e)),_e}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function il(i,e){hl(i,e),(i=i.alternate)&&hl(i,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl(i,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Rk(function(){fl(null,i,null,null)}),e[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,e,s,a,o){if(o){if(typeof a=="function"){var j=a;a=function(){var st=gl(_e);j.call(st)}}var _e=el(e,a,i,0,null,!1,!1,"",pl);return i._reactRootContainer=_e,i[uf]=_e.current,sf(i.nodeType===8?i.parentNode:i),Rk(),_e}for(;o=i.lastChild;)i.removeChild(o);if(typeof a=="function"){var nt=a;a=function(){var st=gl(tt);nt.call(st)}}var tt=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=tt,i[uf]=tt.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(e,tt,s,a)}),tt}function rl(i,e,s,a,o){var j=s._reactRootContainer;if(j){var _e=j;if(typeof o=="function"){var nt=o;o=function(){var tt=gl(_e);nt.call(tt)}}fl(e,_e,i,o)}else _e=ql(s,e,i,o,a);return gl(_e)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B$1()),!(K&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var a=ih(i,1);if(a!==null){var o=R$1();gi(a,i,1,o)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var e=ih(i,134217728);if(e!==null){var s=R$1();gi(e,i,134217728,s)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var e=yi(i),s=ih(i,e);if(s!==null){var a=R$1();gi(s,i,e,a)}il(i,e)}};Hc=function(){return C$1};Ic=function(i,e){var s=C$1;try{return C$1=i,e()}finally{C$1=s}};yb=function(i,e,s){switch(e){case"input":if(bb(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==i&&a.form===i.form){var o=Db(a);if(!o)throw Error(p$1(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(i,s);break;case"select":e=s.value,e!=null&&fb(i,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!nl(i))throw Error(p$1(299));var s=!1,a="",o=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=bl(i,1,!1,null,null,s,!1,a,o),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ll(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!ol(e))throw Error(p$1(200));return rl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!nl(i))throw Error(p$1(405));var a=s!=null&&s.hydratedSources||null,o=!1,j="",_e=kl;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(j=s.identifierPrefix),s.onRecoverableError!==void 0&&(_e=s.onRecoverableError)),e=el(e,null,i,1,s??null,o,!1,j,_e),i[uf]=e.current,sf(i),a)for(i=0;i<a.length;i++)s=a[i],o=s._getVersion,o=o(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,o]:e.mutableSourceEagerHydrationData.push(s,o);return new ml(e)};reactDom_production_min.render=function(i,e,s){if(!ol(e))throw Error(p$1(200));return rl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p$1(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,a){if(!ol(s))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return rl(i,e,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends$4.apply(this,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(i){i===void 0&&(i={});function e(a,o){let{pathname:j,search:_e,hash:nt}=a.location;return createLocation("",{pathname:j,search:_e,hash:nt},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(e,s,null,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$2(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,s,a){return s===void 0&&(s=null),_extends$4({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:s,key:e&&e.key||a||createKey()})}function createPath(i){let{pathname:e="/",search:s="",hash:a=""}=i;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function parsePath(i){let e={};if(i){let s=i.indexOf("#");s>=0&&(e.hash=i.substr(s),i=i.substr(0,s));let a=i.indexOf("?");a>=0&&(e.search=i.substr(a),i=i.substr(0,a)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:j=!1}=a,_e=o.history,nt=Action.Pop,tt=null,st=rt();st==null&&(st=0,_e.replaceState(_extends$4({},_e.state,{idx:st}),""));function rt(){return(_e.state||{idx:null}).idx}function at(){nt=Action.Pop;let dt=rt(),lt=dt==null?null:dt-st;st=dt,tt&&tt({action:nt,location:ut.location,delta:lt})}function it(dt,lt){nt=Action.Push;let ht=createLocation(ut.location,dt,lt);st=rt()+1;let xt=getHistoryState(ht,st),mt=ut.createHref(ht);try{_e.pushState(xt,"",mt)}catch(ft){if(ft instanceof DOMException&&ft.name==="DataCloneError")throw ft;o.location.assign(mt)}j&&tt&&tt({action:nt,location:ut.location,delta:1})}function ct(dt,lt){nt=Action.Replace;let ht=createLocation(ut.location,dt,lt);st=rt();let xt=getHistoryState(ht,st),mt=ut.createHref(ht);_e.replaceState(xt,"",mt),j&&tt&&tt({action:nt,location:ut.location,delta:0})}function ot(dt){let lt=o.location.origin!=="null"?o.location.origin:o.location.href,ht=typeof dt=="string"?dt:createPath(dt);return ht=ht.replace(/ $/,"%20"),invariant$1(lt,"No window.location.(origin|href) available to create URL for href: "+ht),new URL(ht,lt)}let ut={get action(){return nt},get location(){return i(o,_e)},listen(dt){if(tt)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,at),tt=dt,()=>{o.removeEventListener(PopStateEventType,at),tt=null}},createHref(dt){return e(o,dt)},createURL:ot,encodeLocation(dt){let lt=ot(dt);return{pathname:lt.pathname,search:lt.search,hash:lt.hash}},push:it,replace:ct,go(dt){return _e.go(dt)}};return ut}var ResultType;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ResultType||(ResultType={}));function matchRoutes(i,e,s){return s===void 0&&(s="/"),matchRoutesImpl(i,e,s,!1)}function matchRoutesImpl(i,e,s,a){let o=typeof e=="string"?parsePath(e):e,j=stripBasename(o.pathname||"/",s);if(j==null)return null;let _e=flattenRoutes(i);rankRouteBranches(_e);let nt=null;for(let tt=0;nt==null&&tt<_e.length;++tt){let st=decodePath(j);nt=matchRouteBranch(_e[tt],st,a)}return nt}function flattenRoutes(i,e,s,a){e===void 0&&(e=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(j,_e,nt)=>{let tt={relativePath:nt===void 0?j.path||"":nt,caseSensitive:j.caseSensitive===!0,childrenIndex:_e,route:j};tt.relativePath.startsWith("/")&&(invariant$1(tt.relativePath.startsWith(a),'Absolute route path "'+tt.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),tt.relativePath=tt.relativePath.slice(a.length));let st=joinPaths([a,tt.relativePath]),rt=s.concat(tt);j.children&&j.children.length>0&&(invariant$1(j.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+st+'".')),flattenRoutes(j.children,e,rt,st)),!(j.path==null&&!j.index)&&e.push({path:st,score:computeScore(st,j.index),routesMeta:rt})};return i.forEach((j,_e)=>{var nt;if(j.path===""||!((nt=j.path)!=null&&nt.includes("?")))o(j,_e);else for(let tt of explodeOptionalSegments(j.path))o(j,_e,tt)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[s,...a]=e,o=s.endsWith("?"),j=s.replace(/\?$/,"");if(a.length===0)return o?[j,""]:[j];let _e=explodeOptionalSegments(a.join("/")),nt=[];return nt.push(..._e.map(tt=>tt===""?j:[j,tt].join("/"))),o&&nt.push(..._e),nt.map(tt=>i.startsWith("/")&&tt===""?"/":tt)}function rankRouteBranches(i){i.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let s=i.split("/"),a=s.length;return s.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),s.filter(o=>!isSplat(o)).reduce((o,j)=>o+(paramRe.test(j)?dynamicSegmentValue:j===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((a,o)=>a===e[o])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e,s){let{routesMeta:a}=i,o={},j="/",_e=[];for(let nt=0;nt<a.length;++nt){let tt=a[nt],st=nt===a.length-1,rt=j==="/"?e:e.slice(j.length)||"/",at=matchPath({path:tt.relativePath,caseSensitive:tt.caseSensitive,end:st},rt),it=tt.route;if(!at&&st&&s&&!a[a.length-1].route.index&&(at=matchPath({path:tt.relativePath,caseSensitive:tt.caseSensitive,end:!1},rt)),!at)return null;Object.assign(o,at.params),_e.push({params:o,pathname:joinPaths([j,at.pathname]),pathnameBase:normalizePathname(joinPaths([j,at.pathnameBase])),route:it}),at.pathnameBase!=="/"&&(j=joinPaths([j,at.pathnameBase]))}return _e}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,a]=compilePath(i.path,i.caseSensitive,i.end),o=e.match(s);if(!o)return null;let j=o[0],_e=j.replace(/(.)\/+$/,"$1"),nt=o.slice(1);return{params:a.reduce((st,rt,at)=>{let{paramName:it,isOptional:ct}=rt;if(it==="*"){let ut=nt[at]||"";_e=j.slice(0,j.length-ut.length).replace(/(.)\/+$/,"$1")}const ot=nt[at];return ct&&!ot?st[it]=void 0:st[it]=(ot||"").replace(/%2F/g,"/"),st},{}),pathname:j,pathnameBase:_e,pattern:i}}function compilePath(i,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),warning$2(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let a=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_e,nt,tt)=>(a.push({paramName:nt,isOptional:tt!=null}),tt?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$2(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,a=i.charAt(s);return a&&a!=="/"?null:i.slice(s)||"/"}function resolvePath(i,e){e===void 0&&(e="/");let{pathname:s,search:a="",hash:o=""}=typeof i=="string"?parsePath(i):i;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,e):e,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(i,e){let s=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(i,e,s,a){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(i){return i.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i,e){let s=getPathContributingMatches(i);return e?s.map((a,o)=>o===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function resolveTo(i,e,s,a){a===void 0&&(a=!1);let o;typeof i=="string"?o=parsePath(i):(o=_extends$4({},i),invariant$1(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant$1(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant$1(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let j=i===""||o.pathname==="",_e=j?"/":o.pathname,nt;if(_e==null)nt=s;else{let at=e.length-1;if(!a&&_e.startsWith("..")){let it=_e.split("/");for(;it[0]==="..";)it.shift(),at-=1;o.pathname=it.join("/")}nt=at>=0?e[at]:"/"}let tt=resolvePath(o,nt),st=_e&&_e!=="/"&&_e.endsWith("/"),rt=(j||_e===".")&&s.endsWith("/");return!tt.pathname.endsWith("/")&&(st||rt)&&(tt.pathname+="/"),tt}const joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(i,e){let{relative:s}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:a,navigator:o}=reactExports.useContext(NavigationContext),{hash:j,pathname:_e,search:nt}=useResolvedPath(i,{relative:s}),tt=_e;return a!=="/"&&(tt=_e==="/"?a:joinPaths([a,_e])),o.createHref({pathname:tt,search:nt,hash:j})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let i=reactExports.useContext(DataRouterContext),{basename:e,future:s,navigator:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:j}=useLocation(),_e=JSON.stringify(getResolveToMatches(o,s.v7_relativeSplatPath)),nt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{nt.current=!0}),reactExports.useCallback(function(st,rt){if(rt===void 0&&(rt={}),!nt.current)return;if(typeof st=="number"){a.go(st);return}let at=resolveTo(st,JSON.parse(_e),j,rt.relative==="path");i==null&&e!=="/"&&(at.pathname=at.pathname==="/"?e:joinPaths([e,at.pathname])),(rt.replace?a.replace:a.push)(at,rt.state,rt)},[e,a,_e,j,i])}const OutletContext=reactExports.createContext(null);function useOutlet(i){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:i},e)}function useParams(){let{matches:i}=reactExports.useContext(RouteContext),e=i[i.length-1];return e?e.params:{}}function useResolvedPath(i,e){let{relative:s}=e===void 0?{}:e,{future:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:j}=useLocation(),_e=JSON.stringify(getResolveToMatches(o,a.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(_e),j,s==="path"),[i,_e,j,s])}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,s,a){useInRouterContext()||invariant$1(!1);let{navigator:o}=reactExports.useContext(NavigationContext),{matches:j}=reactExports.useContext(RouteContext),_e=j[j.length-1],nt=_e?_e.params:{};_e&&_e.pathname;let tt=_e?_e.pathnameBase:"/";_e&&_e.route;let st=useLocation(),rt;if(e){var at;let dt=typeof e=="string"?parsePath(e):e;tt==="/"||(at=dt.pathname)!=null&&at.startsWith(tt)||invariant$1(!1),rt=dt}else rt=st;let it=rt.pathname||"/",ct=it;if(tt!=="/"){let dt=tt.replace(/^\//,"").split("/");ct="/"+it.replace(/^\//,"").split("/").slice(dt.length).join("/")}let ot=matchRoutes(i,{pathname:ct}),ut=_renderMatches(ot&&ot.map(dt=>Object.assign({},dt,{params:Object.assign({},nt,dt.params),pathname:joinPaths([tt,o.encodeLocation?o.encodeLocation(dt.pathname).pathname:dt.pathname]),pathnameBase:dt.pathnameBase==="/"?tt:joinPaths([tt,o.encodeLocation?o.encodeLocation(dt.pathnameBase).pathname:dt.pathnameBase])})),j,s,a);return e&&ut?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},rt),navigationType:Action.Pop}},ut):ut}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:o},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(i){let{routeContext:e,match:s,children:a}=i,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},a)}function _renderMatches(i,e,s,a){var o;if(e===void 0&&(e=[]),s===void 0&&(s=null),a===void 0&&(a=null),i==null){var j;if(!s)return null;if(s.errors)i=s.matches;else if((j=a)!=null&&j.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let _e=i,nt=(o=s)==null?void 0:o.errors;if(nt!=null){let rt=_e.findIndex(at=>at.route.id&&(nt==null?void 0:nt[at.route.id])!==void 0);rt>=0||invariant$1(!1),_e=_e.slice(0,Math.min(_e.length,rt+1))}let tt=!1,st=-1;if(s&&a&&a.v7_partialHydration)for(let rt=0;rt<_e.length;rt++){let at=_e[rt];if((at.route.HydrateFallback||at.route.hydrateFallbackElement)&&(st=rt),at.route.id){let{loaderData:it,errors:ct}=s,ot=at.route.loader&&it[at.route.id]===void 0&&(!ct||ct[at.route.id]===void 0);if(at.route.lazy||ot){tt=!0,st>=0?_e=_e.slice(0,st+1):_e=[_e[0]];break}}}return _e.reduceRight((rt,at,it)=>{let ct,ot=!1,ut=null,dt=null;s&&(ct=nt&&at.route.id?nt[at.route.id]:void 0,ut=at.route.errorElement||defaultErrorElement,tt&&(st<0&&it===0?(ot=!0,dt=null):st===it&&(ot=!0,dt=at.route.hydrateFallbackElement||null)));let lt=e.concat(_e.slice(0,it+1)),ht=()=>{let xt;return ct?xt=ut:ot?xt=dt:at.route.Component?xt=reactExports.createElement(at.route.Component,null):at.route.element?xt=at.route.element:xt=rt,reactExports.createElement(RenderedRoute,{match:at,routeContext:{outlet:rt,matches:lt,isDataRoute:s!=null},children:xt})};return s&&(at.route.ErrorBoundary||at.route.errorElement||it===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:ut,error:ct,children:ht(),routeContext:{outlet:null,matches:lt,isDataRoute:!0}}):ht()},null)}var DataRouterHook$1=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(DataRouterHook$1||{}),DataRouterStateHook$1=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(DataRouterStateHook$1||{});function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(i){let e=useRouteContext(),s=e.matches[e.matches.length-1];return s.route.id||invariant$1(!1),s.route.id}function useRouteError(){var i;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(i=s.errors)==null?void 0:i[a]}function useNavigateStable(){let{router:i}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(function(o,j){j===void 0&&(j={}),s.current&&(typeof o=="number"?i.navigate(o):i.navigate(o,_extends$3({fromRouteId:e},j)))},[i,e])}function Navigate(i){let{to:e,replace:s,state:a,relative:o}=i;useInRouterContext()||invariant$1(!1);let{future:j,static:_e}=reactExports.useContext(NavigationContext),{matches:nt}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),st=useNavigate(),rt=resolveTo(e,getResolveToMatches(nt,j.v7_relativeSplatPath),tt,o==="path"),at=JSON.stringify(rt);return reactExports.useEffect(()=>st(JSON.parse(at),{replace:s,state:a,relative:o}),[st,at,o,s,a]),null}function Outlet(i){return useOutlet(i.context)}function Route(i){invariant$1(!1)}function Router(i){let{basename:e="/",children:s=null,location:a,navigationType:o=Action.Pop,navigator:j,static:_e=!1,future:nt}=i;useInRouterContext()&&invariant$1(!1);let tt=e.replace(/^\/*/,"/"),st=reactExports.useMemo(()=>({basename:tt,navigator:j,static:_e,future:_extends$3({v7_relativeSplatPath:!1},nt)}),[tt,nt,j,_e]);typeof a=="string"&&(a=parsePath(a));let{pathname:rt="/",search:at="",hash:it="",state:ct=null,key:ot="default"}=a,ut=reactExports.useMemo(()=>{let dt=stripBasename(rt,tt);return dt==null?null:{location:{pathname:dt,search:at,hash:it,state:ct,key:ot},navigationType:o}},[tt,rt,at,it,ct,ot,o]);return ut==null?null:reactExports.createElement(NavigationContext.Provider,{value:st},reactExports.createElement(LocationContext.Provider,{children:s,value:ut}))}function Routes(i){let{children:e,location:s}=i;return useRoutes(createRoutesFromChildren(e),s)}new Promise(()=>{});function createRoutesFromChildren(i,e){e===void 0&&(e=[]);let s=[];return reactExports.Children.forEach(i,(a,o)=>{if(!reactExports.isValidElement(a))return;let j=[...e,o];if(a.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(a.props.children,j));return}a.type!==Route&&invariant$1(!1),!a.props.index||!a.props.children||invariant$1(!1);let _e={id:a.props.id||j.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(_e.children=createRoutesFromChildren(a.props.children,j)),s.push(_e)}),s}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(i,e){if(i==null)return{};var s={},a=Object.keys(i),o,j;for(j=0;j<a.length;j++)o=a[j],!(e.indexOf(o)>=0)&&(s[o]=i[o]);return s}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(i){let{basename:e,children:s,future:a,window:o}=i,j=reactExports.useRef();j.current==null&&(j.current=createBrowserHistory({window:o,v5Compat:!0}));let _e=j.current,[nt,tt]=reactExports.useState({action:_e.action,location:_e.location}),{v7_startTransition:st}=a||{},rt=reactExports.useCallback(at=>{st&&startTransitionImpl?startTransitionImpl(()=>tt(at)):tt(at)},[tt,st]);return reactExports.useLayoutEffect(()=>_e.listen(rt),[_e,rt]),reactExports.createElement(Router,{basename:e,children:s,location:nt.location,navigationType:nt.action,navigator:_e,future:a})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,s){let{onClick:a,relative:o,reloadDocument:j,replace:_e,state:nt,target:tt,to:st,preventScrollReset:rt,unstable_viewTransition:at}=e,it=_objectWithoutPropertiesLoose$1(e,_excluded$1),{basename:ct}=reactExports.useContext(NavigationContext),ot,ut=!1;if(typeof st=="string"&&ABSOLUTE_URL_REGEX.test(st)&&(ot=st,isBrowser$1))try{let xt=new URL(window.location.href),mt=st.startsWith("//")?new URL(xt.protocol+st):new URL(st),ft=stripBasename(mt.pathname,ct);mt.origin===xt.origin&&ft!=null?st=ft+mt.search+mt.hash:ut=!0}catch{}let dt=useHref(st,{relative:o}),lt=useLinkClickHandler(st,{replace:_e,state:nt,target:tt,preventScrollReset:rt,relative:o,unstable_viewTransition:at});function ht(xt){a&&a(xt),xt.defaultPrevented||lt(xt)}return reactExports.createElement("a",_extends$2({},it,{href:ot||dt,onClick:ut||j?a:ht,ref:s,target:tt}))});var DataRouterHook;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(i,e){let{target:s,replace:a,state:o,preventScrollReset:j,relative:_e,unstable_viewTransition:nt}=e===void 0?{}:e,tt=useNavigate(),st=useLocation(),rt=useResolvedPath(i,{relative:_e});return reactExports.useCallback(at=>{if(shouldProcessLinkClick(at,s)){at.preventDefault();let it=a!==void 0?a:createPath(st)===createPath(rt);tt(i,{replace:it,state:o,preventScrollReset:j,relative:_e,unstable_viewTransition:nt})}},[st,tt,rt,a,o,s,i,j,_e,nt])}var dist$2={},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(a,o,j,_e,nt,tt){if(tt!==ReactPropTypesSecret){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}i.isRequired=i;function e(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports,loader={},Circles$1={};Object.defineProperty(Circles$1,"__esModule",{value:!0});Circles$1.Circles=void 0;var _react$g=_interopRequireDefault$g(reactExports),_propTypes$g=_interopRequireDefault$g(propTypesExports);function _interopRequireDefault$g(i){return i&&i.__esModule?i:{default:i}}var Circles=function(e){return _react$g.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:e.color,"aria-label":e.label},_react$g.default.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},_react$g.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})),_react$g.default.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},_react$g.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})))};Circles$1.Circles=Circles;Circles.propTypes={height:_propTypes$g.default.oneOfType([_propTypes$g.default.string,_propTypes$g.default.number]),width:_propTypes$g.default.oneOfType([_propTypes$g.default.string,_propTypes$g.default.number]),color:_propTypes$g.default.string,label:_propTypes$g.default.string};Circles.defaultProps={height:80,width:80,color:"green",label:"audio-loading"};var Watch$1={};Object.defineProperty(Watch$1,"__esModule",{value:!0});Watch$1.Watch=void 0;var _react$f=_interopRequireDefault$f(reactExports),_propTypes$f=_interopRequireDefault$f(propTypesExports);function _interopRequireDefault$f(i){return i&&i.__esModule?i:{default:i}}var Watch=function(e){return _react$f.default.createElement("svg",{width:e.width,height:e.height,version:"1.1",id:"L2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100",xmlSpace:"preserve","aria-label":e.label},_react$f.default.createElement("circle",{fill:"none",stroke:e.color,strokeWidth:"4",strokeMiterlimit:"10",cx:"50",cy:"50",r:e.radius}),_react$f.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:e.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"85",y2:"50.5"},_react$f.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),_react$f.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:e.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"49.5",y2:"74"},_react$f.default.createElement("animateTransform",{attributeName:"transform",dur:"15s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))};Watch$1.Watch=Watch;Watch.propTypes={height:_propTypes$f.default.oneOfType([_propTypes$f.default.string,_propTypes$f.default.number]),width:_propTypes$f.default.oneOfType([_propTypes$f.default.string,_propTypes$f.default.number]),color:_propTypes$f.default.string,label:_propTypes$f.default.string,radius:_propTypes$f.default.number};Watch.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:48};var Audio$1={};Object.defineProperty(Audio$1,"__esModule",{value:!0});Audio$1.Audio=void 0;var _react$e=_interopRequireDefault$e(reactExports),_propTypes$e=_interopRequireDefault$e(propTypesExports);function _interopRequireDefault$e(i){return i&&i.__esModule?i:{default:i}}var Audio=function(e){return _react$e.default.createElement("svg",{height:e.height,width:e.width,fill:e.color,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg","aria-label":e.label},_react$e.default.createElement("g",{transform:"matrix(1 0 0 -1 0 80)"},_react$e.default.createElement("rect",{width:"10",height:"20",rx:"3"},_react$e.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})),_react$e.default.createElement("rect",{x:"15",width:"10",height:"80",rx:"3"},_react$e.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})),_react$e.default.createElement("rect",{x:"30",width:"10",height:"50",rx:"3"},_react$e.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})),_react$e.default.createElement("rect",{x:"45",width:"10",height:"30",rx:"3"},_react$e.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}))))};Audio$1.Audio=Audio;Audio.propTypes={height:_propTypes$e.default.oneOfType([_propTypes$e.default.string,_propTypes$e.default.number]),width:_propTypes$e.default.oneOfType([_propTypes$e.default.string,_propTypes$e.default.number]),color:_propTypes$e.default.string,label:_propTypes$e.default.string};Audio.defaultProps={height:80,width:80,color:"green",label:"audio-loading"};var BallTriangle$1={};Object.defineProperty(BallTriangle$1,"__esModule",{value:!0});BallTriangle$1.BallTriangle=void 0;var _react$d=_interopRequireDefault$d(reactExports),_propTypes$d=_interopRequireDefault$d(propTypesExports);function _interopRequireDefault$d(i){return i&&i.__esModule?i:{default:i}}var BallTriangle=function(e){return _react$d.default.createElement("svg",{height:e.height,width:e.width,stroke:e.color,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg","aria-label":e.label},_react$d.default.createElement("g",{fill:"none",fillRule:"evenodd"},_react$d.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},_react$d.default.createElement("circle",{cx:"5",cy:"50",r:e.radius},_react$d.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),_react$d.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),_react$d.default.createElement("circle",{cx:"27",cy:"5",r:e.radius},_react$d.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),_react$d.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),_react$d.default.createElement("circle",{cx:"49",cy:"50",r:e.radius},_react$d.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),_react$d.default.createElement("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))};BallTriangle$1.BallTriangle=BallTriangle;BallTriangle.propTypes={height:_propTypes$d.default.oneOfType([_propTypes$d.default.string,_propTypes$d.default.number]),width:_propTypes$d.default.oneOfType([_propTypes$d.default.string,_propTypes$d.default.number]),color:_propTypes$d.default.string,label:_propTypes$d.default.string,radius:_propTypes$d.default.number};BallTriangle.defaultProps={height:80,width:80,color:"green",radius:5,label:"audio-loading"};var Bars$1={};Object.defineProperty(Bars$1,"__esModule",{value:!0});Bars$1.Bars=void 0;var _react$c=_interopRequireDefault$c(reactExports),_propTypes$c=_interopRequireDefault$c(propTypesExports);function _interopRequireDefault$c(i){return i&&i.__esModule?i:{default:i}}var Bars=function(e){return _react$c.default.createElement("svg",{width:e.width,height:e.height,fill:e.color,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg","aria-label":e.label},_react$c.default.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},_react$c.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),_react$c.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),_react$c.default.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},_react$c.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),_react$c.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),_react$c.default.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},_react$c.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),_react$c.default.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),_react$c.default.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},_react$c.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),_react$c.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),_react$c.default.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},_react$c.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),_react$c.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))};Bars$1.Bars=Bars;Bars.propTypes={height:_propTypes$c.default.oneOfType([_propTypes$c.default.string,_propTypes$c.default.number]),width:_propTypes$c.default.oneOfType([_propTypes$c.default.string,_propTypes$c.default.number]),color:_propTypes$c.default.string,label:_propTypes$c.default.string};Bars.defaultProps={height:80,width:80,color:"green",label:"audio-loading"};var CradleLoader$1={};Object.defineProperty(CradleLoader$1,"__esModule",{value:!0});CradleLoader$1.CradleLoader=void 0;var _react$b=_interopRequireDefault$b(reactExports),_propTypes$b=_interopRequireDefault$b(propTypesExports);function _interopRequireDefault$b(i){return i&&i.__esModule?i:{default:i}}var CradleLoader=function(e){return _react$b.default.createElement("div",{"aria-label":e.label,role:"presentation",className:"container"},_react$b.default.createElement("div",{className:"react-spinner-loader-swing"},_react$b.default.createElement("div",{className:"react-spinner-loader-swing-l"}),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",{className:"react-spinner-loader-swing-r"})),_react$b.default.createElement("div",{className:"react-spinner-loader-shadow"},_react$b.default.createElement("div",{className:"react-spinner-loader-shadow-l"}),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",null),_react$b.default.createElement("div",{className:"react-spinner-loader-shadow-r"})))};CradleLoader$1.CradleLoader=CradleLoader;CradleLoader.propTypes={label:_propTypes$b.default.string};CradleLoader.defaultProps={label:"audio-loading"};var Grid$1={};Object.defineProperty(Grid$1,"__esModule",{value:!0});Grid$1.Grid=void 0;var _react$a=_interopRequireDefault$a(reactExports),_propTypes$a=_interopRequireDefault$a(propTypesExports);function _interopRequireDefault$a(i){return i&&i.__esModule?i:{default:i}}var Grid=function(e){return _react$a.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 105 105",fill:e.color,"aria-label":e.label},_react$a.default.createElement("circle",{cx:"12.5",cy:"12.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"12.5",cy:"52.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"52.5",cy:"12.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"52.5",cy:"52.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"92.5",cy:"12.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"92.5",cy:"52.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"12.5",cy:"92.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"52.5",cy:"92.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),_react$a.default.createElement("circle",{cx:"92.5",cy:"92.5",r:e.radius},_react$a.default.createElement("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})))};Grid$1.Grid=Grid;Grid.propTypes={height:_propTypes$a.default.oneOfType([_propTypes$a.default.string,_propTypes$a.default.number]),width:_propTypes$a.default.oneOfType([_propTypes$a.default.string,_propTypes$a.default.number]),color:_propTypes$a.default.string,label:_propTypes$a.default.string,radius:_propTypes$a.default.number};Grid.defaultProps={height:80,width:80,color:"green",radius:12.5,label:"audio-loading"};var Hearts$1={};Object.defineProperty(Hearts$1,"__esModule",{value:!0});Hearts$1.Hearts=void 0;var _react$9=_interopRequireDefault$9(reactExports),_propTypes$9=_interopRequireDefault$9(propTypesExports);function _interopRequireDefault$9(i){return i&&i.__esModule?i:{default:i}}var Hearts=function(e){return _react$9.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",fill:e.color,"aria-label":e.label},_react$9.default.createElement("path",{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.717-6.002 11.47-7.65 17.305-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z",attributeName:"fill-opacity",from:"0",to:".5"},_react$9.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),_react$9.default.createElement("path",{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.592-2.32 17.307 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z",attributeName:"fill-opacity",from:"0",to:".5"},_react$9.default.createElement("animate",{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),_react$9.default.createElement("path",{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"}))};Hearts$1.Hearts=Hearts;Hearts.propTypes={height:_propTypes$9.default.oneOfType([_propTypes$9.default.string,_propTypes$9.default.number]),width:_propTypes$9.default.oneOfType([_propTypes$9.default.string,_propTypes$9.default.number]),color:_propTypes$9.default.string,label:_propTypes$9.default.string};Hearts.defaultProps={height:80,width:80,color:"green",label:"audio-loading"};var MutatingDots$1={};Object.defineProperty(MutatingDots$1,"__esModule",{value:!0});MutatingDots$1.MutatingDots=void 0;var _react$8=_interopRequireDefault$8(reactExports),_propTypes$8=_interopRequireDefault$8(propTypesExports);function _interopRequireDefault$8(i){return i&&i.__esModule?i:{default:i}}var MutatingDots=function(e){return _react$8.default.createElement("svg",{id:"goo-loader",width:e.width,height:e.height,"aria-label":e.label},_react$8.default.createElement("filter",{id:"fancy-goo"},_react$8.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6",result:"blur"}),_react$8.default.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),_react$8.default.createElement("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})),_react$8.default.createElement("g",{filter:"url(#fancy-goo)"},_react$8.default.createElement("animateTransform",{id:"mainAnim",attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"359 50 50",dur:"1.2s",repeatCount:"indefinite"}),_react$8.default.createElement("circle",{cx:"50%",cy:"40",r:e.radius,fill:e.color},_react$8.default.createElement("animate",{id:"cAnim1",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0;cAnim1.end+0.2s",calcMode:"spline",values:"40;20;40",keyTimes:"0;0.3;1",keySplines:"0.09, 0.45, 0.16, 1;0.09, 0.45, 0.16, 1"})),_react$8.default.createElement("circle",{cx:"50%",cy:"60",r:e.radius,fill:e.secondaryColor},_react$8.default.createElement("animate",{id:"cAnim2",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0.4s;cAnim2.end+0.2s",calcMode:"spline",values:"60;80;60",keyTimes:"0;0.3;1",keySplines:"0.09, 0.45, 0.16, 1;0.09, 0.45, 0.16, 1"}))))};MutatingDots$1.MutatingDots=MutatingDots;MutatingDots.propTypes={width:_propTypes$8.default.number,secondaryColor:_propTypes$8.default.string,height:_propTypes$8.default.number,color:_propTypes$8.default.string,radius:_propTypes$8.default.number,label:_propTypes$8.default.string};MutatingDots.defaultProps={width:80,height:90,color:"green",radius:11,secondaryColor:"green",label:"audio-loading"};var Oval$1={};Object.defineProperty(Oval$1,"__esModule",{value:!0});Oval$1.Oval=void 0;var _react$7=_interopRequireDefault$7(reactExports),_propTypes$7=_interopRequireDefault$7(propTypesExports);function _interopRequireDefault$7(i){return i&&i.__esModule?i:{default:i}}var Oval=function(e){return _react$7.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:e.color,"aria-label":e.label},_react$7.default.createElement("g",{fill:"none",fillRule:"evenodd"},_react$7.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},_react$7.default.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:e.radius}),_react$7.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},_react$7.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))};Oval$1.Oval=Oval;Oval.propTypes={height:_propTypes$7.default.oneOfType([_propTypes$7.default.string,_propTypes$7.default.number]),width:_propTypes$7.default.oneOfType([_propTypes$7.default.string,_propTypes$7.default.number]),color:_propTypes$7.default.string,label:_propTypes$7.default.string,radius:_propTypes$7.default.number};Oval.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:18};var Plane$1={};Object.defineProperty(Plane$1,"__esModule",{value:!0});Plane$1.Plane=void 0;var _react$6=_interopRequireDefault$6(reactExports),_propTypes$6=_interopRequireDefault$6(propTypesExports);function _interopRequireDefault$6(i){return i&&i.__esModule?i:{default:i}}var Plane=function(e){return _react$6.default.createElement("svg",{className:"react-spinner-loader-svg-calLoader",xmlns:"http://www.w3.org/2000/svg",width:"230",height:"230","aria-label":e.label},_react$6.default.createElement("desc",null,"Plane animation. Loading "),_react$6.default.createElement("path",{className:"react-spinner-loader-cal-loader__path",style:{stroke:e.secondaryColor},d:"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z",fill:"none",stroke:"#0099cc",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"10 10 10 10 10 10 10 432",strokeDashoffset:"77"}),_react$6.default.createElement("path",{className:"cal-loader__plane",style:{fill:e.color},d:"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z",fill:"#000033"}))};Plane$1.Plane=Plane;Plane.propTypes={secondaryColor:_propTypes$6.default.string,color:_propTypes$6.default.string,label:_propTypes$6.default.string};Plane.defaultProps={secondaryColor:"grey",color:"#FFA500",label:"async-loading"};var Puff$1={};Object.defineProperty(Puff$1,"__esModule",{value:!0});Puff$1.Puff=void 0;var _react$5=_interopRequireDefault$5(reactExports),_propTypes$5=_interopRequireDefault$5(propTypesExports);function _interopRequireDefault$5(i){return i&&i.__esModule?i:{default:i}}var Puff=function(e){return _react$5.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:e.color,"aria-label":e.label},_react$5.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},_react$5.default.createElement("circle",{cx:"22",cy:"22",r:e.radius},_react$5.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),_react$5.default.createElement("animate",{attributeName:"strokeOpacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})),_react$5.default.createElement("circle",{cx:"22",cy:"22",r:e.radius},_react$5.default.createElement("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),_react$5.default.createElement("animate",{attributeName:"strokeOpacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}))))};Puff$1.Puff=Puff;Puff.propTypes={height:_propTypes$5.default.oneOfType([_propTypes$5.default.string,_propTypes$5.default.number]),width:_propTypes$5.default.oneOfType([_propTypes$5.default.string,_propTypes$5.default.number]),color:_propTypes$5.default.string,label:_propTypes$5.default.string,radius:_propTypes$5.default.number};Puff.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:1};var RevolvingDot$1={};Object.defineProperty(RevolvingDot$1,"__esModule",{value:!0});RevolvingDot$1.RevolvingDot=void 0;var _react$4=_interopRequireDefault$4(reactExports),_propTypes$4=_interopRequireDefault$4(propTypesExports);function _interopRequireDefault$4(i){return i&&i.__esModule?i:{default:i}}var RevolvingDot=function(e){return _react$4.default.createElement("svg",{version:"1.1",width:e.width,height:e.height,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px","aria-label":e.label},_react$4.default.createElement("circle",{fill:"none",stroke:e.color,strokeWidth:"4",cx:"50",cy:"50",r:e.radius+38,style:{opacity:.5}}),_react$4.default.createElement("circle",{fill:e.color,stroke:e.color,strokeWidth:"3",cx:"8",cy:"54",r:e.radius},_react$4.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})))};RevolvingDot$1.RevolvingDot=RevolvingDot;RevolvingDot.propTypes={height:_propTypes$4.default.oneOfType([_propTypes$4.default.string,_propTypes$4.default.number]),width:_propTypes$4.default.oneOfType([_propTypes$4.default.string,_propTypes$4.default.number]),color:_propTypes$4.default.string,label:_propTypes$4.default.string,radius:_propTypes$4.default.number};RevolvingDot.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:6};var Rings$1={};Object.defineProperty(Rings$1,"__esModule",{value:!0});Rings$1.Rings=void 0;var _react$3=_interopRequireDefault$3(reactExports),_propTypes$3=_interopRequireDefault$3(propTypesExports);function _interopRequireDefault$3(i){return i&&i.__esModule?i:{default:i}}var Rings=function(e){return _react$3.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:e.color,"aria-label":e.label},_react$3.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},_react$3.default.createElement("circle",{cx:"22",cy:"22",r:e.radius,strokeOpacity:"0"},_react$3.default.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),_react$3.default.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),_react$3.default.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),_react$3.default.createElement("circle",{cx:"22",cy:"22",r:e.radius,strokeOpacity:"0"},_react$3.default.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),_react$3.default.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),_react$3.default.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),_react$3.default.createElement("circle",{cx:"22",cy:"22",r:e.radius+2},_react$3.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))))};Rings$1.Rings=Rings;Rings.propTypes={height:_propTypes$3.default.oneOfType([_propTypes$3.default.string,_propTypes$3.default.number]),width:_propTypes$3.default.oneOfType([_propTypes$3.default.string,_propTypes$3.default.number]),color:_propTypes$3.default.string,label:_propTypes$3.default.string,radius:_propTypes$3.default.number};Rings.defaultProps={height:80,width:80,color:"green",radius:6,label:"audio-loading"};var TailSpin$1={};Object.defineProperty(TailSpin$1,"__esModule",{value:!0});TailSpin$1.TailSpin=void 0;var _react$2=_interopRequireDefault$2(reactExports),_propTypes$2=_interopRequireDefault$2(propTypesExports);function _interopRequireDefault$2(i){return i&&i.__esModule?i:{default:i}}var TailSpin=function(e){return _react$2.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","aria-label":e.label},_react$2.default.createElement("defs",null,_react$2.default.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},_react$2.default.createElement("stop",{stopColor:e.color,stopOpacity:"0",offset:"0%"}),_react$2.default.createElement("stop",{stopColor:e.color,stopOpacity:".631",offset:"63.146%"}),_react$2.default.createElement("stop",{stopColor:e.color,offset:"100%"}))),_react$2.default.createElement("g",{fill:"none",fillRule:"evenodd"},_react$2.default.createElement("g",{transform:"translate(1 1)"},_react$2.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:e.color,strokeWidth:"2"},_react$2.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),_react$2.default.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:e.radius},_react$2.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))};TailSpin$1.TailSpin=TailSpin;TailSpin.propTypes={height:_propTypes$2.default.oneOfType([_propTypes$2.default.string,_propTypes$2.default.number]),width:_propTypes$2.default.oneOfType([_propTypes$2.default.string,_propTypes$2.default.number]),color:_propTypes$2.default.string,label:_propTypes$2.default.string,radius:_propTypes$2.default.number};TailSpin.defaultProps={height:80,width:80,color:"green",radius:1,label:"audio-loading"};var ThreeDots$1={};Object.defineProperty(ThreeDots$1,"__esModule",{value:!0});ThreeDots$1.ThreeDots=void 0;var _react$1=_interopRequireDefault$1(reactExports),_propTypes$1=_interopRequireDefault$1(propTypesExports);function _interopRequireDefault$1(i){return i&&i.__esModule?i:{default:i}}var ThreeDots=function(e){return _react$1.default.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.color,"aria-label":e.label},_react$1.default.createElement("circle",{cx:"15",cy:"15",r:e.radius+6},_react$1.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),_react$1.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),_react$1.default.createElement("circle",{cx:"60",cy:"15",r:e.radius,attributeName:"fillOpacity",from:"1",to:"0.3"},_react$1.default.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),_react$1.default.createElement("animate",{attributeName:"fillOpacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),_react$1.default.createElement("circle",{cx:"105",cy:"15",r:e.radius+6},_react$1.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),_react$1.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))};ThreeDots$1.ThreeDots=ThreeDots;ThreeDots.propTypes={height:_propTypes$1.default.oneOfType([_propTypes$1.default.string,_propTypes$1.default.number]),width:_propTypes$1.default.oneOfType([_propTypes$1.default.string,_propTypes$1.default.number]),color:_propTypes$1.default.string,label:_propTypes$1.default.string,radius:_propTypes$1.default.number};ThreeDots.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:9};var Triangle$1={};Object.defineProperty(Triangle$1,"__esModule",{value:!0});Triangle$1.Triangle=void 0;var _react=_interopRequireDefault(reactExports),_propTypes=_interopRequireDefault(propTypesExports);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var Triangle=function(e){return _react.default.createElement("div",{className:"react-spinner-loader-svg"},_react.default.createElement("svg",{id:"triangle",width:e.width,height:e.height,viewBox:"-3 -4 39 39","aria-label":e.label},_react.default.createElement("polygon",{fill:"transparent",stroke:e.color,strokeWidth:"1",points:"16,0 32,32 0,32"})))};Triangle$1.Triangle=Triangle;Triangle.propTypes={height:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),width:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),color:_propTypes.default.string,label:_propTypes.default.string};Triangle.defaultProps={height:80,width:80,color:"green",label:"audio-loading"};Object.defineProperty(loader,"__esModule",{value:!0});loader.Spinner=void 0;var _Circles=Circles$1,_Watch=Watch$1,_Audio=Audio$1,_BallTriangle=BallTriangle$1,_Bars=Bars$1,_CradleLoader=CradleLoader$1,_Grid=Grid$1,_Hearts=Hearts$1,_MutatingDots=MutatingDots$1,_Oval=Oval$1,_Plane=Plane$1,_Puff=Puff$1,_RevolvingDot=RevolvingDot$1,_Rings=Rings$1,_TailSpin=TailSpin$1,_ThreeDots=ThreeDots$1,_Triangle=Triangle$1,Spinner={Circles:_Circles.Circles,Audio:_Audio.Audio,BallTriangle:_BallTriangle.BallTriangle,Bars:_Bars.Bars,CradleLoader:_CradleLoader.CradleLoader,Grid:_Grid.Grid,Hearts:_Hearts.Hearts,MutatingDots:_MutatingDots.MutatingDots,Oval:_Oval.Oval,Plane:_Plane.Plane,Puff:_Puff.Puff,RevolvingDot:_RevolvingDot.RevolvingDot,Rings:_Rings.Rings,TailSpin:_TailSpin.TailSpin,ThreeDots:_ThreeDots.ThreeDots,Triangle:_Triangle.Triangle,Watch:_Watch.Watch};loader.Spinner=Spinner;(function(i){function e(mt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(gt){return typeof gt}:e=function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},e(mt)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=xt;var s=nt(reactExports),a=j(propTypesExports),o=loader;function j(mt){return mt&&mt.__esModule?mt:{default:mt}}function _e(){if(typeof WeakMap!="function")return null;var mt=new WeakMap;return _e=function(){return mt},mt}function nt(mt){if(mt&&mt.__esModule)return mt;if(mt===null||e(mt)!=="object"&&typeof mt!="function")return{default:mt};var ft=_e();if(ft&&ft.has(mt))return ft.get(mt);var gt={},pt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var vt in mt)if(Object.prototype.hasOwnProperty.call(mt,vt)){var At=pt?Object.getOwnPropertyDescriptor(mt,vt):null;At&&(At.get||At.set)?Object.defineProperty(gt,vt,At):gt[vt]=mt[vt]}return gt.default=mt,ft&&ft.set(mt,gt),gt}function tt(mt,ft){var gt=Object.keys(mt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(mt);ft&&(pt=pt.filter(function(vt){return Object.getOwnPropertyDescriptor(mt,vt).enumerable})),gt.push.apply(gt,pt)}return gt}function st(mt){for(var ft=1;ft<arguments.length;ft++){var gt=arguments[ft]!=null?arguments[ft]:{};ft%2?tt(Object(gt),!0).forEach(function(pt){rt(mt,pt,gt[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(gt)):tt(Object(gt)).forEach(function(pt){Object.defineProperty(mt,pt,Object.getOwnPropertyDescriptor(gt,pt))})}return mt}function rt(mt,ft,gt){return ft in mt?Object.defineProperty(mt,ft,{value:gt,enumerable:!0,configurable:!0,writable:!0}):mt[ft]=gt,mt}function at(mt,ft){return dt(mt)||ut(mt,ft)||ct(mt,ft)||it()}function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(mt,ft){if(mt){if(typeof mt=="string")return ot(mt,ft);var gt=Object.prototype.toString.call(mt).slice(8,-1);if(gt==="Object"&&mt.constructor&&(gt=mt.constructor.name),gt==="Map"||gt==="Set")return Array.from(mt);if(gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return ot(mt,ft)}}function ot(mt,ft){(ft==null||ft>mt.length)&&(ft=mt.length);for(var gt=0,pt=new Array(ft);gt<ft;gt++)pt[gt]=mt[gt];return pt}function ut(mt,ft){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(mt)))){var gt=[],pt=!0,vt=!1,At=void 0;try{for(var Rt=mt[Symbol.iterator](),bt;!(pt=(bt=Rt.next()).done)&&(gt.push(bt.value),!(ft&&gt.length===ft));pt=!0);}catch(Tt){vt=!0,At=Tt}finally{try{!pt&&Rt.return!=null&&Rt.return()}finally{if(vt)throw At}}return gt}}function dt(mt){if(Array.isArray(mt))return mt}var lt=["Audio","BallTriangle","Bars","Circles","Grid","Hearts","Oval","Puff","Rings","TailSpin","ThreeDots","Watch","RevolvingDot","Triangle","Plane","MutatingDots","CradleLoader"];function ht(mt){return lt.includes(mt)?o.Spinner[mt]:o.Spinner.Audio}function xt(mt){var ft=(0,s.useState)(!0),gt=at(ft,2),pt=gt[0],vt=gt[1];return(0,s.useEffect)(function(){var At;return mt.timeout&&mt.timeout>0&&(At=setTimeout(function(){vt(!1)},mt.timeout)),function(){At&&clearTimeout(At)}}),!mt.visible||mt.visible==="false"?null:pt?s.default.createElement("div",{"aria-busy":"true",className:mt.className,style:mt.style},s.default.createElement(ht(mt.type),st({},mt))):null}xt.propTypes={type:a.default.oneOf([].concat(lt)),style:a.default.objectOf(a.default.string),className:a.default.string,visible:a.default.oneOfType([a.default.bool,a.default.string]),timeout:a.default.number},xt.defaultProps={type:"Audio",style:{},className:"",visible:!0,timeout:0}})(dist$2);const Loader=getDefaultExportFromCjs(dist$2);/*! js-cookie v3.0.5 | MIT */function assign(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)i[a]=s[a]}return i}var defaultConverter={read:function(i){return i[0]==='"'&&(i=i.slice(1,-1)),i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(i){return encodeURIComponent(i).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(i,e){function s(o,j,_e){if(!(typeof document>"u")){_e=assign({},e,_e),typeof _e.expires=="number"&&(_e.expires=new Date(Date.now()+_e.expires*864e5)),_e.expires&&(_e.expires=_e.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var nt="";for(var tt in _e)_e[tt]&&(nt+="; "+tt,_e[tt]!==!0&&(nt+="="+_e[tt].split(";")[0]));return document.cookie=o+"="+i.write(j,o)+nt}}function a(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var j=document.cookie?document.cookie.split("; "):[],_e={},nt=0;nt<j.length;nt++){var tt=j[nt].split("="),st=tt.slice(1).join("=");try{var rt=decodeURIComponent(tt[0]);if(_e[rt]=i.read(st,rt),o===rt)break}catch{}}return o?_e[o]:_e}}return Object.create({set:s,get:a,remove:function(o,j){s(o,"",assign({},j,{expires:-1}))},withAttributes:function(o){return init(this.converter,assign({},this.attributes,o))},withConverter:function(o){return init(assign({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(i)}})}var api=init(defaultConverter,{path:"/"});function r(i){var e,s,a="";if(typeof i=="string"||typeof i=="number")a+=i;else if(typeof i=="object")if(Array.isArray(i)){var o=i.length;for(e=0;e<o;e++)i[e]&&(s=r(i[e]))&&(a&&(a+=" "),a+=s)}else for(s in i)i[s]&&(a&&(a+=" "),a+=s);return a}function clsx(){for(var i,e,s=0,a="",o=arguments.length;s<o;s++)(i=arguments[s])&&(e=r(i))&&(a&&(a+=" "),a+=e);return a}const c=i=>typeof i=="number"&&!isNaN(i),d=i=>typeof i=="string",u=i=>typeof i=="function",p=i=>d(i)||u(i)?i:null,m=i=>reactExports.isValidElement(i)||d(i)||u(i)||c(i);function f(i,e,s){s===void 0&&(s=300);const{scrollHeight:a,style:o}=i;requestAnimationFrame(()=>{o.minHeight="initial",o.height=a+"px",o.transition=`all ${s}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,s)})})}function g(i){let{enter:e,exit:s,appendPosition:a=!1,collapse:o=!0,collapseDuration:j=300}=i;return function(_e){let{children:nt,position:tt,preventExitTransition:st,done:rt,nodeRef:at,isIn:it,playToast:ct}=_e;const ot=a?`${e}--${tt}`:e,ut=a?`${s}--${tt}`:s,dt=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{const lt=at.current,ht=ot.split(" "),xt=mt=>{mt.target===at.current&&(ct(),lt.removeEventListener("animationend",xt),lt.removeEventListener("animationcancel",xt),dt.current===0&&mt.type!=="animationcancel"&&lt.classList.remove(...ht))};lt.classList.add(...ht),lt.addEventListener("animationend",xt),lt.addEventListener("animationcancel",xt)},[]),reactExports.useEffect(()=>{const lt=at.current,ht=()=>{lt.removeEventListener("animationend",ht),o?f(lt,rt,j):rt()};it||(st?ht():(dt.current=1,lt.className+=` ${ut}`,lt.addEventListener("animationend",ht)))},[it]),React.createElement(React.Fragment,null,nt)}}function y(i,e){return i!=null?{content:i.content,containerId:i.props.containerId,id:i.props.toastId,theme:i.props.theme,type:i.props.type,data:i.props.data||{},isLoading:i.props.isLoading,icon:i.props.icon,status:e}:{}}const v=new Map;let h=[];const T=new Set,E=i=>T.forEach(e=>e(i)),b=()=>v.size>0;function I(i,e){var s;if(e)return!((s=v.get(e))==null||!s.isToastActive(i));let a=!1;return v.forEach(o=>{o.isToastActive(i)&&(a=!0)}),a}function _(i,e){m(i)&&(b()||h.push({content:i,options:e}),v.forEach(s=>{s.buildToast(i,e)}))}function C(i,e){v.forEach(s=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===s.id&&s.toggle(i,e==null?void 0:e.id):s.toggle(i,e==null?void 0:e.id)})}function L(i){const{subscribe:e,getSnapshot:s,setProps:a}=reactExports.useRef(function(j){const _e=j.containerId||1;return{subscribe(nt){const tt=function(rt,at,it){let ct=1,ot=0,ut=[],dt=[],lt=[],ht=at;const xt=new Map,mt=new Set,ft=()=>{lt=Array.from(xt.values()),mt.forEach(vt=>vt())},gt=vt=>{dt=vt==null?[]:dt.filter(At=>At!==vt),ft()},pt=vt=>{const{toastId:At,onOpen:Rt,updateId:bt,children:Tt}=vt.props,Lt=bt==null;vt.staleId&&xt.delete(vt.staleId),xt.set(At,vt),dt=[...dt,vt.props.toastId].filter(Yt=>Yt!==vt.staleId),ft(),it(y(vt,Lt?"added":"updated")),Lt&&u(Rt)&&Rt(reactExports.isValidElement(Tt)&&Tt.props)};return{id:rt,props:ht,observe:vt=>(mt.add(vt),()=>mt.delete(vt)),toggle:(vt,At)=>{xt.forEach(Rt=>{At!=null&&At!==Rt.props.toastId||u(Rt.toggle)&&Rt.toggle(vt)})},removeToast:gt,toasts:xt,clearQueue:()=>{ot-=ut.length,ut=[]},buildToast:(vt,At)=>{if((Ct=>{let{containerId:yt,toastId:Et,updateId:St}=Ct;const Ft=yt?yt!==rt:rt!==1,kt=xt.has(Et)&&St==null;return Ft||kt})(At))return;const{toastId:Rt,updateId:bt,data:Tt,staleId:Lt,delay:Yt}=At,zt=()=>{gt(Rt)},Wt=bt==null;Wt&&ot++;const Bt={...ht,style:ht.toastStyle,key:ct++,...Object.fromEntries(Object.entries(At).filter(Ct=>{let[yt,Et]=Ct;return Et!=null})),toastId:Rt,updateId:bt,data:Tt,closeToast:zt,isIn:!1,className:p(At.className||ht.toastClassName),bodyClassName:p(At.bodyClassName||ht.bodyClassName),progressClassName:p(At.progressClassName||ht.progressClassName),autoClose:!At.isLoading&&(Ut=At.autoClose,_t=ht.autoClose,Ut===!1||c(Ut)&&Ut>0?Ut:_t),deleteToast(){const Ct=xt.get(Rt),{onClose:yt,children:Et}=Ct.props;u(yt)&&yt(reactExports.isValidElement(Et)&&Et.props),it(y(Ct,"removed")),xt.delete(Rt),ot--,ot<0&&(ot=0),ut.length>0?pt(ut.shift()):ft()}};var Ut,_t;Bt.closeButton=ht.closeButton,At.closeButton===!1||m(At.closeButton)?Bt.closeButton=At.closeButton:At.closeButton===!0&&(Bt.closeButton=!m(ht.closeButton)||ht.closeButton);let $t=vt;reactExports.isValidElement(vt)&&!d(vt.type)?$t=reactExports.cloneElement(vt,{closeToast:zt,toastProps:Bt,data:Tt}):u(vt)&&($t=vt({closeToast:zt,toastProps:Bt,data:Tt}));const Xt={content:$t,props:Bt,staleId:Lt};ht.limit&&ht.limit>0&&ot>ht.limit&&Wt?ut.push(Xt):c(Yt)?setTimeout(()=>{pt(Xt)},Yt):pt(Xt)},setProps(vt){ht=vt},setToggle:(vt,At)=>{xt.get(vt).toggle=At},isToastActive:vt=>dt.some(At=>At===vt),getSnapshot:()=>ht.newestOnTop?lt.reverse():lt}}(_e,j,E);v.set(_e,tt);const st=tt.observe(nt);return h.forEach(rt=>_(rt.content,rt.options)),h=[],()=>{st(),v.delete(_e)}},setProps(nt){var tt;(tt=v.get(_e))==null||tt.setProps(nt)},getSnapshot(){var nt;return(nt=v.get(_e))==null?void 0:nt.getSnapshot()}}}(i)).current;a(i);const o=reactExports.useSyncExternalStore(e,s,s);return{getToastToRender:function(j){if(!o)return[];const _e=new Map;return o.forEach(nt=>{const{position:tt}=nt.props;_e.has(tt)||_e.set(tt,[]),_e.get(tt).push(nt)}),Array.from(_e,nt=>j(nt[0],nt[1]))},isToastActive:I,count:o==null?void 0:o.length}}function N(i){const[e,s]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),j=reactExports.useRef(null),_e=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:nt,pauseOnHover:tt,closeToast:st,onClick:rt,closeOnClick:at}=i;var it,ct;function ot(){s(!0)}function ut(){s(!1)}function dt(xt){const mt=j.current;_e.canDrag&&mt&&(_e.didMove=!0,e&&ut(),_e.delta=i.draggableDirection==="x"?xt.clientX-_e.start:xt.clientY-_e.start,_e.start!==xt.clientX&&(_e.canCloseOnClick=!1),mt.style.transform=`translate3d(${i.draggableDirection==="x"?`${_e.delta}px, var(--y)`:`0, calc(${_e.delta}px + var(--y))`},0)`,mt.style.opacity=""+(1-Math.abs(_e.delta/_e.removalDistance)))}function lt(){document.removeEventListener("pointermove",dt),document.removeEventListener("pointerup",lt);const xt=j.current;if(_e.canDrag&&_e.didMove&&xt){if(_e.canDrag=!1,Math.abs(_e.delta)>_e.removalDistance)return o(!0),i.closeToast(),void i.collapseAll();xt.style.transition="transform 0.2s, opacity 0.2s",xt.style.removeProperty("transform"),xt.style.removeProperty("opacity")}}(ct=v.get((it={id:i.toastId,containerId:i.containerId,fn:s}).containerId||1))==null||ct.setToggle(it.id,it.fn),reactExports.useEffect(()=>{if(i.pauseOnFocusLoss)return document.hasFocus()||ut(),window.addEventListener("focus",ot),window.addEventListener("blur",ut),()=>{window.removeEventListener("focus",ot),window.removeEventListener("blur",ut)}},[i.pauseOnFocusLoss]);const ht={onPointerDown:function(xt){if(i.draggable===!0||i.draggable===xt.pointerType){_e.didMove=!1,document.addEventListener("pointermove",dt),document.addEventListener("pointerup",lt);const mt=j.current;_e.canCloseOnClick=!0,_e.canDrag=!0,mt.style.transition="none",i.draggableDirection==="x"?(_e.start=xt.clientX,_e.removalDistance=mt.offsetWidth*(i.draggablePercent/100)):(_e.start=xt.clientY,_e.removalDistance=mt.offsetHeight*(i.draggablePercent===80?1.5*i.draggablePercent:i.draggablePercent)/100)}},onPointerUp:function(xt){const{top:mt,bottom:ft,left:gt,right:pt}=j.current.getBoundingClientRect();xt.nativeEvent.type!=="touchend"&&i.pauseOnHover&&xt.clientX>=gt&&xt.clientX<=pt&&xt.clientY>=mt&&xt.clientY<=ft?ut():ot()}};return nt&&tt&&(ht.onMouseEnter=ut,i.stacked||(ht.onMouseLeave=ot)),at&&(ht.onClick=xt=>{rt&&rt(xt),_e.canCloseOnClick&&st()}),{playToast:ot,pauseToast:ut,isRunning:e,preventExitTransition:a,toastRef:j,eventHandlers:ht}}function $(i){let{delay:e,isRunning:s,closeToast:a,type:o="default",hide:j,className:_e,style:nt,controlledProgress:tt,progress:st,rtl:rt,isIn:at,theme:it}=i;const ct=j||tt&&st===0,ot={...nt,animationDuration:`${e}ms`,animationPlayState:s?"running":"paused"};tt&&(ot.transform=`scaleX(${st})`);const ut=clsx("Toastify__progress-bar",tt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${it}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":rt}),dt=u(_e)?_e({rtl:rt,type:o,defaultClassName:ut}):clsx(ut,_e),lt={[tt&&st>=1?"onTransitionEnd":"onAnimationEnd"]:tt&&st<1?null:()=>{at&&a()}};return React.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":ct},React.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${it} Toastify__progress-bar--${o}`}),React.createElement("div",{role:"progressbar","aria-hidden":ct?"true":"false","aria-label":"notification timer",className:dt,style:ot,...lt}))}let w=1;const k=()=>""+w++;function P(i){return i&&(d(i.toastId)||c(i.toastId))?i.toastId:k()}function M(i,e){return _(i,e),e.toastId}function x(i,e){return{...e,type:e&&e.type||i,toastId:P(e)}}function A(i){return(e,s)=>M(e,x(i,s))}function B(i,e){return M(i,x("default",e))}B.loading=(i,e)=>M(i,x("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),B.promise=function(i,e,s){let a,{pending:o,error:j,success:_e}=e;o&&(a=d(o)?B.loading(o,s):B.loading(o.render,{...s,...o}));const nt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},tt=(rt,at,it)=>{if(at==null)return void B.dismiss(a);const ct={type:rt,...nt,...s,data:it},ot=d(at)?{render:at}:at;return a?B.update(a,{...ct,...ot}):B(ot.render,{...ct,...ot}),it},st=u(i)?i():i;return st.then(rt=>tt("success",_e,rt)).catch(rt=>tt("error",j,rt)),st},B.success=A("success"),B.info=A("info"),B.error=A("error"),B.warning=A("warning"),B.warn=B.warning,B.dark=(i,e)=>M(i,x("default",{theme:"dark",...e})),B.dismiss=function(i){(function(e){var s;if(b()){if(e==null||d(s=e)||c(s))v.forEach(a=>{a.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const a=v.get(e.containerId);a?a.removeToast(e.id):v.forEach(o=>{o.removeToast(e.id)})}}else h=h.filter(a=>e!=null&&a.options.toastId!==e)})(i)},B.clearWaitingQueue=function(i){i===void 0&&(i={}),v.forEach(e=>{!e.props.limit||i.containerId&&e.id!==i.containerId||e.clearQueue()})},B.isActive=I,B.update=function(i,e){e===void 0&&(e={});const s=((a,o)=>{var j;let{containerId:_e}=o;return(j=v.get(_e||1))==null?void 0:j.toasts.get(a)})(i,e);if(s){const{props:a,content:o}=s,j={delay:100,...a,...e,toastId:e.toastId||i,updateId:k()};j.toastId!==i&&(j.staleId=i);const _e=j.render||o;delete j.render,M(_e,j)}},B.done=i=>{B.update(i,{progress:1})},B.onChange=function(i){return T.add(i),()=>{T.delete(i)}},B.play=i=>C(!0,i),B.pause=i=>C(!1,i);const O=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,D=i=>{let{theme:e,type:s,isLoading:a,...o}=i;return React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...o})},z={info:function(i){return React.createElement(D,{...i},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(i){return React.createElement(D,{...i},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(i){return React.createElement(D,{...i},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(i){return React.createElement(D,{...i},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return React.createElement("div",{className:"Toastify__spinner"})}},R=i=>{const{isRunning:e,preventExitTransition:s,toastRef:a,eventHandlers:o,playToast:j}=N(i),{closeButton:_e,children:nt,autoClose:tt,onClick:st,type:rt,hideProgressBar:at,closeToast:it,transition:ct,position:ot,className:ut,style:dt,bodyClassName:lt,bodyStyle:ht,progressClassName:xt,progressStyle:mt,updateId:ft,role:gt,progress:pt,rtl:vt,toastId:At,deleteToast:Rt,isIn:bt,isLoading:Tt,closeOnClick:Lt,theme:Yt}=i,zt=clsx("Toastify__toast",`Toastify__toast-theme--${Yt}`,`Toastify__toast--${rt}`,{"Toastify__toast--rtl":vt},{"Toastify__toast--close-on-click":Lt}),Wt=u(ut)?ut({rtl:vt,position:ot,type:rt,defaultClassName:zt}):clsx(zt,ut),Bt=function(Xt){let{theme:Ct,type:yt,isLoading:Et,icon:St}=Xt,Ft=null;const kt={theme:Ct,type:yt};return St===!1||(u(St)?Ft=St({...kt,isLoading:Et}):reactExports.isValidElement(St)?Ft=reactExports.cloneElement(St,kt):Et?Ft=z.spinner():(Ot=>Ot in z)(yt)&&(Ft=z[yt](kt))),Ft}(i),Ut=!!pt||!tt,_t={closeToast:it,type:rt,theme:Yt};let $t=null;return _e===!1||($t=u(_e)?_e(_t):reactExports.isValidElement(_e)?reactExports.cloneElement(_e,_t):function(Xt){let{closeToast:Ct,theme:yt,ariaLabel:Et="close"}=Xt;return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${yt}`,type:"button",onClick:St=>{St.stopPropagation(),Ct(St)},"aria-label":Et},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(_t)),React.createElement(ct,{isIn:bt,done:Rt,position:ot,preventExitTransition:s,nodeRef:a,playToast:j},React.createElement("div",{id:At,onClick:st,"data-in":bt,className:Wt,...o,style:dt,ref:a},React.createElement("div",{...bt&&{role:gt},className:u(lt)?lt({type:rt}):clsx("Toastify__toast-body",lt),style:ht},Bt!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Tt})},Bt),React.createElement("div",null,nt)),$t,React.createElement($,{...ft&&!Ut?{key:`pb-${ft}`}:{},rtl:vt,theme:Yt,delay:tt,isRunning:e,isIn:bt,closeToast:it,hide:at,type:rt,style:mt,className:xt,controlledProgress:Ut,progress:pt||0})))},S=function(i,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${i}-enter`,exit:`Toastify--animate Toastify__${i}-exit`,appendPosition:e}},H=g(S("bounce",!0));g(S("slide",!0));g(S("zoom"));g(S("flip"));const q={position:"top-right",transition:H,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Q(i){let e={...q,...i};const s=i.stacked,[a,o]=reactExports.useState(!0),j=reactExports.useRef(null),{getToastToRender:_e,isToastActive:nt,count:tt}=L(e),{className:st,style:rt,rtl:at,containerId:it}=e;function ct(ut){const dt=clsx("Toastify__toast-container",`Toastify__toast-container--${ut}`,{"Toastify__toast-container--rtl":at});return u(st)?st({position:ut,rtl:at,defaultClassName:dt}):clsx(dt,p(st))}function ot(){s&&(o(!0),B.play())}return O(()=>{if(s){var ut;const dt=j.current.querySelectorAll('[data-in="true"]'),lt=12,ht=(ut=e.position)==null?void 0:ut.includes("top");let xt=0,mt=0;Array.from(dt).reverse().forEach((ft,gt)=>{const pt=ft;pt.classList.add("Toastify__toast--stacked"),gt>0&&(pt.dataset.collapsed=`${a}`),pt.dataset.pos||(pt.dataset.pos=ht?"top":"bot");const vt=xt*(a?.2:1)+(a?0:lt*gt);pt.style.setProperty("--y",`${ht?vt:-1*vt}px`),pt.style.setProperty("--g",`${lt}`),pt.style.setProperty("--s",""+(1-(a?mt:0))),xt+=pt.offsetHeight,mt+=.025})}},[a,tt,s]),React.createElement("div",{ref:j,className:"Toastify",id:it,onMouseEnter:()=>{s&&(o(!1),B.pause())},onMouseLeave:ot},_e((ut,dt)=>{const lt=dt.length?{...rt}:{...rt,pointerEvents:"none"};return React.createElement("div",{className:ct(ut),style:lt,key:`container-${ut}`},dt.map(ht=>{let{content:xt,props:mt}=ht;return React.createElement(R,{...mt,stacked:s,collapseAll:ot,isIn:nt(mt.toastId,mt.containerId),style:mt.style,key:`toast-${mt.key}`},xt)}))}))}function _extends$1(){return _extends$1=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends$1.apply(this,arguments)}var useOnEscape=function(e,s){s===void 0&&(s=!0),reactExports.useEffect(function(){if(s){var a=function(j){j.key==="Escape"&&e(j)};return document.addEventListener("keyup",a),function(){s&&document.removeEventListener("keyup",a)}}},[e,s])},useRepositionOnResize=function(e,s){s===void 0&&(s=!0),reactExports.useEffect(function(){if(s){var a=function(){e()};return window.addEventListener("resize",a),function(){s&&window.removeEventListener("resize",a)}}},[e,s])},useOnClickOutside=function(e,s,a){a===void 0&&(a=!0),reactExports.useEffect(function(){if(a){var o=function(_e){var nt=Array.isArray(e)?e:[e],tt=!1;nt.forEach(function(st){if(!st.current||st.current.contains(_e.target)){tt=!0;return}}),_e.stopPropagation(),tt||s(_e)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){a&&(document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o))}}},[e,s,a])},useTabbing=function(e,s){s===void 0&&(s=!0),reactExports.useEffect(function(){if(s){var a=function(j){if(j.keyCode===9){var _e,nt=e==null||(_e=e.current)===null||_e===void 0?void 0:_e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),tt=Array.prototype.slice.call(nt);if(tt.length===1){j.preventDefault();return}var st=tt[0],rt=tt[tt.length-1];j.shiftKey&&document.activeElement===st?(j.preventDefault(),rt.focus()):document.activeElement===rt&&(j.preventDefault(),st.focus())}};return document.addEventListener("keydown",a),function(){s&&document.removeEventListener("keydown",a)}}},[e,s])},useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,Style={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},POSITION_TYPES=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],getCoordinatesForPosition=function(e,s,a,o,j){var _e=j.offsetX,nt=j.offsetY,tt=o?8:0,st=a.split(" "),rt=e.top+e.height/2,at=e.left+e.width/2,it=s.height,ct=s.width,ot=rt-it/2,ut=at-ct/2,dt="",lt="0%",ht="0%";switch(st[0]){case"top":ot-=it/2+e.height/2+tt,dt="rotate(180deg)  translateX(50%)",lt="100%",ht="50%";break;case"bottom":ot+=it/2+e.height/2+tt,dt="rotate(0deg) translateY(-100%) translateX(-50%)",ht="50%";break;case"left":ut-=ct/2+e.width/2+tt,dt=" rotate(90deg)  translateY(50%) translateX(-25%)",ht="100%",lt="50%";break;case"right":ut+=ct/2+e.width/2+tt,dt="rotate(-90deg)  translateY(-150%) translateX(25%)",lt="50%";break}switch(st[1]){case"top":ot=e.top,lt=e.height/2+"px";break;case"bottom":ot=e.top-it+e.height,lt=it-e.height/2+"px";break;case"left":ut=e.left,ht=e.width/2+"px";break;case"right":ut=e.left-ct+e.width,ht=ct-e.width/2+"px";break}return ot=st[0]==="top"?ot-nt:ot+nt,ut=st[0]==="left"?ut-_e:ut+_e,{top:ot,left:ut,transform:dt,arrowLeft:ht,arrowTop:lt}},getTooltipBoundary=function(e){var s={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof e=="string"){var a=document.querySelector(e);a!==null&&(s=a.getBoundingClientRect())}return s},calculatePosition=function(e,s,a,o,j,_e){var nt=j.offsetX,tt=j.offsetY,st={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},rt=0,at=getTooltipBoundary(_e),it=Array.isArray(a)?a:[a];for((_e||Array.isArray(a))&&(it=[].concat(it,POSITION_TYPES));rt<it.length;){st=getCoordinatesForPosition(e,s,it[rt],o,{offsetX:nt,offsetY:tt});var ct={top:st.top,left:st.left,width:s.width,height:s.height};if(ct.top<=at.top||ct.left<=at.left||ct.top+ct.height>=at.top+at.height||ct.left+ct.width>=at.left+at.width)rt++;else break}return st},popupIdCounter=0,getRootPopup=function(){var e=document.getElementById("popup-root");return e===null&&(e=document.createElement("div"),e.setAttribute("id","popup-root"),document.body.appendChild(e)),e},Popup=reactExports.forwardRef(function(i,e){var s=i.trigger,a=s===void 0?null:s,o=i.onOpen,j=o===void 0?function(){}:o,_e=i.onClose,nt=_e===void 0?function(){}:_e,tt=i.defaultOpen,st=tt===void 0?!1:tt,rt=i.open,at=rt===void 0?void 0:rt,it=i.disabled,ct=it===void 0?!1:it,ot=i.nested,ut=ot===void 0?!1:ot,dt=i.closeOnDocumentClick,lt=dt===void 0?!0:dt,ht=i.repositionOnResize,xt=ht===void 0?!0:ht,mt=i.closeOnEscape,ft=mt===void 0?!0:mt,gt=i.on,pt=gt===void 0?["click"]:gt,vt=i.contentStyle,At=vt===void 0?{}:vt,Rt=i.arrowStyle,bt=Rt===void 0?{}:Rt,Tt=i.overlayStyle,Lt=Tt===void 0?{}:Tt,Yt=i.className,zt=Yt===void 0?"":Yt,Wt=i.position,Bt=Wt===void 0?"bottom center":Wt,Ut=i.modal,_t=Ut===void 0?!1:Ut,$t=i.lockScroll,Xt=$t===void 0?!1:$t,Ct=i.arrow,yt=Ct===void 0?!0:Ct,Et=i.offsetX,St=Et===void 0?0:Et,Ft=i.offsetY,kt=Ft===void 0?0:Ft,Ot=i.mouseEnterDelay,Gt=Ot===void 0?100:Ot,Vt=i.mouseLeaveDelay,rn=Vt===void 0?100:Vt,an=i.keepTooltipInside,ln=an===void 0?!1:an,cn=i.children,dn=reactExports.useState(at||st),qt=dn[0],sn=dn[1],It=reactExports.useRef(null),Ht=reactExports.useRef(null),Qt=reactExports.useRef(null),tn=reactExports.useRef(null),un=reactExports.useRef("popup-"+ ++popupIdCounter),mn=_t?!0:!a,vn=reactExports.useRef(0);useIsomorphicLayoutEffect(function(){return qt?(tn.current=document.activeElement,Wn(),Un(),wn()):Dn(),function(){clearTimeout(vn.current)}},[qt]),reactExports.useEffect(function(){typeof at=="boolean"&&(at?Zt():An())},[at,ct]);var Zt=function(Jt){qt||ct||(sn(!0),setTimeout(function(){return j(Jt)},0))},An=function(Jt){var pn;!qt||ct||(sn(!1),mn&&((pn=tn.current)===null||pn===void 0||pn.focus()),setTimeout(function(){return nt(Jt)},0))},En=function(Jt){Jt==null||Jt.stopPropagation(),qt?An(Jt):Zt(Jt)},Fn=function(Jt){clearTimeout(vn.current),vn.current=setTimeout(function(){return Zt(Jt)},Gt)},Mn=function(Jt){Jt==null||Jt.preventDefault(),En()},Bn=function(Jt){clearTimeout(vn.current),vn.current=setTimeout(function(){return An(Jt)},rn)},wn=function(){mn&&Xt&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Dn=function(){mn&&Xt&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Un=function(){var Jt,pn=Ht==null||(Jt=Ht.current)===null||Jt===void 0?void 0:Jt.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),bn=Array.prototype.slice.call(pn)[0];bn==null||bn.focus()};reactExports.useImperativeHandle(e,function(){return{open:function(){Zt()},close:function(){An()},toggle:function(){En()}}});var Wn=function(){if(!(mn||!qt)&&!(!(It!=null&&It.current)||!(It!=null&&It.current)||!(Ht!=null&&Ht.current))){var Jt=It.current.getBoundingClientRect(),pn=Ht.current.getBoundingClientRect(),bn=calculatePosition(Jt,pn,Bt,yt,{offsetX:St,offsetY:kt},ln);if(Ht.current.style.top=bn.top+window.scrollY+"px",Ht.current.style.left=bn.left+window.scrollX+"px",yt&&Qt.current){var _n,xn;Qt.current.style.transform=bn.transform,Qt.current.style.setProperty("-ms-transform",bn.transform),Qt.current.style.setProperty("-webkit-transform",bn.transform),Qt.current.style.top=((_n=bt.top)===null||_n===void 0?void 0:_n.toString())||bn.arrowTop,Qt.current.style.left=((xn=bt.left)===null||xn===void 0?void 0:xn.toString())||bn.arrowLeft}}};useOnEscape(An,ft),useTabbing(Ht,qt&&mn),useRepositionOnResize(Wn,xt),useOnClickOutside(a?[Ht,It]:[Ht],An,lt&&!ut);var Tn=function(){for(var Jt={key:"T",ref:It,"aria-describedby":un.current},pn=Array.isArray(pt)?pt:[pt],bn=0,_n=pn.length;bn<_n;bn++)switch(pn[bn]){case"click":Jt.onClick=En;break;case"right-click":Jt.onContextMenu=Mn;break;case"hover":Jt.onMouseEnter=Fn,Jt.onMouseLeave=Bn;break;case"focus":Jt.onFocus=Fn,Jt.onBlur=Bn;break}if(typeof a=="function"){var xn=a(qt);return!!a&&React.cloneElement(xn,Jt)}return!!a&&React.cloneElement(a,Jt)},hn=function(){var Jt=mn?Style.popupContent.modal:Style.popupContent.tooltip,pn={className:"popup-content "+(zt!==""?zt.split(" ").map(function(bn){return bn+"-content"}).join(" "):""),style:_extends$1({},Jt,At,{pointerEvents:"auto"}),ref:Ht,onClick:function(_n){_n.stopPropagation()}};return!_t&&pt.indexOf("hover")>=0&&(pn.onMouseEnter=Fn,pn.onMouseLeave=Bn),pn},nn=function(){return React.createElement("div",Object.assign({},hn(),{key:"C",role:mn?"dialog":"tooltip",id:un.current}),yt&&!mn&&React.createElement("div",{ref:Qt,style:Style.popupArrow},React.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(zt!==""?zt.split(" ").map(function(Jt){return Jt+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:_extends$1({position:"absolute"},bt)},React.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),cn&&typeof cn=="function"?cn(An,qt):cn)},gn=!(pt.indexOf("hover")>=0),In=mn?Style.overlay.modal:Style.overlay.tooltip,Ln=[gn&&React.createElement("div",{key:"O","data-testid":"overlay","data-popup":mn?"modal":"tooltip",className:"popup-overlay "+(zt!==""?zt.split(" ").map(function(Mt){return Mt+"-overlay"}).join(" "):""),style:_extends$1({},In,Lt,{pointerEvents:lt&&ut||mn?"auto":"none"}),onClick:lt&&ut?An:void 0,tabIndex:-1},mn&&nn()),!mn&&nn()];return React.createElement(React.Fragment,null,Tn(),qt&&ReactDOM.createPortal(Ln,getRootPopup()))}),DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(i,e){if(i==null)return{};var s=_objectWithoutPropertiesLoose(i,e),a,o;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(i);for(o=0;o<j.length;o++)a=j[o],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(i,a)&&(s[a]=i[a])}return s}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var s={};for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){if(e.indexOf(a)>=0)continue;s[a]=i[a]}return s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},_extends.apply(this,arguments)}function ownKeys(i,e){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),s.push.apply(s,a)}return s}function _objectSpread(i){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(i,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(s,a))})}return i}function _defineProperty(i,e,s){return e=_toPropertyKey(e),e in i?Object.defineProperty(i,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[e]=s,i}function _toPropertyKey(i){var e=_toPrimitive(i,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(i,e){if(typeof i!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var a=s.call(i,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Tree2Element(i){return i&&i.map((e,s)=>React.createElement(e.tag,_objectSpread({key:s},e.attr),Tree2Element(e.child)))}function GenIcon(i){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},i.attr)},e),Tree2Element(i.child))}function IconBase(i){var e=s=>{var{attr:a,size:o,title:j}=i,_e=_objectWithoutProperties(i,_excluded),nt=o||s.size||"1em",tt;return s.className&&(tt=s.className),i.className&&(tt=(tt?tt+" ":"")+i.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,_e,{className:tt,style:_objectSpread(_objectSpread({color:i.color||s.color},s.style),i.style),height:nt,width:nt,xmlns:"http://www.w3.org/2000/svg"}),j&&React.createElement("title",null,j),i.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,s=>e(s)):e(DefaultContext)}function AiFillPicture(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zM338 304c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm513.9 437.1a8.11 8.11 0 0 1-5.2 1.9H177.2c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2l170.3-202c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l99.4 118 158.1-187.5c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l229.6 271.6c2.6 3.3 2.2 8.4-1.2 11.2z"},child:[]}]})(i)}function AiOutlinePlusCircle(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"},child:[]},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]}]})(i)}const Logo="/assets/logo-D9wdbh08.png",serverUrl$9="https://iiitr-connect.onrender.com";function TopBar(i){const{userData:e}=i,s=useNavigate(),a=encodeURIComponent(e.userId),o=`${serverUrl$9}/uploads/profile/${a}.png`,j=()=>{s("/profile",{state:{data:{userData:e}}})},_e=()=>{api.remove("IIITRID"),s("/login")};return jsxRuntimeExports.jsxs("div",{className:"topbar",children:[jsxRuntimeExports.jsx(Link,{to:"/",children:jsxRuntimeExports.jsx("img",{src:Logo,style:{width:"50px"}})}),jsxRuntimeExports.jsx(Popup,{contentStyle:{position:"absolute",top:"100px"},arrow:!1,trigger:jsxRuntimeExports.jsx("img",{src:o,className:"img",onError:nt=>{nt.target.onerror=null,nt.target.src=`${serverUrl$9}/uploads/default.png`}}),position:"bottom right",children:nt=>jsxRuntimeExports.jsxs("div",{className:"p-2",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2 d-flex flex-row prof",onClick:j,children:[jsxRuntimeExports.jsx("img",{src:o,className:"img2",onError:tt=>{tt.target.onerror=null,tt.target.src=`${serverUrl$9}/uploads/default.png`}}),jsxRuntimeExports.jsxs("span",{children:[e.surName," ",e.firstName]})]}),jsxRuntimeExports.jsx("span",{style:{cursor:"pointer"},onClick:_e,children:"Logout"})]})})]})}function BiDotsVerticalRounded(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(i)}function BiLike(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2zM4 10h2v9H4v-9zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7v1.819z"},child:[]}]})(i)}function BiSolidLike(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h1V8H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2zM20 8h-7l1.122-3.368A2 2 0 0 0 12.225 2H12L7 7.438V21h11l3.912-8.596L22 12v-2a2 2 0 0 0-2-2z"},child:[]}]})(i)}function FaArrowLeft(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(i)}function FaBullhorn(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(i)}function FaCamera(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(i)}function FaPlus(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(i)}function FaUserFriends(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(i)}function FaUserPlus(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(i)}function FaRegComment(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"},child:[]}]})(i)}function IoSend(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(i)}const copyProperty=(i,e,s,a)=>{if(s==="length"||s==="prototype"||s==="arguments"||s==="caller")return;const o=Object.getOwnPropertyDescriptor(i,s),j=Object.getOwnPropertyDescriptor(e,s);!canCopyProperty(o,j)&&a||Object.defineProperty(i,s,j)},canCopyProperty=function(i,e){return i===void 0||i.configurable||i.writable===e.writable&&i.enumerable===e.enumerable&&i.configurable===e.configurable&&(i.writable||i.value===e.value)},changePrototype=(i,e)=>{const s=Object.getPrototypeOf(e);s!==Object.getPrototypeOf(i)&&Object.setPrototypeOf(i,s)},wrappedToString=(i,e)=>`/* Wrapped ${i}*/
${e}`,toStringDescriptor=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),toStringName=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),changeToString=(i,e,s)=>{const a=s===""?"":`with ${s.trim()}() `,o=wrappedToString.bind(null,a,e.toString());Object.defineProperty(o,"name",toStringName),Object.defineProperty(i,"toString",{...toStringDescriptor,value:o})},mimicFn$1=(i,e,{ignoreNonConfigurable:s=!1}={})=>{const{name:a}=i;for(const o of Reflect.ownKeys(e))copyProperty(i,e,o,s);return changePrototype(i,e),changeToString(i,e,a),i};var mimicFn_1=mimicFn$1,dist$1={exports:{}},pDefer=()=>{const i={};return i.promise=new Promise((e,s)=>{i.resolve=e,i.reject=s}),i};(function(i,e){var s=commonjsGlobal&&commonjsGlobal.__awaiter||function(_e,nt,tt,st){return new(tt||(tt=Promise))(function(rt,at){function it(ut){try{ot(st.next(ut))}catch(dt){at(dt)}}function ct(ut){try{ot(st.throw(ut))}catch(dt){at(dt)}}function ot(ut){ut.done?rt(ut.value):new tt(function(dt){dt(ut.value)}).then(it,ct)}ot((st=st.apply(_e,nt||[])).next())})},a=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(pDefer);function j(_e,nt="maxAge"){let tt,st,rt;const at=()=>s(this,void 0,void 0,function*(){if(tt!==void 0)return;const ot=ut=>s(this,void 0,void 0,function*(){rt=o.default();const dt=ut[1][nt]-Date.now();if(dt<=0){_e.delete(ut[0]),rt.resolve();return}return tt=ut[0],st=setTimeout(()=>{_e.delete(ut[0]),rt&&rt.resolve()},dt),typeof st.unref=="function"&&st.unref(),rt.promise});try{for(const ut of _e)yield ot(ut)}catch{}tt=void 0}),it=()=>{tt=void 0,st!==void 0&&(clearTimeout(st),st=void 0),rt!==void 0&&(rt.reject(void 0),rt=void 0)},ct=_e.set.bind(_e);return _e.set=(ot,ut)=>{_e.has(ot)&&_e.delete(ot);const dt=ct(ot,ut);return tt&&tt===ot&&it(),at(),dt},at(),_e}e.default=j,i.exports=j,i.exports.default=j})(dist$1,dist$1.exports);var distExports=dist$1.exports;const mimicFn=mimicFn_1,mapAgeCleaner=distExports,decoratorInstanceMap=new WeakMap,cacheStore=new WeakMap,mem=(i,{cacheKey:e,cache:s=new Map,maxAge:a}={})=>{typeof a=="number"&&mapAgeCleaner(s);const o=function(...j){const _e=e?e(j):j[0],nt=s.get(_e);if(nt)return nt.data;const tt=i.apply(this,j);return s.set(_e,{data:tt,maxAge:a?Date.now()+a:Number.POSITIVE_INFINITY}),tt};return mimicFn(o,i,{ignoreNonConfigurable:!0}),cacheStore.set(o,s),o};mem.decorator=(i={})=>(e,s,a)=>{const o=e[s];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete a.value,delete a.writable,a.get=function(){if(!decoratorInstanceMap.has(this)){const j=mem(o,i);return decoratorInstanceMap.set(this,j),j}return decoratorInstanceMap.get(this)}};mem.clear=i=>{const e=cacheStore.get(i);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var dist=mem;const mem$1=getDefaultExportFromCjs(dist);function isString$1(i){return typeof i=="string"}function isUnique(i,e,s){return s.indexOf(i)===e}function isAllLowerCase(i){return i.toLowerCase()===i}function fixCommas(i){return i.indexOf(",")===-1?i:i.split(",")}function normalizeLocale(i){if(!i)return i;if(i==="C"||i==="posix"||i==="POSIX")return"en-US";if(i.indexOf(".")!==-1){var e=i.split(".")[0],s=e===void 0?"":e;return normalizeLocale(s)}if(i.indexOf("@")!==-1){var a=i.split("@")[0],s=a===void 0?"":a;return normalizeLocale(s)}if(i.indexOf("-")===-1||!isAllLowerCase(i))return i;var o=i.split("-"),j=o[0],_e=o[1],nt=_e===void 0?"":_e;return"".concat(j,"-").concat(nt.toUpperCase())}function getUserLocalesInternal(i){var e=i===void 0?{}:i,s=e.useFallbackLocale,a=s===void 0?!0:s,o=e.fallbackLocale,j=o===void 0?"en-US":o,_e=[];if(typeof navigator<"u"){for(var nt=navigator.languages||[],tt=[],st=0,rt=nt;st<rt.length;st++){var at=rt[st];tt=tt.concat(fixCommas(at))}var it=navigator.language,ct=it&&fixCommas(it);_e=_e.concat(tt,ct)}return a&&_e.push(j),_e.filter(isString$1).map(normalizeLocale).filter(isUnique)}var getUserLocales=mem$1(getUserLocalesInternal,{cacheKey:JSON.stringify});function getUserLocaleInternal(i){return getUserLocales(i)[0]||null}var getUserLocale=mem$1(getUserLocaleInternal,{cacheKey:JSON.stringify});function makeGetEdgeOfNeighbor(i,e,s){return function(o,j){j===void 0&&(j=s);var _e=i(o)+j;return e(_e)}}function makeGetEnd(i){return function(s){return new Date(i(s).getTime()-1)}}function makeGetRange(i,e){return function(a){return[i(a),e(a)]}}function getYear(i){if(i instanceof Date)return i.getFullYear();if(typeof i=="number")return i;var e=parseInt(i,10);if(typeof i=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(i,"."))}function getMonth(i){if(i instanceof Date)return i.getMonth();throw new Error("Failed to get month from date: ".concat(i,"."))}function getDate(i){if(i instanceof Date)return i.getDate();throw new Error("Failed to get year from date: ".concat(i,"."))}function getCenturyStart(i){var e=getYear(i),s=e+(-e+1)%100,a=new Date;return a.setFullYear(s,0,1),a.setHours(0,0,0,0),a}var getPreviousCenturyStart=makeGetEdgeOfNeighbor(getYear,getCenturyStart,-100),getNextCenturyStart=makeGetEdgeOfNeighbor(getYear,getCenturyStart,100),getCenturyEnd=makeGetEnd(getNextCenturyStart),getPreviousCenturyEnd=makeGetEdgeOfNeighbor(getYear,getCenturyEnd,-100),getCenturyRange=makeGetRange(getCenturyStart,getCenturyEnd);function getDecadeStart(i){var e=getYear(i),s=e+(-e+1)%10,a=new Date;return a.setFullYear(s,0,1),a.setHours(0,0,0,0),a}var getPreviousDecadeStart=makeGetEdgeOfNeighbor(getYear,getDecadeStart,-10),getNextDecadeStart=makeGetEdgeOfNeighbor(getYear,getDecadeStart,10),getDecadeEnd=makeGetEnd(getNextDecadeStart),getPreviousDecadeEnd=makeGetEdgeOfNeighbor(getYear,getDecadeEnd,-10),getDecadeRange=makeGetRange(getDecadeStart,getDecadeEnd);function getYearStart(i){var e=getYear(i),s=new Date;return s.setFullYear(e,0,1),s.setHours(0,0,0,0),s}var getPreviousYearStart=makeGetEdgeOfNeighbor(getYear,getYearStart,-1),getNextYearStart=makeGetEdgeOfNeighbor(getYear,getYearStart,1),getYearEnd=makeGetEnd(getNextYearStart),getPreviousYearEnd=makeGetEdgeOfNeighbor(getYear,getYearEnd,-1),getYearRange=makeGetRange(getYearStart,getYearEnd);function makeGetEdgeOfNeighborMonth(i,e){return function(a,o){o===void 0&&(o=e);var j=getYear(a),_e=getMonth(a)+o,nt=new Date;return nt.setFullYear(j,_e,1),nt.setHours(0,0,0,0),i(nt)}}function getMonthStart(i){var e=getYear(i),s=getMonth(i),a=new Date;return a.setFullYear(e,s,1),a.setHours(0,0,0,0),a}var getPreviousMonthStart=makeGetEdgeOfNeighborMonth(getMonthStart,-1),getNextMonthStart=makeGetEdgeOfNeighborMonth(getMonthStart,1),getMonthEnd=makeGetEnd(getNextMonthStart),getPreviousMonthEnd=makeGetEdgeOfNeighborMonth(getMonthEnd,-1),getMonthRange=makeGetRange(getMonthStart,getMonthEnd);function makeGetEdgeOfNeighborDay(i,e){return function(a,o){o===void 0&&(o=e);var j=getYear(a),_e=getMonth(a),nt=getDate(a)+o,tt=new Date;return tt.setFullYear(j,_e,nt),tt.setHours(0,0,0,0),i(tt)}}function getDayStart(i){var e=getYear(i),s=getMonth(i),a=getDate(i),o=new Date;return o.setFullYear(e,s,a),o.setHours(0,0,0,0),o}var getNextDayStart=makeGetEdgeOfNeighborDay(getDayStart,1),getDayEnd=makeGetEnd(getNextDayStart),getDayRange=makeGetRange(getDayStart,getDayEnd);function getDaysInMonth(i){return getDate(getMonthEnd(i))}var _a,CALENDAR_TYPES={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},CALENDAR_TYPE_LOCALES=(_a={},_a[CALENDAR_TYPES.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],_a[CALENDAR_TYPES.HEBREW]=["he","he-IL"],_a[CALENDAR_TYPES.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],_a),WEEKDAYS=[0,1,2,3,4,5,6],formatterCache=new Map;function getFormatter(i){return function(s,a){var o=s||getUserLocale();formatterCache.has(o)||formatterCache.set(o,new Map);var j=formatterCache.get(o);return j.has(i)||j.set(i,new Intl.DateTimeFormat(o||void 0,i).format),j.get(i)(a)}}function toSafeHour(i){var e=new Date(i);return new Date(e.setHours(12))}function getSafeFormatter(i){return function(e,s){return getFormatter(i)(e,toSafeHour(s))}}var formatDayOptions={day:"numeric"},formatLongDateOptions={day:"numeric",month:"long",year:"numeric"},formatMonthOptions={month:"long"},formatMonthYearOptions={month:"long",year:"numeric"},formatShortWeekdayOptions={weekday:"short"},formatWeekdayOptions={weekday:"long"},formatYearOptions={year:"numeric"},formatDay=getSafeFormatter(formatDayOptions),formatLongDate=getSafeFormatter(formatLongDateOptions),formatMonth=getSafeFormatter(formatMonthOptions),formatMonthYear=getSafeFormatter(formatMonthYearOptions),formatShortWeekday=getSafeFormatter(formatShortWeekdayOptions),formatWeekday=getSafeFormatter(formatWeekdayOptions),formatYear=getSafeFormatter(formatYearOptions),SUNDAY=WEEKDAYS[0],FRIDAY=WEEKDAYS[5],SATURDAY=WEEKDAYS[6];function getDayOfWeek(i,e){e===void 0&&(e=CALENDAR_TYPES.ISO_8601);var s=i.getDay();switch(e){case CALENDAR_TYPES.ISO_8601:return(s+6)%7;case CALENDAR_TYPES.ISLAMIC:return(s+1)%7;case CALENDAR_TYPES.HEBREW:case CALENDAR_TYPES.GREGORY:return s;default:throw new Error("Unsupported calendar type.")}}function getBeginOfCenturyYear(i){var e=getCenturyStart(i);return getYear(e)}function getBeginOfDecadeYear(i){var e=getDecadeStart(i);return getYear(e)}function getBeginOfWeek(i,e){e===void 0&&(e=CALENDAR_TYPES.ISO_8601);var s=getYear(i),a=getMonth(i),o=i.getDate()-getDayOfWeek(i,e);return new Date(s,a,o)}function getWeekNumber(i,e){e===void 0&&(e=CALENDAR_TYPES.ISO_8601);var s=e===CALENDAR_TYPES.GREGORY?CALENDAR_TYPES.GREGORY:CALENDAR_TYPES.ISO_8601,a=getBeginOfWeek(i,e),o=getYear(i)+1,j,_e;do j=new Date(o,0,s===CALENDAR_TYPES.ISO_8601?4:1),_e=getBeginOfWeek(j,e),o-=1;while(i<_e);return Math.round((a.getTime()-_e.getTime())/(864e5*7))+1}function getBegin(i,e){switch(i){case"century":return getCenturyStart(e);case"decade":return getDecadeStart(e);case"year":return getYearStart(e);case"month":return getMonthStart(e);case"day":return getDayStart(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getBeginPrevious(i,e){switch(i){case"century":return getPreviousCenturyStart(e);case"decade":return getPreviousDecadeStart(e);case"year":return getPreviousYearStart(e);case"month":return getPreviousMonthStart(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getBeginNext(i,e){switch(i){case"century":return getNextCenturyStart(e);case"decade":return getNextDecadeStart(e);case"year":return getNextYearStart(e);case"month":return getNextMonthStart(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getBeginPrevious2(i,e){switch(i){case"decade":return getPreviousDecadeStart(e,-100);case"year":return getPreviousYearStart(e,-10);case"month":return getPreviousMonthStart(e,-12);default:throw new Error("Invalid rangeType: ".concat(i))}}function getBeginNext2(i,e){switch(i){case"decade":return getNextDecadeStart(e,100);case"year":return getNextYearStart(e,10);case"month":return getNextMonthStart(e,12);default:throw new Error("Invalid rangeType: ".concat(i))}}function getEnd(i,e){switch(i){case"century":return getCenturyEnd(e);case"decade":return getDecadeEnd(e);case"year":return getYearEnd(e);case"month":return getMonthEnd(e);case"day":return getDayEnd(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getEndPrevious(i,e){switch(i){case"century":return getPreviousCenturyEnd(e);case"decade":return getPreviousDecadeEnd(e);case"year":return getPreviousYearEnd(e);case"month":return getPreviousMonthEnd(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getEndPrevious2(i,e){switch(i){case"decade":return getPreviousDecadeEnd(e,-100);case"year":return getPreviousYearEnd(e,-10);case"month":return getPreviousMonthEnd(e,-12);default:throw new Error("Invalid rangeType: ".concat(i))}}function getRange(i,e){switch(i){case"century":return getCenturyRange(e);case"decade":return getDecadeRange(e);case"year":return getYearRange(e);case"month":return getMonthRange(e);case"day":return getDayRange(e);default:throw new Error("Invalid rangeType: ".concat(i))}}function getValueRange(i,e,s){var a=[e,s].sort(function(o,j){return o.getTime()-j.getTime()});return[getBegin(i,a[0]),getEnd(i,a[1])]}function toYearLabel(i,e,s){return e===void 0&&(e=formatYear),s.map(function(a){return e(i,a)}).join("  ")}function getCenturyLabel(i,e,s){return toYearLabel(i,e,getCenturyRange(s))}function getDecadeLabel(i,e,s){return toYearLabel(i,e,getDecadeRange(s))}function isCurrentDayOfWeek(i){return i.getDay()===new Date().getDay()}function isWeekend(i,e){e===void 0&&(e=CALENDAR_TYPES.ISO_8601);var s=i.getDay();switch(e){case CALENDAR_TYPES.ISLAMIC:case CALENDAR_TYPES.HEBREW:return s===FRIDAY||s===SATURDAY;case CALENDAR_TYPES.ISO_8601:case CALENDAR_TYPES.GREGORY:return s===SATURDAY||s===SUNDAY;default:throw new Error("Unsupported calendar type.")}}var className$6="react-calendar__navigation";function Navigation(i){var e=i.activeStartDate,s=i.drillUp,a=i.formatMonthYear,o=a===void 0?formatMonthYear:a,j=i.formatYear,_e=j===void 0?formatYear:j,nt=i.locale,tt=i.maxDate,st=i.minDate,rt=i.navigationAriaLabel,at=rt===void 0?"":rt,it=i.navigationAriaLive,ct=i.navigationLabel,ot=i.next2AriaLabel,ut=ot===void 0?"":ot,dt=i.next2Label,lt=dt===void 0?"":dt,ht=i.nextAriaLabel,xt=ht===void 0?"":ht,mt=i.nextLabel,ft=mt===void 0?"":mt,gt=i.prev2AriaLabel,pt=gt===void 0?"":gt,vt=i.prev2Label,At=vt===void 0?"":vt,Rt=i.prevAriaLabel,bt=Rt===void 0?"":Rt,Tt=i.prevLabel,Lt=Tt===void 0?"":Tt,Yt=i.setActiveStartDate,zt=i.showDoubleView,Wt=i.view,Bt=i.views,Ut=Bt.indexOf(Wt)>0,_t=Wt!=="century",$t=getBeginPrevious(Wt,e),Xt=_t?getBeginPrevious2(Wt,e):void 0,Ct=getBeginNext(Wt,e),yt=_t?getBeginNext2(Wt,e):void 0,Et=function(){if($t.getFullYear()<0)return!0;var cn=getEndPrevious(Wt,e);return st&&st>=cn}(),St=_t&&function(){if(Xt.getFullYear()<0)return!0;var cn=getEndPrevious2(Wt,e);return st&&st>=cn}(),Ft=tt&&tt<Ct,kt=_t&&tt&&tt<yt;function Ot(){Yt($t,"prev")}function Gt(){Yt(Xt,"prev2")}function Vt(){Yt(Ct,"next")}function rn(){Yt(yt,"next2")}function an(cn){var dn=function(){switch(Wt){case"century":return getCenturyLabel(nt,_e,cn);case"decade":return getDecadeLabel(nt,_e,cn);case"year":return _e(nt,cn);case"month":return o(nt,cn);default:throw new Error("Invalid view: ".concat(Wt,"."))}}();return ct?ct({date:cn,label:dn,locale:nt||getUserLocale()||void 0,view:Wt}):dn}function ln(){var cn="".concat(className$6,"__label");return jsxRuntimeExports.jsxs("button",{"aria-label":at,"aria-live":it,className:cn,disabled:!Ut,onClick:s,style:{flexGrow:1},type:"button",children:[jsxRuntimeExports.jsx("span",{className:"".concat(cn,"__labelText ").concat(cn,"__labelText--from"),children:an(e)}),zt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"".concat(cn,"__divider"),children:"  "}),jsxRuntimeExports.jsx("span",{className:"".concat(cn,"__labelText ").concat(cn,"__labelText--to"),children:an(Ct)})]}):null]})}return jsxRuntimeExports.jsxs("div",{className:className$6,children:[At!==null&&_t?jsxRuntimeExports.jsx("button",{"aria-label":pt,className:"".concat(className$6,"__arrow ").concat(className$6,"__prev2-button"),disabled:St,onClick:Gt,type:"button",children:At}):null,Lt!==null&&jsxRuntimeExports.jsx("button",{"aria-label":bt,className:"".concat(className$6,"__arrow ").concat(className$6,"__prev-button"),disabled:Et,onClick:Ot,type:"button",children:Lt}),ln(),ft!==null&&jsxRuntimeExports.jsx("button",{"aria-label":xt,className:"".concat(className$6,"__arrow ").concat(className$6,"__next-button"),disabled:Ft,onClick:Vt,type:"button",children:ft}),lt!==null&&_t?jsxRuntimeExports.jsx("button",{"aria-label":ut,className:"".concat(className$6,"__arrow ").concat(className$6,"__next2-button"),disabled:kt,onClick:rn,type:"button",children:lt}):null]})}var __assign$e=function(){return __assign$e=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$e.apply(this,arguments)},__rest$c=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function toPercent(i){return"".concat(i,"%")}function Flex(i){var e=i.children,s=i.className,a=i.count,o=i.direction,j=i.offset,_e=i.style,nt=i.wrap,tt=__rest$c(i,["children","className","count","direction","offset","style","wrap"]);return jsxRuntimeExports.jsx("div",__assign$e({className:s,style:__assign$e({display:"flex",flexDirection:o,flexWrap:nt?"wrap":"nowrap"},_e)},tt,{children:reactExports.Children.map(e,function(st,rt){var at=j&&rt===0?toPercent(100*j/a):null;return reactExports.cloneElement(st,__assign$e(__assign$e({},st.props),{style:{flexBasis:toPercent(100/a),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:at,marginInlineStart:at,marginInlineEnd:0}}))})}))}function between(i,e,s){return e&&e>i?e:s&&s<i?s:i}function isValueWithinRange(i,e){return e[0]<=i&&e[1]>=i}function isRangeWithinRange(i,e){return i[0]<=e[0]&&i[1]>=e[1]}function doRangesOverlap(i,e){return isValueWithinRange(i[0],e)||isValueWithinRange(i[1],e)}function getRangeClassNames(i,e,s){var a=doRangesOverlap(e,i),o=[];if(a){o.push(s);var j=isValueWithinRange(i[0],e),_e=isValueWithinRange(i[1],e);j&&o.push("".concat(s,"Start")),_e&&o.push("".concat(s,"End")),j&&_e&&o.push("".concat(s,"BothEnds"))}return o}function isCompleteValue(i){return Array.isArray(i)?i[0]!==null&&i[1]!==null:i!==null}function getTileClasses(i){if(!i)throw new Error("args is required");var e=i.value,s=i.date,a=i.hover,o="react-calendar__tile",j=[o];if(!s)return j;var _e=new Date,nt=function(){if(Array.isArray(s))return s;var ct=i.dateType;if(!ct)throw new Error("dateType is required when date is not an array of two dates");return getRange(ct,s)}();if(isValueWithinRange(_e,nt)&&j.push("".concat(o,"--now")),!e||!isCompleteValue(e))return j;var tt=function(){if(Array.isArray(e))return e;var ct=i.valueType;if(!ct)throw new Error("valueType is required when value is not an array of two dates");return getRange(ct,e)}();isRangeWithinRange(tt,nt)?j.push("".concat(o,"--active")):doRangesOverlap(tt,nt)&&j.push("".concat(o,"--hasActive"));var st=getRangeClassNames(tt,nt,"".concat(o,"--range"));j.push.apply(j,st);var rt=Array.isArray(e)?e:[e];if(a&&rt.length===1){var at=a>tt[0]?[tt[0],a]:[a,tt[0]],it=getRangeClassNames(at,nt,"".concat(o,"--hover"));j.push.apply(j,it)}return j}function TileGroup(i){for(var e=i.className,s=i.count,a=s===void 0?3:s,o=i.dateTransform,j=i.dateType,_e=i.end,nt=i.hover,tt=i.offset,st=i.renderTile,rt=i.start,at=i.step,it=at===void 0?1:at,ct=i.value,ot=i.valueType,ut=[],dt=rt;dt<=_e;dt+=it){var lt=o(dt);ut.push(st({classes:getTileClasses({date:lt,dateType:j,hover:nt,value:ct,valueType:ot}),date:lt}))}return jsxRuntimeExports.jsx(Flex,{className:e,count:a,offset:tt,wrap:!0,children:ut})}function Tile(i){var e=i.activeStartDate,s=i.children,a=i.classes,o=i.date,j=i.formatAbbr,_e=i.locale,nt=i.maxDate,tt=i.maxDateTransform,st=i.minDate,rt=i.minDateTransform,at=i.onClick,it=i.onMouseOver,ct=i.style,ot=i.tileClassName,ut=i.tileContent,dt=i.tileDisabled,lt=i.view,ht=reactExports.useMemo(function(){var mt={activeStartDate:e,date:o,view:lt};return typeof ot=="function"?ot(mt):ot},[e,o,ot,lt]),xt=reactExports.useMemo(function(){var mt={activeStartDate:e,date:o,view:lt};return typeof ut=="function"?ut(mt):ut},[e,o,ut,lt]);return jsxRuntimeExports.jsxs("button",{className:clsx(a,ht),disabled:st&&rt(st)>o||nt&&tt(nt)<o||dt&&dt({activeStartDate:e,date:o,view:lt}),onClick:at?function(mt){return at(o,mt)}:void 0,onFocus:it?function(){return it(o)}:void 0,onMouseOver:it?function(){return it(o)}:void 0,style:ct,type:"button",children:[j?jsxRuntimeExports.jsx("abbr",{"aria-label":j(_e,o),children:s}):s,xt]})}var __assign$d=function(){return __assign$d=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$d.apply(this,arguments)},__rest$b=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s},className$5="react-calendar__century-view__decades__decade";function Decade(i){var e=i.classes,s=e===void 0?[]:e,a=i.currentCentury,o=i.formatYear,j=o===void 0?formatYear:o,_e=__rest$b(i,["classes","currentCentury","formatYear"]),nt=_e.date,tt=_e.locale,st=[];return s&&st.push.apply(st,s),className$5&&st.push(className$5),getCenturyStart(nt).getFullYear()!==a&&st.push("".concat(className$5,"--neighboringCentury")),jsxRuntimeExports.jsx(Tile,__assign$d({},_e,{classes:st,maxDateTransform:getDecadeEnd,minDateTransform:getDecadeStart,view:"century",children:getDecadeLabel(tt,j,nt)}))}var __assign$c=function(){return __assign$c=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$c.apply(this,arguments)},__rest$a=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function Decades(i){var e=i.activeStartDate,s=i.hover,a=i.showNeighboringCentury,o=i.value,j=i.valueType,_e=__rest$a(i,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),nt=getBeginOfCenturyYear(e),tt=nt+(a?119:99);return jsxRuntimeExports.jsx(TileGroup,{className:"react-calendar__century-view__decades",dateTransform:getDecadeStart,dateType:"decade",end:tt,hover:s,renderTile:function(st){var rt=st.date,at=__rest$a(st,["date"]);return jsxRuntimeExports.jsx(Decade,__assign$c({},_e,at,{activeStartDate:e,currentCentury:nt,date:rt}),rt.getTime())},start:nt,step:10,value:o,valueType:j})}var __assign$b=function(){return __assign$b=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$b.apply(this,arguments)};function CenturyView(i){function e(){return jsxRuntimeExports.jsx(Decades,__assign$b({},i))}return jsxRuntimeExports.jsx("div",{className:"react-calendar__century-view",children:e()})}var __assign$a=function(){return __assign$a=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$a.apply(this,arguments)},__rest$9=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s},className$4="react-calendar__decade-view__years__year";function Year(i){var e=i.classes,s=e===void 0?[]:e,a=i.currentDecade,o=i.formatYear,j=o===void 0?formatYear:o,_e=__rest$9(i,["classes","currentDecade","formatYear"]),nt=_e.date,tt=_e.locale,st=[];return s&&st.push.apply(st,s),className$4&&st.push(className$4),getDecadeStart(nt).getFullYear()!==a&&st.push("".concat(className$4,"--neighboringDecade")),jsxRuntimeExports.jsx(Tile,__assign$a({},_e,{classes:st,maxDateTransform:getYearEnd,minDateTransform:getYearStart,view:"decade",children:j(tt,nt)}))}var __assign$9=function(){return __assign$9=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$9.apply(this,arguments)},__rest$8=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function Years(i){var e=i.activeStartDate,s=i.hover,a=i.showNeighboringDecade,o=i.value,j=i.valueType,_e=__rest$8(i,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),nt=getBeginOfDecadeYear(e),tt=nt+(a?11:9);return jsxRuntimeExports.jsx(TileGroup,{className:"react-calendar__decade-view__years",dateTransform:getYearStart,dateType:"year",end:tt,hover:s,renderTile:function(st){var rt=st.date,at=__rest$8(st,["date"]);return jsxRuntimeExports.jsx(Year,__assign$9({},_e,at,{activeStartDate:e,currentDecade:nt,date:rt}),rt.getTime())},start:nt,value:o,valueType:j})}var __assign$8=function(){return __assign$8=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$8.apply(this,arguments)};function DecadeView(i){function e(){return jsxRuntimeExports.jsx(Years,__assign$8({},i))}return jsxRuntimeExports.jsx("div",{className:"react-calendar__decade-view",children:e()})}var __assign$7=function(){return __assign$7=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$7.apply(this,arguments)},__rest$7=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s},__spreadArray$1=function(i,e,s){if(s||arguments.length===2)for(var a=0,o=e.length,j;a<o;a++)(j||!(a in e))&&(j||(j=Array.prototype.slice.call(e,0,a)),j[a]=e[a]);return i.concat(j||Array.prototype.slice.call(e))},className$3="react-calendar__year-view__months__month";function Month(i){var e=i.classes,s=e===void 0?[]:e,a=i.formatMonth,o=a===void 0?formatMonth:a,j=i.formatMonthYear,_e=j===void 0?formatMonthYear:j,nt=__rest$7(i,["classes","formatMonth","formatMonthYear"]),tt=nt.date,st=nt.locale;return jsxRuntimeExports.jsx(Tile,__assign$7({},nt,{classes:__spreadArray$1(__spreadArray$1([],s,!0),[className$3],!1),formatAbbr:_e,maxDateTransform:getMonthEnd,minDateTransform:getMonthStart,view:"year",children:o(st,tt)}))}var __assign$6=function(){return __assign$6=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$6.apply(this,arguments)},__rest$6=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function Months(i){var e=i.activeStartDate,s=i.hover,a=i.value,o=i.valueType,j=__rest$6(i,["activeStartDate","hover","value","valueType"]),_e=0,nt=11,tt=getYear(e);return jsxRuntimeExports.jsx(TileGroup,{className:"react-calendar__year-view__months",dateTransform:function(st){var rt=new Date;return rt.setFullYear(tt,st,1),getMonthStart(rt)},dateType:"month",end:nt,hover:s,renderTile:function(st){var rt=st.date,at=__rest$6(st,["date"]);return jsxRuntimeExports.jsx(Month,__assign$6({},j,at,{activeStartDate:e,date:rt}),rt.getTime())},start:_e,value:a,valueType:o})}var __assign$5=function(){return __assign$5=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$5.apply(this,arguments)};function YearView(i){function e(){return jsxRuntimeExports.jsx(Months,__assign$5({},i))}return jsxRuntimeExports.jsx("div",{className:"react-calendar__year-view",children:e()})}var __assign$4=function(){return __assign$4=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$4.apply(this,arguments)},__rest$5=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s},className$2="react-calendar__month-view__days__day";function Day(i){var e=i.calendarType,s=i.classes,a=s===void 0?[]:s,o=i.currentMonthIndex,j=i.formatDay,_e=j===void 0?formatDay:j,nt=i.formatLongDate,tt=nt===void 0?formatLongDate:nt,st=__rest$5(i,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),rt=st.date,at=st.locale,it=[];return a&&it.push.apply(it,a),className$2&&it.push(className$2),isWeekend(rt,e)&&it.push("".concat(className$2,"--weekend")),rt.getMonth()!==o&&it.push("".concat(className$2,"--neighboringMonth")),jsxRuntimeExports.jsx(Tile,__assign$4({},st,{classes:it,formatAbbr:tt,maxDateTransform:getDayEnd,minDateTransform:getDayStart,view:"month",children:_e(at,rt)}))}var __assign$3=function(){return __assign$3=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$3.apply(this,arguments)},__rest$4=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function Days(i){var e=i.activeStartDate,s=i.calendarType,a=i.hover,o=i.showFixedNumberOfWeeks,j=i.showNeighboringMonth,_e=i.value,nt=i.valueType,tt=__rest$4(i,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),st=getYear(e),rt=getMonth(e),at=o||j,it=getDayOfWeek(e,s),ct=at?0:it,ot=(at?-it:0)+1,ut=function(){if(o)return ot+6*7-1;var dt=getDaysInMonth(e);if(j){var lt=new Date;lt.setFullYear(st,rt,dt),lt.setHours(0,0,0,0);var ht=7-getDayOfWeek(lt,s)-1;return dt+ht}return dt}();return jsxRuntimeExports.jsx(TileGroup,{className:"react-calendar__month-view__days",count:7,dateTransform:function(dt){var lt=new Date;return lt.setFullYear(st,rt,dt),getDayStart(lt)},dateType:"day",hover:a,end:ut,renderTile:function(dt){var lt=dt.date,ht=__rest$4(dt,["date"]);return jsxRuntimeExports.jsx(Day,__assign$3({},tt,ht,{activeStartDate:e,calendarType:s,currentMonthIndex:rt,date:lt}),lt.getTime())},offset:ct,start:ot,value:_e,valueType:nt})}var className$1="react-calendar__month-view__weekdays",weekdayClassName="".concat(className$1,"__weekday");function Weekdays(i){for(var e=i.calendarType,s=i.formatShortWeekday,a=s===void 0?formatShortWeekday:s,o=i.formatWeekday,j=o===void 0?formatWeekday:o,_e=i.locale,nt=i.onMouseLeave,tt=new Date,st=getMonthStart(tt),rt=getYear(st),at=getMonth(st),it=[],ct=1;ct<=7;ct+=1){var ot=new Date(rt,at,ct-getDayOfWeek(st,e)),ut=j(_e,ot);it.push(jsxRuntimeExports.jsx("div",{className:clsx(weekdayClassName,isCurrentDayOfWeek(ot)&&"".concat(weekdayClassName,"--current"),isWeekend(ot,e)&&"".concat(weekdayClassName,"--weekend")),children:jsxRuntimeExports.jsx("abbr",{"aria-label":ut,title:ut,children:a(_e,ot).replace(".","")})},ct))}return jsxRuntimeExports.jsx(Flex,{className:className$1,count:7,onFocus:nt,onMouseOver:nt,children:it})}var __assign$2=function(){return __assign$2=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$2.apply(this,arguments)},__rest$3=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s},className="react-calendar__tile";function WeekNumber(i){var e=i.onClickWeekNumber,s=i.weekNumber,a=jsxRuntimeExports.jsx("span",{children:s});if(e){var o=i.date,j=i.onClickWeekNumber,_e=i.weekNumber,nt=__rest$3(i,["date","onClickWeekNumber","weekNumber"]);return jsxRuntimeExports.jsx("button",__assign$2({},nt,{className,onClick:function(tt){return j(_e,o,tt)},type:"button",children:a}))}else{i.date,i.onClickWeekNumber,i.weekNumber;var nt=__rest$3(i,["date","onClickWeekNumber","weekNumber"]);return jsxRuntimeExports.jsx("div",__assign$2({},nt,{className,children:a}))}}function WeekNumbers(i){var e=i.activeStartDate,s=i.calendarType,a=i.onClickWeekNumber,o=i.onMouseLeave,j=i.showFixedNumberOfWeeks,_e=function(){if(j)return 6;var st=getDaysInMonth(e),rt=getDayOfWeek(e,s),at=st-(7-rt);return 1+Math.ceil(at/7)}(),nt=function(){for(var st=getYear(e),rt=getMonth(e),at=getDate(e),it=[],ct=0;ct<_e;ct+=1)it.push(getBeginOfWeek(new Date(st,rt,at+ct*7),s));return it}(),tt=nt.map(function(st){return getWeekNumber(st,s)});return jsxRuntimeExports.jsx(Flex,{className:"react-calendar__month-view__weekNumbers",count:_e,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:tt.map(function(st,rt){var at=nt[rt];if(!at)throw new Error("date is not defined");return jsxRuntimeExports.jsx(WeekNumber,{date:at,onClickWeekNumber:a,weekNumber:st},st)})})}var __assign$1=function(){return __assign$1=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign$1.apply(this,arguments)},__rest$2=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};function getCalendarTypeFromLocale(i){if(i)for(var e=0,s=Object.entries(CALENDAR_TYPE_LOCALES);e<s.length;e++){var a=s[e],o=a[0],j=a[1];if(j.includes(i))return o}return CALENDAR_TYPES.ISO_8601}function MonthView(i){var e=i.activeStartDate,s=i.locale,a=i.onMouseLeave,o=i.showFixedNumberOfWeeks,j=i.calendarType,_e=j===void 0?getCalendarTypeFromLocale(s):j,nt=i.formatShortWeekday,tt=i.formatWeekday,st=i.onClickWeekNumber,rt=i.showWeekNumbers,at=__rest$2(i,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function it(){return jsxRuntimeExports.jsx(Weekdays,{calendarType:_e,formatShortWeekday:nt,formatWeekday:tt,locale:s,onMouseLeave:a})}function ct(){return rt?jsxRuntimeExports.jsx(WeekNumbers,{activeStartDate:e,calendarType:_e,onClickWeekNumber:st,onMouseLeave:a,showFixedNumberOfWeeks:o}):null}function ot(){return jsxRuntimeExports.jsx(Days,__assign$1({calendarType:_e},at))}var ut="react-calendar__month-view";return jsxRuntimeExports.jsx("div",{className:clsx(ut,rt?"".concat(ut,"--weekNumbers"):""),children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[ct(),jsxRuntimeExports.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[it(),ot()]})]})})}var __assign=function(){return __assign=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign.apply(this,arguments)},baseClassName="react-calendar",allViews=["century","decade","year","month"],allValueTypes=["decade","year","month","day"],defaultMinDate=new Date;defaultMinDate.setFullYear(1,0,1);defaultMinDate.setHours(0,0,0,0);var defaultMaxDate=new Date(864e13);function toDate(i){return i instanceof Date?i:new Date(i)}function getLimitedViews(i,e){return allViews.slice(allViews.indexOf(i),allViews.indexOf(e)+1)}function isViewAllowed(i,e,s){var a=getLimitedViews(e,s);return a.indexOf(i)!==-1}function getView(i,e,s){return i&&isViewAllowed(i,e,s)?i:s}function getValueType(i){var e=allViews.indexOf(i);return allValueTypes[e]}function getValue(i,e){var s=Array.isArray(i)?i[e]:i;if(!s)return null;var a=toDate(s);if(isNaN(a.getTime()))throw new Error("Invalid date: ".concat(i));return a}function getDetailValue(i,e){var s=i.value,a=i.minDate,o=i.maxDate,j=i.maxDetail,_e=getValue(s,e);if(!_e)return null;var nt=getValueType(j),tt=function(){switch(e){case 0:return getBegin(nt,_e);case 1:return getEnd(nt,_e);default:throw new Error("Invalid index value: ".concat(e))}}();return between(tt,a,o)}var getDetailValueFrom=function(i){return getDetailValue(i,0)},getDetailValueTo=function(i){return getDetailValue(i,1)},getDetailValueArray=function(i){return[getDetailValueFrom,getDetailValueTo].map(function(e){return e(i)})};function getActiveStartDate(i){var e=i.maxDate,s=i.maxDetail,a=i.minDate,o=i.minDetail,j=i.value,_e=i.view,nt=getView(_e,o,s),tt=getDetailValueFrom({value:j,minDate:a,maxDate:e,maxDetail:s})||new Date;return getBegin(nt,tt)}function getInitialActiveStartDate(i){var e=i.activeStartDate,s=i.defaultActiveStartDate,a=i.defaultValue,o=i.defaultView,j=i.maxDate,_e=i.maxDetail,nt=i.minDate,tt=i.minDetail,st=i.value,rt=i.view,at=getView(rt,tt,_e),it=e||s;return it?getBegin(at,it):getActiveStartDate({maxDate:j,maxDetail:_e,minDate:nt,minDetail:tt,value:st||a,view:rt||o})}function getIsSingleValue(i){return i&&(!Array.isArray(i)||i.length===1)}function areDatesEqual(i,e){return i instanceof Date&&e instanceof Date&&i.getTime()===e.getTime()}var Calendar=reactExports.forwardRef(function(e,s){var a=e.activeStartDate,o=e.allowPartialRange,j=e.calendarType,_e=e.className,nt=e.defaultActiveStartDate,tt=e.defaultValue,st=e.defaultView,rt=e.formatDay,at=e.formatLongDate,it=e.formatMonth,ct=e.formatMonthYear,ot=e.formatShortWeekday,ut=e.formatWeekday,dt=e.formatYear,lt=e.goToRangeStartOnSelect,ht=lt===void 0?!0:lt,xt=e.inputRef,mt=e.locale,ft=e.maxDate,gt=ft===void 0?defaultMaxDate:ft,pt=e.maxDetail,vt=pt===void 0?"month":pt,At=e.minDate,Rt=At===void 0?defaultMinDate:At,bt=e.minDetail,Tt=bt===void 0?"century":bt,Lt=e.navigationAriaLabel,Yt=e.navigationAriaLive,zt=e.navigationLabel,Wt=e.next2AriaLabel,Bt=e.next2Label,Ut=e.nextAriaLabel,_t=e.nextLabel,$t=e.onActiveStartDateChange,Xt=e.onChange,Ct=e.onClickDay,yt=e.onClickDecade,Et=e.onClickMonth,St=e.onClickWeekNumber,Ft=e.onClickYear,kt=e.onDrillDown,Ot=e.onDrillUp,Gt=e.onViewChange,Vt=e.prev2AriaLabel,rn=e.prev2Label,an=e.prevAriaLabel,ln=e.prevLabel,cn=e.returnValue,dn=cn===void 0?"start":cn,qt=e.selectRange,sn=e.showDoubleView,It=e.showFixedNumberOfWeeks,Ht=e.showNavigation,Qt=Ht===void 0?!0:Ht,tn=e.showNeighboringCentury,un=e.showNeighboringDecade,mn=e.showNeighboringMonth,vn=mn===void 0?!0:mn,Zt=e.showWeekNumbers,An=e.tileClassName,En=e.tileContent,Fn=e.tileDisabled,Mn=e.value,Bn=e.view,wn=reactExports.useState(nt),Dn=wn[0],Un=wn[1],Wn=reactExports.useState(null),Tn=Wn[0],hn=Wn[1],nn=reactExports.useState(Array.isArray(tt)?tt.map(function(Nn){return Nn!==null?toDate(Nn):null}):tt!=null?toDate(tt):null),gn=nn[0],In=nn[1],Ln=reactExports.useState(st),Mt=Ln[0],Jt=Ln[1],pn=a||Dn||getInitialActiveStartDate({activeStartDate:a,defaultActiveStartDate:nt,defaultValue:tt,defaultView:st,maxDate:gt,maxDetail:vt,minDate:Rt,minDetail:Tt,value:Mn,view:Bn}),bn=function(){var Nn=function(){return qt&&getIsSingleValue(gn)?gn:Mn!==void 0?Mn:gn}();return Nn?Array.isArray(Nn)?Nn.map(function(zn){return zn!==null?toDate(zn):null}):Nn!==null?toDate(Nn):null:null}(),_n=getValueType(vt),xn=getView(Bn||Mt,Tt,vt),Nt=getLimitedViews(Tt,vt),jt=qt?Tn:null,Kt=Nt.indexOf(xn)<Nt.length-1,en=Nt.indexOf(xn)>0,on=reactExports.useCallback(function(Nn){var zn=function(){switch(dn){case"start":return getDetailValueFrom;case"end":return getDetailValueTo;case"range":return getDetailValueArray;default:throw new Error("Invalid returnValue.")}}();return zn({maxDate:gt,maxDetail:vt,minDate:Rt,value:Nn})},[gt,vt,Rt,dn]),fn=reactExports.useCallback(function(Nn,zn){Un(Nn);var Kn={action:zn,activeStartDate:Nn,value:bn,view:xn};$t&&!areDatesEqual(pn,Nn)&&$t(Kn)},[pn,$t,bn,xn]),yn=reactExports.useCallback(function(Nn,zn){var Kn=function(){switch(xn){case"century":return yt;case"decade":return Ft;case"year":return Et;case"month":return Ct;default:throw new Error("Invalid view: ".concat(xn,"."))}}();Kn&&Kn(Nn,zn)},[Ct,yt,Et,Ft,xn]),Rn=reactExports.useCallback(function(Nn,zn){if(Kt){yn(Nn,zn);var Kn=Nt[Nt.indexOf(xn)+1];if(!Kn)throw new Error("Attempted to drill down from the lowest view.");Un(Nn),Jt(Kn);var Yn={action:"drillDown",activeStartDate:Nn,value:bn,view:Kn};$t&&!areDatesEqual(pn,Nn)&&$t(Yn),Gt&&xn!==Kn&&Gt(Yn),kt&&kt(Yn)}},[pn,Kt,$t,yn,kt,Gt,bn,xn,Nt]),kn=reactExports.useCallback(function(){if(en){var Nn=Nt[Nt.indexOf(xn)-1];if(!Nn)throw new Error("Attempted to drill up from the highest view.");var zn=getBegin(Nn,pn);Un(zn),Jt(Nn);var Kn={action:"drillUp",activeStartDate:zn,value:bn,view:Nn};$t&&!areDatesEqual(pn,zn)&&$t(Kn),Gt&&xn!==Nn&&Gt(Kn),Ot&&Ot(Kn)}},[pn,en,$t,Ot,Gt,bn,xn,Nt]),Sn=reactExports.useCallback(function(Nn,zn){var Kn=bn;yn(Nn,zn);var Yn=qt&&!getIsSingleValue(Kn),ts;if(qt)if(Yn)ts=getBegin(_n,Nn);else{if(!Kn)throw new Error("previousValue is required");if(Array.isArray(Kn))throw new Error("previousValue must not be an array");ts=getValueRange(_n,Kn,Nn)}else ts=on(Nn);var hs=!qt||Yn||ht?getActiveStartDate({maxDate:gt,maxDetail:vt,minDate:Rt,minDetail:Tt,value:ts,view:xn}):null;zn.persist(),Un(hs),In(ts);var gs={action:"onChange",activeStartDate:hs,value:ts,view:xn};if($t&&!areDatesEqual(pn,hs)&&$t(gs),Xt)if(qt){var No=getIsSingleValue(ts);if(!No)Xt(ts||null,zn);else if(o){if(Array.isArray(ts))throw new Error("value must not be an array");Xt([ts||null,null],zn)}}else Xt(ts||null,zn)},[pn,o,on,ht,gt,vt,Rt,Tt,$t,Xt,yn,qt,bn,_n,xn]);function jn(Nn){hn(Nn)}function Cn(){hn(null)}reactExports.useImperativeHandle(s,function(){return{activeStartDate:pn,drillDown:Rn,drillUp:kn,onChange:Sn,setActiveStartDate:fn,value:bn,view:xn}},[pn,Rn,kn,Sn,fn,bn,xn]);function Pn(Nn){var zn=Nn?getBeginNext(xn,pn):getBegin(xn,pn),Kn=Kt?Rn:Sn,Yn={activeStartDate:zn,hover:jt,locale:mt,maxDate:gt,minDate:Rt,onClick:Kn,onMouseOver:qt?jn:void 0,tileClassName:An,tileContent:En,tileDisabled:Fn,value:bn,valueType:_n};switch(xn){case"century":return jsxRuntimeExports.jsx(CenturyView,__assign({formatYear:dt,showNeighboringCentury:tn},Yn));case"decade":return jsxRuntimeExports.jsx(DecadeView,__assign({formatYear:dt,showNeighboringDecade:un},Yn));case"year":return jsxRuntimeExports.jsx(YearView,__assign({formatMonth:it,formatMonthYear:ct},Yn));case"month":return jsxRuntimeExports.jsx(MonthView,__assign({calendarType:j,formatDay:rt,formatLongDate:at,formatShortWeekday:ot,formatWeekday:ut,onClickWeekNumber:St,onMouseLeave:qt?Cn:void 0,showFixedNumberOfWeeks:typeof It<"u"?It:sn,showNeighboringMonth:vn,showWeekNumbers:Zt},Yn));default:throw new Error("Invalid view: ".concat(xn,"."))}}function On(){return Qt?jsxRuntimeExports.jsx(Navigation,{activeStartDate:pn,drillUp:kn,formatMonthYear:ct,formatYear:dt,locale:mt,maxDate:gt,minDate:Rt,navigationAriaLabel:Lt,navigationAriaLive:Yt,navigationLabel:zt,next2AriaLabel:Wt,next2Label:Bt,nextAriaLabel:Ut,nextLabel:_t,prev2AriaLabel:Vt,prev2Label:rn,prevAriaLabel:an,prevLabel:ln,setActiveStartDate:fn,showDoubleView:sn,view:xn,views:Nt}):null}var $n=Array.isArray(bn)?bn:[bn];return jsxRuntimeExports.jsxs("div",{className:clsx(baseClassName,qt&&$n.length===1&&"".concat(baseClassName,"--selectRange"),sn&&"".concat(baseClassName,"--doubleView"),_e),ref:xt,children:[On(),jsxRuntimeExports.jsxs("div",{className:"".concat(baseClassName,"__viewContainer"),onBlur:qt?Cn:void 0,onMouseLeave:qt?Cn:void 0,children:[Pn(),sn?Pn(!0):null]})]})});function MdAssignmentAdd(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 13c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm3 5.5h-2.5V21h-1v-2.5H15v-1h2.5V15h1v2.5H21v1z"},child:[]},{tag:"path",attr:{d:"M11.69 15c.36-.75.84-1.43 1.43-2H7v-2h11c1.07 0 2.09.25 3 .69V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6.69c-.44-.91-.69-1.93-.69-3 0-.34.03-.67.08-1H7v-2h4.69zM12 2.75c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM7 7h10v2H7V7z"},child:[]}]})(i)}function MdDelete(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(i)}function MdFileUpload(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(i)}function MdOutlineAssignment(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04a2.008 2.008 0 0 0-1.44 1.19c-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"},child:[]}]})(i)}const months$3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Home=()=>{const[i,e]=reactExports.useState(!1),[s,a]=reactExports.useState(!0),[o,j]=reactExports.useState({}),_e=useNavigate(),nt=reactExports.useRef(null),tt=reactExports.useRef(null),[st,rt]=reactExports.useState([]);let at=reactExports.useRef(null),it=reactExports.useRef(null),[ct,ot]=reactExports.useState([]),[ut,dt]=reactExports.useState([]);const[lt,ht]=reactExports.useState([]),[xt,mt]=reactExports.useState([]),ft=encodeURIComponent(o.email),gt="https://iiitr-connect.onrender.com",pt=`${gt}/uploads/profile/${ft}.png`;reactExports.useEffect(()=>{(async()=>{try{const _t=api.get("IIITRID"),$t=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if($t.ok){const St=await $t.json();if(console.log("data.data.isVerified",St.data.isVerified),!St.data.isVerified&&(await fetch("/api/register-verify",{method:"POST",headers:{Authorization:`Bearer ${_t}`,"Content-Type":"application/json"},body:JSON.stringify({email:St.data.email})})).ok)return _e("/verify",{state:{email:St.data.email}});a(!1),j(St.data)}else{const St=await $t.text();console.log(St)}const Xt=await fetch("/api/posts",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if(Xt.ok){const St=await Xt.json(),Ft=new Array(St.length).fill(!1);e(Ft),rt(St)}const Ct=await fetch("/api/events",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if(Ct.ok){const St=await Ct.json();ot(St);const Ft=new Date,kt=`${Ft.getDate()}-${Ft.getMonth()+1}-${Ft.getFullYear()}`;dt(St[kt]),console.log("data[str]",St[kt])}const yt=await fetch("/api/announcement2",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if(yt.ok){const St=await yt.json();ht(St)}const Et=await fetch("/api/assignments",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if(Et.ok){const St=await Et.json();mt(St)}}catch(_t){console.log(_t)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const _t=api.get("IIITRID"),$t=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${_t}`}});if($t.ok){const Xt=await $t.text();if(console.log("role  yy ",Xt),Xt=="admin")return _e("/admin")}}catch(_t){console.log(_t)}})()},[]),reactExports.useState({});const[vt,At]=reactExports.useState(),Rt=Ut=>{const _t=Ut.target.files[0];if(_t){At(_t);const $t=URL.createObjectURL(_t),Xt=_t.type.split("/")[0];tt.current.innerHTML="",tt.current&&(Xt==="image"?tt.current.innerHTML+=`<img src="${$t}" alt="uploaded" style="max-width: 100%;"/>`:Xt==="video"&&(tt.current.innerHTML+=`<video controls style="max-width: 100%;">
                                                <source src="${$t}" type="${_t.type}" />
                                                Your browser does not support the video tag.
                                               </video>`))}},bt=async Ut=>{const _t=new FormData;console.log("postContent1233 ",at.current,o),_t.append("description",at.current),_t.append("postMedia",vt),_t.append("postedBy",o.userId);const $t=api.get("IIITRID");console.log("Data",_t);const Xt=await fetch("/api/post",{method:"POST",headers:{Authorization:`Bearer ${$t}`},body:_t});if(Xt.ok)B("posted successfully"),Ut(),At(null);else{const Ct=await Xt.text();console.log("error",Ct)}},Tt=async Ut=>{let _t=[...st];st[Ut].isLiked?st[Ut].likes--:st[Ut].likes++,st[Ut].isLiked=!st[Ut].isLiked,console.log("posts[index].postId",st[Ut].postId),rt(_t);const $t=api.get("IIITRID"),Xt=await fetch("/api/like",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$t}`},body:JSON.stringify({postId:st[Ut].postId})});if(Xt.ok)close(),At(null);else{const Ct=await Xt.text();console.log("error",Ct)}},Lt=Ut=>{let _t=[...i];_t[Ut]=!_t[Ut],e(_t)},Yt=async Ut=>{const _t=api.get("IIITRID"),$t=await fetch("/api/post/comment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`},body:JSON.stringify({postId:Ut,comment:it.current})});if($t.ok)B("commented successfully"),close();else{const Xt=await $t.text();console.log("error",Xt)}},zt=Ut=>{let _t=new Date(Ut);const $t=(new Date-_t)/1e3,Xt=$t%60,yt=($t-Xt)/60,Et=yt/60,St=Et/24;let Ft="";const kt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return St>30?Ft=`${_t.getDate()}th ${kt[_t.getMonth()]} ${_t.getHours()}:${_t.getMinutes()}`:St>0?Ft=Math.floor(St)+" days ago":Et>0?Ft=Math.floor(Et)+" hours ago":yt>0?Ft=Math.floor(yt)+" minutes ago":Xt>0&&(Ft=Math.floor(Xt)+" seconds ago"),Ft},[Wt,Bt]=reactExports.useState("");return s?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TopBar,{userData:o}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsxs("div",{className:"bottom",children:[jsxRuntimeExports.jsx("div",{className:"leftbar",children:jsxRuntimeExports.jsxs("ul",{className:"sidebar",children:[jsxRuntimeExports.jsx("li",{className:"nb",children:jsxRuntimeExports.jsxs(Link,{className:"item",to:"/friends",onClick:()=>{},children:[jsxRuntimeExports.jsx(FaUserFriends,{className:"iop"}),jsxRuntimeExports.jsx("span",{children:"Friends"})]})}),jsxRuntimeExports.jsx("li",{className:"nb",children:jsxRuntimeExports.jsxs(Link,{className:"item",to:"/announcements",onClick:()=>{},children:[jsxRuntimeExports.jsx(FaBullhorn,{className:"iop"}),jsxRuntimeExports.jsx("span",{children:"Announcements"})]})}),jsxRuntimeExports.jsx("li",{className:"nb",children:jsxRuntimeExports.jsxs(Link,{className:"item",to:"/classrooms",onClick:()=>{},children:[jsxRuntimeExports.jsx(FaBullhorn,{className:"iop"}),jsxRuntimeExports.jsx("span",{children:"Classrooms"})]})}),jsxRuntimeExports.jsx("li",{className:"nb",children:jsxRuntimeExports.jsxs(Link,{className:"item",to:"/polls",onClick:()=>{},children:[jsxRuntimeExports.jsx(FaBullhorn,{className:"iop"}),jsxRuntimeExports.jsx("span",{children:"Polls"})]})}),console.log("userData.role",o.role),o.role==="faculty"&&jsxRuntimeExports.jsx("li",{className:"nb",children:jsxRuntimeExports.jsxs(Link,{className:"item",to:"/exam-announcement",onClick:()=>{},children:[jsxRuntimeExports.jsx(FaBullhorn,{className:"iop"}),jsxRuntimeExports.jsx("span",{children:"Post Exam Announcement"})]})}),jsxRuntimeExports.jsx(Calendar,{className:"calender",value:Wt,onChange:Ut=>{const _t=new Date(Ut),$t=`${_t.getDate()}-${_t.getMonth()+1}-${_t.getFullYear()}`;dt(ct[$t])}}),jsxRuntimeExports.jsx("ul",{className:"vb2",children:ut!=null&&ut.map(Ut=>{const _t=new Date(Ut.startTime),$t=new Date(Ut.endTime),Xt=`${_t.getHours()}:${_t.getMinutes()}`,Ct=`${$t.getHours()}:${$t.getMinutes()}`;return jsxRuntimeExports.jsxs("li",{className:"xd",children:[jsxRuntimeExports.jsx("span",{children:Ut.eventName}),jsxRuntimeExports.jsxs("span",{children:[Xt," - ",Ct]})]})})}),!ut&&jsxRuntimeExports.jsx("p",{children:"no events today"})]})}),jsxRuntimeExports.jsxs("div",{className:"middle",children:[jsxRuntimeExports.jsx("div",{className:"post",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Popup,{onOpen:()=>{nt.current&&(nt.current.focus(),nt.current.innerHTML="&#8203;")},contentStyle:{width:"500px",height:"550px",overflowY:"auto"},modal:!0,trigger:jsxRuntimeExports.jsx("div",{className:"post-input",children:jsxRuntimeExports.jsxs("span",{children:["What's on your mind, ",o.firstName," ",o.surName,"?"]})}),children:Ut=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"poptop",children:jsxRuntimeExports.jsx("h1",{className:"head2",children:"Create post"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pr",children:[jsxRuntimeExports.jsx("img",{src:pt,className:"img2"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("span",{children:[o.firstName," ",o.surName]})})]}),jsxRuntimeExports.jsxs("div",{className:"posty",children:[jsxRuntimeExports.jsx("div",{contentEditable:"true",className:"editor",ref:nt,onInput:_t=>{at.current=_t.target.innerHTML,console.log(at.current)},onPaste:_t=>{_t.preventDefault();const $t=_t.clipboardData.getData("text/plain");console.log("entered"),document.execCommand("insertText",!1,$t)}}),jsxRuntimeExports.jsx("div",{className:"postmediacontainer",ref:tt})]}),jsxRuntimeExports.jsxs("div",{className:"add",children:[jsxRuntimeExports.jsx("p",{children:"Add to your post"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{class:"custom-file-upload",children:[jsxRuntimeExports.jsx("i",{class:"fas fa-upload"}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx(AiFillPicture,{})]}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",name:"postMedia",onChange:Rt})]})})]}),jsxRuntimeExports.jsx("button",{onClick:_t=>{bt(Ut)},children:"Post"})]})]})})})}),jsxRuntimeExports.jsx("div",{className:"vb",children:st.map((Ut,_t)=>{console.log("post",Ut);let $t=zt(Ut.createdAt);return jsxRuntimeExports.jsxs("div",{className:"posts-conatiner",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx("img",{className:"thumb",src:`${gt}/uploads/profile/${Ut.postedBy}.png`}),jsxRuntimeExports.jsxs("div",{className:"rr",children:[jsxRuntimeExports.jsx("span",{children:Ut.name}),jsxRuntimeExports.jsx("span",{children:$t})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"post-description",dangerouslySetInnerHTML:{__html:Ut.description}}),console.log("post.files",Ut.files),Ut.files&&Ut.files.map((Xt,Ct)=>(console.log("media",Xt),Xt.endsWith(".mp4")?jsxRuntimeExports.jsx("video",{className:"post-vid",src:Xt,controls:!0},Ct):jsxRuntimeExports.jsx("img",{src:Xt,className:"post-vid"},Ct)))]}),jsxRuntimeExports.jsxs("div",{className:"tyu",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{children:[Ut.likes," likes"]})}),jsxRuntimeExports.jsxs("div",{className:"post-foot",children:[jsxRuntimeExports.jsxs("div",{className:"we",onClick:Xt=>{Tt(_t)},children:[Ut.isLiked?jsxRuntimeExports.jsx(BiSolidLike,{}):jsxRuntimeExports.jsx(BiLike,{}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:"Like"})]}),jsxRuntimeExports.jsxs("div",{className:"we",onClick:Xt=>{Lt(_t)},children:[jsxRuntimeExports.jsx(FaRegComment,{}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:"Comment"})]})]}),i[_t]&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"comments",children:Ut.comments.map(Xt=>{let Ct=zt(Xt.createdAt);return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row kop",children:[jsxRuntimeExports.jsx("img",{className:"commentBy",src:`${gt}/uploads/profile/${Xt.postedBy}.png`,onError:yt=>{yt.target.onerror=null,yt.target.src=`${gt}/uploads/default.png`}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"cmty",children:jsxRuntimeExports.jsx("p",{children:Xt.comment})}),jsxRuntimeExports.jsx("p",{className:"bnm",children:Ct})]})]})})}),jsxRuntimeExports.jsx("div",{className:"comment-box",children:jsxRuntimeExports.jsxs("div",{className:"comment",children:[jsxRuntimeExports.jsx("div",{contentEditable:"true",className:"cmt",placeholder:`comment as ${o.firstName} ${o.surName}`,onInput:Xt=>{it.current=Xt.target.innerHTML},onPaste:Xt=>{Xt.preventDefault();const Ct=Xt.clipboardData.getData("text/plain");document.execCommand("insertText",!1,Ct)}}),jsxRuntimeExports.jsx("div",{className:"d-flex flex-row justify-content-end",children:jsxRuntimeExports.jsx("button",{className:"send-comment",onClick:()=>{Yt(Ut.postId)},children:jsxRuntimeExports.jsx(IoSend,{})})})]})})]})]})]},_t)})})]}),jsxRuntimeExports.jsxs("div",{className:"right",children:[jsxRuntimeExports.jsx("h2",{className:"text-center w-100",children:"Announcements"}),jsxRuntimeExports.jsxs("div",{className:"cxz",children:[lt.map((Ut,_t)=>{const $t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xt=new Date(Ut.startTime),Ct=`${Xt.getDate()}th ${$t[Xt.getMonth()]} ${Xt.getHours()}:${Xt.getMinutes()}`;return jsxRuntimeExports.jsxs("div",{className:"poll",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[jsxRuntimeExports.jsx("p",{children:Ut.eventName}),jsxRuntimeExports.jsx("p",{children:Ct})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{children:Ut.announcement})})]},_t)}),lt.length===0&&jsxRuntimeExports.jsx("p",{children:"No announements now. Check later"}),o.role==="student"&&xt.length>0&&jsxRuntimeExports.jsxs("div",{style:{width:"90%"},children:[jsxRuntimeExports.jsx("h4",{children:"pending Assignments"}),xt.map(Ut=>{const _t=new Date(Ut.postedAt),$t=new Date(Ut.duedate),Xt=$t.getMonth(),Ct=$t.getDate();return _t.getMonth(),_t.getDate(),jsxRuntimeExports.jsxs("div",{className:"pp",style:{marginBottom:"10px",marginTop:"10px",display:"flex",alignItems:"center",border:"solid 1px grey",padding:"15px",borderRadius:"10px",width:"100%",cursor:"pointer",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row",children:[jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#5F6368",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"20px",marginRight:"15px"},children:jsxRuntimeExports.jsx(MdOutlineAssignment,{size:20,color:"white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:[" ",Ut.title]}),jsxRuntimeExports.jsx("p",{children:Ut.classRoom.className})]})]}),jsxRuntimeExports.jsxs("p",{children:["Due ",months$3[Xt]," ",Ct]})]})})]})]})]})]})]})};function IoIosArrowBack(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(i)}function IoIosArrowForward(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(i)}function IoIosArrowRoundBack(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z"},child:[]}]})(i)}function IoIosClose(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"},child:[]}]})(i)}function IoMdArrowBack(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M427 234.625H167.296l119.702-119.702L256 85 85 256l171 171 29.922-29.924-118.626-119.701H427v-42.75z"},child:[]}]})(i)}function IoMdClose(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(i)}const serverUrl$8="https://iiitr-connect.onrender.com";function Profile(){var Lt;const i=useLocation(),[e,s]=reactExports.useState(i.state?i.state.data.userData:{}),[a,o]=reactExports.useState(!i.state);a&&(async()=>{try{const Yt=api.get("IIITRID"),zt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${Yt}`}});if(zt.ok){const Wt=await zt.json();o(!1),s(Wt.data)}}catch(Yt){console.log(Yt)}})(),console.log(e);const _e=encodeURIComponent(e.userId),nt=`${serverUrl$8}/uploads/profile/${_e}.png`,tt=`${serverUrl$8}/uploads/cover/${e.userId}.png`,st=reactExports.useRef(null),rt=reactExports.useRef(null),[at,it]=reactExports.useState(!1),[ct,ot]=reactExports.useState(((Lt=e.info)==null?void 0:Lt.bio)||""),[ut,dt]=reactExports.useState(!0),[lt,ht]=reactExports.useState(null),[xt,mt]=reactExports.useState(null),[ft,gt]=reactExports.useState(!1);console.log("backgroundImage",lt);const pt=()=>{st.current.click()},vt=async Yt=>{const zt=Yt.target.files[0];if(zt){const _t=new FileReader;_t.onloadend=()=>{ht(_t.result)},_t.readAsDataURL(zt)}const Wt=new FormData;Wt.append("cover",zt);const Bt=api.get("IIITRID");(await fetch("/api/upload-cover",{method:"POST",headers:{Authorization:`Bearer ${Bt}`},body:Wt})).ok},At=()=>{rt.current.click()},Rt=async Yt=>{const zt=Yt.target.files[0];if(zt){const _t=new FileReader;_t.onloadend=()=>{mt(_t.result)},_t.readAsDataURL(zt)}const Wt=new FormData;Wt.append("cover",zt);const Bt=api.get("IIITRID");(await fetch("/api/upload-profile-pic",{method:"POST",headers:{Authorization:`Bearer ${Bt}`},body:Wt})).ok},bt=async Yt=>{s(Bt=>({...Bt,info:{...Bt.info,bio:ct}})),it(!1);const zt=api.get("IIITRID");(await fetch("/api/edit-bio",{method:"PUT",headers:{Authorization:`Bearer ${zt}`,"Content-Type":"application/json"},body:JSON.stringify({bio:ct})})).ok},Tt=()=>e.role=="student"?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{children:["branch: ",e.info.branch]})}):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{children:["department: ",e.info.department]})});return a?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{closeOnDocumentClick:!1,open:ft,onClose:()=>{gt(!1)},contentStyle:{width:"600px",height:"600px"},children:jsxRuntimeExports.jsxs("div",{className:"uiop",children:[jsxRuntimeExports.jsxs("div",{className:"lop",children:[jsxRuntimeExports.jsx("h2",{style:{textAlign:"center"},children:"Edit Details"}),jsxRuntimeExports.jsx("button",{onClick:()=>{gt(!1)},children:jsxRuntimeExports.jsx(IoMdClose,{className:"ivb"})})]}),jsxRuntimeExports.jsxs("div",{className:"edit-bot",children:[jsxRuntimeExports.jsx("p",{children:"Details that you select will be Public and appear at the top of your profile."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"pooi",children:"Education"}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kl",children:[jsxRuntimeExports.jsx(AiOutlinePlusCircle,{className:"rty"}),jsxRuntimeExports.jsx("p",{className:"mk",children:"Add secondary school"})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kl",children:[jsxRuntimeExports.jsx(AiOutlinePlusCircle,{className:"rty"}),jsxRuntimeExports.jsx("p",{className:"mk",children:"Add University"})]}),jsxRuntimeExports.jsx("p",{className:"pooi",children:"Current city"}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kl",children:[jsxRuntimeExports.jsx(AiOutlinePlusCircle,{className:"rty"}),jsxRuntimeExports.jsx("p",{className:"mk",children:"Add Current city"})]}),jsxRuntimeExports.jsx("p",{className:"pooi",children:"Hometown"}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kl",children:[jsxRuntimeExports.jsx(AiOutlinePlusCircle,{className:"rty"}),jsxRuntimeExports.jsx("p",{className:"mk",children:"Add Hometown"})]})]})]})]})}),jsxRuntimeExports.jsx(TopBar,{userData:e}),jsxRuntimeExports.jsx("div",{className:"profile-bottom ",children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center",children:[jsxRuntimeExports.jsxs("div",{className:"cover",style:{backgroundImage:lt?`url(${lt})`:`url(${tt})`,backgroundSize:"cover",backgroundPosition:"center",height:"300px",width:"100%"},children:[jsxRuntimeExports.jsx("button",{className:"ico",onClick:pt,children:jsxRuntimeExports.jsx(FaCamera,{})}),jsxRuntimeExports.jsx("input",{type:"file",ref:st,onChange:vt,style:{display:"none"}}),jsxRuntimeExports.jsx("img",{src:xt||nt,className:"img3"}),jsxRuntimeExports.jsxs("div",{className:"ghj",children:[jsxRuntimeExports.jsx("button",{className:"ico",onClick:At,children:jsxRuntimeExports.jsx(FaCamera,{})}),jsxRuntimeExports.jsx("input",{type:"file",ref:rt,onChange:Rt,style:{display:"none"}})]})]}),jsxRuntimeExports.jsxs("div",{className:"tu",children:[jsxRuntimeExports.jsxs("h1",{children:[e.surName," ",e.firstName]}),Tt()]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("ul",{})}),jsxRuntimeExports.jsxs("div",{className:"prof-int",children:[jsxRuntimeExports.jsx("h3",{children:"Intro"}),e.info.bio&&!at&&jsxRuntimeExports.jsx("p",{children:e.info.bio}),at&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("textarea",{className:"bio",rows:"3",cols:"47",value:ct,onChange:Yt=>{Yt.target.value==""?dt(!0):dt(!1),ot(Yt.target.value)}}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-end mb-3",children:[jsxRuntimeExports.jsx("button",{className:"ty",onClick:()=>{it(!1)},children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"ty",disabled:ut,onClick:bt,children:"Save"})]})]}),!at&&jsxRuntimeExports.jsx("button",{className:"edit-pro-btn",onClick:()=>{it(!0)},children:e.info.bio?"Edit Bio":"Add Bio"}),jsxRuntimeExports.jsx("button",{className:"edit-pro-btn",onClick:()=>{gt(!0)},children:"Edit Details"})]})]})})]})}const Login=()=>{const[i,e]=reactExports.useState(""),[s,a]=reactExports.useState(""),o=useNavigate();reactExports.useEffect(()=>{if(api.get("IIITRID")!==void 0)return o("/")},[]);const j=async _e=>{_e.preventDefault();try{const nt=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:s})});if(nt.ok){const tt=await nt.json();api.set("IIITRID",tt.token,{expires:30}),o("/")}else{const tt=await nt.text();B.error(`${tt}`)}}catch{}};return jsxRuntimeExports.jsxs("div",{className:"bg",children:[jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("h1",{className:"heading",children:"IIITR CONNECT"}),jsxRuntimeExports.jsxs("div",{className:"box",children:[jsxRuntimeExports.jsx("p",{className:"p2",children:"Login in to IIITR Connect"}),jsxRuntimeExports.jsxs("form",{onSubmit:j,children:[jsxRuntimeExports.jsx("input",{className:"field",placeholder:"Email address",onChange:_e=>{e(_e.target.value)}}),jsxRuntimeExports.jsx("input",{className:"field",placeholder:"Password",onChange:_e=>{a(_e.target.value)},type:"password"}),jsxRuntimeExports.jsx("button",{className:"login-btn",type:"submit",children:"Log in"})]})]})]})};function Register(){const[i,e]=reactExports.useState({role:"student"}),s=useNavigate(),a=async tt=>{tt.preventDefault();try{const st=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(st.ok)(await fetch("/api/register-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok&&(console.log("entered"),s("/verify",{state:{email:i.email}}));else{const rt=await st.text();B.error(`${rt}`)}}catch{}},o=tt=>{tt.target.name=="role"?(console.log("sdfgh"),nt(tt.target.value),e(st=>({...st,[tt.target.name]:tt.target.value}))):e(st=>({...st,[tt.target.name]:tt.target.value}))},j=()=>_e=="faculty"?jsxRuntimeExports.jsxs("div",{className:"fill",children:[jsxRuntimeExports.jsxs("div",{className:"jk",children:[jsxRuntimeExports.jsx("input",{placeholder:"First Name",name:"firstName",value:i.firstName,onChange:o,className:"inp",required:!0}),jsxRuntimeExports.jsx("input",{placeholder:"Surname",name:"surName",value:i.surName,onChange:o,className:"inp",required:!0})]}),jsxRuntimeExports.jsx("input",{placeholder:"department",name:"department",value:i.department,onChange:o,className:"inp2",required:!0}),jsxRuntimeExports.jsx("p",{children:"Gender"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[jsxRuntimeExports.jsxs("div",{className:"radio",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",style:{marginRight:"10px"},value:"male",onChange:o})," ",jsxRuntimeExports.jsx("label",{children:"Male"})]}),jsxRuntimeExports.jsxs("div",{className:"radio",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",style:{marginRight:"10px",height:"15px"},value:"female",onChange:o})," ",jsxRuntimeExports.jsx("label",{children:"Female"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},htmlFor:"date",children:"Date of birth"}),jsxRuntimeExports.jsx("input",{name:"dob",type:"date",min:"1990-01-01",max:"2023-12-31",id:"date",onChange:o,required:!0})]})]}):jsxRuntimeExports.jsxs("div",{className:"fill",children:[jsxRuntimeExports.jsxs("div",{className:"jk",children:[jsxRuntimeExports.jsx("input",{placeholder:"First Name",name:"firstName",value:i.firstName,onChange:o,className:"inp",required:!0}),jsxRuntimeExports.jsx("input",{placeholder:"Surname",name:"surName",value:i.surName,onChange:o,className:"inp",required:!0})]}),jsxRuntimeExports.jsx("input",{placeholder:"year of study",name:"year",value:i.year,onChange:o,className:"inp2",required:!0}),jsxRuntimeExports.jsx("input",{placeholder:"branch",name:"branch",value:i.branch,onChange:o,className:"inp2",required:!0}),jsxRuntimeExports.jsx("p",{children:"Gender"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex"},children:[jsxRuntimeExports.jsxs("div",{className:"radio",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",style:{marginRight:"10px"},value:"male",onChange:o})," ",jsxRuntimeExports.jsx("label",{children:"Male"})]}),jsxRuntimeExports.jsxs("div",{className:"radio",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",style:{marginRight:"10px",height:"15px"},value:"female",onChange:o})," ",jsxRuntimeExports.jsx("label",{children:"Female"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",marginBottom:"10px"},children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},htmlFor:"date",children:"Date of birth"}),jsxRuntimeExports.jsx("input",{name:"dob",type:"date",min:"1990-01-01",max:"2023-12-31",id:"date",onChange:o,required:!0})]})]}),[_e,nt]=reactExports.useState("student");return jsxRuntimeExports.jsxs("div",{className:"bg",children:[jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("h1",{className:"heading",children:"IIITR CONNECT"}),jsxRuntimeExports.jsxs("div",{className:"boxy",children:[jsxRuntimeExports.jsx("p",{className:"p2",children:"Create your IIITR Connect account"}),jsxRuntimeExports.jsxs("form",{onSubmit:a,className:"ui",children:[jsxRuntimeExports.jsx("label",{style:{alignSelf:"flex-start"},children:"Email address"}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx("input",{className:"field2",placeholder:"enter only username",onChange:o,name:"email"}),jsxRuntimeExports.jsx("span",{children:"@iiitr.ac.in"})]}),jsxRuntimeExports.jsx("input",{className:"field2",placeholder:"Password",onChange:o,type:"password",name:"password"}),jsxRuntimeExports.jsxs("select",{className:"field2",name:"role",onChange:o,children:[jsxRuntimeExports.jsx("option",{value:"student",children:"student"}),jsxRuntimeExports.jsx("option",{value:"faculty",children:"faculty"})]}),j(),jsxRuntimeExports.jsx("button",{className:"login-btn",type:"submit",children:"Sign In"})]})]})]})}function Verify(){const i=useLocation(),e=useNavigate(),s=i.state?i.state.email:null,[a,o]=reactExports.useState(""),j=async _e=>{_e.preventDefault();try{const nt=await fetch("/api/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,otp:a})});if(nt.ok)e("/login");else{const tt=await nt.text();toast.error(`${tt}`)}}catch{}};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("form",{onSubmit:_e=>{j(_e)},children:[jsxRuntimeExports.jsx("input",{placeholder:"enter otp",onChange:_e=>{o(_e.target.value)}}),jsxRuntimeExports.jsx("button",{type:"submit",children:"Submit"})]})})}function Friends(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({});reactExports.useEffect(()=>{(async()=>{try{const _e=api.get("IIITRID"),nt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${_e}`}});if(nt.ok){const tt=await nt.json();e(!1),a(tt.data)}}catch(_e){console.log(_e)}})()},[]);const o=[{name:"All Friends",link:"/friends/list"},{name:"Friend Requests",link:"/friends/requests"},{name:"Friend Suggestions",link:"/friends/suggestions"}];return i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TopBar,{userData:s}),jsxRuntimeExports.jsx("div",{className:"bottom",children:jsxRuntimeExports.jsx("ul",{className:"sidebar",children:o.map((j,_e)=>jsxRuntimeExports.jsx(Link,{className:"yu",to:j.link,children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center justify-content-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(FaUserFriends,{className:"ji"}),jsxRuntimeExports.jsx("span",{children:j.name})]}),jsxRuntimeExports.jsx(IoIosArrowForward,{})]})},_e))})})]})}const serverUrl$7="https://iiitr-connect.onrender.com";function FriendSuggestions(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const st=api.get("IIITRID"),rt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${st}`}}),at=await fetch("/api/friend/suggestions",{method:"GET",headers:{Authorization:`Bearer ${st}`}});if(rt.ok){const it=await rt.json();e(!1),a(it.data)}if(at.ok){const it=await at.json();j(it)}}catch(st){console.log(st)}})()},[]);const _e=async tt=>{const st=api.get("IIITRID"),rt=await fetch("/api/sendReq",{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"},body:JSON.stringify({sentTo:o[tt].userId})});if(rt.ok){await rt.text();const at=[...o];at[tt].isReqSent=!0,j(at)}},nt=async tt=>{const st=api.get("IIITRID"),rt=await fetch("/api/cancelReq",{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"},body:JSON.stringify({sentTo:o[tt].userId})});if(rt.ok){await rt.text();const at=[...o];at[tt].isReqSent=!1,j(at)}};return i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TopBar,{userData:s}),jsxRuntimeExports.jsx("div",{className:"bottom",children:jsxRuntimeExports.jsxs("div",{className:"sidebar2",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/friends",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{marginRight:"20px"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Friends"}),jsxRuntimeExports.jsx("h2",{style:{marginTop:"-15px"},children:"Suggestions"})]})]}),jsxRuntimeExports.jsx("h4",{children:"People you may know"}),o&&o.map((tt,st)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kli",children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$7}/uploads/profile/${tt.userId}.png`,className:"pop",onError:rt=>{rt.target.onerror=null,rt.target.src=`${serverUrl$7}/uploads/default.png`}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:[tt.firstName," ",tt.surName]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column",children:[tt.isReqSent&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"Request Sent"}),jsxRuntimeExports.jsx("button",{className:"btn-light2",onClick:()=>{nt(st)},children:"Cancel Request"})]}),!tt.isReqSent&&jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>{_e(st)},children:"Add Friend"})]})]})]})}))]})})]})}const serverUrl$6="https://iiitr-connect.onrender.com";function FriendRequests(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState(!1),[_e,nt]=reactExports.useState([]),[tt,st]=reactExports.useState([]),rt=()=>j(!1);reactExports.useEffect(()=>{(async()=>{try{const ct=api.get("IIITRID"),ot=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${ct}`}});if(ot.ok){const lt=await ot.json();e(!1),a(lt.data)}const ut=await fetch("/api/friendrequests",{method:"GET",headers:{Authorization:`Bearer ${ct}`}});if(ut.ok){const lt=await ut.json();nt(lt)}const dt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${ct}`}});if(dt.ok){const lt=await dt.json();st(lt)}}catch(ct){console.log(ct)}})()},[]);const at=async it=>{const ct=api.get("IIITRID"),ot=await fetch("/api/acceptFriend",{method:"PUT",headers:{Authorization:`Bearer ${ct}`,"Content-Type":"application/json"},body:JSON.stringify({sentBy:_e[it].sentBy})});ot.ok&&await ot.text()};return i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Popup,{open:o,closeOnDocumentClick:!0,onClose:rt,contentStyle:{height:"100px"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{children:"Sent requests"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{children:"When you send someone a friend request, it will appear here."})})]})}),jsxRuntimeExports.jsx(TopBar,{userData:s}),jsxRuntimeExports.jsx("div",{className:"bottom",children:jsxRuntimeExports.jsxs("div",{className:"sidebar2",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/friends",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{marginRight:"20px"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Friends"}),jsxRuntimeExports.jsx("h2",{style:{marginTop:"-15px",fontSize:"20px",fontWeight:"bold"},children:"Friend requests"})]})]}),jsxRuntimeExports.jsx("h4",{className:"hjk",children:"Friend Requests"}),jsxRuntimeExports.jsx("p",{className:"ghj2",onClick:()=>{j(!0)},children:"View sent requests"}),jsxRuntimeExports.jsx("div",{children:_e.map((it,ct)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center kli",children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$6}/uploads/profile/${it.userId}.png`,className:"pop",onError:ot=>{ot.target.onerror=null,ot.target.src=`${serverUrl$6}/uploads/default.png`}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:[it.userInfo.firstName," ",it.userInfo.surName]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>{at(ct)},style:{marginRight:"10px"},children:"Confirm"}),jsxRuntimeExports.jsx("button",{className:"btn-light2",onClick:()=>{RejectFiend(ct)},children:"Delete"})]})]})]})}))})]})})]})}const serverUrl$5="https://iiitr-connect.onrender.com";function AllFriends(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState([]);return reactExports.useEffect(()=>{(async()=>{try{const nt=api.get("IIITRID"),tt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${nt}`}});if(tt.ok){const rt=await tt.json();e(!1),a(rt.data)}const st=await fetch("/api/friends",{method:"GET",headers:{Authorization:`Bearer ${nt}`}});if(st.ok){const rt=await st.json();j(rt)}}catch(nt){console.log(nt)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TopBar,{userData:s}),jsxRuntimeExports.jsx("div",{className:"bottom",children:jsxRuntimeExports.jsxs("div",{className:"sidebar2",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/friends",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{marginRight:"20px"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Friends"}),jsxRuntimeExports.jsx("h2",{style:{marginTop:"-15px",fontSize:"20px",fontWeight:"bold"},children:"All Friends"})]})]}),jsxRuntimeExports.jsx("div",{children:o.map(_e=>jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",onClick:()=>{},children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$5}/uploads/profile/${_e.userId}.png`,className:"pop",onError:nt=>{nt.target.onerror=null,nt.target.src=`${serverUrl$5}/uploads/default.png`}}),jsxRuntimeExports.jsxs("span",{children:[_e.firstName," ",_e.surName]})]}))})]})})]})}const ProtectedRoute=()=>api.get("IIITRID")===void 0?jsxRuntimeExports.jsx(Navigate,{to:"/login"}):jsxRuntimeExports.jsx(Outlet,{}),PostAnnouncement=()=>{const i=useNavigate(),[e,s]=reactExports.useState(!0),[a,o]=reactExports.useState({startTime:"",endTime:"",to:"all",announcement:"",type:"exam",eventName:""});reactExports.useEffect(()=>{(async()=>{try{const st=api.get("IIITRID"),rt=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${st}`}});if(rt.ok){const at=await rt.text();if(console.log("datadata",at),s(!1),at!=="admin")return i("/")}}catch(st){console.log(st)}})()},[]);const j=["all","students","faculty","cs21b","cs22b","cs23b","cs24b"],_e=tt=>{o(st=>({...st,[tt.target.name]:tt.target.value}))},nt=async tt=>{tt.preventDefault();try{const st=api.get("IIITRID"),rt=await fetch("/api/announcement",{method:"POST",headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(console.log("responsedjvdvj",rt),rt.ok){const at=await rt.text();B("posted successfully"),o({startTime:"",endTime:"",to:"all",announcement:"",type:"exam",eventName:""})}}catch(st){console.log(st)}};return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{position:"fixed",top:"10px",left:"10px"}})}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("h3",{style:{marginBottom:"20px"},children:"post an announcement"}),jsxRuntimeExports.jsxs("form",{className:"d-flex flex-column align-items-start",onSubmit:nt,children:[jsxRuntimeExports.jsx("input",{required:!0,value:a.eventName,onChange:tt=>{_e(tt)},name:"eventName",placeholder:"event Name",className:"mb-4"}),jsxRuntimeExports.jsx("textarea",{name:"announcement",required:!0,placeholder:"enter your announcement here",cols:"80",rows:"10",style:{resize:"none",padding:"10px"},value:a.announcement,onChange:tt=>{_e(tt)}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"To"}),jsxRuntimeExports.jsx("select",{className:"form-select",required:!0,name:"to",value:a.to,onChange:tt=>{_e(tt)},children:j.map(tt=>jsxRuntimeExports.jsx("option",{value:tt,children:tt}))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{children:"Type"}),jsxRuntimeExports.jsxs("select",{defaultValue:"exam",className:"form-select",required:!0,name:"type",value:a.type,onChange:tt=>{_e(tt)},children:[jsxRuntimeExports.jsx("option",{value:"exam",children:"exam"}),jsxRuntimeExports.jsx("option",{value:"event",children:"event"})]})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column mt-4 mb-3",children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},children:"Event Start Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",required:!0,className:"datepicker",name:"startTime",value:a.startTime,onChange:tt=>{_e(tt)}})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column mt-4 mb-3",children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},children:"Event End Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",required:!0,className:"datepicker",name:"endTime",value:a.endTime,onChange:tt=>{_e(tt)}})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",type:"submit",children:"Post"})]})]})},serverUrl$4="https://iiitr-connect.onrender.com",DeletePost=()=>{const[i,e]=reactExports.useState([]),s=o=>{let j=new Date(o);const _e=(new Date-j)/1e3,nt=_e%60,st=(_e-nt)/60,rt=st/60,at=rt/24;let it="";const ct=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return at>30?it=`${j.getDate()}th ${ct[j.getMonth()]} ${j.getHours()}:${j.getMinutes()}`:at>0?it=Math.floor(at)+" days ago":rt>0?it=Math.floor(rt)+" hours ago":st>0?it=Math.floor(st)+" minutes ago":nt>0&&(it=Math.floor(nt)+" seconds ago"),it},a=async o=>{const j=api.get("IIITRID"),_e=[...i];_e.splice(o,1),(await fetch(`/api/post?postId=${i[o].postId}`,{method:"DELETE",headers:{Authorization:`Bearer ${j}`}})).ok&&(e(_e),B("post deleted successfully"))};return reactExports.useEffect(()=>{(async()=>{try{const j=api.get("IIITRID"),_e=await fetch("/api/posts",{method:"GET",headers:{Authorization:`Bearer ${j}`}});if(_e.ok){const nt=await _e.json();e(nt)}}catch(j){console.log(j)}})()},[]),jsxRuntimeExports.jsxs("div",{className:"bottom",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{}})}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("div",{className:"vb",children:i.map((o,j)=>{let _e=s(o.createdAt);return jsxRuntimeExports.jsxs("div",{className:"posts-conatiner",children:[jsxRuntimeExports.jsx("button",{className:"cvb",onClick:()=>{a(j)},children:jsxRuntimeExports.jsx(MdDelete,{})}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx("img",{className:"thumb",src:`${serverUrl$4}/uploads/profile/${o.postedBy}.png`}),jsxRuntimeExports.jsxs("div",{className:"rr",children:[jsxRuntimeExports.jsx("span",{children:o.name}),jsxRuntimeExports.jsx("span",{children:_e})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"post-description",dangerouslySetInnerHTML:{__html:o.description}}),o.files.map((nt,tt)=>nt.endsWith(".mp4")?jsxRuntimeExports.jsx("video",{className:"post-vid",src:nt,controls:!0},tt):jsxRuntimeExports.jsx("img",{src:nt,className:"post-vid"},tt))]}),jsxRuntimeExports.jsx("div",{className:"tyu",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{children:[o.likes," likes"]})})})]},j)})})]})};function Admin(){const i=useNavigate(),[e,s]=reactExports.useState(!0);return reactExports.useEffect(()=>{(async()=>{try{const o=api.get("IIITRID"),j=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(j.ok){const _e=await j.text();if(s(!1),_e!=="admin")return i("/")}}catch(o){console.log(o)}})()},[]),e?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TopBar,{userData:""}),jsxRuntimeExports.jsx("div",{className:"bottom",children:jsxRuntimeExports.jsxs("div",{className:"sidebar8",children:[jsxRuntimeExports.jsx("div",{className:"nb3",children:jsxRuntimeExports.jsx(Link,{className:"item2",to:"/admin/post-announcement",onClick:()=>{},children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary mjk",children:"post announcement"})})}),jsxRuntimeExports.jsx("div",{className:"nb3",children:jsxRuntimeExports.jsx(Link,{className:"item2",to:"/admin/delete-post",onClick:()=>{},children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary mjk",children:"Delete posts"})})}),jsxRuntimeExports.jsx("div",{className:"nb3",children:jsxRuntimeExports.jsx(Link,{className:"item2",to:"/admin/edit-rooms",onClick:()=>{},children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary mjk",children:"Edit Rooms"})})}),jsxRuntimeExports.jsx("div",{className:"nb3",children:jsxRuntimeExports.jsx(Link,{className:"item2",to:"/admin/create-poll",onClick:()=>{},children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary mjk",children:"Create Poll"})})}),jsxRuntimeExports.jsx("div",{className:"nb3",children:jsxRuntimeExports.jsx(Link,{className:"item2",to:"/polls",onClick:()=>{},children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary mjk",children:"View Polls"})})})]})})]})}function Announcement(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState([]);return reactExports.useEffect(()=>{(async()=>{try{const nt=api.get("IIITRID"),tt=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${nt}`}});if(tt.ok){const rt=await tt.json();e(!1),a(rt.data)}const st=await fetch("/api/announcement",{method:"GET",headers:{Authorization:`Bearer ${nt}`}});if(st.ok){const rt=await st.json();j(rt)}}catch(nt){console.log(nt)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TopBar,{userData:s}),jsxRuntimeExports.jsxs("div",{className:"bottom",children:[jsxRuntimeExports.jsx("ul",{className:"sidebar4",children:jsxRuntimeExports.jsx(Link,{className:"yu",to:"/",children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center justify-content-between",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx(IoMdArrowBack,{})]})})}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center w-100",children:[o.length===0&&jsxRuntimeExports.jsx("h1",{children:"No announements now. Check later "}),o.map((_e,nt)=>{const tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],st=new Date(_e.startTime),rt=`${st.getDate()}th ${tt[st.getMonth()]} ${st.getHours()}:${st.getMinutes()}`;return jsxRuntimeExports.jsxs("div",{className:"poll",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[jsxRuntimeExports.jsx("p",{children:_e.eventName}),jsxRuntimeExports.jsx("p",{children:rt})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{children:_e.announcement})})]},nt)})]})]})]})}function EditRooms(){const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState([]),[o,j]=reactExports.useState(!1),[_e,nt]=reactExports.useState(!1),[tt,st]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{const ct=api.get("IIITRID"),ot=await fetch("/api/getRooms",{method:"GET","Content-Type":"application/json",headers:{Authorization:`Bearer ${ct}`}});if(ot.ok){const ut=await ot.json();a(ut),e(!1)}})()},[]);const rt=async()=>{const it=api.get("IIITRID");console.log("room",tt);const ct=await fetch("/api/add-room",{method:"POST",headers:{Authorization:`Bearer ${it}`,"Content-Type":"application/json"},body:JSON.stringify({room:tt})});if(ct.ok){await ct.text();const ot=[...s];ot.push(tt),a(ot)}},at=async it=>{const ct=api.get("IIITRID"),ot=await fetch(`/api/room?room=${s[it]}`,{method:"DELETE",headers:{Authorization:`Bearer ${ct}`}});if(ot.ok){await ot.text();const ut=[...s];ut.splice(it,1),a(ut)}};return i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{className:"qwe",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{position:"fixed",top:"10px",left:"10px"}})}),jsxRuntimeExports.jsx("h1",{children:"current rooms"}),jsxRuntimeExports.jsx("ul",{className:"rooms",children:s.map((it,ct)=>jsxRuntimeExports.jsxs("li",{className:"room",children:[jsxRuntimeExports.jsx("span",{children:it}),jsxRuntimeExports.jsx("button",{className:"",onClick:()=>{at(ct)},children:jsxRuntimeExports.jsx(MdDelete,{})})]}))}),jsxRuntimeExports.jsx("button",{disabled:_e,className:"btn btn-primary mt-3",onClick:()=>{o?j(!1):(nt(!1),j(!0))},children:"Add More"}),o&&jsxRuntimeExports.jsxs("div",{className:"jkl",children:[jsxRuntimeExports.jsx("input",{className:"yui",onChange:it=>{st(it.target.value)},value:tt}),jsxRuntimeExports.jsxs("div",{className:"bts",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-success",disabled:tt==="",onClick:rt,children:"Add"}),jsxRuntimeExports.jsx("button",{className:"btn btn-danger",onClick:()=>{j(!1),st("")},children:"Cancel"})]})]})]})}const PostExamAnnouncement=()=>{const i=useNavigate(),[e,s]=reactExports.useState(!0),[a,o]=reactExports.useState({startTime:"",endTime:"",to:"all",announcement:"",type:"exam",eventName:"",venue:"classroom 2"}),[j,_e]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const at=api.get("IIITRID"),it=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${at}`}});if(it.ok){const ot=await it.text();if(console.log("datadata",ot),ot!=="faculty")return i("/")}const ct=await fetch("/api/getRooms",{method:"GET",headers:{Authorization:`Bearer ${at}`}});if(ct.ok){const ot=await ct.json();s(!1),_e(ot)}}catch(at){console.log(at)}})()},[]);const nt=["all","students","faculty","cs21b","cs22b","cs23b","cs24b"],tt=rt=>{o(at=>({...at,[rt.target.name]:rt.target.value}))},st=async rt=>{rt.preventDefault();try{const at=api.get("IIITRID"),it=await fetch("/api/exam-announcement",{method:"POSt",headers:{Authorization:`Bearer ${at}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(it.ok){const ct=await it.text();B("posted successfully"),o({startTime:"",endTime:"",to:"all",announcement:"",type:"exam",eventName:"",venue:"classroom 2"})}else{const ct=await it.text();console.log("datazdvzvvzdsvzdvzdvzdvd",ct),B.error(ct)}}catch(at){console.log(at)}};return e?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{position:"fixed",top:"10px",left:"10px"}})}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("h3",{style:{marginBottom:"20px"},children:"post exam announcement"}),jsxRuntimeExports.jsxs("form",{className:"d-flex flex-column align-items-start",onSubmit:st,children:[jsxRuntimeExports.jsx("input",{required:!0,value:a.eventName,onChange:rt=>{tt(rt)},name:"eventName",placeholder:"exam Name",className:"mb-4"}),jsxRuntimeExports.jsx("textarea",{name:"announcement",required:!0,placeholder:"enter your announcement here",cols:"80",rows:"10",style:{resize:"none",padding:"10px"},value:a.announcement,onChange:rt=>{tt(rt)}}),jsxRuntimeExports.jsxs("div",{className:"mt-3 mb-3",children:[jsxRuntimeExports.jsx("label",{children:"Venue"}),jsxRuntimeExports.jsx("select",{className:"form-select",required:!0,name:"to",value:a.venue,onChange:rt=>{tt(rt)},children:j.map(rt=>jsxRuntimeExports.jsx("option",{value:rt,children:rt}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"To"}),jsxRuntimeExports.jsx("select",{className:"form-select",required:!0,name:"to",value:a.to,onChange:rt=>{tt(rt)},children:nt.map(rt=>jsxRuntimeExports.jsx("option",{value:rt,children:rt}))})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column mt-4 mb-3",children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},children:"Exam Start Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",required:!0,className:"datepicker",name:"startTime",value:a.startTime,onChange:rt=>{tt(rt)}})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column mt-4 mb-3",children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:"10px"},children:"Exam End Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",required:!0,className:"datepicker",name:"endTime",value:a.endTime,onChange:rt=>{tt(rt)}})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",type:"submit",children:"Post"})]})]})},serverUrl$3="https://iiitr-connect.onrender.com";function TopBar2(i){const{userData:e,role:s}=i,a=useNavigate(),o=encodeURIComponent(e.userId),j=`${serverUrl$3}/uploads/profile/${o}.png`,_e=()=>{a("/profile",{state:{data:{userData:e}}})};let[nt,tt]=reactExports.useState(!1);const st=()=>{api.remove("IIITRID"),a("/login")},[rt,at]=reactExports.useState({className:"",faculty:"",subject:""}),it=ot=>{at(ut=>({...ut,[ot.target.name]:ot.target.value}))},ct=async ot=>{const ut=api.get("IIITRID");ot.preventDefault();const dt=await fetch("/api/classroom",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ut}`},body:JSON.stringify(rt)});dt.ok&&(await dt.text(),tt(!1),at({className:"",facultyName:"",subject:""}))};return jsxRuntimeExports.jsxs("div",{className:"topbar2 justify-content-space-between",children:[jsxRuntimeExports.jsx(Popup,{closeOnDocumentClick:!1,contentStyle:{width:"500px"},open:nt,onClose:()=>{tt(!1)},children:jsxRuntimeExports.jsxs("form",{className:"create-classroom-popup",onSubmit:ct,children:[jsxRuntimeExports.jsxs("div",{className:"pl",children:[jsxRuntimeExports.jsx("label",{htmlFor:"className",children:"class Name"}),jsxRuntimeExports.jsx("input",{id:"className",name:"className",value:rt.className,required:!0,onChange:it})]}),jsxRuntimeExports.jsxs("div",{className:"pl",children:[jsxRuntimeExports.jsx("label",{htmlFor:"faculty",children:"faculty Name"}),jsxRuntimeExports.jsx("input",{id:"faculty",name:"faculty",value:rt.facultyName,onChange:it})]}),jsxRuntimeExports.jsxs("div",{className:"pl",children:[jsxRuntimeExports.jsx("label",{htmlFor:"Subject",children:"Subject"}),jsxRuntimeExports.jsx("input",{id:"Subject",name:"subject",value:rt.subject,onChange:it})]}),jsxRuntimeExports.jsxs("div",{className:"plk",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-",onClick:()=>{tt(!1),at({className:"",facultyName:"",subject:""})},children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",type:"submit",children:"Save"})]})]})}),jsxRuntimeExports.jsx(Link,{to:"/",children:jsxRuntimeExports.jsx("img",{src:Logo,style:{width:"50px"}})}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row",children:[jsxRuntimeExports.jsx(Popup,{position:"bottom right",arrow:!1,contentStyle:{},trigger:jsxRuntimeExports.jsx("button",{type:"button",style:{marginRight:"15px",border:"none",background:"transparent"},children:jsxRuntimeExports.jsx(FaPlus,{})}),children:jsxRuntimeExports.jsxs("ul",{children:[s==="faculty"&&jsxRuntimeExports.jsx("li",{onClick:ot=>{tt(!0)},children:"create class"}),s!=="faculty"&&jsxRuntimeExports.jsx("li",{children:"join class"})]})}),jsxRuntimeExports.jsx(Popup,{contentStyle:{position:"absolute",top:"100px"},arrow:!1,trigger:jsxRuntimeExports.jsx("img",{src:j,className:"img",onError:ot=>{ot.target.onerror=null,ot.target.src=`${serverUrl$3}/uploads/default.png`}}),position:"bottom right",children:ot=>jsxRuntimeExports.jsxs("div",{className:"p-2",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2 d-flex flex-row prof",onClick:_e,children:[jsxRuntimeExports.jsx("img",{src:j,className:"img2",onError:ut=>{ut.target.onerror=null,ut.target.src=`${serverUrl$3}/uploads/default.png`}}),jsxRuntimeExports.jsxs("span",{children:[e.surName," ",e.firstName]})]}),jsxRuntimeExports.jsx("span",{style:{cursor:"pointer"},onClick:st,children:"Logout"})]})})]})]})}const Classrooms=()=>{const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState(""),_e=useNavigate(),[nt,tt]=reactExports.useState([]);return encodeURIComponent(s.email),reactExports.useEffect(()=>{(async()=>{try{const rt=api.get("IIITRID"),at=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${rt}`}});if(at.ok){const it=await at.json();if(console.log("data.data.isVerified",it.data.isVerified),!it.data.isVerified&&(await fetch("/api/register-verify",{method:"POST",headers:{Authorization:`Bearer ${rt}`,"Content-Type":"application/json"},body:JSON.stringify({email:it.data.email})})).ok)return _e("/verify",{state:{email:it.data.email}});e(!1),a(it.data)}else{const it=await at.text();console.log(it)}}catch(rt){console.log(rt)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const rt=api.get("IIITRID"),at=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${rt}`}});if(at.ok){const ct=await at.text();if(j(ct),console.log("role  yy ",ct),ct=="admin")return _e("/admin")}const it=await fetch("/api/classrooms",{method:"GET",headers:{Authorization:`Bearer ${rt}`}});if(it.ok){const ct=await it.json();tt(ct)}}catch(rt){console.log(rt)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TopBar2,{userData:s,role:o}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("div",{className:"bottom",children:nt.map(st=>jsxRuntimeExports.jsx(Link,{className:"classroom-card",to:`/classroom/${st._id}`,children:jsxRuntimeExports.jsxs("div",{className:"ghl",children:[jsxRuntimeExports.jsxs("div",{className:"ghl2",children:[jsxRuntimeExports.jsx("h3",{children:st.className}),jsxRuntimeExports.jsx("button",{style:{background:"transparent",border:"none"},children:jsxRuntimeExports.jsx(BiDotsVerticalRounded,{})})]}),jsxRuntimeExports.jsx("h3",{children:st.faculty})]})}))})]})};function RxCross1(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:"currentColor"},child:[]}]})(i)}function RxCross2(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(i)}const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(e,s,a){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const j=document.querySelector("meta[property=csp-nonce]"),_e=(j==null?void 0:j.nonce)||(j==null?void 0:j.getAttribute("nonce"));o=Promise.all(s.map(nt=>{if(nt=assetsURL(nt),nt in seen)return;seen[nt]=!0;const tt=nt.endsWith(".css"),st=tt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${nt}"]${st}`))return;const rt=document.createElement("link");if(rt.rel=tt?"stylesheet":scriptRel,tt||(rt.as="script",rt.crossOrigin=""),rt.href=nt,_e&&rt.setAttribute("nonce",_e),document.head.appendChild(rt),tt)return new Promise((at,it)=>{rt.addEventListener("load",at),rt.addEventListener("error",()=>it(new Error(`Unable to preload CSS for ${nt}`)))})}))}return o.then(()=>e()).catch(j=>{const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=j,window.dispatchEvent(_e),!_e.defaultPrevented)throw j})};var __webpack_require__={};__webpack_require__.d=(i,e)=>{for(var s in e)__webpack_require__.o(e,s)&&!__webpack_require__.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})};__webpack_require__.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var __webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer$1,AnnotationMode:()=>AnnotationMode,CMapCompressionType:()=>CMapCompressionType,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,Outliner:()=>Outliner,PDFDataRangeTransport:()=>PDFDataRangeTransport$1,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses$1,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer$1,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,renderTextLayer:()=>renderTextLayer,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,updateTextLayer:()=>updateTextLayer,version:()=>version});const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},CMapCompressionType={NONE:0,BINARY:1},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(i){Number.isInteger(i)&&(verbosity=i)}function getVerbosityLevel(){return verbosity}function info(i){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${i}`)}function warn(i){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${i}`)}function unreachable(i){throw new Error(i)}function assert(i,e){i||unreachable(e)}function _isValidProtocol(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(i,e=null,s=null){if(!i)return null;try{if(s&&typeof i=="string"){if(s.addDefaultProtocol&&i.startsWith("www.")){const o=i.match(/\./g);(o==null?void 0:o.length)>=2&&(i=`http://${i}`)}if(s.tryConvertEncoding)try{i=stringToUTF8String(i)}catch{}}const a=e?new URL(i,e):new URL(i);if(_isValidProtocol(a))return a}catch{}return null}function shadow(i,e,s,a=!1){return Object.defineProperty(i,e,{value:s,enumerable:!a,configurable:!0,writable:!1}),s}const BaseException=function(){function e(s,a){this.constructor===e&&unreachable("Cannot initialize BaseException."),this.message=s,this.name=a}return e.prototype=new Error,e.constructor=e,e}();class PasswordException extends BaseException{constructor(e,s){super(e,"PasswordException"),this.code=s}}class UnknownErrorException extends BaseException{constructor(e,s){super(e,"UnknownErrorException"),this.details=s}}class InvalidPDFException extends BaseException{constructor(e){super(e,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor(e){super(e,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor(e,s){super(e,"UnexpectedResponseException"),this.status=s}}class FormatError extends BaseException{constructor(e){super(e,"FormatError")}}class AbortException extends BaseException{constructor(e){super(e,"AbortException")}}function bytesToString(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&unreachable("Invalid argument for bytesToString");const e=i.length,s=8192;if(e<s)return String.fromCharCode.apply(null,i);const a=[];for(let o=0;o<e;o+=s){const j=Math.min(o+s,e),_e=i.subarray(o,j);a.push(String.fromCharCode.apply(null,_e))}return a.join("")}function stringToBytes(i){typeof i!="string"&&unreachable("Invalid argument for stringToBytes");const e=i.length,s=new Uint8Array(e);for(let a=0;a<e;++a)s[a]=i.charCodeAt(a)&255;return s}function string32(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function objectFromMap(i){const e=Object.create(null);for(const[s,a]of i)e[s]=a;return e}function isLittleEndian(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?shadow(this,"platform",{isMac:navigator.platform.includes("Mac")}):shadow(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,s;return shadow(this,"isCSSRoundSupported",(s=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:s.call(e,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var oo,Sv,Hy;class Util{static makeHexColor(e,s,a){return`#${hexNumbers[e]}${hexNumbers[s]}${hexNumbers[a]}`}static scaleMinMax(e,s){let a;e[0]?(e[0]<0&&(a=s[0],s[0]=s[2],s[2]=a),s[0]*=e[0],s[2]*=e[0],e[3]<0&&(a=s[1],s[1]=s[3],s[3]=a),s[1]*=e[3],s[3]*=e[3]):(a=s[0],s[0]=s[1],s[1]=a,a=s[2],s[2]=s[3],s[3]=a,e[1]<0&&(a=s[1],s[1]=s[3],s[3]=a),s[1]*=e[1],s[3]*=e[1],e[2]<0&&(a=s[0],s[0]=s[2],s[2]=a),s[0]*=e[2],s[2]*=e[2]),s[0]+=e[4],s[1]+=e[5],s[2]+=e[4],s[3]+=e[5]}static transform(e,s){return[e[0]*s[0]+e[2]*s[1],e[1]*s[0]+e[3]*s[1],e[0]*s[2]+e[2]*s[3],e[1]*s[2]+e[3]*s[3],e[0]*s[4]+e[2]*s[5]+e[4],e[1]*s[4]+e[3]*s[5]+e[5]]}static applyTransform(e,s){const a=e[0]*s[0]+e[1]*s[2]+s[4],o=e[0]*s[1]+e[1]*s[3]+s[5];return[a,o]}static applyInverseTransform(e,s){const a=s[0]*s[3]-s[1]*s[2],o=(e[0]*s[3]-e[1]*s[2]+s[2]*s[5]-s[4]*s[3])/a,j=(-e[0]*s[1]+e[1]*s[0]+s[4]*s[1]-s[5]*s[0])/a;return[o,j]}static getAxialAlignedBoundingBox(e,s){const a=this.applyTransform(e,s),o=this.applyTransform(e.slice(2,4),s),j=this.applyTransform([e[0],e[3]],s),_e=this.applyTransform([e[2],e[1]],s);return[Math.min(a[0],o[0],j[0],_e[0]),Math.min(a[1],o[1],j[1],_e[1]),Math.max(a[0],o[0],j[0],_e[0]),Math.max(a[1],o[1],j[1],_e[1])]}static inverseTransform(e){const s=e[0]*e[3]-e[1]*e[2];return[e[3]/s,-e[1]/s,-e[2]/s,e[0]/s,(e[2]*e[5]-e[4]*e[3])/s,(e[4]*e[1]-e[5]*e[0])/s]}static singularValueDecompose2dScale(e){const s=[e[0],e[2],e[1],e[3]],a=e[0]*s[0]+e[1]*s[2],o=e[0]*s[1]+e[1]*s[3],j=e[2]*s[0]+e[3]*s[2],_e=e[2]*s[1]+e[3]*s[3],nt=(a+_e)/2,tt=Math.sqrt((a+_e)**2-4*(a*_e-j*o))/2,st=nt+tt||1,rt=nt-tt||1;return[Math.sqrt(st),Math.sqrt(rt)]}static normalizeRect(e){const s=e.slice(0);return e[0]>e[2]&&(s[0]=e[2],s[2]=e[0]),e[1]>e[3]&&(s[1]=e[3],s[3]=e[1]),s}static intersect(e,s){const a=Math.max(Math.min(e[0],e[2]),Math.min(s[0],s[2])),o=Math.min(Math.max(e[0],e[2]),Math.max(s[0],s[2]));if(a>o)return null;const j=Math.max(Math.min(e[1],e[3]),Math.min(s[1],s[3])),_e=Math.min(Math.max(e[1],e[3]),Math.max(s[1],s[3]));return j>_e?null:[a,j,o,_e]}static bezierBoundingBox(e,s,a,o,j,_e,nt,tt,st){return st?(st[0]=Math.min(st[0],e,nt),st[1]=Math.min(st[1],s,tt),st[2]=Math.max(st[2],e,nt),st[3]=Math.max(st[3],s,tt)):st=[Math.min(e,nt),Math.min(s,tt),Math.max(e,nt),Math.max(s,tt)],wt(this,oo,Hy).call(this,e,a,j,nt,s,o,_e,tt,3*(-e+3*(a-j)+nt),6*(e-2*a+j),3*(a-e),st),wt(this,oo,Hy).call(this,e,a,j,nt,s,o,_e,tt,3*(-s+3*(o-_e)+tt),6*(s-2*o+_e),3*(o-s),st),st}}oo=new WeakSet,Sv=function(e,s,a,o,j,_e,nt,tt,st,rt){if(st<=0||st>=1)return;const at=1-st,it=st*st,ct=it*st,ot=at*(at*(at*e+3*st*s)+3*it*a)+ct*o,ut=at*(at*(at*j+3*st*_e)+3*it*nt)+ct*tt;rt[0]=Math.min(rt[0],ot),rt[1]=Math.min(rt[1],ut),rt[2]=Math.max(rt[2],ot),rt[3]=Math.max(rt[3],ut)},Hy=function(e,s,a,o,j,_e,nt,tt,st,rt,at,it){if(Math.abs(st)<1e-12){Math.abs(rt)>=1e-12&&wt(this,oo,Sv).call(this,e,s,a,o,j,_e,nt,tt,-at/rt,it);return}const ct=rt**2-4*at*st;if(ct<0)return;const ot=Math.sqrt(ct),ut=2*st;wt(this,oo,Sv).call(this,e,s,a,o,j,_e,nt,tt,(-rt+ot)/ut,it),wt(this,oo,Sv).call(this,e,s,a,o,j,_e,nt,tt,(-rt-ot)/ut,it)},Dt(Util,oo);function stringToUTF8String(i){return decodeURIComponent(escape(i))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(i){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),i.replaceAll(NormalizeRegex,(e,s,a)=>s?s.normalize("NFKC"):NormalizationMap.get(a))}function getUuid(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return bytesToString(i)}const AnnotationPrefix="pdfjs_internal_id_",FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class BaseFilterFactory{constructor(){this.constructor===BaseFilterFactory&&unreachable("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,s){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,s,a,o,j){return"none"}destroy(e=!1){}}var Gp;const Qx=class Qx{constructor({enableHWA:e=!1}={}){Dt(this,Gp,!1);this.constructor===Qx&&unreachable("Cannot initialize BaseCanvasFactory."),Pt(this,Gp,e)}create(e,s){if(e<=0||s<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(e,s);return{canvas:a,context:a.getContext("2d",{willReadFrequently:!et(this,Gp)})}}reset(e,s,a){if(!e.canvas)throw new Error("Canvas is not specified");if(s<=0||a<=0)throw new Error("Invalid canvas size");e.canvas.width=s,e.canvas.height=a}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,s){unreachable("Abstract method `_createCanvas` called.")}};Gp=new WeakMap;let BaseCanvasFactory=Qx;class BaseCMapReaderFactory{constructor({baseUrl:e=null,isCompressed:s=!0}){this.constructor===BaseCMapReaderFactory&&unreachable("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=s}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const s=this.baseUrl+e+(this.isCompressed?".bcmap":""),a=this.isCompressed?CMapCompressionType.BINARY:CMapCompressionType.NONE;return this._fetchData(s,a).catch(o=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}_fetchData(e,s){unreachable("Abstract method `_fetchData` called.")}}class BaseStandardFontDataFactory{constructor({baseUrl:e=null}){this.constructor===BaseStandardFontDataFactory&&unreachable("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${e}`;return this._fetchData(s).catch(a=>{throw new Error(`Unable to load font data at: ${s}`)})}_fetchData(e){unreachable("Abstract method `_fetchData` called.")}}class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&unreachable("Cannot initialize BaseSVGFactory.")}create(e,s,a=!1){if(e<=0||s<=0)throw new Error("Invalid SVG dimensions");const o=this._createSVG("svg:svg");return o.setAttribute("version","1.1"),a||(o.setAttribute("width",`${e}px`),o.setAttribute("height",`${s}px`)),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("viewBox",`0 0 ${e} ${s}`),o}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){unreachable("Abstract method `_createSVG` called.")}}const SVG_NS="http://www.w3.org/2000/svg",zo=class zo{};Hn(zo,"CSS",96),Hn(zo,"PDF",72),Hn(zo,"PDF_TO_CSS_UNITS",zo.CSS/zo.PDF);let PixelsPerInch=zo;var Vo,br,zr,$s,Ay,Go,Xn,Ms,cu,uu,_v,sE,zy,hu,yp,xp,Wy,bp;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:s,ownerDocument:a=globalThis.document}={}){super();Dt(this,Xn);Dt(this,Vo);Dt(this,br);Dt(this,zr);Dt(this,$s);Dt(this,Ay);Dt(this,Go,0);Pt(this,zr,s),Pt(this,$s,a)}addFilter(s){if(!s)return"none";let a=et(this,Xn,Ms).get(s);if(a)return a;const[o,j,_e]=wt(this,Xn,_v).call(this,s),nt=s.length===1?o:`${o}${j}${_e}`;if(a=et(this,Xn,Ms).get(nt),a)return et(this,Xn,Ms).set(s,a),a;const tt=`g_${et(this,zr)}_transfer_map_${ds(this,Go)._++}`,st=`url(#${tt})`;et(this,Xn,Ms).set(s,st),et(this,Xn,Ms).set(nt,st);const rt=wt(this,Xn,hu).call(this,tt);return wt(this,Xn,xp).call(this,o,j,_e,rt),st}addHCMFilter(s,a){var ot;const o=`${s}-${a}`,j="base";let _e=et(this,Xn,cu).get(j);if((_e==null?void 0:_e.key)===o||(_e?((ot=_e.filter)==null||ot.remove(),_e.key=o,_e.url="none",_e.filter=null):(_e={key:o,url:"none",filter:null},et(this,Xn,cu).set(j,_e)),!s||!a))return _e.url;const nt=wt(this,Xn,bp).call(this,s);s=Util.makeHexColor(...nt);const tt=wt(this,Xn,bp).call(this,a);if(a=Util.makeHexColor(...tt),et(this,Xn,uu).style.color="",s==="#000000"&&a==="#ffffff"||s===a)return _e.url;const st=new Array(256);for(let ut=0;ut<=255;ut++){const dt=ut/255;st[ut]=dt<=.03928?dt/12.92:((dt+.055)/1.055)**2.4}const rt=st.join(","),at=`g_${et(this,zr)}_hcm_filter`,it=_e.filter=wt(this,Xn,hu).call(this,at);wt(this,Xn,xp).call(this,rt,rt,rt,it),wt(this,Xn,zy).call(this,it);const ct=(ut,dt)=>{const lt=nt[ut]/255,ht=tt[ut]/255,xt=new Array(dt+1);for(let mt=0;mt<=dt;mt++)xt[mt]=lt+mt/dt*(ht-lt);return xt.join(",")};return wt(this,Xn,xp).call(this,ct(0,5),ct(1,5),ct(2,5),it),_e.url=`url(#${at})`,_e.url}addAlphaFilter(s){let a=et(this,Xn,Ms).get(s);if(a)return a;const[o]=wt(this,Xn,_v).call(this,[s]),j=`alpha_${o}`;if(a=et(this,Xn,Ms).get(j),a)return et(this,Xn,Ms).set(s,a),a;const _e=`g_${et(this,zr)}_alpha_map_${ds(this,Go)._++}`,nt=`url(#${_e})`;et(this,Xn,Ms).set(s,nt),et(this,Xn,Ms).set(j,nt);const tt=wt(this,Xn,hu).call(this,_e);return wt(this,Xn,Wy).call(this,o,tt),nt}addLuminosityFilter(s){let a=et(this,Xn,Ms).get(s||"luminosity");if(a)return a;let o,j;if(s?([o]=wt(this,Xn,_v).call(this,[s]),j=`luminosity_${o}`):j="luminosity",a=et(this,Xn,Ms).get(j),a)return et(this,Xn,Ms).set(s,a),a;const _e=`g_${et(this,zr)}_luminosity_map_${ds(this,Go)._++}`,nt=`url(#${_e})`;et(this,Xn,Ms).set(s,nt),et(this,Xn,Ms).set(j,nt);const tt=wt(this,Xn,hu).call(this,_e);return wt(this,Xn,sE).call(this,tt),s&&wt(this,Xn,Wy).call(this,o,tt),nt}addHighlightHCMFilter(s,a,o,j,_e){var ht;const nt=`${a}-${o}-${j}-${_e}`;let tt=et(this,Xn,cu).get(s);if((tt==null?void 0:tt.key)===nt||(tt?((ht=tt.filter)==null||ht.remove(),tt.key=nt,tt.url="none",tt.filter=null):(tt={key:nt,url:"none",filter:null},et(this,Xn,cu).set(s,tt)),!a||!o))return tt.url;const[st,rt]=[a,o].map(wt(this,Xn,bp).bind(this));let at=Math.round(.2126*st[0]+.7152*st[1]+.0722*st[2]),it=Math.round(.2126*rt[0]+.7152*rt[1]+.0722*rt[2]),[ct,ot]=[j,_e].map(wt(this,Xn,bp).bind(this));it<at&&([at,it,ct,ot]=[it,at,ot,ct]),et(this,Xn,uu).style.color="";const ut=(xt,mt,ft)=>{const gt=new Array(256),pt=(it-at)/ft,vt=xt/255,At=(mt-xt)/(255*ft);let Rt=0;for(let bt=0;bt<=ft;bt++){const Tt=Math.round(at+bt*pt),Lt=vt+bt*At;for(let Yt=Rt;Yt<=Tt;Yt++)gt[Yt]=Lt;Rt=Tt+1}for(let bt=Rt;bt<256;bt++)gt[bt]=gt[Rt-1];return gt.join(",")},dt=`g_${et(this,zr)}_hcm_${s}_filter`,lt=tt.filter=wt(this,Xn,hu).call(this,dt);return wt(this,Xn,zy).call(this,lt),wt(this,Xn,xp).call(this,ut(ct[0],ot[0],5),ut(ct[1],ot[1],5),ut(ct[2],ot[2],5),lt),tt.url=`url(#${dt})`,tt.url}destroy(s=!1){s&&et(this,Xn,cu).size!==0||(et(this,br)&&(et(this,br).parentNode.parentNode.remove(),Pt(this,br,null)),et(this,Vo)&&(et(this,Vo).clear(),Pt(this,Vo,null)),Pt(this,Go,0))}}Vo=new WeakMap,br=new WeakMap,zr=new WeakMap,$s=new WeakMap,Ay=new WeakMap,Go=new WeakMap,Xn=new WeakSet,Ms=function(){return et(this,Vo)||Pt(this,Vo,new Map)},cu=function(){return et(this,Ay)||Pt(this,Ay,new Map)},uu=function(){if(!et(this,br)){const s=et(this,$s).createElement("div"),{style:a}=s;a.visibility="hidden",a.contain="strict",a.width=a.height=0,a.position="absolute",a.top=a.left=0,a.zIndex=-1;const o=et(this,$s).createElementNS(SVG_NS,"svg");o.setAttribute("width",0),o.setAttribute("height",0),Pt(this,br,et(this,$s).createElementNS(SVG_NS,"defs")),s.append(o),o.append(et(this,br)),et(this,$s).body.append(s)}return et(this,br)},_v=function(s){if(s.length===1){const st=s[0],rt=new Array(256);for(let it=0;it<256;it++)rt[it]=st[it]/255;const at=rt.join(",");return[at,at,at]}const[a,o,j]=s,_e=new Array(256),nt=new Array(256),tt=new Array(256);for(let st=0;st<256;st++)_e[st]=a[st]/255,nt[st]=o[st]/255,tt[st]=j[st]/255;return[_e.join(","),nt.join(","),tt.join(",")]},sE=function(s){const a=et(this,$s).createElementNS(SVG_NS,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),s.append(a)},zy=function(s){const a=et(this,$s).createElementNS(SVG_NS,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),s.append(a)},hu=function(s){const a=et(this,$s).createElementNS(SVG_NS,"filter");return a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("id",s),et(this,Xn,uu).append(a),a},yp=function(s,a,o){const j=et(this,$s).createElementNS(SVG_NS,a);j.setAttribute("type","discrete"),j.setAttribute("tableValues",o),s.append(j)},xp=function(s,a,o,j){const _e=et(this,$s).createElementNS(SVG_NS,"feComponentTransfer");j.append(_e),wt(this,Xn,yp).call(this,_e,"feFuncR",s),wt(this,Xn,yp).call(this,_e,"feFuncG",a),wt(this,Xn,yp).call(this,_e,"feFuncB",o)},Wy=function(s,a){const o=et(this,$s).createElementNS(SVG_NS,"feComponentTransfer");a.append(o),wt(this,Xn,yp).call(this,o,"feFuncA",s)},bp=function(s){return et(this,Xn,uu).style.color=s,getRGB(getComputedStyle(et(this,Xn,uu)).getPropertyValue("color"))};class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document,enableHWA:s=!1}={}){super({enableHWA:s}),this._document=e}_createCanvas(e,s){const a=this._document.createElement("canvas");return a.width=e,a.height=s,a}}async function fetchData(i,e="text"){if(isValidFetchUrl(i,document.baseURI)){const s=await fetch(i);if(!s.ok)throw new Error(s.statusText);switch(e){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise((s,a)=>{const o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType=e,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){switch(e){case"arraybuffer":case"blob":case"json":s(o.response);return}s(o.responseText);return}a(new Error(o.statusText))}},o.send(null)})}class DOMCMapReaderFactory extends BaseCMapReaderFactory{_fetchData(e,s){return fetchData(e,this.isCompressed?"arraybuffer":"text").then(a=>({cMapData:a instanceof ArrayBuffer?new Uint8Array(a):stringToBytes(a),compressionType:s}))}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData(e){return fetchData(e,"arraybuffer").then(s=>new Uint8Array(s))}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(e){return document.createElementNS(SVG_NS,e)}}class PageViewport{constructor({viewBox:e,scale:s,rotation:a,offsetX:o=0,offsetY:j=0,dontFlip:_e=!1}){this.viewBox=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=j;const nt=(e[2]+e[0])/2,tt=(e[3]+e[1])/2;let st,rt,at,it;switch(a%=360,a<0&&(a+=360),a){case 180:st=-1,rt=0,at=0,it=1;break;case 90:st=0,rt=1,at=1,it=0;break;case 270:st=0,rt=-1,at=-1,it=0;break;case 0:st=1,rt=0,at=0,it=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_e&&(at=-at,it=-it);let ct,ot,ut,dt;st===0?(ct=Math.abs(tt-e[1])*s+o,ot=Math.abs(nt-e[0])*s+j,ut=(e[3]-e[1])*s,dt=(e[2]-e[0])*s):(ct=Math.abs(nt-e[0])*s+o,ot=Math.abs(tt-e[1])*s+j,ut=(e[2]-e[0])*s,dt=(e[3]-e[1])*s),this.transform=[st*s,rt*s,at*s,it*s,ct-st*s*nt-at*s*tt,ot-rt*s*nt-it*s*tt],this.width=ut,this.height=dt}get rawDims(){const{viewBox:e}=this;return shadow(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:s=this.rotation,offsetX:a=this.offsetX,offsetY:o=this.offsetY,dontFlip:j=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:e,rotation:s,offsetX:a,offsetY:o,dontFlip:j})}convertToViewportPoint(e,s){return Util.applyTransform([e,s],this.transform)}convertToViewportRectangle(e){const s=Util.applyTransform([e[0],e[1]],this.transform),a=Util.applyTransform([e[2],e[3]],this.transform);return[s[0],s[1],a[0],a[1]]}convertToPdfPoint(e,s){return Util.applyInverseTransform([e,s],this.transform)}}class RenderingCancelledException extends BaseException{constructor(e,s=0){super(e,"RenderingCancelledException"),this.extraDelay=s}}function isDataScheme(i){const e=i.length;let s=0;for(;s<e&&i[s].trim()==="";)s++;return i.substring(s,s+5).toLowerCase()==="data:"}function isPdfFile(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function getFilenameFromUrl(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(i,e="document.pdf"){if(typeof i!="string")return e;if(isDataScheme(i))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,a=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=s.exec(i);let j=a.exec(o[1])||a.exec(o[2])||a.exec(o[3]);if(j&&(j=j[0],j.includes("%")))try{j=a.exec(decodeURIComponent(j))[0]}catch{}return j||e}class StatTimer{constructor(){Hn(this,"started",Object.create(null));Hn(this,"times",[])}time(e){e in this.started&&warn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||warn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let s=0;for(const{name:a}of this.times)s=Math.max(a.length,s);for(const{name:a,start:o,end:j}of this.times)e.push(`${a.padEnd(s)} ${j-o}ms
`);return e.join("")}}function isValidFetchUrl(i,e){try{const{protocol:s}=e?new URL(i,e):new URL(i);return s==="http:"||s==="https:"}catch{return!1}}function noContextMenu(i){i.preventDefault()}function deprecated(i){console.log("Deprecated API usage: "+i)}let pdfDateStringRegex;class PDFDateString{static toDateObject(e){if(!e||typeof e!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const s=pdfDateStringRegex.exec(e);if(!s)return null;const a=parseInt(s[1],10);let o=parseInt(s[2],10);o=o>=1&&o<=12?o-1:0;let j=parseInt(s[3],10);j=j>=1&&j<=31?j:1;let _e=parseInt(s[4],10);_e=_e>=0&&_e<=23?_e:0;let nt=parseInt(s[5],10);nt=nt>=0&&nt<=59?nt:0;let tt=parseInt(s[6],10);tt=tt>=0&&tt<=59?tt:0;const st=s[7]||"Z";let rt=parseInt(s[8],10);rt=rt>=0&&rt<=23?rt:0;let at=parseInt(s[9],10)||0;return at=at>=0&&at<=59?at:0,st==="-"?(_e+=rt,nt+=at):st==="+"&&(_e-=rt,nt-=at),new Date(Date.UTC(a,o,j,_e,nt,tt))}}function getXfaPageViewport(i,{scale:e=1,rotation:s=0}){const{width:a,height:o}=i.attributes.style,j=[0,0,parseInt(a),parseInt(o)];return new PageViewport({viewBox:j,scale:e,rotation:s})}function getRGB(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(warn(`Not a valid color format: "${i}"`),[0,0,0])}function getColorValues(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const s of i.keys()){e.style.color=s;const a=window.getComputedStyle(e).color;i.set(s,getRGB(a))}e.remove()}function getCurrentTransform(i){const{a:e,b:s,c:a,d:o,e:j,f:_e}=i.getTransform();return[e,s,a,o,j,_e]}function getCurrentTransformInverse(i){const{a:e,b:s,c:a,d:o,e:j,f:_e}=i.getTransform().invertSelf();return[e,s,a,o,j,_e]}function setLayerDimensions(i,e,s=!1,a=!0){if(e instanceof PageViewport){const{pageWidth:o,pageHeight:j}=e.rawDims,{style:_e}=i,nt=util_FeatureTest.isCSSRoundSupported,tt=`var(--scale-factor) * ${o}px`,st=`var(--scale-factor) * ${j}px`,rt=nt?`round(${tt}, 1px)`:`calc(${tt})`,at=nt?`round(${st}, 1px)`:`calc(${st})`;!s||e.rotation%180===0?(_e.width=rt,_e.height=at):(_e.width=at,_e.height=rt)}a&&i.setAttribute("data-main-rotation",e.rotation)}var Xo,Yo,zs,Ko,Sy,rE,Ns,iE,aE,wv,oE,Vy;const _y=class _y{constructor(e){Dt(this,Ns);Dt(this,Xo,null);Dt(this,Yo,null);Dt(this,zs);Dt(this,Ko,null);Pt(this,zs,e)}render(){const e=Pt(this,Xo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const s=et(this,zs)._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:s}),e.addEventListener("pointerdown",wt(_y,Sy,rE),{signal:s});const a=Pt(this,Ko,document.createElement("div"));a.className="buttons",e.append(a);const o=et(this,zs).toolbarPosition;if(o){const{style:j}=e,_e=et(this,zs)._uiManager.direction==="ltr"?1-o[0]:o[0];j.insetInlineEnd=`${100*_e}%`,j.top=`calc(${100*o[1]}% + var(--editor-toolbar-vert-offset))`}return wt(this,Ns,oE).call(this),e}hide(){var e;et(this,Xo).classList.add("hidden"),(e=et(this,Yo))==null||e.hideDropdown()}show(){et(this,Xo).classList.remove("hidden")}addAltTextButton(e){wt(this,Ns,wv).call(this,e),et(this,Ko).prepend(e,et(this,Ns,Vy))}addColorPicker(e){Pt(this,Yo,e);const s=e.renderButton();wt(this,Ns,wv).call(this,s),et(this,Ko).prepend(s,et(this,Ns,Vy))}remove(){var e;et(this,Xo).remove(),(e=et(this,Yo))==null||e.destroy(),Pt(this,Yo,null)}};Xo=new WeakMap,Yo=new WeakMap,zs=new WeakMap,Ko=new WeakMap,Sy=new WeakSet,rE=function(e){e.stopPropagation()},Ns=new WeakSet,iE=function(e){et(this,zs)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},aE=function(e){et(this,zs)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},wv=function(e){const s=et(this,zs)._uiManager._signal;e.addEventListener("focusin",wt(this,Ns,iE).bind(this),{capture:!0,signal:s}),e.addEventListener("focusout",wt(this,Ns,aE).bind(this),{capture:!0,signal:s}),e.addEventListener("contextmenu",noContextMenu,{signal:s})},oE=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${et(this,zs).editorType}-button`),wt(this,Ns,wv).call(this,e),e.addEventListener("click",s=>{et(this,zs)._uiManager.delete()},{signal:et(this,zs)._uiManager._signal}),et(this,Ko).append(e)},Vy=function(){const e=document.createElement("div");return e.className="divider",e},Dt(_y,Sy);let EditorToolbar=_y;var Xp,qo,Qo,Lo,lE,cE,uE;class HighlightToolbar{constructor(e){Dt(this,Lo);Dt(this,Xp,null);Dt(this,qo,null);Dt(this,Qo);Pt(this,Qo,e)}show(e,s,a){const[o,j]=wt(this,Lo,cE).call(this,s,a),{style:_e}=et(this,qo)||Pt(this,qo,wt(this,Lo,lE).call(this));e.append(et(this,qo)),_e.insetInlineEnd=`${100*o}%`,_e.top=`calc(${100*j}% + var(--editor-toolbar-vert-offset))`}hide(){et(this,qo).remove()}}Xp=new WeakMap,qo=new WeakMap,Qo=new WeakMap,Lo=new WeakSet,lE=function(){const e=Pt(this,qo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",noContextMenu,{signal:et(this,Qo)._signal});const s=Pt(this,Xp,document.createElement("div"));return s.className="buttons",e.append(s),wt(this,Lo,uE).call(this),e},cE=function(e,s){let a=0,o=0;for(const j of e){const _e=j.y+j.height;if(_e<a)continue;const nt=j.x+(s?j.width:0);if(_e>a){o=nt,a=_e;continue}s?nt>o&&(o=nt):nt<o&&(o=nt)}return[s?1-o:o,a]},uE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const s=document.createElement("span");e.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const a=et(this,Qo)._signal;e.addEventListener("contextmenu",noContextMenu,{signal:a}),e.addEventListener("click",()=>{et(this,Qo).highlightSelection("floating_button")},{signal:a}),et(this,Xp).append(e)};function bindEvents(i,e,s){for(const a of s)e.addEventListener(a,i[a].bind(i))}function opacityToHex(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var wy;class IdManager{constructor(){Dt(this,wy,0)}get id(){return`${AnnotationEditorPrefix}${ds(this,wy)._++}`}}wy=new WeakMap;var Yp,Ty,er,Kp,Gy;const Jx=class Jx{constructor(){Dt(this,Kp);Dt(this,Yp,getUuid());Dt(this,Ty,0);Dt(this,er,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',a=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),o=new Image;o.src=e;const j=o.decode().then(()=>(a.drawImage(o,0,0,1,1,0,0,1,3),new Uint32Array(a.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",j)}async getFromFile(e){const{lastModified:s,name:a,size:o,type:j}=e;return wt(this,Kp,Gy).call(this,`${s}_${a}_${o}_${j}`,e)}async getFromUrl(e){return wt(this,Kp,Gy).call(this,e,e)}async getFromId(e){et(this,er)||Pt(this,er,new Map);const s=et(this,er).get(e);return s?s.bitmap?(s.refCounter+=1,s):s.file?this.getFromFile(s.file):this.getFromUrl(s.url):null}getSvgUrl(e){const s=et(this,er).get(e);return s!=null&&s.isSvg?s.svgUrl:null}deleteId(e){et(this,er)||Pt(this,er,new Map);const s=et(this,er).get(e);s&&(s.refCounter-=1,s.refCounter===0&&(s.bitmap=null))}isValidId(e){return e.startsWith(`image_${et(this,Yp)}_`)}};Yp=new WeakMap,Ty=new WeakMap,er=new WeakMap,Kp=new WeakSet,Gy=async function(e,s){et(this,er)||Pt(this,er,new Map);let a=et(this,er).get(e);if(a===null)return null;if(a!=null&&a.bitmap)return a.refCounter+=1,a;try{a||(a={bitmap:null,id:`image_${et(this,Yp)}_${ds(this,Ty)._++}`,refCounter:0,isSvg:!1});let o;if(typeof s=="string"?(a.url=s,o=await fetchData(s,"blob")):o=a.file=s,o.type==="image/svg+xml"){const j=Jx._isSVGFittingCanvas,_e=new FileReader,nt=new Image,tt=new Promise((st,rt)=>{nt.onload=()=>{a.bitmap=nt,a.isSvg=!0,st()},_e.onload=async()=>{const at=a.svgUrl=_e.result;nt.src=await j?`${at}#svgView(preserveAspectRatio(none))`:at},nt.onerror=_e.onerror=rt});_e.readAsDataURL(o),await tt}else a.bitmap=await createImageBitmap(o);a.refCounter=1}catch(o){console.error(o),a=null}return et(this,er).set(e,a),a&&et(this,er).set(a.id,a),a};let ImageManager=Jx;var Es,po,qp,As;class CommandManager{constructor(e=128){Dt(this,Es,[]);Dt(this,po,!1);Dt(this,qp);Dt(this,As,-1);Pt(this,qp,e)}add({cmd:e,undo:s,post:a,mustExec:o,type:j=NaN,overwriteIfSameType:_e=!1,keepUndo:nt=!1}){if(o&&e(),et(this,po))return;const tt={cmd:e,undo:s,post:a,type:j};if(et(this,As)===-1){et(this,Es).length>0&&(et(this,Es).length=0),Pt(this,As,0),et(this,Es).push(tt);return}if(_e&&et(this,Es)[et(this,As)].type===j){nt&&(tt.undo=et(this,Es)[et(this,As)].undo),et(this,Es)[et(this,As)]=tt;return}const st=et(this,As)+1;st===et(this,qp)?et(this,Es).splice(0,1):(Pt(this,As,st),st<et(this,Es).length&&et(this,Es).splice(st)),et(this,Es).push(tt)}undo(){if(et(this,As)===-1)return;Pt(this,po,!0);const{undo:e,post:s}=et(this,Es)[et(this,As)];e(),s==null||s(),Pt(this,po,!1),Pt(this,As,et(this,As)-1)}redo(){if(et(this,As)<et(this,Es).length-1){Pt(this,As,et(this,As)+1),Pt(this,po,!0);const{cmd:e,post:s}=et(this,Es)[et(this,As)];e(),s==null||s(),Pt(this,po,!1)}}hasSomethingToUndo(){return et(this,As)!==-1}hasSomethingToRedo(){return et(this,As)<et(this,Es).length-1}destroy(){Pt(this,Es,null)}}Es=new WeakMap,po=new WeakMap,qp=new WeakMap,As=new WeakMap;var Cy,hE;class KeyboardManager{constructor(e){Dt(this,Cy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:s}=util_FeatureTest.platform;for(const[a,o,j={}]of e)for(const _e of a){const nt=_e.startsWith("mac+");s&&nt?(this.callbacks.set(_e.slice(4),{callback:o,options:j}),this.allKeys.add(_e.split("+").at(-1))):!s&&!nt&&(this.callbacks.set(_e,{callback:o,options:j}),this.allKeys.add(_e.split("+").at(-1)))}}exec(e,s){if(!this.allKeys.has(s.key))return;const a=this.callbacks.get(wt(this,Cy,hE).call(this,s));if(!a)return;const{callback:o,options:{bubbles:j=!1,args:_e=[],checker:nt=null}}=a;nt&&!nt(e,s)||(o.bind(e,..._e,s)(),j||(s.stopPropagation(),s.preventDefault()))}}Cy=new WeakSet,hE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const s=this.buffer.join("+");return this.buffer.length=0,s};const Ry=class Ry{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(e),shadow(this,"_colors",e)}convert(e){const s=getRGB(e);if(!window.matchMedia("(forced-colors: active)").matches)return s;for(const[a,o]of this._colors)if(o.every((j,_e)=>j===s[_e]))return Ry._colorsMapping.get(a);return s}getHexCode(e){const s=this._colors.get(e);return s?Util.makeHexColor(...s):e}};Hn(Ry,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=Ry;var Tu,Ws,ms,_s,Cu,Wr,Ru,or,ku,Jo,Er,lr,Zo,Qp,Jp,Ar,Pu,go,Sr,ky,mo,Zp,yl,_g,Mu,ws,ss,Vr,xl,em,tm,nm,sm,rm,im,am,om,lm,cm,um,hm,dm,vo,_r,Gr,fm,Vn,Tv,dE,fE,Cv,pE,gE,mE,Xy,vE,Yy,Ky,yE,Fs,ho,xE,bE,qy,EE,Ep,Qy;const wu=class wu{constructor(e,s,a,o,j,_e,nt,tt,st){Dt(this,Vn);Dt(this,Tu,new AbortController);Dt(this,Ws,null);Dt(this,ms,new Map);Dt(this,_s,new Map);Dt(this,Cu,null);Dt(this,Wr,null);Dt(this,Ru,null);Dt(this,or,new CommandManager);Dt(this,ku,0);Dt(this,Jo,new Set);Dt(this,Er,null);Dt(this,lr,null);Dt(this,Zo,new Set);Dt(this,Qp,!1);Dt(this,Jp,null);Dt(this,Ar,null);Dt(this,Pu,null);Dt(this,go,!1);Dt(this,Sr,null);Dt(this,ky,new IdManager);Dt(this,mo,!1);Dt(this,Zp,!1);Dt(this,yl,null);Dt(this,_g,null);Dt(this,Mu,null);Dt(this,ws,AnnotationEditorType.NONE);Dt(this,ss,new Set);Dt(this,Vr,null);Dt(this,xl,null);Dt(this,em,null);Dt(this,tm,this.blur.bind(this));Dt(this,nm,this.focus.bind(this));Dt(this,sm,this.copy.bind(this));Dt(this,rm,this.cut.bind(this));Dt(this,im,this.paste.bind(this));Dt(this,am,this.keydown.bind(this));Dt(this,om,this.keyup.bind(this));Dt(this,lm,this.onEditingAction.bind(this));Dt(this,cm,this.onPageChanging.bind(this));Dt(this,um,this.onScaleChanging.bind(this));Dt(this,hm,this.onRotationChanging.bind(this));Dt(this,dm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Dt(this,vo,[0,0]);Dt(this,_r,null);Dt(this,Gr,null);Dt(this,fm,null);this._signal=et(this,Tu).signal,Pt(this,Gr,e),Pt(this,fm,s),Pt(this,Cu,a),this._eventBus=o,this._eventBus._on("editingaction",et(this,lm)),this._eventBus._on("pagechanging",et(this,cm)),this._eventBus._on("scalechanging",et(this,um)),this._eventBus._on("rotationchanging",et(this,hm)),wt(this,Vn,pE).call(this),wt(this,Vn,yE).call(this),wt(this,Vn,Xy).call(this),Pt(this,Wr,j.annotationStorage),Pt(this,Jp,j.filterFactory),Pt(this,xl,_e),Pt(this,Pu,nt||null),Pt(this,Qp,tt),Pt(this,Mu,st||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=wu.prototype,s=_e=>et(_e,Gr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&_e.hasSomethingToControl(),a=(_e,{target:nt})=>{if(nt instanceof HTMLInputElement){const{type:tt}=nt;return tt!=="text"&&tt!=="number"}return!0},o=this.TRANSLATE_SMALL,j=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],e.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:a}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(_e,{target:nt})=>!(nt instanceof HTMLButtonElement)&&et(_e,Gr).contains(nt)&&!_e.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(_e,{target:nt})=>!(nt instanceof HTMLButtonElement)&&et(_e,Gr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-j,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[j,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-j],checker:s}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,j],checker:s}]]))}destroy(){var e,s,a;(e=et(this,Tu))==null||e.abort(),Pt(this,Tu,null),this._signal=null,this._eventBus._off("editingaction",et(this,lm)),this._eventBus._off("pagechanging",et(this,cm)),this._eventBus._off("scalechanging",et(this,um)),this._eventBus._off("rotationchanging",et(this,hm));for(const o of et(this,_s).values())o.destroy();et(this,_s).clear(),et(this,ms).clear(),et(this,Zo).clear(),Pt(this,Ws,null),et(this,ss).clear(),et(this,or).destroy(),(s=et(this,Cu))==null||s.destroy(),(a=et(this,Sr))==null||a.hide(),Pt(this,Sr,null),et(this,Ar)&&(clearTimeout(et(this,Ar)),Pt(this,Ar,null)),et(this,_r)&&(clearTimeout(et(this,_r)),Pt(this,_r,null))}async mlGuess(e){var s;return((s=et(this,Mu))==null?void 0:s.guess(e))||null}get hasMLManager(){return!!et(this,Mu)}get hcmFilter(){return shadow(this,"hcmFilter",et(this,xl)?et(this,Jp).addHCMFilter(et(this,xl).foreground,et(this,xl).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(et(this,Gr)).direction)}get highlightColors(){return shadow(this,"highlightColors",et(this,Pu)?new Map(et(this,Pu).split(",").map(e=>e.split("=").map(s=>s.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){Pt(this,_g,e)}editAltText(e){var s;(s=et(this,Cu))==null||s.editAltText(this,e)}onPageChanging({pageNumber:e}){Pt(this,ku,e-1)}focusMainContainer(){et(this,Gr).focus()}findParent(e,s){for(const a of et(this,_s).values()){const{x:o,y:j,width:_e,height:nt}=a.div.getBoundingClientRect();if(e>=o&&e<=o+_e&&s>=j&&s<=j+nt)return a}return null}disableUserSelect(e=!1){et(this,fm).classList.toggle("noUserSelect",e)}addShouldRescale(e){et(this,Zo).add(e)}removeShouldRescale(e){et(this,Zo).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*PixelsPerInch.PDF_TO_CSS_UNITS;for(const s of et(this,Zo))s.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:j,focusOffset:_e}=s,nt=s.toString(),st=wt(this,Vn,Tv).call(this,s).closest(".textLayer"),rt=this.getSelectionBoxes(st);if(rt){s.empty(),et(this,ws)===AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const at of et(this,_s).values())if(at.hasTextLayer(st)){at.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:rt,anchorNode:a,anchorOffset:o,focusNode:j,focusOffset:_e,text:nt});break}}}addToAnnotationStorage(e){!e.isEmpty()&&et(this,Wr)&&!et(this,Wr).has(e.id)&&et(this,Wr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,et(this,go)&&(Pt(this,go,!1),wt(this,Vn,Cv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const s of et(this,ss))if(s.div.contains(e)){Pt(this,yl,[s,e]),s._focusEventsAllowed=!1;break}}focus(){if(!et(this,yl))return;const[e,s]=et(this,yl);Pt(this,yl,null),s.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}addEditListeners(){wt(this,Vn,Xy).call(this),wt(this,Vn,Yy).call(this)}removeEditListeners(){wt(this,Vn,vE).call(this),wt(this,Vn,Ky).call(this)}dragOver(e){for(const{type:s}of e.dataTransfer.items)for(const a of et(this,lr))if(a.isHandlingMimeForPasting(s)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const s of e.dataTransfer.items)for(const a of et(this,lr))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer),e.preventDefault();return}}copy(e){var a;if(e.preventDefault(),(a=et(this,Ws))==null||a.commitOrRemove(),!this.hasSelection)return;const s=[];for(const o of et(this,ss)){const j=o.serialize(!0);j&&s.push(j)}s.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:s}=e;for(const j of s.items)for(const _e of et(this,lr))if(_e.isHandlingMimeForPasting(j.type)){_e.paste(j,this.currentLayer);return}let a=s.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(j){warn(`paste: "${j.message}".`);return}if(!Array.isArray(a))return;this.unselectAll();const o=this.currentLayer;try{const j=[];for(const tt of a){const st=o.deserialize(tt);if(!st)return;j.push(st)}const _e=()=>{for(const tt of j)wt(this,Vn,qy).call(this,tt);wt(this,Vn,Qy).call(this,j)},nt=()=>{for(const tt of j)tt.remove()};this.addCommands({cmd:_e,undo:nt,mustExec:!0})}catch(j){warn(`paste: "${j.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),et(this,ws)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&wu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,et(this,go)&&(Pt(this,go,!1),wt(this,Vn,Cv).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(wt(this,Vn,gE).call(this),wt(this,Vn,Yy).call(this),wt(this,Vn,Fs).call(this,{isEditing:et(this,ws)!==AnnotationEditorType.NONE,isEmpty:wt(this,Vn,Ep).call(this),hasSomethingToUndo:et(this,or).hasSomethingToUndo(),hasSomethingToRedo:et(this,or).hasSomethingToRedo(),hasSelectedEditor:!1})):(wt(this,Vn,mE).call(this),wt(this,Vn,Ky).call(this),wt(this,Vn,Fs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!et(this,lr)){Pt(this,lr,e);for(const s of et(this,lr))wt(this,Vn,ho).call(this,s.defaultPropertiesToUpdate)}}getId(){return et(this,ky).id}get currentLayer(){return et(this,_s).get(et(this,ku))}getLayer(e){return et(this,_s).get(e)}get currentPageIndex(){return et(this,ku)}addLayer(e){et(this,_s).set(e.pageIndex,e),et(this,mo)?e.enable():e.disable()}removeLayer(e){et(this,_s).delete(e.pageIndex)}updateMode(e,s=null,a=!1){if(et(this,ws)!==e){if(Pt(this,ws,e),e===AnnotationEditorType.NONE){this.setEditingState(!1),wt(this,Vn,bE).call(this);return}this.setEditingState(!0),wt(this,Vn,xE).call(this),this.unselectAll();for(const o of et(this,_s).values())o.updateMode(e);if(!s&&a){this.addNewEditorFromKeyboard();return}if(s){for(const o of et(this,ms).values())if(o.annotationElementId===s){this.setSelected(o),o.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==et(this,ws)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,s){var a;if(et(this,lr)){switch(e){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(a=et(this,_g))==null||a.updateColor(s);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(et(this,em)||Pt(this,em,new Map)).set(e,s),this.showAllEditors("highlight",s);break}for(const o of et(this,ss))o.updateParams(e,s);for(const o of et(this,lr))o.updateDefaultParams(e,s)}}showAllEditors(e,s,a=!1){var j;for(const _e of et(this,ms).values())_e.editorType===e&&_e.show(s);(((j=et(this,em))==null?void 0:j.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==s&&wt(this,Vn,ho).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(e=!1){if(et(this,Zp)!==e){Pt(this,Zp,e);for(const s of et(this,_s).values())e?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",e)}}getEditors(e){const s=[];for(const a of et(this,ms).values())a.pageIndex===e&&s.push(a);return s}getEditor(e){return et(this,ms).get(e)}addEditor(e){et(this,ms).set(e.id,e)}removeEditor(e){var s;e.div.contains(document.activeElement)&&(et(this,Ar)&&clearTimeout(et(this,Ar)),Pt(this,Ar,setTimeout(()=>{this.focusMainContainer(),Pt(this,Ar,null)},0))),et(this,ms).delete(e.id),this.unselect(e),(!e.annotationElementId||!et(this,Jo).has(e.annotationElementId))&&((s=et(this,Wr))==null||s.remove(e.id))}addDeletedAnnotationElement(e){et(this,Jo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return et(this,Jo).has(e)}removeDeletedAnnotationElement(e){et(this,Jo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){et(this,Ws)!==e&&(Pt(this,Ws,e),e&&wt(this,Vn,ho).call(this,e.propertiesToUpdate))}updateUI(e){et(this,Vn,EE)===e&&wt(this,Vn,ho).call(this,e.propertiesToUpdate)}toggleSelected(e){if(et(this,ss).has(e)){et(this,ss).delete(e),e.unselect(),wt(this,Vn,Fs).call(this,{hasSelectedEditor:this.hasSelection});return}et(this,ss).add(e),e.select(),wt(this,Vn,ho).call(this,e.propertiesToUpdate),wt(this,Vn,Fs).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const s of et(this,ss))s!==e&&s.unselect();et(this,ss).clear(),et(this,ss).add(e),e.select(),wt(this,Vn,ho).call(this,e.propertiesToUpdate),wt(this,Vn,Fs).call(this,{hasSelectedEditor:!0})}isSelected(e){return et(this,ss).has(e)}get firstSelectedEditor(){return et(this,ss).values().next().value}unselect(e){e.unselect(),et(this,ss).delete(e),wt(this,Vn,Fs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return et(this,ss).size!==0}get isEnterHandled(){return et(this,ss).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){et(this,or).undo(),wt(this,Vn,Fs).call(this,{hasSomethingToUndo:et(this,or).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:wt(this,Vn,Ep).call(this)})}redo(){et(this,or).redo(),wt(this,Vn,Fs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:et(this,or).hasSomethingToRedo(),isEmpty:wt(this,Vn,Ep).call(this)})}addCommands(e){et(this,or).add(e),wt(this,Vn,Fs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:wt(this,Vn,Ep).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...et(this,ss)],s=()=>{for(const o of e)o.remove()},a=()=>{for(const o of e)wt(this,Vn,qy).call(this,o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){var e;(e=et(this,Ws))==null||e.commitOrRemove()}hasSomethingToControl(){return et(this,Ws)||this.hasSelection}selectAll(){for(const e of et(this,ss))e.commit();wt(this,Vn,Qy).call(this,et(this,ms).values())}unselectAll(){if(!(et(this,Ws)&&(et(this,Ws).commitOrRemove(),et(this,ws)!==AnnotationEditorType.NONE))&&this.hasSelection){for(const e of et(this,ss))e.unselect();et(this,ss).clear(),wt(this,Vn,Fs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,s,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;et(this,vo)[0]+=e,et(this,vo)[1]+=s;const[o,j]=et(this,vo),_e=[...et(this,ss)],nt=1e3;et(this,_r)&&clearTimeout(et(this,_r)),Pt(this,_r,setTimeout(()=>{Pt(this,_r,null),et(this,vo)[0]=et(this,vo)[1]=0,this.addCommands({cmd:()=>{for(const tt of _e)et(this,ms).has(tt.id)&&tt.translateInPage(o,j)},undo:()=>{for(const tt of _e)et(this,ms).has(tt.id)&&tt.translateInPage(-o,-j)},mustExec:!1})},nt));for(const tt of _e)tt.translateInPage(e,s)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Pt(this,Er,new Map);for(const e of et(this,ss))et(this,Er).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!et(this,Er))return!1;this.disableUserSelect(!1);const e=et(this,Er);Pt(this,Er,null);let s=!1;for(const[{x:o,y:j,pageIndex:_e},nt]of e)nt.newX=o,nt.newY=j,nt.newPageIndex=_e,s||(s=o!==nt.savedX||j!==nt.savedY||_e!==nt.savedPageIndex);if(!s)return!1;const a=(o,j,_e,nt)=>{if(et(this,ms).has(o.id)){const tt=et(this,_s).get(nt);tt?o._setParentAndPosition(tt,j,_e):(o.pageIndex=nt,o.x=j,o.y=_e)}};return this.addCommands({cmd:()=>{for(const[o,{newX:j,newY:_e,newPageIndex:nt}]of e)a(o,j,_e,nt)},undo:()=>{for(const[o,{savedX:j,savedY:_e,savedPageIndex:nt}]of e)a(o,j,_e,nt)},mustExec:!0}),!0}dragSelectedEditors(e,s){if(et(this,Er))for(const a of et(this,Er).keys())a.drag(e,s)}rebuild(e){if(e.parent===null){const s=this.getLayer(e.pageIndex);s?(s.changeParent(e),s.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||et(this,ss).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return et(this,Ws)===e}getActive(){return et(this,Ws)}getMode(){return et(this,ws)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(e){if(!e)return null;const s=document.getSelection();for(let st=0,rt=s.rangeCount;st<rt;st++)if(!e.contains(s.getRangeAt(st).commonAncestorContainer))return null;const{x:a,y:o,width:j,height:_e}=e.getBoundingClientRect();let nt;switch(e.getAttribute("data-main-rotation")){case"90":nt=(st,rt,at,it)=>({x:(rt-o)/_e,y:1-(st+at-a)/j,width:it/_e,height:at/j});break;case"180":nt=(st,rt,at,it)=>({x:1-(st+at-a)/j,y:1-(rt+it-o)/_e,width:at/j,height:it/_e});break;case"270":nt=(st,rt,at,it)=>({x:1-(rt+it-o)/_e,y:(st-a)/j,width:it/_e,height:at/j});break;default:nt=(st,rt,at,it)=>({x:(st-a)/j,y:(rt-o)/_e,width:at/j,height:it/_e});break}const tt=[];for(let st=0,rt=s.rangeCount;st<rt;st++){const at=s.getRangeAt(st);if(!at.collapsed)for(const{x:it,y:ct,width:ot,height:ut}of at.getClientRects())ot===0||ut===0||tt.push(nt(it,ct,ot,ut))}return tt.length===0?null:tt}addChangedExistingAnnotation({annotationElementId:e,id:s}){(et(this,Ru)||Pt(this,Ru,new Map)).set(e,s)}removeChangedExistingAnnotation({annotationElementId:e}){var s;(s=et(this,Ru))==null||s.delete(e)}renderAnnotationElement(e){var o;const s=(o=et(this,Ru))==null?void 0:o.get(e.data.id);if(!s)return;const a=et(this,Wr).getRawValue(s);a&&(et(this,ws)===AnnotationEditorType.NONE&&!a.hasBeenModified||a.renderAnnotationElement(e))}};Tu=new WeakMap,Ws=new WeakMap,ms=new WeakMap,_s=new WeakMap,Cu=new WeakMap,Wr=new WeakMap,Ru=new WeakMap,or=new WeakMap,ku=new WeakMap,Jo=new WeakMap,Er=new WeakMap,lr=new WeakMap,Zo=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Ar=new WeakMap,Pu=new WeakMap,go=new WeakMap,Sr=new WeakMap,ky=new WeakMap,mo=new WeakMap,Zp=new WeakMap,yl=new WeakMap,_g=new WeakMap,Mu=new WeakMap,ws=new WeakMap,ss=new WeakMap,Vr=new WeakMap,xl=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,sm=new WeakMap,rm=new WeakMap,im=new WeakMap,am=new WeakMap,om=new WeakMap,lm=new WeakMap,cm=new WeakMap,um=new WeakMap,hm=new WeakMap,dm=new WeakMap,vo=new WeakMap,_r=new WeakMap,Gr=new WeakMap,fm=new WeakMap,Vn=new WeakSet,Tv=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},dE=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const a=wt(this,Vn,Tv).call(this,e).closest(".textLayer"),o=this.getSelectionBoxes(a);o&&(et(this,Sr)||Pt(this,Sr,new HighlightToolbar(this)),et(this,Sr).show(a,o,this.direction==="ltr"))},fE=function(){var j,_e,nt;const e=document.getSelection();if(!e||e.isCollapsed){et(this,Vr)&&((j=et(this,Sr))==null||j.hide(),Pt(this,Vr,null),wt(this,Vn,Fs).call(this,{hasSelectedText:!1}));return}const{anchorNode:s}=e;if(s===et(this,Vr))return;if(!wt(this,Vn,Tv).call(this,e).closest(".textLayer")){et(this,Vr)&&((_e=et(this,Sr))==null||_e.hide(),Pt(this,Vr,null),wt(this,Vn,Fs).call(this,{hasSelectedText:!1}));return}if((nt=et(this,Sr))==null||nt.hide(),Pt(this,Vr,s),wt(this,Vn,Fs).call(this,{hasSelectedText:!0}),!(et(this,ws)!==AnnotationEditorType.HIGHLIGHT&&et(this,ws)!==AnnotationEditorType.NONE)&&(et(this,ws)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Pt(this,go,this.isShiftKeyDown),!this.isShiftKeyDown)){const tt=this._signal,st=rt=>{rt.type==="pointerup"&&rt.button!==0||(window.removeEventListener("pointerup",st),window.removeEventListener("blur",st),rt.type==="pointerup"&&wt(this,Vn,Cv).call(this,"main_toolbar"))};window.addEventListener("pointerup",st,{signal:tt}),window.addEventListener("blur",st,{signal:tt})}},Cv=function(e=""){et(this,ws)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(e):et(this,Qp)&&wt(this,Vn,dE).call(this)},pE=function(){document.addEventListener("selectionchange",wt(this,Vn,fE).bind(this),{signal:this._signal})},gE=function(){const e=this._signal;window.addEventListener("focus",et(this,nm),{signal:e}),window.addEventListener("blur",et(this,tm),{signal:e})},mE=function(){window.removeEventListener("focus",et(this,nm)),window.removeEventListener("blur",et(this,tm))},Xy=function(){const e=this._signal;window.addEventListener("keydown",et(this,am),{signal:e}),window.addEventListener("keyup",et(this,om),{signal:e})},vE=function(){window.removeEventListener("keydown",et(this,am)),window.removeEventListener("keyup",et(this,om))},Yy=function(){const e=this._signal;document.addEventListener("copy",et(this,sm),{signal:e}),document.addEventListener("cut",et(this,rm),{signal:e}),document.addEventListener("paste",et(this,im),{signal:e})},Ky=function(){document.removeEventListener("copy",et(this,sm)),document.removeEventListener("cut",et(this,rm)),document.removeEventListener("paste",et(this,im))},yE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Fs=function(e){Object.entries(e).some(([a,o])=>et(this,dm)[a]!==o)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(et(this,dm),e)}),et(this,ws)===AnnotationEditorType.HIGHLIGHT&&e.hasSelectedEditor===!1&&wt(this,Vn,ho).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},ho=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},xE=function(){if(!et(this,mo)){Pt(this,mo,!0);for(const e of et(this,_s).values())e.enable();for(const e of et(this,ms).values())e.enable()}},bE=function(){if(this.unselectAll(),et(this,mo)){Pt(this,mo,!1);for(const e of et(this,_s).values())e.disable();for(const e of et(this,ms).values())e.disable()}},qy=function(e){const s=et(this,_s).get(e.pageIndex);s?s.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},EE=function(){let e=null;for(e of et(this,ss));return e},Ep=function(){if(et(this,ms).size===0)return!0;if(et(this,ms).size===1)for(const e of et(this,ms).values())return e.isEmpty();return!1},Qy=function(e){for(const s of et(this,ss))s.unselect();et(this,ss).clear();for(const s of e)s.isEmpty()||(et(this,ss).add(s),s.select());wt(this,Vn,Fs).call(this,{hasSelectedEditor:this.hasSelection})},Hn(wu,"TRANSLATE_SMALL",1),Hn(wu,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=wu;var Xr,Yr,cr,Kr,Vs,Du,ur,pm,Jy;const Br=class Br{constructor(e){Dt(this,pm);Dt(this,Xr,"");Dt(this,Yr,!1);Dt(this,cr,null);Dt(this,Kr,null);Dt(this,Vs,null);Dt(this,Du,!1);Dt(this,ur,null);Pt(this,ur,e)}static initialize(e){Br._l10nPromise||(Br._l10nPromise=e)}async render(){const e=Pt(this,cr,document.createElement("button"));e.className="altText";const s=await Br._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=s,e.setAttribute("aria-label",s),e.tabIndex="0";const a=et(this,ur)._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:a}),e.addEventListener("pointerdown",j=>j.stopPropagation(),{signal:a});const o=j=>{j.preventDefault(),et(this,ur)._uiManager.editAltText(et(this,ur))};return e.addEventListener("click",o,{capture:!0,signal:a}),e.addEventListener("keydown",j=>{j.target===e&&j.key==="Enter"&&(Pt(this,Du,!0),o(j))},{signal:a}),await wt(this,pm,Jy).call(this),e}finish(){et(this,cr)&&(et(this,cr).focus({focusVisible:et(this,Du)}),Pt(this,Du,!1))}isEmpty(){return!et(this,Xr)&&!et(this,Yr)}get data(){return{altText:et(this,Xr),decorative:et(this,Yr)}}set data({altText:e,decorative:s}){et(this,Xr)===e&&et(this,Yr)===s||(Pt(this,Xr,e),Pt(this,Yr,s),wt(this,pm,Jy).call(this))}toggle(e=!1){et(this,cr)&&(!e&&et(this,Vs)&&(clearTimeout(et(this,Vs)),Pt(this,Vs,null)),et(this,cr).disabled=!e)}destroy(){var e;(e=et(this,cr))==null||e.remove(),Pt(this,cr,null),Pt(this,Kr,null)}};Xr=new WeakMap,Yr=new WeakMap,cr=new WeakMap,Kr=new WeakMap,Vs=new WeakMap,Du=new WeakMap,ur=new WeakMap,pm=new WeakSet,Jy=async function(){var o;const e=et(this,cr);if(!e)return;if(!et(this,Xr)&&!et(this,Yr)){e.classList.remove("done"),(o=et(this,Kr))==null||o.remove();return}e.classList.add("done"),Br._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(j=>{e.setAttribute("aria-label",j)});let s=et(this,Kr);if(!s){Pt(this,Kr,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip");const j=s.id=`alt-text-tooltip-${et(this,ur).id}`;e.setAttribute("aria-describedby",j);const _e=100,nt=et(this,ur)._uiManager._signal;nt.addEventListener("abort",()=>{clearTimeout(et(this,Vs)),Pt(this,Vs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{Pt(this,Vs,setTimeout(()=>{Pt(this,Vs,null),et(this,Kr).classList.add("show"),et(this,ur)._reportTelemetry({action:"alt_text_tooltip"})},_e))},{signal:nt}),e.addEventListener("mouseleave",()=>{var tt;et(this,Vs)&&(clearTimeout(et(this,Vs)),Pt(this,Vs,null)),(tt=et(this,Kr))==null||tt.classList.remove("show")},{signal:nt})}s.innerText=et(this,Yr)?await Br._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):et(this,Xr),s.parentNode||e.append(s);const a=et(this,ur).getImageForAltText();a==null||a.setAttribute("aria-describedby",s.id)},Hn(Br,"_l10nPromise",null);let AltText=Br;var El,hr,Ds,Iu,Al,Ts,Sl,Fu,Lu,Is,gm,_l,yo,mm,wl,qr,wr,Ou,Nu,tr,vm,Py,Qn,Zy,ym,e0,t0,AE,SE,n0,s0,r0,_E,wE,TE,CE,i0,Ap;const as=class as{constructor(e){Dt(this,Qn);Dt(this,El,null);Dt(this,hr,null);Dt(this,Ds,null);Dt(this,Iu,!1);Dt(this,Al,!1);Dt(this,Ts,null);Dt(this,Sl,null);Dt(this,Fu,this.focusin.bind(this));Dt(this,Lu,this.focusout.bind(this));Dt(this,Is,null);Dt(this,gm,"");Dt(this,_l,!1);Dt(this,yo,null);Dt(this,mm,!1);Dt(this,wl,!1);Dt(this,qr,!1);Dt(this,wr,null);Dt(this,Ou,0);Dt(this,Nu,0);Dt(this,tr,null);Hn(this,"_initialOptions",Object.create(null));Hn(this,"_isVisible",!0);Hn(this,"_uiManager",null);Hn(this,"_focusEventsAllowed",!0);Hn(this,"_l10nPromise",null);Dt(this,vm,!1);Dt(this,Py,as._zIndex++);this.constructor===as&&unreachable("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:s,rawDims:{pageWidth:a,pageHeight:o,pageX:j,pageY:_e}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,o],this.pageTranslation=[j,_e];const[nt,tt]=this.parentDimensions;this.x=e.x/nt,this.y=e.y/tt,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=as.prototype._resizeWithKeyboard,s=AnnotationEditorUIManager.TRANSLATE_SMALL,a=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-a,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[a,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-a]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,a]}],[["Escape","mac+Escape"],as.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const s=new FakeEditor({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});s.annotationElementId=e.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(e,s,a){if(as._l10nPromise||(as._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(j=>[j,e.get(j.replaceAll(/([A-Z])/g,_e=>`-${_e.toLowerCase()}`))]))),a!=null&&a.strings)for(const j of a.strings)as._l10nPromise.set(j,e.get(j));if(as._borderLineWidth!==-1)return;const o=getComputedStyle(document.documentElement);as._borderLineWidth=parseFloat(o.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,s){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return et(this,vm)}set _isDraggable(e){var s;Pt(this,vm,e),(s=this.div)==null||s.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(e*2),this.y+=this.width*e/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(e*2),this.y-=this.width*e/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=et(this,Py)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):wt(this,Qn,Ap).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(et(this,_l)?Pt(this,_l,!1):this.parent.setSelected(this))}focusout(e){var a;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const s=e.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(e.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,s,a,o){const[j,_e]=this.parentDimensions;[a,o]=this.screenToPageTranslation(a,o),this.x=(e+a)/j,this.y=(s+o)/_e,this.fixAndSetPosition()}translate(e,s){wt(this,Qn,Zy).call(this,this.parentDimensions,e,s)}translateInPage(e,s){et(this,yo)||Pt(this,yo,[this.x,this.y]),wt(this,Qn,Zy).call(this,this.pageDimensions,e,s),this.div.scrollIntoView({block:"nearest"})}drag(e,s){et(this,yo)||Pt(this,yo,[this.x,this.y]);const[a,o]=this.parentDimensions;if(this.x+=e/a,this.y+=s/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:st,y:rt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,st,rt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:j,y:_e}=this;const[nt,tt]=this.getBaseTranslation();j+=nt,_e+=tt,this.div.style.left=`${(100*j).toFixed(2)}%`,this.div.style.top=`${(100*_e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!et(this,yo)&&(et(this,yo)[0]!==this.x||et(this,yo)[1]!==this.y)}getBaseTranslation(){const[e,s]=this.parentDimensions,{_borderLineWidth:a}=as,o=a/e,j=a/s;switch(this.rotation){case 90:return[-o,j];case 180:return[o,j];case 270:return[o,-j];default:return[-o,-j]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[s,a]=this.pageDimensions;let{x:o,y:j,width:_e,height:nt}=this;if(_e*=s,nt*=a,o*=s,j*=a,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(s-_e,o)),j=Math.max(0,Math.min(a-nt,j));break;case 90:o=Math.max(0,Math.min(s-nt,o)),j=Math.min(a,Math.max(_e,j));break;case 180:o=Math.min(s,Math.max(_e,o)),j=Math.min(a,Math.max(nt,j));break;case 270:o=Math.min(s,Math.max(nt,o)),j=Math.max(0,Math.min(a-_e,j));break}this.x=o/=s,this.y=j/=a;const[tt,st]=this.getBaseTranslation();o+=tt,j+=st;const{style:rt}=this.div;rt.left=`${(100*o).toFixed(2)}%`,rt.top=`${(100*j).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,s){var a;return wt(a=as,ym,e0).call(a,e,s,this.parentRotation)}pageTranslationToScreen(e,s){var a;return wt(a=as,ym,e0).call(a,e,s,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[s,a]}=this,o=s*e,j=a*e;return util_FeatureTest.isCSSRoundSupported?[Math.round(o),Math.round(j)]:[o,j]}setDims(e,s){const[a,o]=this.parentDimensions;this.div.style.width=`${(100*e/a).toFixed(2)}%`,et(this,Al)||(this.div.style.height=`${(100*s/o).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:s,width:a}=e,o=a.endsWith("%"),j=!et(this,Al)&&s.endsWith("%");if(o&&j)return;const[_e,nt]=this.parentDimensions;o||(e.width=`${(100*parseFloat(a)/_e).toFixed(2)}%`),!et(this,Al)&&!j&&(e.height=`${(100*parseFloat(s)/nt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=et(this,Ds))==null||e.finish()}async addEditToolbar(){return et(this,Is)||et(this,wl)?et(this,Is):(Pt(this,Is,new EditorToolbar(this)),this.div.append(et(this,Is).render()),et(this,Ds)&&et(this,Is).addAltTextButton(await et(this,Ds).render()),et(this,Is))}removeEditToolbar(){var e;et(this,Is)&&(et(this,Is).remove(),Pt(this,Is,null),(e=et(this,Ds))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){et(this,Ds)||(AltText.initialize(as._l10nPromise),Pt(this,Ds,new AltText(this)),et(this,El)&&(et(this,Ds).data=et(this,El),Pt(this,El,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=et(this,Ds))==null?void 0:e.data}set altTextData(e){et(this,Ds)&&(et(this,Ds).data=e)}hasAltText(){var e;return!((e=et(this,Ds))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=et(this,Iu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",et(this,Fu),{signal:e}),this.div.addEventListener("focusout",et(this,Lu),{signal:e});const[s,a]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*a/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/a).toFixed(2)}%`);const[o,j]=this.getInitialTranslation();return this.translate(o,j),bindEvents(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:s}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&s){e.preventDefault();return}if(Pt(this,_l,!0),this._isDraggable){wt(this,Qn,_E).call(this,e);return}wt(this,Qn,r0).call(this,e)}moveInDOM(){et(this,wr)&&clearTimeout(et(this,wr)),Pt(this,wr,setTimeout(()=>{var e;Pt(this,wr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,s,a){e.changeParent(this),this.x=s,this.y=a,this.fixAndSetPosition()}getRect(e,s,a=this.rotation){const o=this.parentScale,[j,_e]=this.pageDimensions,[nt,tt]=this.pageTranslation,st=e/o,rt=s/o,at=this.x*j,it=this.y*_e,ct=this.width*j,ot=this.height*_e;switch(a){case 0:return[at+st+nt,_e-it-rt-ot+tt,at+st+ct+nt,_e-it-rt+tt];case 90:return[at+rt+nt,_e-it+st+tt,at+rt+ot+nt,_e-it+st+ct+tt];case 180:return[at-st-ct+nt,_e-it+rt+tt,at-st+nt,_e-it+rt+ot+tt];case 270:return[at-rt-ot+nt,_e-it-st-ct+tt,at-rt+nt,_e-it-st+tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,s){const[a,o,j,_e]=e,nt=j-a,tt=_e-o;switch(this.rotation){case 0:return[a,s-_e,nt,tt];case 90:return[a,s-o,tt,nt];case 180:return[j,s-o,nt,tt];case 270:return[j,s-_e,tt,nt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Pt(this,wl,!0)}disableEditMode(){Pt(this,wl,!1)}isInEditMode(){return et(this,wl)}shouldGetKeyboardEvents(){return et(this,qr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,a;const e=this._uiManager._signal;(s=this.div)==null||s.addEventListener("focusin",et(this,Fu),{signal:e}),(a=this.div)==null||a.addEventListener("focusout",et(this,Lu),{signal:e})}rotate(e){}serialize(e=!1,s=null){unreachable("An editor must be serializable")}static deserialize(e,s,a){const o=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:a});o.rotation=e.rotation,Pt(o,El,e.accessibilityData);const[j,_e]=o.pageDimensions,[nt,tt,st,rt]=o.getRectInCurrentCoords(e.rect,_e);return o.x=nt/j,o.y=tt/_e,o.width=st/j,o.height=rt/_e,o}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",et(this,Fu)),this.div.removeEventListener("focusout",et(this,Lu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),et(this,wr)&&(clearTimeout(et(this,wr)),Pt(this,wr,null)),wt(this,Qn,Ap).call(this),this.removeEditToolbar(),et(this,tr)){for(const e of et(this,tr).values())clearTimeout(e);Pt(this,tr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(wt(this,Qn,AE).call(this),et(this,Ts).classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),Pt(this,Sl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const s=et(this,Ts).children;if(!et(this,hr)){Pt(this,hr,Array.from(s));const _e=wt(this,Qn,wE).bind(this),nt=wt(this,Qn,TE).bind(this),tt=this._uiManager._signal;for(const st of et(this,hr)){const rt=st.getAttribute("data-resizer-name");st.setAttribute("role","spinbutton"),st.addEventListener("keydown",_e,{signal:tt}),st.addEventListener("blur",nt,{signal:tt}),st.addEventListener("focus",wt(this,Qn,CE).bind(this,rt),{signal:tt}),as._l10nPromise.get(`pdfjs-editor-resizer-label-${rt}`).then(at=>st.setAttribute("aria-label",at))}}const a=et(this,hr)[0];let o=0;for(const _e of s){if(_e===a)break;o++}const j=(360-this.rotation+this.parentRotation)%360/90*(et(this,hr).length/4);if(j!==o){if(j<o)for(let nt=0;nt<o-j;nt++)et(this,Ts).append(et(this,Ts).firstChild);else if(j>o)for(let nt=0;nt<j-o;nt++)et(this,Ts).firstChild.before(et(this,Ts).lastChild);let _e=0;for(const nt of s){const st=et(this,hr)[_e++].getAttribute("data-resizer-name");as._l10nPromise.get(`pdfjs-editor-resizer-label-${st}`).then(rt=>nt.setAttribute("aria-label",rt))}}wt(this,Qn,i0).call(this,0),Pt(this,qr,!0),et(this,Ts).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,s){et(this,qr)&&wt(this,Qn,s0).call(this,et(this,gm),{movementX:e,movementY:s})}_stopResizingWithKeyboard(){wt(this,Qn,Ap).call(this),this.div.focus()}select(){var e,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!et(this,Is)){this.addEditToolbar().then(()=>{var a,o;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((o=et(this,Is))==null||o.show())});return}(s=et(this,Is))==null||s.show()}unselect(){var e,s,a,o;(e=et(this,Ts))==null||e.classList.add("hidden"),(s=this.div)==null||s.classList.remove("selectedEditor"),(a=this.div)!=null&&a.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(o=et(this,Is))==null||o.hide()}updateParams(e,s){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return et(this,mm)}set isEditing(e){Pt(this,mm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,s){Pt(this,Al,!0);const a=e/s,{style:o}=this.div;o.aspectRatio=a,o.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,s=!1){if(s){et(this,tr)||Pt(this,tr,new Map);const{action:a}=e;let o=et(this,tr).get(a);o&&clearTimeout(o),o=setTimeout(()=>{this._reportTelemetry(e),et(this,tr).delete(a),et(this,tr).size===0&&Pt(this,tr,null)},as._telemetryTimeout),et(this,tr).set(a,o);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Pt(this,Iu,!1)}disable(){this.div&&(this.div.tabIndex=-1),Pt(this,Iu,!0)}renderAnnotationElement(e){let s=e.container.querySelector(".annotationContent");if(!s)s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),e.container.prepend(s);else if(s.nodeName==="CANVAS"){const a=s;s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),a.before(s)}return s}resetAnnotationElement(e){const{firstChild:s}=e.container;s.nodeName==="DIV"&&s.classList.contains("annotationContent")&&s.remove()}};El=new WeakMap,hr=new WeakMap,Ds=new WeakMap,Iu=new WeakMap,Al=new WeakMap,Ts=new WeakMap,Sl=new WeakMap,Fu=new WeakMap,Lu=new WeakMap,Is=new WeakMap,gm=new WeakMap,_l=new WeakMap,yo=new WeakMap,mm=new WeakMap,wl=new WeakMap,qr=new WeakMap,wr=new WeakMap,Ou=new WeakMap,Nu=new WeakMap,tr=new WeakMap,vm=new WeakMap,Py=new WeakMap,Qn=new WeakSet,Zy=function([e,s],a,o){[a,o]=this.screenToPageTranslation(a,o),this.x+=a/e,this.y+=o/s,this.fixAndSetPosition()},ym=new WeakSet,e0=function(e,s,a){switch(a){case 90:return[s,-e];case 180:return[-e,-s];case 270:return[-s,e];default:return[e,s]}},t0=function(e){switch(e){case 90:{const[s,a]=this.pageDimensions;return[0,-s/a,a/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,a]=this.pageDimensions;return[0,s/a,-a/s,0]}default:return[1,0,0,1]}},AE=function(){if(et(this,Ts))return;Pt(this,Ts,document.createElement("div")),et(this,Ts).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this._uiManager._signal;for(const a of e){const o=document.createElement("div");et(this,Ts).append(o),o.classList.add("resizer",a),o.setAttribute("data-resizer-name",a),o.addEventListener("pointerdown",wt(this,Qn,SE).bind(this,a),{signal:s}),o.addEventListener("contextmenu",noContextMenu,{signal:s}),o.tabIndex=-1}this.div.prepend(et(this,Ts))},SE=function(e,s){var ut;s.preventDefault();const{isMac:a}=util_FeatureTest.platform;if(s.button!==0||s.ctrlKey&&a)return;(ut=et(this,Ds))==null||ut.toggle(!1);const o=wt(this,Qn,s0).bind(this,e),j=this._isDraggable;this._isDraggable=!1;const _e=this._uiManager._signal,nt={passive:!0,capture:!0,signal:_e};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",o,nt),window.addEventListener("contextmenu",noContextMenu,{signal:_e});const tt=this.x,st=this.y,rt=this.width,at=this.height,it=this.parent.div.style.cursor,ct=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const ot=()=>{var dt;this.parent.togglePointerEvents(!0),(dt=et(this,Ds))==null||dt.toggle(!0),this._isDraggable=j,window.removeEventListener("pointerup",ot),window.removeEventListener("blur",ot),window.removeEventListener("pointermove",o,nt),window.removeEventListener("contextmenu",noContextMenu),this.parent.div.style.cursor=it,this.div.style.cursor=ct,wt(this,Qn,n0).call(this,tt,st,rt,at)};window.addEventListener("pointerup",ot,{signal:_e}),window.addEventListener("blur",ot,{signal:_e})},n0=function(e,s,a,o){const j=this.x,_e=this.y,nt=this.width,tt=this.height;j===e&&_e===s&&nt===a&&tt===o||this.addCommands({cmd:()=>{this.width=nt,this.height=tt,this.x=j,this.y=_e;const[st,rt]=this.parentDimensions;this.setDims(st*nt,rt*tt),this.fixAndSetPosition()},undo:()=>{this.width=a,this.height=o,this.x=e,this.y=s;const[st,rt]=this.parentDimensions;this.setDims(st*a,rt*o),this.fixAndSetPosition()},mustExec:!0})},s0=function(e,s){const[a,o]=this.parentDimensions,j=this.x,_e=this.y,nt=this.width,tt=this.height,st=as.MIN_SIZE/a,rt=as.MIN_SIZE/o,at=Bt=>Math.round(Bt*1e4)/1e4,it=wt(this,Qn,t0).call(this,this.rotation),ct=(Bt,Ut)=>[it[0]*Bt+it[2]*Ut,it[1]*Bt+it[3]*Ut],ot=wt(this,Qn,t0).call(this,360-this.rotation),ut=(Bt,Ut)=>[ot[0]*Bt+ot[2]*Ut,ot[1]*Bt+ot[3]*Ut];let dt,lt,ht=!1,xt=!1;switch(e){case"topLeft":ht=!0,dt=(Bt,Ut)=>[0,0],lt=(Bt,Ut)=>[Bt,Ut];break;case"topMiddle":dt=(Bt,Ut)=>[Bt/2,0],lt=(Bt,Ut)=>[Bt/2,Ut];break;case"topRight":ht=!0,dt=(Bt,Ut)=>[Bt,0],lt=(Bt,Ut)=>[0,Ut];break;case"middleRight":xt=!0,dt=(Bt,Ut)=>[Bt,Ut/2],lt=(Bt,Ut)=>[0,Ut/2];break;case"bottomRight":ht=!0,dt=(Bt,Ut)=>[Bt,Ut],lt=(Bt,Ut)=>[0,0];break;case"bottomMiddle":dt=(Bt,Ut)=>[Bt/2,Ut],lt=(Bt,Ut)=>[Bt/2,0];break;case"bottomLeft":ht=!0,dt=(Bt,Ut)=>[0,Ut],lt=(Bt,Ut)=>[Bt,0];break;case"middleLeft":xt=!0,dt=(Bt,Ut)=>[0,Ut/2],lt=(Bt,Ut)=>[Bt,Ut/2];break}const mt=dt(nt,tt),ft=lt(nt,tt);let gt=ct(...ft);const pt=at(j+gt[0]),vt=at(_e+gt[1]);let At=1,Rt=1,[bt,Tt]=this.screenToPageTranslation(s.movementX,s.movementY);if([bt,Tt]=ut(bt/a,Tt/o),ht){const Bt=Math.hypot(nt,tt);At=Rt=Math.max(Math.min(Math.hypot(ft[0]-mt[0]-bt,ft[1]-mt[1]-Tt)/Bt,1/nt,1/tt),st/nt,rt/tt)}else xt?At=Math.max(st,Math.min(1,Math.abs(ft[0]-mt[0]-bt)))/nt:Rt=Math.max(rt,Math.min(1,Math.abs(ft[1]-mt[1]-Tt)))/tt;const Lt=at(nt*At),Yt=at(tt*Rt);gt=ct(...lt(Lt,Yt));const zt=pt-gt[0],Wt=vt-gt[1];this.width=Lt,this.height=Yt,this.x=zt,this.y=Wt,this.setDims(a*Lt,o*Yt),this.fixAndSetPosition()},r0=function(e){const{isMac:s}=util_FeatureTest.platform;e.ctrlKey&&!s||e.shiftKey||e.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)},_E=function(e){const s=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let a,o;const j=this._uiManager._signal;s&&(this.div.classList.add("moving"),a={passive:!0,capture:!0,signal:j},Pt(this,Ou,e.clientX),Pt(this,Nu,e.clientY),o=nt=>{const{clientX:tt,clientY:st}=nt,[rt,at]=this.screenToPageTranslation(tt-et(this,Ou),st-et(this,Nu));Pt(this,Ou,tt),Pt(this,Nu,st),this._uiManager.dragSelectedEditors(rt,at)},window.addEventListener("pointermove",o,a));const _e=()=>{window.removeEventListener("pointerup",_e),window.removeEventListener("blur",_e),s&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",o,a)),Pt(this,_l,!1),this._uiManager.endDragSession()||wt(this,Qn,r0).call(this,e)};window.addEventListener("pointerup",_e,{signal:j}),window.addEventListener("blur",_e,{signal:j})},wE=function(e){as._resizerKeyboardManager.exec(this,e)},TE=function(e){var s;et(this,qr)&&((s=e.relatedTarget)==null?void 0:s.parentNode)!==et(this,Ts)&&wt(this,Qn,Ap).call(this)},CE=function(e){Pt(this,gm,et(this,qr)?e:"")},i0=function(e){if(et(this,hr))for(const s of et(this,hr))s.tabIndex=e},Ap=function(){if(Pt(this,qr,!1),wt(this,Qn,i0).call(this,-1),et(this,Sl)){const{savedX:e,savedY:s,savedWidth:a,savedHeight:o}=et(this,Sl);wt(this,Qn,n0).call(this,e,s,a,o),Pt(this,Sl,null)}},Dt(as,ym),Hn(as,"_borderLineWidth",-1),Hn(as,"_colorManager",new ColorManager),Hn(as,"_zIndex",1),Hn(as,"_telemetryTimeout",1e3);let AnnotationEditor=as;class FakeEditor extends AnnotationEditor{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(e){this.h1=e?e&4294967295:SEED,this.h2=e?e&4294967295:SEED}update(e){let s,a;if(typeof e=="string"){s=new Uint8Array(e.length*2),a=0;for(let ut=0,dt=e.length;ut<dt;ut++){const lt=e.charCodeAt(ut);lt<=255?s[a++]=lt:(s[a++]=lt>>>8,s[a++]=lt&255)}}else if(ArrayBuffer.isView(e))s=e.slice(),a=s.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const o=a>>2,j=a-o*4,_e=new Uint32Array(s.buffer,0,o);let nt=0,tt=0,st=this.h1,rt=this.h2;const at=3432918353,it=461845907,ct=at&MASK_LOW,ot=it&MASK_LOW;for(let ut=0;ut<o;ut++)ut&1?(nt=_e[ut],nt=nt*at&MASK_HIGH|nt*ct&MASK_LOW,nt=nt<<15|nt>>>17,nt=nt*it&MASK_HIGH|nt*ot&MASK_LOW,st^=nt,st=st<<13|st>>>19,st=st*5+3864292196):(tt=_e[ut],tt=tt*at&MASK_HIGH|tt*ct&MASK_LOW,tt=tt<<15|tt>>>17,tt=tt*it&MASK_HIGH|tt*ot&MASK_LOW,rt^=tt,rt=rt<<13|rt>>>19,rt=rt*5+3864292196);switch(nt=0,j){case 3:nt^=s[o*4+2]<<16;case 2:nt^=s[o*4+1]<<8;case 1:nt^=s[o*4],nt=nt*at&MASK_HIGH|nt*ct&MASK_LOW,nt=nt<<15|nt>>>17,nt=nt*it&MASK_HIGH|nt*ot&MASK_LOW,o&1?st^=nt:rt^=nt}this.h1=st,this.h2=rt}hexdigest(){let e=this.h1,s=this.h2;return e^=s>>>1,e=e*3981806797&MASK_HIGH|e*36045&MASK_LOW,s=s*4283543511&MASK_HIGH|((s<<16|e>>>16)*2950163797&MASK_HIGH)>>>16,e^=s>>>1,e=e*444984403&MASK_HIGH|e*60499&MASK_LOW,s=s*3301882366&MASK_HIGH|((s<<16|e>>>16)*3120437893&MASK_HIGH)>>>16,e^=s>>>1,(e>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var Tl,Cs,My,RE;class AnnotationStorage{constructor(){Dt(this,My);Dt(this,Tl,!1);Dt(this,Cs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,s){const a=et(this,Cs).get(e);return a===void 0?s:Object.assign(s,a)}getRawValue(e){return et(this,Cs).get(e)}remove(e){if(et(this,Cs).delete(e),et(this,Cs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of et(this,Cs).values())if(s instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,s){const a=et(this,Cs).get(e);let o=!1;if(a!==void 0)for(const[j,_e]of Object.entries(s))a[j]!==_e&&(o=!0,a[j]=_e);else o=!0,et(this,Cs).set(e,s);o&&wt(this,My,RE).call(this),s instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(e){return et(this,Cs).has(e)}getAll(){return et(this,Cs).size>0?objectFromMap(et(this,Cs)):null}setAll(e){for(const[s,a]of Object.entries(e))this.setValue(s,a)}get size(){return et(this,Cs).size}resetModified(){et(this,Tl)&&(Pt(this,Tl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(et(this,Cs).size===0)return SerializableEmpty;const e=new Map,s=new MurmurHash3_64,a=[],o=Object.create(null);let j=!1;for(const[_e,nt]of et(this,Cs)){const tt=nt instanceof AnnotationEditor?nt.serialize(!1,o):nt;tt&&(e.set(_e,tt),s.update(`${_e}:${JSON.stringify(tt)}`),j||(j=!!tt.bitmap))}if(j)for(const _e of e.values())_e.bitmap&&a.push(_e.bitmap);return e.size>0?{map:e,hash:s.hexdigest(),transfer:a}:SerializableEmpty}get editorStats(){let e=null;const s=new Map;for(const a of et(this,Cs).values()){if(!(a instanceof AnnotationEditor))continue;const o=a.telemetryFinalData;if(!o)continue;const{type:j}=o;s.has(j)||s.set(j,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const _e=e[j]||(e[j]=new Map);for(const[nt,tt]of Object.entries(o)){if(nt==="type")continue;let st=_e.get(nt);st||(st=new Map,_e.set(nt,st));const rt=st.get(tt)??0;st.set(tt,rt+1)}}for(const[a,o]of s)e[a]=o.computeTelemetryFinalData(e[a]);return e}}Tl=new WeakMap,Cs=new WeakMap,My=new WeakSet,RE=function(){et(this,Tl)||(Pt(this,Tl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var xm;class PrintAnnotationStorage extends AnnotationStorage{constructor(s){super();Dt(this,xm);const{map:a,hash:o,transfer:j}=s.serializable,_e=structuredClone(a,j?{transfer:j}:null);Pt(this,xm,{map:_e,hash:o,transfer:j})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return et(this,xm)}}xm=new WeakMap;var ju;class FontLoader{constructor({ownerDocument:e=globalThis.document,styleElement:s=null}){Dt(this,ju,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const s=this.styleElement.sheet;s.insertRule(e,s.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),et(this,ju).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:s}){if(!(!e||et(this,ju).has(e.loadedName))){if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:j}=e,_e=new FontFace(a,o,j);this.addNativeFontFace(_e);try{await _e.load(),et(this,ju).add(a),s==null||s(e)}catch{warn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(_e)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const a=e.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(o){throw warn(`Failed to load font '${a.family}': '${o}'.`),e.disableFontFace=!0,o}}return}const s=e.createFontFaceRule();if(s){if(this.insertRule(s),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const o=this._queueLoadingCallback(a);this._prepareFontLoadEvent(e,o)})}}get isFontLoadingAPISupported(){var s;const e=!!((s=this._document)!=null&&s.fonts);return shadow(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),shadow(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function s(){for(assert(!o.done,"completeRequest() cannot be called twice."),o.done=!0;a.length>0&&a[0].done;){const j=a.shift();setTimeout(j.callback,0)}}const{loadingRequests:a}=this,o={done:!1,complete:s,callback:e};return a.push(o),o}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,s){function a(mt,ft){return mt.charCodeAt(ft)<<24|mt.charCodeAt(ft+1)<<16|mt.charCodeAt(ft+2)<<8|mt.charCodeAt(ft+3)&255}function o(mt,ft,gt,pt){const vt=mt.substring(0,ft),At=mt.substring(ft+gt);return vt+pt+At}let j,_e;const nt=this._document.createElement("canvas");nt.width=1,nt.height=1;const tt=nt.getContext("2d");let st=0;function rt(mt,ft){if(++st>30){warn("Load test font never loaded."),ft();return}if(tt.font="30px "+mt,tt.fillText(".",0,20),tt.getImageData(0,0,1,1).data[3]>0){ft();return}setTimeout(rt.bind(null,mt,ft))}const at=`lt${Date.now()}${this.loadTestFontId++}`;let it=this._loadTestFont;it=o(it,976,at.length,at);const ot=16,ut=1482184792;let dt=a(it,ot);for(j=0,_e=at.length-3;j<_e;j+=4)dt=dt-ut+a(at,j)|0;j<at.length&&(dt=dt-ut+a(at+"XXX",j)|0),it=o(it,ot,4,string32(dt));const lt=`url(data:font/opentype;base64,${btoa(it)});`,ht=`@font-face {font-family:"${at}";src:${lt}}`;this.insertRule(ht);const xt=this._document.createElement("div");xt.style.visibility="hidden",xt.style.width=xt.style.height="10px",xt.style.position="absolute",xt.style.top=xt.style.left="0px";for(const mt of[e.loadedName,at]){const ft=this._document.createElement("span");ft.textContent="Hi",ft.style.fontFamily=mt,xt.append(ft)}this._document.body.append(xt),rt(at,()=>{xt.remove(),s.complete()})}}ju=new WeakMap;class FontFaceObject{constructor(e,{disableFontFace:s=!1,inspectFont:a=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=s===!0,this._inspectFont=a}createNativeFontFace(){var s;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(s=this._inspectFont)==null||s.call(this,this),e}createFontFaceRule(){var o;if(!this.data||this.disableFontFace)return null;const e=bytesToString(this.data),s=`url(data:${this.mimetype};base64,${btoa(e)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${s}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${s}}`}return(o=this._inspectFont)==null||o.call(this,this,s),a}getPathGenerator(e,s){if(this.compiledGlyphs[s]!==void 0)return this.compiledGlyphs[s];let a;try{a=e.get(this.loadedName+"_path_"+s)}catch(j){warn(`getPathGenerator - ignoring character: "${j}".`)}if(!Array.isArray(a)||a.length===0)return this.compiledGlyphs[s]=function(j,_e){};const o=[];for(let j=0,_e=a.length;j<_e;)switch(a[j++]){case FontRenderOps.BEZIER_CURVE_TO:{const[nt,tt,st,rt,at,it]=a.slice(j,j+6);o.push(ct=>ct.bezierCurveTo(nt,tt,st,rt,at,it)),j+=6}break;case FontRenderOps.MOVE_TO:{const[nt,tt]=a.slice(j,j+2);o.push(st=>st.moveTo(nt,tt)),j+=2}break;case FontRenderOps.LINE_TO:{const[nt,tt]=a.slice(j,j+2);o.push(st=>st.lineTo(nt,tt)),j+=2}break;case FontRenderOps.QUADRATIC_CURVE_TO:{const[nt,tt,st,rt]=a.slice(j,j+4);o.push(at=>at.quadraticCurveTo(nt,tt,st,rt)),j+=4}break;case FontRenderOps.RESTORE:o.push(nt=>nt.restore());break;case FontRenderOps.SAVE:o.push(nt=>nt.save());break;case FontRenderOps.SCALE:assert(o.length===2,"Scale command is only valid at the third position.");break;case FontRenderOps.TRANSFORM:{const[nt,tt,st,rt,at,it]=a.slice(j,j+6);o.push(ct=>ct.transform(nt,tt,st,rt,at,it)),j+=6}break;case FontRenderOps.TRANSLATE:{const[nt,tt]=a.slice(j,j+2);o.push(st=>st.translate(nt,tt)),j+=2}break}return this.compiledGlyphs[s]=function(_e,nt){o[0](_e),o[1](_e),_e.scale(nt,-nt);for(let tt=2,st=o.length;tt<st;tt++)o[tt](_e)}}}if(isNodeJS){var packageCapability=Promise.withResolvers(),packageMap=null;(async()=>{const e=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]),s=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),a=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),o=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0);let j,_e;return new Map(Object.entries({fs:e,http:s,https:a,url:o,canvas:j,path2d:_e}))})().then(e=>{packageMap=e,packageCapability.resolve()},e=>{warn(`loadPackages: ${e}`),packageMap=new Map,packageCapability.resolve()})}class NodePackages{static get promise(){return packageCapability.promise}static get(e){return packageMap==null?void 0:packageMap.get(e)}}const node_utils_fetchData=function(i){return NodePackages.get("fs").promises.readFile(i).then(s=>new Uint8Array(s))};class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(e,s){return NodePackages.get("canvas").createCanvas(e,s)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{_fetchData(e,s){return node_utils_fetchData(e).then(a=>({cMapData:a,compressionType:s}))}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData(e){return node_utils_fetchData(e)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(i,e){if(!e)return;const s=e[2]-e[0],a=e[3]-e[1],o=new Path2D;o.rect(e[0],e[1],s,a),i.clip(o)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&unreachable("Cannot initialize BaseShadingPattern.")}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let s;this._type==="axial"?s=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(s=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const a of this._colorStops)s.addColorStop(a[0],a[1]);return s}getPattern(e,s,a,o){let j;if(o===PathType.STROKE||o===PathType.FILL){const _e=s.current.getClippedPathBoundingBox(o,getCurrentTransform(e))||[0,0,0,0],nt=Math.ceil(_e[2]-_e[0])||1,tt=Math.ceil(_e[3]-_e[1])||1,st=s.cachedCanvases.getCanvas("pattern",nt,tt,!0),rt=st.context;rt.clearRect(0,0,rt.canvas.width,rt.canvas.height),rt.beginPath(),rt.rect(0,0,rt.canvas.width,rt.canvas.height),rt.translate(-_e[0],-_e[1]),a=Util.transform(a,[1,0,0,1,_e[0],_e[1]]),rt.transform(...s.baseTransform),this.matrix&&rt.transform(...this.matrix),applyBoundingBox(rt,this._bbox),rt.fillStyle=this._createGradient(rt),rt.fill(),j=e.createPattern(st.canvas,"no-repeat");const at=new DOMMatrix(a);j.setTransform(at)}else applyBoundingBox(e,this._bbox),j=this._createGradient(e);return j}}function drawTriangle(i,e,s,a,o,j,_e,nt){const tt=e.coords,st=e.colors,rt=i.data,at=i.width*4;let it;tt[s+1]>tt[a+1]&&(it=s,s=a,a=it,it=j,j=_e,_e=it),tt[a+1]>tt[o+1]&&(it=a,a=o,o=it,it=_e,_e=nt,nt=it),tt[s+1]>tt[a+1]&&(it=s,s=a,a=it,it=j,j=_e,_e=it);const ct=(tt[s]+e.offsetX)*e.scaleX,ot=(tt[s+1]+e.offsetY)*e.scaleY,ut=(tt[a]+e.offsetX)*e.scaleX,dt=(tt[a+1]+e.offsetY)*e.scaleY,lt=(tt[o]+e.offsetX)*e.scaleX,ht=(tt[o+1]+e.offsetY)*e.scaleY;if(ot>=ht)return;const xt=st[j],mt=st[j+1],ft=st[j+2],gt=st[_e],pt=st[_e+1],vt=st[_e+2],At=st[nt],Rt=st[nt+1],bt=st[nt+2],Tt=Math.round(ot),Lt=Math.round(ht);let Yt,zt,Wt,Bt,Ut,_t,$t,Xt;for(let Ct=Tt;Ct<=Lt;Ct++){if(Ct<dt){const kt=Ct<ot?0:(ot-Ct)/(ot-dt);Yt=ct-(ct-ut)*kt,zt=xt-(xt-gt)*kt,Wt=mt-(mt-pt)*kt,Bt=ft-(ft-vt)*kt}else{let kt;Ct>ht?kt=1:dt===ht?kt=0:kt=(dt-Ct)/(dt-ht),Yt=ut-(ut-lt)*kt,zt=gt-(gt-At)*kt,Wt=pt-(pt-Rt)*kt,Bt=vt-(vt-bt)*kt}let yt;Ct<ot?yt=0:Ct>ht?yt=1:yt=(ot-Ct)/(ot-ht),Ut=ct-(ct-lt)*yt,_t=xt-(xt-At)*yt,$t=mt-(mt-Rt)*yt,Xt=ft-(ft-bt)*yt;const Et=Math.round(Math.min(Yt,Ut)),St=Math.round(Math.max(Yt,Ut));let Ft=at*Ct+Et*4;for(let kt=Et;kt<=St;kt++)yt=(Yt-kt)/(Yt-Ut),yt<0?yt=0:yt>1&&(yt=1),rt[Ft++]=zt-(zt-_t)*yt|0,rt[Ft++]=Wt-(Wt-$t)*yt|0,rt[Ft++]=Bt-(Bt-Xt)*yt|0,rt[Ft++]=255}}function drawFigure(i,e,s){const a=e.coords,o=e.colors;let j,_e;switch(e.type){case"lattice":const nt=e.verticesPerRow,tt=Math.floor(a.length/nt)-1,st=nt-1;for(j=0;j<tt;j++){let rt=j*nt;for(let at=0;at<st;at++,rt++)drawTriangle(i,s,a[rt],a[rt+1],a[rt+nt],o[rt],o[rt+1],o[rt+nt]),drawTriangle(i,s,a[rt+nt+1],a[rt+1],a[rt+nt],o[rt+nt+1],o[rt+1],o[rt+nt])}break;case"triangles":for(j=0,_e=a.length;j<_e;j+=3)drawTriangle(i,s,a[j],a[j+1],a[j+2],o[j],o[j+1],o[j+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,s,a){const nt=Math.floor(this._bounds[0]),tt=Math.floor(this._bounds[1]),st=Math.ceil(this._bounds[2])-nt,rt=Math.ceil(this._bounds[3])-tt,at=Math.min(Math.ceil(Math.abs(st*e[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(rt*e[1]*1.1)),3e3),ct=st/at,ot=rt/it,ut={coords:this._coords,colors:this._colors,offsetX:-nt,offsetY:-tt,scaleX:1/ct,scaleY:1/ot},dt=at+2*2,lt=it+2*2,ht=a.getCanvas("mesh",dt,lt,!1),xt=ht.context,mt=xt.createImageData(at,it);if(s){const gt=mt.data;for(let pt=0,vt=gt.length;pt<vt;pt+=4)gt[pt]=s[0],gt[pt+1]=s[1],gt[pt+2]=s[2],gt[pt+3]=255}for(const gt of this._figures)drawFigure(mt,gt,ut);return xt.putImageData(mt,2,2),{canvas:ht.canvas,offsetX:nt-2*ct,offsetY:tt-2*ot,scaleX:ct,scaleY:ot}}getPattern(e,s,a,o){applyBoundingBox(e,this._bbox);let j;if(o===PathType.SHADING)j=Util.singularValueDecompose2dScale(getCurrentTransform(e));else if(j=Util.singularValueDecompose2dScale(s.baseTransform),this.matrix){const nt=Util.singularValueDecompose2dScale(this.matrix);j=[j[0]*nt[0],j[1]*nt[1]]}const _e=this._createMeshCanvas(j,o===PathType.SHADING?null:this._background,s.cachedCanvases);return o!==PathType.SHADING&&(e.setTransform(...s.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(_e.offsetX,_e.offsetY),e.scale(_e.scaleX,_e.scaleY),e.createPattern(_e.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(i){switch(i[0]){case"RadialAxial":return new RadialAxialShadingPattern(i);case"Mesh":return new MeshShadingPattern(i);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${i[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},Dy=class Dy{constructor(e,s,a,o,j){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=s,this.ctx=a,this.canvasGraphicsFactory=o,this.baseTransform=j}createPatternCanvas(e){const s=this.operatorList,a=this.bbox,o=this.xstep,j=this.ystep,_e=this.paintType,nt=this.tilingType,tt=this.color,st=this.canvasGraphicsFactory;info("TilingType: "+nt);const rt=a[0],at=a[1],it=a[2],ct=a[3],ot=Util.singularValueDecompose2dScale(this.matrix),ut=Util.singularValueDecompose2dScale(this.baseTransform),dt=[ot[0]*ut[0],ot[1]*ut[1]],lt=this.getSizeAndScale(o,this.ctx.canvas.width,dt[0]),ht=this.getSizeAndScale(j,this.ctx.canvas.height,dt[1]),xt=e.cachedCanvases.getCanvas("pattern",lt.size,ht.size,!0),mt=xt.context,ft=st.createCanvasGraphics(mt);ft.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ft,_e,tt);let gt=rt,pt=at,vt=it,At=ct;return rt<0&&(gt=0,vt+=Math.abs(rt)),at<0&&(pt=0,At+=Math.abs(at)),mt.translate(-(lt.scale*gt),-(ht.scale*pt)),ft.transform(lt.scale,0,0,ht.scale,0,0),mt.save(),this.clipBbox(ft,gt,pt,vt,At),ft.baseTransform=getCurrentTransform(ft.ctx),ft.executeOperatorList(s),ft.endDrawing(),{canvas:xt.canvas,scaleX:lt.scale,scaleY:ht.scale,offsetX:gt,offsetY:pt}}getSizeAndScale(e,s,a){e=Math.abs(e);const o=Math.max(Dy.MAX_PATTERN_SIZE,s);let j=Math.ceil(e*a);return j>=o?j=o:a=j/e,{scale:a,size:j}}clipBbox(e,s,a,o,j){const _e=o-s,nt=j-a;e.ctx.rect(s,a,_e,nt),e.current.updateRectMinMax(getCurrentTransform(e.ctx),[s,a,o,j]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,s,a){const o=e.ctx,j=e.current;switch(s){case PaintType.COLORED:const _e=this.ctx;o.fillStyle=_e.fillStyle,o.strokeStyle=_e.strokeStyle,j.fillColor=_e.fillStyle,j.strokeColor=_e.strokeStyle;break;case PaintType.UNCOLORED:const nt=Util.makeHexColor(a[0],a[1],a[2]);o.fillStyle=nt,o.strokeStyle=nt,j.fillColor=nt,j.strokeColor=nt;break;default:throw new FormatError(`Unsupported paint type: ${s}`)}}getPattern(e,s,a,o){let j=a;o!==PathType.SHADING&&(j=Util.transform(j,s.baseTransform),this.matrix&&(j=Util.transform(j,this.matrix)));const _e=this.createPatternCanvas(s);let nt=new DOMMatrix(j);nt=nt.translate(_e.offsetX,_e.offsetY),nt=nt.scale(1/_e.scaleX,1/_e.scaleY);const tt=e.createPattern(_e.canvas,"repeat");return tt.setTransform(nt),tt}};Hn(Dy,"MAX_PATTERN_SIZE",3e3);let TilingPattern=Dy;function convertBlackAndWhiteToRGBA({src:i,srcPos:e=0,dest:s,width:a,height:o,nonBlackColor:j=4294967295,inverseDecode:_e=!1}){const nt=util_FeatureTest.isLittleEndian?4278190080:255,[tt,st]=_e?[j,nt]:[nt,j],rt=a>>3,at=a&7,it=i.length;s=new Uint32Array(s.buffer);let ct=0;for(let ot=0;ot<o;ot++){for(const dt=e+rt;e<dt;e++){const lt=e<it?i[e]:255;s[ct++]=lt&128?st:tt,s[ct++]=lt&64?st:tt,s[ct++]=lt&32?st:tt,s[ct++]=lt&16?st:tt,s[ct++]=lt&8?st:tt,s[ct++]=lt&4?st:tt,s[ct++]=lt&2?st:tt,s[ct++]=lt&1?st:tt}if(at===0)continue;const ut=e<it?i[e++]:255;for(let dt=0;dt<at;dt++)s[ct++]=ut&1<<7-dt?st:tt}return{srcPos:e,destPos:ct}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(a,o){e.translate(a,o),this.__originalTranslate(a,o)},i.scale=function(a,o){e.scale(a,o),this.__originalScale(a,o)},i.transform=function(a,o,j,_e,nt,tt){e.transform(a,o,j,_e,nt,tt),this.__originalTransform(a,o,j,_e,nt,tt)},i.setTransform=function(a,o,j,_e,nt,tt){e.setTransform(a,o,j,_e,nt,tt),this.__originalSetTransform(a,o,j,_e,nt,tt)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(a){e.rotate(a),this.__originalRotate(a)},i.clip=function(a){e.clip(a),this.__originalClip(a)},i.moveTo=function(s,a){e.moveTo(s,a),this.__originalMoveTo(s,a)},i.lineTo=function(s,a){e.lineTo(s,a),this.__originalLineTo(s,a)},i.bezierCurveTo=function(s,a,o,j,_e,nt){e.bezierCurveTo(s,a,o,j,_e,nt),this.__originalBezierCurveTo(s,a,o,j,_e,nt)},i.rect=function(s,a,o,j){e.rect(s,a,o,j),this.__originalRect(s,a,o,j)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,s,a){let o;return this.cache[e]!==void 0?(o=this.cache[e],this.canvasFactory.reset(o,s,a)):(o=this.canvasFactory.create(s,a),this.cache[e]=o),o}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const s=this.cache[e];this.canvasFactory.destroy(s),delete this.cache[e]}}}function drawImageAtIntegerCoords(i,e,s,a,o,j,_e,nt,tt,st){const[rt,at,it,ct,ot,ut]=getCurrentTransform(i);if(at===0&&it===0){const ht=_e*rt+ot,xt=Math.round(ht),mt=nt*ct+ut,ft=Math.round(mt),gt=(_e+tt)*rt+ot,pt=Math.abs(Math.round(gt)-xt)||1,vt=(nt+st)*ct+ut,At=Math.abs(Math.round(vt)-ft)||1;return i.setTransform(Math.sign(rt),0,0,Math.sign(ct),xt,ft),i.drawImage(e,s,a,o,j,0,0,pt,At),i.setTransform(rt,at,it,ct,ot,ut),[pt,At]}if(rt===0&&ct===0){const ht=nt*it+ot,xt=Math.round(ht),mt=_e*at+ut,ft=Math.round(mt),gt=(nt+st)*it+ot,pt=Math.abs(Math.round(gt)-xt)||1,vt=(_e+tt)*at+ut,At=Math.abs(Math.round(vt)-ft)||1;return i.setTransform(0,Math.sign(at),Math.sign(it),0,xt,ft),i.drawImage(e,s,a,o,j,0,0,At,pt),i.setTransform(rt,at,it,ct,ot,ut),[At,pt]}i.drawImage(e,s,a,o,j,_e,nt,tt,st);const dt=Math.hypot(rt,at),lt=Math.hypot(it,ct);return[dt*tt,lt*st]}function compileType3Glyph(i){const{width:e,height:s}=i;if(e>MAX_SIZE_TO_COMPILE||s>MAX_SIZE_TO_COMPILE)return null;const a=1e3,o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),j=e+1;let _e=new Uint8Array(j*(s+1)),nt,tt,st;const rt=e+7&-8;let at=new Uint8Array(rt*s),it=0;for(const lt of i.data){let ht=128;for(;ht>0;)at[it++]=lt&ht?0:255,ht>>=1}let ct=0;for(it=0,at[it]!==0&&(_e[0]=1,++ct),tt=1;tt<e;tt++)at[it]!==at[it+1]&&(_e[tt]=at[it]?2:1,++ct),it++;for(at[it]!==0&&(_e[tt]=2,++ct),nt=1;nt<s;nt++){it=nt*rt,st=nt*j,at[it-rt]!==at[it]&&(_e[st]=at[it]?1:8,++ct);let lt=(at[it]?4:0)+(at[it-rt]?8:0);for(tt=1;tt<e;tt++)lt=(lt>>2)+(at[it+1]?4:0)+(at[it-rt+1]?8:0),o[lt]&&(_e[st+tt]=o[lt],++ct),it++;if(at[it-rt]!==at[it]&&(_e[st+tt]=at[it]?2:4,++ct),ct>a)return null}for(it=rt*(s-1),st=nt*j,at[it]!==0&&(_e[st]=8,++ct),tt=1;tt<e;tt++)at[it]!==at[it+1]&&(_e[st+tt]=at[it]?4:8,++ct),it++;if(at[it]!==0&&(_e[st+tt]=4,++ct),ct>a)return null;const ot=new Int32Array([0,j,-1,0,-j,0,0,0,1]),ut=new Path2D;for(nt=0;ct&&nt<=s;nt++){let lt=nt*j;const ht=lt+e;for(;lt<ht&&!_e[lt];)lt++;if(lt===ht)continue;ut.moveTo(lt%j,nt);const xt=lt;let mt=_e[lt];do{const ft=ot[mt];do lt+=ft;while(!_e[lt]);const gt=_e[lt];gt!==5&&gt!==10?(mt=gt,_e[lt]=0):(mt=gt&51*mt>>4,_e[lt]&=mt>>2|mt<<2),ut.lineTo(lt%j,lt/j|0),_e[lt]||--ct}while(xt!==lt);--nt}return at=null,_e=null,function(lt){lt.save(),lt.scale(1/e,-1/s),lt.translate(0,-s),lt.fill(ut),lt.beginPath(),lt.restore()}}class CanvasExtraState{constructor(e,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,s])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,s){this.x=e,this.y=s}updatePathMinMax(e,s,a){[s,a]=Util.applyTransform([s,a],e),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,a),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,a)}updateRectMinMax(e,s){const a=Util.applyTransform(s,e),o=Util.applyTransform(s.slice(2),e),j=Util.applyTransform([s[0],s[3]],e),_e=Util.applyTransform([s[2],s[1]],e);this.minX=Math.min(this.minX,a[0],o[0],j[0],_e[0]),this.minY=Math.min(this.minY,a[1],o[1],j[1],_e[1]),this.maxX=Math.max(this.maxX,a[0],o[0],j[0],_e[0]),this.maxY=Math.max(this.maxY,a[1],o[1],j[1],_e[1])}updateScalingPathMinMax(e,s){Util.scaleMinMax(e,s),this.minX=Math.min(this.minX,s[0]),this.minY=Math.min(this.minY,s[1]),this.maxX=Math.max(this.maxX,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(e,s,a,o,j,_e,nt,tt,st,rt){const at=Util.bezierBoundingBox(s,a,o,j,_e,nt,tt,st,rt);rt||this.updateRectMinMax(e,at)}getPathBoundingBox(e=PathType.FILL,s=null){const a=[this.minX,this.minY,this.maxX,this.maxY];if(e===PathType.STROKE){s||unreachable("Stroke bounding box must include transform.");const o=Util.singularValueDecompose2dScale(s),j=o[0]*this.lineWidth/2,_e=o[1]*this.lineWidth/2;a[0]-=j,a[1]-=_e,a[2]+=j,a[3]+=_e}return a}updateClipFromPath(){const e=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=PathType.FILL,s=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(e,s))}}function putBinaryImageData(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const s=e.height,a=e.width,o=s%FULL_CHUNK_HEIGHT,j=(s-o)/FULL_CHUNK_HEIGHT,_e=o===0?j:j+1,nt=i.createImageData(a,FULL_CHUNK_HEIGHT);let tt=0,st;const rt=e.data,at=nt.data;let it,ct,ot,ut;if(e.kind===util_ImageKind.GRAYSCALE_1BPP){const dt=rt.byteLength,lt=new Uint32Array(at.buffer,0,at.byteLength>>2),ht=lt.length,xt=a+7>>3,mt=4294967295,ft=util_FeatureTest.isLittleEndian?4278190080:255;for(it=0;it<_e;it++){for(ot=it<j?FULL_CHUNK_HEIGHT:o,st=0,ct=0;ct<ot;ct++){const gt=dt-tt;let pt=0;const vt=gt>xt?a:gt*8-7,At=vt&-8;let Rt=0,bt=0;for(;pt<At;pt+=8)bt=rt[tt++],lt[st++]=bt&128?mt:ft,lt[st++]=bt&64?mt:ft,lt[st++]=bt&32?mt:ft,lt[st++]=bt&16?mt:ft,lt[st++]=bt&8?mt:ft,lt[st++]=bt&4?mt:ft,lt[st++]=bt&2?mt:ft,lt[st++]=bt&1?mt:ft;for(;pt<vt;pt++)Rt===0&&(bt=rt[tt++],Rt=128),lt[st++]=bt&Rt?mt:ft,Rt>>=1}for(;st<ht;)lt[st++]=0;i.putImageData(nt,0,it*FULL_CHUNK_HEIGHT)}}else if(e.kind===util_ImageKind.RGBA_32BPP){for(ct=0,ut=a*FULL_CHUNK_HEIGHT*4,it=0;it<j;it++)at.set(rt.subarray(tt,tt+ut)),tt+=ut,i.putImageData(nt,0,ct),ct+=FULL_CHUNK_HEIGHT;it<_e&&(ut=a*o*4,at.set(rt.subarray(tt,tt+ut)),i.putImageData(nt,0,ct))}else if(e.kind===util_ImageKind.RGB_24BPP)for(ot=FULL_CHUNK_HEIGHT,ut=a*ot,it=0;it<_e;it++){for(it>=j&&(ot=o,ut=a*ot),st=0,ct=ut;ct--;)at[st++]=rt[tt++],at[st++]=rt[tt++],at[st++]=rt[tt++],at[st++]=255;i.putImageData(nt,0,it*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${e.kind}`)}function putBinaryImageMask(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const s=e.height,a=e.width,o=s%FULL_CHUNK_HEIGHT,j=(s-o)/FULL_CHUNK_HEIGHT,_e=o===0?j:j+1,nt=i.createImageData(a,FULL_CHUNK_HEIGHT);let tt=0;const st=e.data,rt=nt.data;for(let at=0;at<_e;at++){const it=at<j?FULL_CHUNK_HEIGHT:o;({srcPos:tt}=convertBlackAndWhiteToRGBA({src:st,srcPos:tt,dest:rt,width:a,height:it,nonBlackColor:0})),i.putImageData(nt,0,at*FULL_CHUNK_HEIGHT)}}function copyCtxState(i,e){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of s)i[a]!==void 0&&(e[a]=i[a]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function resetCtxToDefault(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!isNodeJS){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function getImageSmoothingEnabled(i,e){if(e)return!0;const s=Util.singularValueDecompose2dScale(i);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);return s[0]<=a&&s[1]<=a}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var Oo,a0,o0;const Zx=class Zx{constructor(e,s,a,o,j,{optionalContentConfig:_e,markedContentStack:nt=null},tt,st){Dt(this,Oo);this.ctx=e,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=a,this.canvasFactory=o,this.filterFactory=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=nt||[],this.optionalContentConfig=_e,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=tt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=st,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,s=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):s}beginDrawing({transform:e,viewport:s,transparency:a=!1,background:o=null}){const j=this.ctx.canvas.width,_e=this.ctx.canvas.height,nt=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,j,_e),this.ctx.fillStyle=nt,a){const tt=this.cachedCanvases.getCanvas("transparent",j,_e);this.compositeCtx=this.ctx,this.transparentCanvas=tt.canvas,this.ctx=tt.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(e,s,a,o){const j=e.argsArray,_e=e.fnArray;let nt=s||0;const tt=j.length;if(tt===nt)return nt;const st=tt-nt>EXECUTION_STEPS&&typeof a=="function",rt=st?Date.now()+EXECUTION_TIME:0;let at=0;const it=this.commonObjs,ct=this.objs;let ot;for(;;){if(o!==void 0&&nt===o.nextBreakPoint)return o.breakIt(nt,a),nt;if(ot=_e[nt],ot!==OPS.dependency)this[ot].apply(this,j[nt]);else for(const ut of j[nt]){const dt=ut.startsWith("g_")?it:ct;if(!dt.has(ut))return dt.get(ut,a),nt}if(nt++,nt===tt)return nt;if(st&&++at>EXECUTION_STEPS){if(Date.now()>rt)return a(),nt;at=0}}}endDrawing(){wt(this,Oo,a0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const s of e.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);e.clear()}this._cachedBitmapsMap.clear(),wt(this,Oo,o0).call(this)}_scaleImage(e,s){const a=e.width,o=e.height;let j=Math.max(Math.hypot(s[0],s[1]),1),_e=Math.max(Math.hypot(s[2],s[3]),1),nt=a,tt=o,st="prescale1",rt,at;for(;j>2&&nt>1||_e>2&&tt>1;){let it=nt,ct=tt;j>2&&nt>1&&(it=nt>=16384?Math.floor(nt/2)-1||1:Math.ceil(nt/2),j/=nt/it),_e>2&&tt>1&&(ct=tt>=16384?Math.floor(tt/2)-1||1:Math.ceil(tt)/2,_e/=tt/ct),rt=this.cachedCanvases.getCanvas(st,it,ct),at=rt.context,at.clearRect(0,0,it,ct),at.drawImage(e,0,0,nt,tt,0,0,it,ct),e=rt.canvas,nt=it,tt=ct,st=st==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:nt,paintHeight:tt}}_createMaskCanvas(e){const s=this.ctx,{width:a,height:o}=e,j=this.current.fillColor,_e=this.current.patternFill,nt=getCurrentTransform(s);let tt,st,rt,at;if((e.bitmap||e.data)&&e.count>1){const vt=e.bitmap||e.data.buffer;st=JSON.stringify(_e?nt:[nt.slice(0,4),j]),tt=this._cachedBitmapsMap.get(vt),tt||(tt=new Map,this._cachedBitmapsMap.set(vt,tt));const At=tt.get(st);if(At&&!_e){const Rt=Math.round(Math.min(nt[0],nt[2])+nt[4]),bt=Math.round(Math.min(nt[1],nt[3])+nt[5]);return{canvas:At,offsetX:Rt,offsetY:bt}}rt=At}rt||(at=this.cachedCanvases.getCanvas("maskCanvas",a,o),putBinaryImageMask(at.context,e));let it=Util.transform(nt,[1/a,0,0,-1/o,0,0]);it=Util.transform(it,[1,0,0,1,0,-o]);const[ct,ot,ut,dt]=Util.getAxialAlignedBoundingBox([0,0,a,o],it),lt=Math.round(ut-ct)||1,ht=Math.round(dt-ot)||1,xt=this.cachedCanvases.getCanvas("fillCanvas",lt,ht),mt=xt.context,ft=ct,gt=ot;mt.translate(-ft,-gt),mt.transform(...it),rt||(rt=this._scaleImage(at.canvas,getCurrentTransformInverse(mt)),rt=rt.img,tt&&_e&&tt.set(st,rt)),mt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(mt),e.interpolate),drawImageAtIntegerCoords(mt,rt,0,0,rt.width,rt.height,0,0,a,o),mt.globalCompositeOperation="source-in";const pt=Util.transform(getCurrentTransformInverse(mt),[1,0,0,1,-ft,-gt]);return mt.fillStyle=_e?j.getPattern(s,this,pt,PathType.FILL):j,mt.fillRect(0,0,a,o),tt&&!_e&&(this.cachedCanvases.delete("fillCanvas"),tt.set(st,xt.canvas)),{canvas:xt.canvas,offsetX:Math.round(ft),offsetY:Math.round(gt)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=LINE_CAP_STYLES[e]}setLineJoin(e){this.ctx.lineJoin=LINE_JOIN_STYLES[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,s){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=s)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[s,a]of e)switch(s){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.current.fillAlpha=a,this.ctx.globalAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,s);this.suspendedCtx=this.ctx,this.ctx=o.context;const j=this.ctx;j.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,j),mirrorContextOperations(j,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,a=this.suspendedCtx;this.composeSMask(a,s,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,s,a,o){const j=o[0],_e=o[1],nt=o[2]-j,tt=o[3]-_e;nt===0||tt===0||(this.genericComposeSMask(s.context,a,nt,tt,s.subtype,s.backdrop,s.transferMap,j,_e,s.offsetX,s.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(a.canvas,0,0),e.restore())}genericComposeSMask(e,s,a,o,j,_e,nt,tt,st,rt,at){let it=e.canvas,ct=tt-rt,ot=st-at;if(_e){if(ct<0||ot<0||ct+a>it.width||ot+o>it.height){const dt=this.cachedCanvases.getCanvas("maskExtension",a,o),lt=dt.context;lt.drawImage(it,-ct,-ot),_e.some(ht=>ht!==0)&&(lt.globalCompositeOperation="destination-atop",lt.fillStyle=Util.makeHexColor(..._e),lt.fillRect(0,0,a,o),lt.globalCompositeOperation="source-over"),it=dt.canvas,ct=ot=0}else if(_e.some(dt=>dt!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const dt=new Path2D;dt.rect(ct,ot,a,o),e.clip(dt),e.globalCompositeOperation="destination-atop",e.fillStyle=Util.makeHexColor(..._e),e.fillRect(ct,ot,a,o),e.restore()}}s.save(),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),j==="Alpha"&&nt?s.filter=this.filterFactory.addAlphaFilter(nt):j==="Luminosity"&&(s.filter=this.filterFactory.addLuminosityFilter(nt));const ut=new Path2D;ut.rect(tt,st,a,o),s.clip(ut),s.globalCompositeOperation="destination-in",s.drawImage(it,ct,ot,a,o,tt,st,a,o),s.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,s,a,o,j,_e){this.ctx.transform(e,s,a,o,j,_e),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,s,a){const o=this.ctx,j=this.current;let _e=j.x,nt=j.y,tt,st;const rt=getCurrentTransform(o),at=rt[0]===0&&rt[3]===0||rt[1]===0&&rt[2]===0,it=at?a.slice(0):null;for(let ct=0,ot=0,ut=e.length;ct<ut;ct++)switch(e[ct]|0){case OPS.rectangle:_e=s[ot++],nt=s[ot++];const dt=s[ot++],lt=s[ot++],ht=_e+dt,xt=nt+lt;o.moveTo(_e,nt),dt===0||lt===0?o.lineTo(ht,xt):(o.lineTo(ht,nt),o.lineTo(ht,xt),o.lineTo(_e,xt)),at||j.updateRectMinMax(rt,[_e,nt,ht,xt]),o.closePath();break;case OPS.moveTo:_e=s[ot++],nt=s[ot++],o.moveTo(_e,nt),at||j.updatePathMinMax(rt,_e,nt);break;case OPS.lineTo:_e=s[ot++],nt=s[ot++],o.lineTo(_e,nt),at||j.updatePathMinMax(rt,_e,nt);break;case OPS.curveTo:tt=_e,st=nt,_e=s[ot+4],nt=s[ot+5],o.bezierCurveTo(s[ot],s[ot+1],s[ot+2],s[ot+3],_e,nt),j.updateCurvePathMinMax(rt,tt,st,s[ot],s[ot+1],s[ot+2],s[ot+3],_e,nt,it),ot+=6;break;case OPS.curveTo2:tt=_e,st=nt,o.bezierCurveTo(_e,nt,s[ot],s[ot+1],s[ot+2],s[ot+3]),j.updateCurvePathMinMax(rt,tt,st,_e,nt,s[ot],s[ot+1],s[ot+2],s[ot+3],it),_e=s[ot+2],nt=s[ot+3],ot+=4;break;case OPS.curveTo3:tt=_e,st=nt,_e=s[ot+2],nt=s[ot+3],o.bezierCurveTo(s[ot],s[ot+1],_e,nt,_e,nt),j.updateCurvePathMinMax(rt,tt,st,s[ot],s[ot+1],_e,nt,_e,nt,it),ot+=4;break;case OPS.closePath:o.closePath();break}at&&j.updateScalingPathMinMax(rt,it),j.setCurrentPoint(_e,nt)}closePath(){this.ctx.closePath()}stroke(e=!0){const s=this.ctx,a=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof a=="object"&&(a!=null&&a.getPattern)?(s.save(),s.strokeStyle=a.getPattern(s,this,getCurrentTransformInverse(s),PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let j=!1;o&&(s.save(),s.fillStyle=a.getPattern(s,this,getCurrentTransformInverse(s),PathType.FILL),j=!0);const _e=this.current.getClippedPathBoundingBox();this.contentVisible&&_e!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),j&&s.restore(),e&&this.consumePath(_e)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,s=this.ctx;if(e===void 0){s.beginPath();return}s.save(),s.beginPath();for(const a of e)s.setTransform(...a.transform),s.translate(a.x,a.y),a.addToPath(s,a.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,s){var rt;const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||FONT_IDENTITY_MATRIX,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const j=a.loadedName||"sans-serif",_e=((rt=a.systemFontInfo)==null?void 0:rt.css)||`"${j}", ${a.fallbackName}`;let nt="normal";a.black?nt="900":a.bold&&(nt="bold");const tt=a.italic?"italic":"normal";let st=s;s<MIN_FONT_SIZE?st=MIN_FONT_SIZE:s>MAX_FONT_SIZE&&(st=MAX_FONT_SIZE),this.current.fontSizeScale=s/st,this.ctx.font=`${tt} ${nt} ${st}px ${_e}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,s){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,s){this.setLeading(-s),this.moveText(e,s)}setTextMatrix(e,s,a,o,j,_e){this.current.textMatrix=[e,s,a,o,j,_e],this.current.textMatrixScale=Math.hypot(e,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,s,a,o){const j=this.ctx,_e=this.current,nt=_e.font,tt=_e.textRenderingMode,st=_e.fontSize/_e.fontSizeScale,rt=tt&TextRenderingMode.FILL_STROKE_MASK,at=!!(tt&TextRenderingMode.ADD_TO_PATH_FLAG),it=_e.patternFill&&!nt.missingFile;let ct;(nt.disableFontFace||at||it)&&(ct=nt.getPathGenerator(this.commonObjs,e)),nt.disableFontFace||it?(j.save(),j.translate(s,a),j.beginPath(),ct(j,st),o&&j.setTransform(...o),(rt===TextRenderingMode.FILL||rt===TextRenderingMode.FILL_STROKE)&&j.fill(),(rt===TextRenderingMode.STROKE||rt===TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((rt===TextRenderingMode.FILL||rt===TextRenderingMode.FILL_STROKE)&&j.fillText(e,s,a),(rt===TextRenderingMode.STROKE||rt===TextRenderingMode.FILL_STROKE)&&j.strokeText(e,s,a)),at&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(j),x:s,y:a,fontSize:st,addToPath:ct})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const s=e.getImageData(0,0,10,10).data;let a=!1;for(let o=3;o<s.length;o+=4)if(s[o]>0&&s[o]<255){a=!0;break}return shadow(this,"isFontSubpixelAAEnabled",a)}showText(e){const s=this.current,a=s.font;if(a.isType3Font)return this.showType3Text(e);const o=s.fontSize;if(o===0)return;const j=this.ctx,_e=s.fontSizeScale,nt=s.charSpacing,tt=s.wordSpacing,st=s.fontDirection,rt=s.textHScale*st,at=e.length,it=a.vertical,ct=it?1:-1,ot=a.defaultVMetrics,ut=o*s.fontMatrix[0],dt=s.textRenderingMode===TextRenderingMode.FILL&&!a.disableFontFace&&!s.patternFill;j.save(),j.transform(...s.textMatrix),j.translate(s.x,s.y+s.textRise),st>0?j.scale(rt,-1):j.scale(rt,1);let lt;if(s.patternFill){j.save();const gt=s.fillColor.getPattern(j,this,getCurrentTransformInverse(j),PathType.FILL);lt=getCurrentTransform(j),j.restore(),j.fillStyle=gt}let ht=s.lineWidth;const xt=s.textMatrixScale;if(xt===0||ht===0){const gt=s.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(gt===TextRenderingMode.STROKE||gt===TextRenderingMode.FILL_STROKE)&&(ht=this.getSinglePixelWidth())}else ht/=xt;if(_e!==1&&(j.scale(_e,_e),ht/=_e),j.lineWidth=ht,a.isInvalidPDFjsFont){const gt=[];let pt=0;for(const vt of e)gt.push(vt.unicode),pt+=vt.width;j.fillText(gt.join(""),0,0),s.x+=pt*ut*rt,j.restore(),this.compose();return}let mt=0,ft;for(ft=0;ft<at;++ft){const gt=e[ft];if(typeof gt=="number"){mt+=ct*gt*o/1e3;continue}let pt=!1;const vt=(gt.isSpace?tt:0)+nt,At=gt.fontChar,Rt=gt.accent;let bt,Tt,Lt=gt.width;if(it){const zt=gt.vmetric||ot,Wt=-(gt.vmetric?zt[1]:Lt*.5)*ut,Bt=zt[2]*ut;Lt=zt?-zt[0]:Lt,bt=Wt/_e,Tt=(mt+Bt)/_e}else bt=mt/_e,Tt=0;if(a.remeasure&&Lt>0){const zt=j.measureText(At).width*1e3/o*_e;if(Lt<zt&&this.isFontSubpixelAAEnabled){const Wt=Lt/zt;pt=!0,j.save(),j.scale(Wt,1),bt/=Wt}else Lt!==zt&&(bt+=(Lt-zt)/2e3*o/_e)}if(this.contentVisible&&(gt.isInFont||a.missingFile)){if(dt&&!Rt)j.fillText(At,bt,Tt);else if(this.paintChar(At,bt,Tt,lt),Rt){const zt=bt+o*Rt.offset.x/_e,Wt=Tt-o*Rt.offset.y/_e;this.paintChar(Rt.fontChar,zt,Wt,lt)}}const Yt=it?Lt*ut-vt*st:Lt*ut+vt*st;mt+=Yt,pt&&j.restore()}it?s.y-=mt:s.x+=mt*rt,j.restore(),this.compose()}showType3Text(e){const s=this.ctx,a=this.current,o=a.font,j=a.fontSize,_e=a.fontDirection,nt=o.vertical?1:-1,tt=a.charSpacing,st=a.wordSpacing,rt=a.textHScale*_e,at=a.fontMatrix||FONT_IDENTITY_MATRIX,it=e.length,ct=a.textRenderingMode===TextRenderingMode.INVISIBLE;let ot,ut,dt,lt;if(!(ct||j===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...a.textMatrix),s.translate(a.x,a.y),s.scale(rt,_e),ot=0;ot<it;++ot){if(ut=e[ot],typeof ut=="number"){lt=nt*ut*j/1e3,this.ctx.translate(lt,0),a.x+=lt*rt;continue}const ht=(ut.isSpace?st:0)+tt,xt=o.charProcOperatorList[ut.operatorListId];if(!xt){warn(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),s.scale(j,j),s.transform(...at),this.executeOperatorList(xt),this.restore()),dt=Util.applyTransform([ut.width,0],at)[0]*j+ht,s.translate(dt,0),a.x+=dt*rt}s.restore(),this.processingType3=null}}setCharWidth(e,s){}setCharWidthAndBounds(e,s,a,o,j,_e){this.ctx.rect(a,o,j-a,_e-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let s;if(e[0]==="TilingPattern"){const a=e[1],o=this.baseTransform||getCurrentTransform(this.ctx),j={createCanvasGraphics:_e=>new Zx(_e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new TilingPattern(e,a,this.ctx,j,o)}else s=this._getPattern(e[1],e[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,s,a){const o=Util.makeHexColor(e,s,a);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(e,s,a){const o=Util.makeHexColor(e,s,a);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(e,s=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=getShadingPattern(this.getObject(e)),this.cachedPatterns.set(e,a)),s&&(a.matrix=s),a}shadingFill(e){if(!this.contentVisible)return;const s=this.ctx;this.save();const a=this._getPattern(e);s.fillStyle=a.getPattern(s,this,getCurrentTransformInverse(s),PathType.SHADING);const o=getCurrentTransformInverse(s);if(o){const{width:j,height:_e}=s.canvas,[nt,tt,st,rt]=Util.getAxialAlignedBoundingBox([0,0,j,_e],o);this.ctx.fillRect(nt,tt,st-nt,rt-tt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(e,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=getCurrentTransform(this.ctx),s)){const a=s[2]-s[0],o=s[3]-s[1];this.ctx.rect(s[0],s[1],a,o),this.current.updateRectMinMax(getCurrentTransform(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||info("TODO: Support non-isolated groups."),e.knockout&&warn("Knockout groups not supported.");const a=getCurrentTransform(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Util.getAxialAlignedBoundingBox(e.bbox,getCurrentTransform(s));const j=[0,0,s.canvas.width,s.canvas.height];o=Util.intersect(o,j)||[0,0,0,0];const _e=Math.floor(o[0]),nt=Math.floor(o[1]),tt=Math.max(Math.ceil(o[2])-_e,1),st=Math.max(Math.ceil(o[3])-nt,1);this.current.startNewPathAndClipBox([0,0,tt,st]);let rt="groupAt"+this.groupLevel;e.smask&&(rt+="_smask_"+this.smaskCounter++%2);const at=this.cachedCanvases.getCanvas(rt,tt,st),it=at.context;it.translate(-_e,-nt),it.transform(...a),e.smask?this.smaskStack.push({canvas:at.canvas,context:it,offsetX:_e,offsetY:nt,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(_e,nt),s.save()),copyCtxState(s,it),this.ctx=it,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);const j=Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(j)}}beginAnnotation(e,s,a,o,j){if(wt(this,Oo,a0).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const _e=s[2]-s[0],nt=s[3]-s[1];if(j&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=_e,s[3]=nt;const[tt,st]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),{viewportScale:rt}=this,at=Math.ceil(_e*this.outputScaleX*rt),it=Math.ceil(nt*this.outputScaleY*rt);this.annotationCanvas=this.canvasFactory.create(at,it);const{canvas:ct,context:ot}=this.annotationCanvas;this.annotationCanvasMap.set(e,ct),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ot,this.ctx.save(),this.ctx.setTransform(tt,0,0,-st,0,nt*st),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(s[0],s[1],_e,nt),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),wt(this,Oo,o0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(e.data,e),e.count=s;const a=this.ctx,o=this.processingType3;if(o&&(o.compiled===void 0&&(o.compiled=compileType3Glyph(e)),o.compiled)){o.compiled(a);return}const j=this._createMaskCanvas(e),_e=j.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(_e,j.offsetX,j.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(e,s,a=0,o=0,j,_e){if(!this.contentVisible)return;e=this.getObject(e.data,e);const nt=this.ctx;nt.save();const tt=getCurrentTransform(nt);nt.transform(s,a,o,j,0,0);const st=this._createMaskCanvas(e);nt.setTransform(1,0,0,1,st.offsetX-tt[4],st.offsetY-tt[5]);for(let rt=0,at=_e.length;rt<at;rt+=2){const it=Util.transform(tt,[s,a,o,j,_e[rt],_e[rt+1]]),[ct,ot]=Util.applyTransform([0,0],it);nt.drawImage(st.canvas,ct,ot)}nt.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;for(const j of e){const{data:_e,width:nt,height:tt,transform:st}=j,rt=this.cachedCanvases.getCanvas("maskCanvas",nt,tt),at=rt.context;at.save();const it=this.getObject(_e,j);putBinaryImageMask(at,it),at.globalCompositeOperation="source-in",at.fillStyle=o?a.getPattern(at,this,getCurrentTransformInverse(s),PathType.FILL):a,at.fillRect(0,0,nt,tt),at.restore(),s.save(),s.transform(...st),s.scale(1,-1),drawImageAtIntegerCoords(s,rt.canvas,0,0,nt,tt,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(e,s,a,o){if(!this.contentVisible)return;const j=this.getObject(e);if(!j){warn("Dependent image isn't ready yet");return}const _e=j.width,nt=j.height,tt=[];for(let st=0,rt=o.length;st<rt;st+=2)tt.push({transform:[s,0,0,a,o[st],o[st+1]],x:0,y:0,w:_e,h:nt});this.paintInlineImageXObjectGroup(j,tt)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:s,width:a,height:o}=e,j=this.cachedCanvases.getCanvas("inlineImage",a,o),_e=j.context;return _e.filter=this.current.transferMaps,_e.drawImage(s,0,0),_e.filter="none",j.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const s=e.width,a=e.height,o=this.ctx;if(this.save(),!isNodeJS){const{filter:nt}=o;nt!=="none"&&nt!==""&&(o.filter="none")}o.scale(1/s,-1/a);let j;if(e.bitmap)j=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)j=e;else{const tt=this.cachedCanvases.getCanvas("inlineImage",s,a).context;putBinaryImageData(tt,e),j=this.applyTransferMapsToCanvas(tt)}const _e=this._scaleImage(j,getCurrentTransformInverse(o));o.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(o),e.interpolate),drawImageAtIntegerCoords(o,_e.img,0,0,_e.paintWidth,_e.paintHeight,0,-a,s,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const j=e.width,_e=e.height,tt=this.cachedCanvases.getCanvas("inlineImage",j,_e).context;putBinaryImageData(tt,e),o=this.applyTransferMapsToCanvas(tt)}for(const j of s)a.save(),a.transform(...j.transform),a.scale(1,-1),drawImageAtIntegerCoords(a,o,j.x,j.y,j.w,j.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,s){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,s){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(s||(this.pendingClip===EO_CLIP?a.clip("evenodd"):a.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=getCurrentTransform(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const s=Math.abs(e[0]*e[3]-e[2]*e[1]),a=Math.hypot(e[0],e[2]),o=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(a,o)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:s,b:a,c:o,d:j}=this.ctx.getTransform();let _e,nt;if(a===0&&o===0){const tt=Math.abs(s),st=Math.abs(j);if(tt===st)if(e===0)_e=nt=1/tt;else{const rt=tt*e;_e=nt=rt<1?1/rt:1}else if(e===0)_e=1/tt,nt=1/st;else{const rt=tt*e,at=st*e;_e=rt<1?1/rt:1,nt=at<1?1/at:1}}else{const tt=Math.abs(s*j-a*o),st=Math.hypot(s,a),rt=Math.hypot(o,j);if(e===0)_e=rt/tt,nt=st/tt;else{const at=e*tt;_e=rt>at?rt/at:1,nt=st>at?st/at:1}}this._cachedScaleForStroking[0]=_e,this._cachedScaleForStroking[1]=nt}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:s}=this,{lineWidth:a}=this.current,[o,j]=this.getScaleForStroking();if(s.lineWidth=a||1,o===1&&j===1){s.stroke();return}const _e=s.getLineDash();if(e&&s.save(),s.scale(o,j),_e.length>0){const nt=Math.max(o,j);s.setLineDash(_e.map(tt=>tt/nt)),s.lineDashOffset/=nt}s.stroke(),e&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Oo=new WeakSet,a0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},o0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const s=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}};let CanvasGraphics=Zx;for(const i in OPS)CanvasGraphics.prototype[i]!==void 0&&(CanvasGraphics.prototype[OPS[i]]=CanvasGraphics.prototype[i]);var bm,Em;class GlobalWorkerOptions{static get workerPort(){return et(this,bm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");Pt(this,bm,e)}static get workerSrc(){return et(this,Em)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");Pt(this,Em,e)}}bm=new WeakMap,Em=new WeakMap,Dt(GlobalWorkerOptions,bm,null),Dt(GlobalWorkerOptions,Em,"");const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(i){switch(i instanceof Error||typeof i=="object"&&i!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new AbortException(i.message);case"MissingPDFException":return new MissingPDFException(i.message);case"PasswordException":return new PasswordException(i.message,i.code);case"UnexpectedResponseException":return new UnexpectedResponseException(i.message,i.status);case"UnknownErrorException":return new UnknownErrorException(i.message,i.details);default:return new UnknownErrorException(i.message,i.toString())}}var Or,kE,PE,Rv;class MessageHandler{constructor(e,s,a){Dt(this,Or);this.sourceName=e,this.targetName=s,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=o=>{const j=o.data;if(j.targetName!==this.sourceName)return;if(j.stream){wt(this,Or,PE).call(this,j);return}if(j.callback){const nt=j.callbackId,tt=this.callbackCapabilities[nt];if(!tt)throw new Error(`Cannot resolve callback ${nt}`);if(delete this.callbackCapabilities[nt],j.callback===CallbackKind.DATA)tt.resolve(j.data);else if(j.callback===CallbackKind.ERROR)tt.reject(wrapReason(j.reason));else throw new Error("Unexpected callback case");return}const _e=this.actionHandler[j.action];if(!_e)throw new Error(`Unknown action from worker: ${j.action}`);if(j.callbackId){const nt=this.sourceName,tt=j.sourceName;new Promise(function(st){st(_e(j.data))}).then(function(st){a.postMessage({sourceName:nt,targetName:tt,callback:CallbackKind.DATA,callbackId:j.callbackId,data:st})},function(st){a.postMessage({sourceName:nt,targetName:tt,callback:CallbackKind.ERROR,callbackId:j.callbackId,reason:wrapReason(st)})});return}if(j.streamId){wt(this,Or,kE).call(this,j);return}_e(j.data)},a.addEventListener("message",this._onComObjOnMessage)}on(e,s){const a=this.actionHandler;if(a[e])throw new Error(`There is already an actionName called "${e}"`);a[e]=s}send(e,s,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:s},a)}sendWithPromise(e,s,a){const o=this.callbackId++,j=Promise.withResolvers();this.callbackCapabilities[o]=j;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:o,data:s},a)}catch(_e){j.reject(_e)}return j.promise}sendWithStream(e,s,a,o){const j=this.streamId++,_e=this.sourceName,nt=this.targetName,tt=this.comObj;return new ReadableStream({start:st=>{const rt=Promise.withResolvers();return this.streamControllers[j]={controller:st,startCall:rt,pullCall:null,cancelCall:null,isClosed:!1},tt.postMessage({sourceName:_e,targetName:nt,action:e,streamId:j,data:s,desiredSize:st.desiredSize},o),rt.promise},pull:st=>{const rt=Promise.withResolvers();return this.streamControllers[j].pullCall=rt,tt.postMessage({sourceName:_e,targetName:nt,stream:StreamKind.PULL,streamId:j,desiredSize:st.desiredSize}),rt.promise},cancel:st=>{assert(st instanceof Error,"cancel must have a valid reason");const rt=Promise.withResolvers();return this.streamControllers[j].cancelCall=rt,this.streamControllers[j].isClosed=!0,tt.postMessage({sourceName:_e,targetName:nt,stream:StreamKind.CANCEL,streamId:j,reason:wrapReason(st)}),rt.promise}},a)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Or=new WeakSet,kE=function(e){const s=e.streamId,a=this.sourceName,o=e.sourceName,j=this.comObj,_e=this,nt=this.actionHandler[e.action],tt={enqueue(st,rt=1,at){if(this.isCancelled)return;const it=this.desiredSize;this.desiredSize-=rt,it>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),j.postMessage({sourceName:a,targetName:o,stream:StreamKind.ENQUEUE,streamId:s,chunk:st},at)},close(){this.isCancelled||(this.isCancelled=!0,j.postMessage({sourceName:a,targetName:o,stream:StreamKind.CLOSE,streamId:s}),delete _e.streamSinks[s])},error(st){assert(st instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,j.postMessage({sourceName:a,targetName:o,stream:StreamKind.ERROR,streamId:s,reason:wrapReason(st)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};tt.sinkCapability.resolve(),tt.ready=tt.sinkCapability.promise,this.streamSinks[s]=tt,new Promise(function(st){st(nt(e.data,tt))}).then(function(){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.START_COMPLETE,streamId:s,success:!0})},function(st){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.START_COMPLETE,streamId:s,reason:wrapReason(st)})})},PE=function(e){const s=e.streamId,a=this.sourceName,o=e.sourceName,j=this.comObj,_e=this.streamControllers[s],nt=this.streamSinks[s];switch(e.stream){case StreamKind.START_COMPLETE:e.success?_e.startCall.resolve():_e.startCall.reject(wrapReason(e.reason));break;case StreamKind.PULL_COMPLETE:e.success?_e.pullCall.resolve():_e.pullCall.reject(wrapReason(e.reason));break;case StreamKind.PULL:if(!nt){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:s,success:!0});break}nt.desiredSize<=0&&e.desiredSize>0&&nt.sinkCapability.resolve(),nt.desiredSize=e.desiredSize,new Promise(function(tt){var st;tt((st=nt.onPull)==null?void 0:st.call(nt))}).then(function(){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:s,success:!0})},function(tt){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:s,reason:wrapReason(tt)})});break;case StreamKind.ENQUEUE:if(assert(_e,"enqueue should have stream controller"),_e.isClosed)break;_e.controller.enqueue(e.chunk);break;case StreamKind.CLOSE:if(assert(_e,"close should have stream controller"),_e.isClosed)break;_e.isClosed=!0,_e.controller.close(),wt(this,Or,Rv).call(this,_e,s);break;case StreamKind.ERROR:assert(_e,"error should have stream controller"),_e.controller.error(wrapReason(e.reason)),wt(this,Or,Rv).call(this,_e,s);break;case StreamKind.CANCEL_COMPLETE:e.success?_e.cancelCall.resolve():_e.cancelCall.reject(wrapReason(e.reason)),wt(this,Or,Rv).call(this,_e,s);break;case StreamKind.CANCEL:if(!nt)break;new Promise(function(tt){var st;tt((st=nt.onCancel)==null?void 0:st.call(nt,wrapReason(e.reason)))}).then(function(){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:s,success:!0})},function(tt){j.postMessage({sourceName:a,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:s,reason:wrapReason(tt)})}),nt.sinkCapability.reject(wrapReason(e.reason)),nt.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}},Rv=async function(e,s){var a,o,j;await Promise.allSettled([(a=e.startCall)==null?void 0:a.promise,(o=e.pullCall)==null?void 0:o.promise,(j=e.cancelCall)==null?void 0:j.promise]),delete this.streamControllers[s]};var Cl,Am;class Metadata{constructor({parsedData:e,rawData:s}){Dt(this,Cl);Dt(this,Am);Pt(this,Cl,e),Pt(this,Am,s)}getRaw(){return et(this,Am)}get(e){return et(this,Cl).get(e)??null}getAll(){return objectFromMap(et(this,Cl))}has(e){return et(this,Cl).has(e)}}Cl=new WeakMap,Am=new WeakMap;const INTERNAL=Symbol("INTERNAL");var Sm,_m,wm,$u;class OptionalContentGroup{constructor(e,{name:s,intent:a,usage:o}){Dt(this,Sm,!1);Dt(this,_m,!1);Dt(this,wm,!1);Dt(this,$u,!0);Pt(this,Sm,!!(e&RenderingIntentFlag.DISPLAY)),Pt(this,_m,!!(e&RenderingIntentFlag.PRINT)),this.name=s,this.intent=a,this.usage=o}get visible(){if(et(this,wm))return et(this,$u);if(!et(this,$u))return!1;const{print:e,view:s}=this.usage;return et(this,Sm)?(s==null?void 0:s.viewState)!=="OFF":et(this,_m)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,s,a=!1){e!==INTERNAL&&unreachable("Internal method `_setVisible` called."),Pt(this,wm,a),Pt(this,$u,s)}}Sm=new WeakMap,_m=new WeakMap,wm=new WeakMap,$u=new WeakMap;var xo,rs,Bu,Uu,Tm,l0;class OptionalContentConfig{constructor(e,s=RenderingIntentFlag.DISPLAY){Dt(this,Tm);Dt(this,xo,null);Dt(this,rs,new Map);Dt(this,Bu,null);Dt(this,Uu,null);if(this.renderingIntent=s,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,Pt(this,Uu,e.order);for(const a of e.groups)et(this,rs).set(a.id,new OptionalContentGroup(s,a));if(e.baseState==="OFF")for(const a of et(this,rs).values())a._setVisible(INTERNAL,!1);for(const a of e.on)et(this,rs).get(a)._setVisible(INTERNAL,!0);for(const a of e.off)et(this,rs).get(a)._setVisible(INTERNAL,!1);Pt(this,Bu,this.getHash())}}isVisible(e){if(et(this,rs).size===0)return!0;if(!e)return info("Optional content group not defined."),!0;if(e.type==="OCG")return et(this,rs).has(e.id)?et(this,rs).get(e.id).visible:(warn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return wt(this,Tm,l0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const s of e.ids){if(!et(this,rs).has(s))return warn(`Optional content group not found: ${s}`),!0;if(et(this,rs).get(s).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const s of e.ids){if(!et(this,rs).has(s))return warn(`Optional content group not found: ${s}`),!0;if(!et(this,rs).get(s).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const s of e.ids){if(!et(this,rs).has(s))return warn(`Optional content group not found: ${s}`),!0;if(!et(this,rs).get(s).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const s of e.ids){if(!et(this,rs).has(s))return warn(`Optional content group not found: ${s}`),!0;if(et(this,rs).get(s).visible)return!1}return!0}return warn(`Unknown optional content policy ${e.policy}.`),!0}return warn(`Unknown group type ${e.type}.`),!0}setVisibility(e,s=!0){const a=et(this,rs).get(e);if(!a){warn(`Optional content group not found: ${e}`);return}a._setVisible(INTERNAL,!!s,!0),Pt(this,xo,null)}setOCGState({state:e,preserveRB:s}){let a;for(const o of e){switch(o){case"ON":case"OFF":case"Toggle":a=o;continue}const j=et(this,rs).get(o);if(j)switch(a){case"ON":j._setVisible(INTERNAL,!0);break;case"OFF":j._setVisible(INTERNAL,!1);break;case"Toggle":j._setVisible(INTERNAL,!j.visible);break}}Pt(this,xo,null)}get hasInitialVisibility(){return et(this,Bu)===null||this.getHash()===et(this,Bu)}getOrder(){return et(this,rs).size?et(this,Uu)?et(this,Uu).slice():[...et(this,rs).keys()]:null}getGroups(){return et(this,rs).size>0?objectFromMap(et(this,rs)):null}getGroup(e){return et(this,rs).get(e)||null}getHash(){if(et(this,xo)!==null)return et(this,xo);const e=new MurmurHash3_64;for(const[s,a]of et(this,rs))e.update(`${s}:${a.visible}`);return Pt(this,xo,e.hexdigest())}}xo=new WeakMap,rs=new WeakMap,Bu=new WeakMap,Uu=new WeakMap,Tm=new WeakSet,l0=function(e){const s=e.length;if(s<2)return!0;const a=e[0];for(let o=1;o<s;o++){const j=e[o];let _e;if(Array.isArray(j))_e=wt(this,Tm,l0).call(this,j);else if(et(this,rs).has(j))_e=et(this,rs).get(j).visible;else return warn(`Optional content group not found: ${j}`),!0;switch(a){case"And":if(!_e)return!1;break;case"Or":if(_e)return!0;break;case"Not":return!_e;default:return!0}}return a==="And"};class PDFDataTransportStream{constructor(e,{disableRange:s=!1,disableStream:a=!1}){assert(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:o,initialData:j,progressiveDone:_e,contentDispositionFilename:nt}=e;if(this._queuedChunks=[],this._progressiveDone=_e,this._contentDispositionFilename=nt,(j==null?void 0:j.length)>0){const tt=j instanceof Uint8Array&&j.byteLength===j.buffer.byteLength?j.buffer:new Uint8Array(j).buffer;this._queuedChunks.push(tt)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!a,this._isRangeSupported=!s,this._contentLength=o,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((tt,st)=>{this._onReceiveData({begin:tt,chunk:st})}),e.addProgressListener((tt,st)=>{this._onProgress({loaded:tt,total:st})}),e.addProgressiveReadListener(tt=>{this._onReceiveData({chunk:tt})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:s}){const a=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(a):this._queuedChunks.push(a);else{const o=this._rangeReaders.some(function(j){return j._begin!==e?!1:(j._enqueue(a),!0)});assert(o,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var s,a,o,j;e.total===void 0?(a=(s=this._rangeReaders[0])==null?void 0:s.onProgress)==null||a.call(s,{loaded:e.loaded}):(j=(o=this._fullRequestReader)==null?void 0:o.onProgress)==null||j.call(o,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const s=this._rangeReaders.indexOf(e);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,s){if(s<=this._progressiveDataLength)return null;const a=new PDFDataTransportStreamRangeReader(this,e,s);return this._pdfDataRangeTransport.requestDataRange(e,s),this._rangeReaders.push(a),a}cancelAllRequests(e){var s;(s=this._fullRequestReader)==null||s.cancel(e);for(const a of this._rangeReaders.slice(0))a.cancel(e);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(e,s,a=!1,o=null){this._stream=e,this._done=a||!1,this._filename=isPdfFile(o)?o:null,this._queuedChunks=s||[],this._loaded=0;for(const j of this._queuedChunks)this._loaded+=j.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(e,s,a){this._stream=e,this._begin=s,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(i){let e=!0,s=a("filename\\*","i").exec(i);if(s){s=s[1];let rt=nt(s);return rt=unescape(rt),rt=tt(rt),rt=st(rt),j(rt)}if(s=_e(i),s){const rt=st(s);return j(rt)}if(s=a("filename","i").exec(i),s){s=s[1];let rt=nt(s);return rt=st(rt),j(rt)}function a(rt,at){return new RegExp("(?:^|;)\\s*"+rt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',at)}function o(rt,at){if(rt){if(!/^[\x00-\xFF]+$/.test(at))return at;try{const it=new TextDecoder(rt,{fatal:!0}),ct=stringToBytes(at);at=it.decode(ct),e=!1}catch{}}return at}function j(rt){return e&&/[\x80-\xff]/.test(rt)&&(rt=o("utf-8",rt),e&&(rt=o("iso-8859-1",rt))),rt}function _e(rt){const at=[];let it;const ct=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(it=ct.exec(rt))!==null;){let[,ut,dt,lt]=it;if(ut=parseInt(ut,10),ut in at){if(ut===0)break;continue}at[ut]=[dt,lt]}const ot=[];for(let ut=0;ut<at.length&&ut in at;++ut){let[dt,lt]=at[ut];lt=nt(lt),dt&&(lt=unescape(lt),ut===0&&(lt=tt(lt))),ot.push(lt)}return ot.join("")}function nt(rt){if(rt.startsWith('"')){const at=rt.slice(1).split('\\"');for(let it=0;it<at.length;++it){const ct=at[it].indexOf('"');ct!==-1&&(at[it]=at[it].slice(0,ct),at.length=it+1),at[it]=at[it].replaceAll(/\\(.)/g,"$1")}rt=at.join('"')}return rt}function tt(rt){const at=rt.indexOf("'");if(at===-1)return rt;const it=rt.slice(0,at),ot=rt.slice(at+1).replace(/^[^']*'/,"");return o(it,ot)}function st(rt){return!rt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(rt)?rt:rt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(at,it,ct,ot){if(ct==="q"||ct==="Q")return ot=ot.replaceAll("_"," "),ot=ot.replaceAll(/=([0-9a-fA-F]{2})/g,function(ut,dt){return String.fromCharCode(parseInt(dt,16))}),o(it,ot);try{ot=atob(ot)}catch{}return o(it,ot)})}return""}function validateRangeRequestCapabilities({getResponseHeader:i,isHttp:e,rangeChunkSize:s,disableRange:a}){const o={allowRangeRequests:!1,suggestedLength:void 0},j=parseInt(i("Content-Length"),10);return!Number.isInteger(j)||(o.suggestedLength=j,j<=2*s)||a||!e||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function extractFilenameFromHeader(i){const e=i("Content-Disposition");if(e){let s=getFilenameFromContentDispositionHeader(e);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if(isPdfFile(s))return s}return null}function createResponseStatusError(i,e){return i===404||i===0&&e.startsWith("file:")?new MissingPDFException('Missing PDF "'+e+'".'):new UnexpectedResponseException(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function validateResponseStatus(i){return i===200||i===206}function createFetchOptions(i,e,s){return{method:"GET",headers:i,signal:s.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function createHeaders(i){const e=new Headers;for(const s in i){const a=i[s];a!==void 0&&e.append(s,a)}return e}function getArrayBuffer(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(warn(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class PDFFetchStream{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(e,s){if(s<=this._progressiveDataLength)return null;const a=new PDFFetchStreamRangeReader(this,e,s);return this._rangeRequestReaders.push(a),a}cancelAllRequests(e){var s;(s=this._fullRequestReader)==null||s.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class PDFFetchStreamReader{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const s=e.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const a=s.url;fetch(a,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!validateResponseStatus(o.status))throw createResponseStatusError(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const j=tt=>o.headers.get(tt),{allowRangeRequests:_e,suggestedLength:nt}=validateRangeRequestCapabilities({getResponseHeader:j,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_e,this._contentLength=nt||this._contentLength,this._filename=extractFilenameFromHeader(j),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._headersCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:(this._loaded+=e.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(e),done:!1})}cancel(e){var s;(s=this._reader)==null||s.cancel(e),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(e,s,a){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${s}-${a-1}`);const j=o.url;fetch(j,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(_e=>{if(!validateResponseStatus(_e.status))throw createResponseStatusError(_e.status,j);this._readCapability.resolve(),this._reader=_e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._readCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:(this._loaded+=e.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:getArrayBuffer(e),done:!1})}cancel(e){var s;(s=this._reader)==null||s.cancel(e),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(i){const e=i.response;return typeof e!="string"?e:stringToBytes(e).buffer}class NetworkManager{constructor(e,s={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&s.httpHeaders||Object.create(null),this.withCredentials=s.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,s,a){const o={begin:e,end:s};for(const j in a)o[j]=a[j];return this.request(o)}requestFull(e){return this.request(e)}request(e){const s=new XMLHttpRequest,a=this.currXhrId++,o=this.pendingRequests[a]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const j in this.httpHeaders){const _e=this.httpHeaders[j];_e!==void 0&&s.setRequestHeader(j,_e)}return this.isHttp&&"begin"in e&&"end"in e?(s.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),o.expectedStatus=PARTIAL_CONTENT_RESPONSE):o.expectedStatus=OK_RESPONSE,s.responseType="arraybuffer",e.onError&&(s.onerror=function(j){e.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,a),s.onprogress=this.onProgress.bind(this,a),o.onHeadersReceived=e.onHeadersReceived,o.onDone=e.onDone,o.onError=e.onError,o.onProgress=e.onProgress,s.send(null),a}onProgress(e,s){var o;const a=this.pendingRequests[e];a&&((o=a.onProgress)==null||o.call(a,s))}onStateChange(e,s){var tt,st,rt;const a=this.pendingRequests[e];if(!a)return;const o=a.xhr;if(o.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),o.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],o.status===0&&this.isHttp){(tt=a.onError)==null||tt.call(a,o.status);return}const j=o.status||OK_RESPONSE;if(!(j===OK_RESPONSE&&a.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&j!==a.expectedStatus){(st=a.onError)==null||st.call(a,o.status);return}const nt=network_getArrayBuffer(o);if(j===PARTIAL_CONTENT_RESPONSE){const at=o.getResponseHeader("Content-Range"),it=/bytes (\d+)-(\d+)\/(\d+)/.exec(at);a.onDone({begin:parseInt(it[1],10),chunk:nt})}else nt?a.onDone({begin:0,chunk:nt}):(rt=a.onError)==null||rt.call(a,o.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const s=this.pendingRequests[e].xhr;delete this.pendingRequests[e],s.abort()}}class PDFNetworkStream{constructor(e){this._source=e,this._manager=new NetworkManager(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const s=this._rangeRequestReaders.indexOf(e);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(e,s){const a=new PDFNetworkStreamRangeRequestReader(this._manager,e,s);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(e){var s;(s=this._fullRequestReader)==null||s.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class PDFNetworkStreamFullRequestReader{constructor(e,s){this._manager=e;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=e.requestFull(a),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,s=this._manager.getRequestXhr(e),a=_e=>s.getResponseHeader(_e),{allowRangeRequests:o,suggestedLength:j}=validateRangeRequestCapabilities({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=j||this._contentLength,this._filename=extractFilenameFromHeader(a),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=createResponseStatusError(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var s;(s=this.onProgress)==null||s.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(e,s,a){this._manager=e;const o={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(s,a,o),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const s=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=createResponseStatusError(e,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var s;this.isStreamingSupported||(s=this.onProgress)==null||s.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(i){const e=NodePackages.get("url"),s=e.parse(i);return s.protocol==="file:"||s.host?s:/^[a-z]:[/\\]/i.test(i)?e.parse(`file:///${i}`):(s.host||(s.protocol="file:"),s)}class PDFNodeStream{constructor(e){this.source=e,this.url=parseUrl(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(e,s){if(s<=this._progressiveDataLength)return null;const a=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,e,s):new PDFNodeStreamRangeReader(this,e,s);return this._rangeRequestReaders.push(a),a}cancelAllRequests(e){var s;(s=this._fullRequestReader)==null||s.cancel(e);for(const a of this._rangeRequestReaders.slice(0))a.cancel(e)}}class BaseFullReader{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=e.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(i,e){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:e}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(e){super(e);const s=a=>{if(a.statusCode===404){const nt=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=nt,this._headersCapability.reject(nt);return}this._headersCapability.resolve(),this._setReadableStream(a);const o=nt=>this._readableStream.headers[nt.toLowerCase()],{allowRangeRequests:j,suggestedLength:_e}=validateRangeRequestCapabilities({getResponseHeader:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=j,this._contentLength=_e||this._contentLength,this._filename=extractFilenameFromHeader(o)};if(this._request=null,this._url.protocol==="http:"){const a=NodePackages.get("http");this._request=a.request(createRequestOptions(this._url,e.httpHeaders),s)}else{const a=NodePackages.get("https");this._request=a.request(createRequestOptions(this._url,e.httpHeaders),s)}this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(e,s,a){super(e),this._httpHeaders={};for(const j in e.httpHeaders){const _e=e.httpHeaders[j];_e!==void 0&&(this._httpHeaders[j]=_e)}this._httpHeaders.Range=`bytes=${s}-${a-1}`;const o=j=>{if(j.statusCode===404){const _e=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_e;return}this._setReadableStream(j)};if(this._request=null,this._url.protocol==="http:"){const j=NodePackages.get("http");this._request=j.request(createRequestOptions(this._url,this._httpHeaders),o)}else{const j=NodePackages.get("https");this._request=j.request(createRequestOptions(this._url,this._httpHeaders),o)}this._request.on("error",j=>{this._storedError=j}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(e){super(e);let s=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(s=s.replace(/^\//,""));const a=NodePackages.get("fs");a.promises.lstat(s).then(o=>{this._contentLength=o.size,this._setReadableStream(a.createReadStream(s)),this._headersCapability.resolve()},o=>{o.code==="ENOENT"&&(o=new MissingPDFException(`Missing PDF "${s}".`)),this._storedError=o,this._headersCapability.reject(o)})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(e,s,a){super(e);let o=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(o=o.replace(/^\//,""));const j=NodePackages.get("fs");this._setReadableStream(j.createReadStream(o,{start:s,end:a-1}))}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;var tE,bo,Bs,Cm,Rm,Rl,Qr,km,Pm,Pl,Hu,zu,Eo,Wu,Mm,Vu,Ml,Dm,Im,bs,Dl,Il,Ao,Gu,co,ME,DE,c0,Nr,kv,IE,FE;let TextLayer$1=(bs=class{constructor({textContentSource:e,container:s,viewport:a}){Dt(this,co);Dt(this,bo,Promise.withResolvers());Dt(this,Bs,null);Dt(this,Cm,!1);Dt(this,Rm,!!((tE=globalThis.FontInspector)!=null&&tE.enabled));Dt(this,Rl,null);Dt(this,Qr,null);Dt(this,km,0);Dt(this,Pm,0);Dt(this,Pl,null);Dt(this,Hu,null);Dt(this,zu,0);Dt(this,Eo,0);Dt(this,Wu,Object.create(null));Dt(this,Mm,[]);Dt(this,Vu,null);Dt(this,Ml,[]);Dt(this,Dm,new WeakMap);Dt(this,Im,null);var tt;if(e instanceof ReadableStream)Pt(this,Vu,e);else if(typeof e=="object")Pt(this,Vu,new ReadableStream({start(st){st.enqueue(e),st.close()}}));else throw new Error('No "textContentSource" parameter specified.');Pt(this,Bs,Pt(this,Hu,s)),Pt(this,Eo,a.scale*(globalThis.devicePixelRatio||1)),Pt(this,zu,a.rotation),Pt(this,Qr,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:o,pageHeight:j,pageX:_e,pageY:nt}=a.rawDims;Pt(this,Im,[1,0,0,-1,-_e,nt+j]),Pt(this,Pm,o),Pt(this,km,j),wt(tt=bs,Nr,IE).call(tt),setLayerDimensions(s,a),et(this,bo).promise.catch(()=>{}).then(()=>{et(bs,Gu).delete(this),Pt(this,Qr,null),Pt(this,Wu,null)})}render(){const e=()=>{et(this,Pl).read().then(({value:s,done:a})=>{if(a){et(this,bo).resolve();return}et(this,Rl)??Pt(this,Rl,s.lang),Object.assign(et(this,Wu),s.styles),wt(this,co,ME).call(this,s.items),e()},et(this,bo).reject)};return Pt(this,Pl,et(this,Vu).getReader()),et(bs,Gu).add(this),e(),et(this,bo).promise}update({viewport:e,onBefore:s=null}){var j;const a=e.scale*(globalThis.devicePixelRatio||1),o=e.rotation;if(o!==et(this,zu)&&(s==null||s(),Pt(this,zu,o),setLayerDimensions(et(this,Hu),{rotation:o})),a!==et(this,Eo)){s==null||s(),Pt(this,Eo,a);const _e={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:wt(j=bs,Nr,kv).call(j,et(this,Rl))};for(const nt of et(this,Ml))_e.properties=et(this,Dm).get(nt),_e.div=nt,wt(this,co,c0).call(this,_e)}}cancel(){var s;const e=new AbortException("TextLayer task cancelled.");(s=et(this,Pl))==null||s.cancel(e).catch(()=>{}),Pt(this,Pl,null),et(this,bo).reject(e)}get textDivs(){return et(this,Ml)}get textContentItemsStr(){return et(this,Mm)}static cleanup(){if(!(et(this,Gu).size>0)){et(this,Dl).clear();for(const{canvas:e}of et(this,Il).values())e.remove();et(this,Il).clear()}}},bo=new WeakMap,Bs=new WeakMap,Cm=new WeakMap,Rm=new WeakMap,Rl=new WeakMap,Qr=new WeakMap,km=new WeakMap,Pm=new WeakMap,Pl=new WeakMap,Hu=new WeakMap,zu=new WeakMap,Eo=new WeakMap,Wu=new WeakMap,Mm=new WeakMap,Vu=new WeakMap,Ml=new WeakMap,Dm=new WeakMap,Im=new WeakMap,Dl=new WeakMap,Il=new WeakMap,Ao=new WeakMap,Gu=new WeakMap,co=new WeakSet,ME=function(e){var o,j;if(et(this,Cm))return;(j=et(this,Qr)).ctx??(j.ctx=wt(o=bs,Nr,kv).call(o,et(this,Rl)));const s=et(this,Ml),a=et(this,Mm);for(const _e of e){if(s.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),Pt(this,Cm,!0);return}if(_e.str===void 0){if(_e.type==="beginMarkedContentProps"||_e.type==="beginMarkedContent"){const nt=et(this,Bs);Pt(this,Bs,document.createElement("span")),et(this,Bs).classList.add("markedContent"),_e.id!==null&&et(this,Bs).setAttribute("id",`${_e.id}`),nt.append(et(this,Bs))}else _e.type==="endMarkedContent"&&Pt(this,Bs,et(this,Bs).parentNode);continue}a.push(_e.str),wt(this,co,DE).call(this,_e)}},DE=function(e){var ut;const s=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};et(this,Ml).push(s);const o=Util.transform(et(this,Im),e.transform);let j=Math.atan2(o[1],o[0]);const _e=et(this,Wu)[e.fontName];_e.vertical&&(j+=Math.PI/2);const nt=et(this,Rm)&&_e.fontSubstitution||_e.fontFamily,tt=Math.hypot(o[2],o[3]),st=tt*wt(ut=bs,Nr,FE).call(ut,nt,et(this,Rl));let rt,at;j===0?(rt=o[4],at=o[5]-st):(rt=o[4]+st*Math.sin(j),at=o[5]-st*Math.cos(j));const it="calc(var(--scale-factor)*",ct=s.style;et(this,Bs)===et(this,Hu)?(ct.left=`${(100*rt/et(this,Pm)).toFixed(2)}%`,ct.top=`${(100*at/et(this,km)).toFixed(2)}%`):(ct.left=`${it}${rt.toFixed(2)}px)`,ct.top=`${it}${at.toFixed(2)}px)`),ct.fontSize=`${it}${(et(bs,Ao)*tt).toFixed(2)}px)`,ct.fontFamily=nt,a.fontSize=tt,s.setAttribute("role","presentation"),s.textContent=e.str,s.dir=e.dir,et(this,Rm)&&(s.dataset.fontName=_e.fontSubstitutionLoadedName||e.fontName),j!==0&&(a.angle=j*(180/Math.PI));let ot=!1;if(e.str.length>1)ot=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const dt=Math.abs(e.transform[0]),lt=Math.abs(e.transform[3]);dt!==lt&&Math.max(dt,lt)/Math.min(dt,lt)>1.5&&(ot=!0)}if(ot&&(a.canvasWidth=_e.vertical?e.height:e.width),et(this,Dm).set(s,a),et(this,Qr).div=s,et(this,Qr).properties=a,wt(this,co,c0).call(this,et(this,Qr)),a.hasText&&et(this,Bs).append(s),a.hasEOL){const dt=document.createElement("br");dt.setAttribute("role","presentation"),et(this,Bs).append(dt)}},c0=function(e){const{div:s,properties:a,ctx:o,prevFontSize:j,prevFontFamily:_e}=e,{style:nt}=s;let tt="";if(et(bs,Ao)>1&&(tt=`scale(${1/et(bs,Ao)})`),a.canvasWidth!==0&&a.hasText){const{fontFamily:st}=nt,{canvasWidth:rt,fontSize:at}=a;(j!==at||_e!==st)&&(o.font=`${at*et(this,Eo)}px ${st}`,e.prevFontSize=at,e.prevFontFamily=st);const{width:it}=o.measureText(s.textContent);it>0&&(tt=`scaleX(${rt*et(this,Eo)/it}) ${tt}`)}a.angle!==0&&(tt=`rotate(${a.angle}deg) ${tt}`),tt.length>0&&(nt.transform=tt)},Nr=new WeakSet,kv=function(e=null){let s=et(this,Il).get(e||(e=""));if(!s){const a=document.createElement("canvas");a.className="hiddenCanvasElement",a.lang=e,document.body.append(a),s=a.getContext("2d",{alpha:!1,willReadFrequently:!0}),et(this,Il).set(e,s)}return s},IE=function(){if(et(this,Ao)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),Pt(this,Ao,e.getBoundingClientRect().height),e.remove()},FE=function(e,s){const a=et(this,Dl).get(e);if(a)return a;const o=wt(this,Nr,kv).call(this,s),j=o.font;o.canvas.width=o.canvas.height=DEFAULT_FONT_SIZE,o.font=`${DEFAULT_FONT_SIZE}px ${e}`;const _e=o.measureText("");let nt=_e.fontBoundingBoxAscent,tt=Math.abs(_e.fontBoundingBoxDescent);if(nt){const at=nt/(nt+tt);return et(this,Dl).set(e,at),o.canvas.width=o.canvas.height=0,o.font=j,at}o.strokeStyle="red",o.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),o.strokeText("g",0,0);let st=o.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;tt=0;for(let at=st.length-1-3;at>=0;at-=4)if(st[at]>0){tt=Math.ceil(at/4/DEFAULT_FONT_SIZE);break}o.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),o.strokeText("A",0,DEFAULT_FONT_SIZE),st=o.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,nt=0;for(let at=0,it=st.length;at<it;at+=4)if(st[at]>0){nt=DEFAULT_FONT_SIZE-Math.floor(at/4/DEFAULT_FONT_SIZE);break}o.canvas.width=o.canvas.height=0,o.font=j;const rt=nt?nt/(nt+tt):DEFAULT_FONT_ASCENT;return et(this,Dl).set(e,rt),rt},Dt(bs,Nr),Dt(bs,Dl,new Map),Dt(bs,Il,new Map),Dt(bs,Ao,null),Dt(bs,Gu,new Set),bs);function renderTextLayer(){deprecated("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:e,viewport:s,...a}=arguments[0],o=Object.keys(a);o.length>0&&warn("Ignoring `renderTextLayer` parameters: "+o.join(", "));const j=new TextLayer$1({textContentSource:i,container:e,viewport:s}),{textDivs:_e,textContentItemsStr:nt}=j;return{promise:j.render(),textDivs:_e,textContentItemsStr:nt}}function updateTextLayer(){deprecated("`updateTextLayer`, please use `TextLayer` instead.")}class XfaText{static textContent(e){const s=[],a={items:s,styles:Object.create(null)};function o(j){var tt;if(!j)return;let _e=null;const nt=j.name;if(nt==="#text")_e=j.value;else if(XfaText.shouldBuildText(nt))(tt=j==null?void 0:j.attributes)!=null&&tt.textContent?_e=j.attributes.textContent:j.value&&(_e=j.value);else return;if(_e!==null&&s.push({str:_e}),!!j.children)for(const st of j.children)o(st)}return o(e),a}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new PDFDocumentLoadingTask,{docId:s}=e,a=i.url?getUrlProp(i.url):null,o=i.data?getDataProp(i.data):null,j=i.httpHeaders||null,_e=i.withCredentials===!0,nt=i.password??null,tt=i.range instanceof PDFDataRangeTransport$1?i.range:null,st=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let rt=i.worker instanceof PDFWorker?i.worker:null;const at=i.verbosity,it=typeof i.docBaseUrl=="string"&&!isDataScheme(i.docBaseUrl)?i.docBaseUrl:null,ct=typeof i.cMapUrl=="string"?i.cMapUrl:null,ot=i.cMapPacked!==!1,ut=i.CMapReaderFactory||DefaultCMapReaderFactory,dt=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,lt=i.StandardFontDataFactory||DefaultStandardFontDataFactory,ht=i.stopAtErrors!==!0,xt=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,mt=i.isEvalSupported!==!1,ft=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!isNodeJS,gt=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,pt=typeof i.disableFontFace=="boolean"?i.disableFontFace:isNodeJS,vt=i.fontExtraProperties===!0,At=i.enableXfa===!0,Rt=i.ownerDocument||globalThis.document,bt=i.disableRange===!0,Tt=i.disableStream===!0,Lt=i.disableAutoFetch===!0,Yt=i.pdfBug===!0,zt=i.enableHWA===!0,Wt=tt?tt.length:i.length??NaN,Bt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!isNodeJS&&!pt,Ut=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:ut===DOMCMapReaderFactory&&lt===DOMStandardFontDataFactory&&ct&&dt&&isValidFetchUrl(ct,document.baseURI)&&isValidFetchUrl(dt,document.baseURI),_t=i.canvasFactory||new DefaultCanvasFactory({ownerDocument:Rt,enableHWA:zt}),$t=i.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:Rt}),Xt=null;setVerbosityLevel(at);const Ct={canvasFactory:_t,filterFactory:$t};if(Ut||(Ct.cMapReaderFactory=new ut({baseUrl:ct,isCompressed:ot}),Ct.standardFontDataFactory=new lt({baseUrl:dt})),!rt){const St={verbosity:at,port:GlobalWorkerOptions.workerPort};rt=St.port?PDFWorker.fromPort(St):new PDFWorker(St),e._worker=rt}const yt={docId:s,apiVersion:"4.4.168",data:o,password:nt,disableAutoFetch:Lt,rangeChunkSize:st,length:Wt,docBaseUrl:it,enableXfa:At,evaluatorOptions:{maxImageSize:xt,disableFontFace:pt,ignoreErrors:ht,isEvalSupported:mt,isOffscreenCanvasSupported:ft,canvasMaxAreaInBytes:gt,fontExtraProperties:vt,useSystemFonts:Bt,cMapUrl:Ut?ct:null,standardFontDataUrl:Ut?dt:null}},Et={disableFontFace:pt,fontExtraProperties:vt,ownerDocument:Rt,pdfBug:Yt,styleElement:Xt,loadingParams:{disableAutoFetch:Lt,enableXfa:At}};return rt.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(rt.destroyed)throw new Error("Worker was destroyed");const St=rt.messageHandler.sendWithPromise("GetDocRequest",yt,o?[o.buffer]:null);let Ft;if(tt)Ft=new PDFDataTransportStream(tt,{disableRange:bt,disableStream:Tt});else if(!o){if(!a)throw new Error("getDocument - no `url` parameter provided.");Ft=(Ot=>isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&isValidFetchUrl(Ot.url)?new PDFFetchStream(Ot):new PDFNodeStream(Ot):isValidFetchUrl(Ot.url)?new PDFFetchStream(Ot):new PDFNetworkStream(Ot))({url:a,length:Wt,httpHeaders:j,withCredentials:_e,rangeChunkSize:st,disableRange:bt,disableStream:Tt})}return St.then(kt=>{if(e.destroyed)throw new Error("Loading aborted");if(rt.destroyed)throw new Error("Worker was destroyed");const Ot=new MessageHandler(s,kt,rt.port),Gt=new WorkerTransport(Ot,e,Ft,Et,Ct);e._transport=Gt,Ot.send("Ready",null)})}).catch(e._capability.reject),e}function getUrlProp(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(isNodeJS&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(i){if(isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return stringToBytes(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Iy;const Fy=class Fy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ds(Fy,Iy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,s,a;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((s=this._transport)==null?void 0:s.destroy())}catch(o){throw(a=this._worker)!=null&&a.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Iy=new WeakMap,Dt(Fy,Iy,0);let PDFDocumentLoadingTask=Fy,PDFDataRangeTransport$1=class{constructor(e,s,a=!1,o=null){this.length=e,this.initialData=s,this.progressiveDone=a,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,s){for(const a of this._rangeListeners)a(e,s)}onDataProgress(e,s){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(e,s)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,s){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(e,s){this._pdfInfo=e,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(s)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var So,Jr,rr,du,Pv;class PDFPageProxy{constructor(e,s,a,o=!1){Dt(this,rr);Dt(this,So,null);Dt(this,Jr,!1);this._pageIndex=e,this._pageInfo=s,this._transport=a,this._stats=o?new StatTimer:null,this._pdfBug=o,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:s=this.rotate,offsetX:a=0,offsetY:o=0,dontFlip:j=!1}={}){return new PageViewport({viewBox:this.view,scale:e,rotation:s,offsetX:a,offsetY:o,dontFlip:j})}getAnnotations({intent:e="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,s)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:s,intent:a="display",annotationMode:o=AnnotationMode.ENABLE,transform:j=null,background:_e=null,optionalContentConfigPromise:nt=null,annotationCanvasMap:tt=null,pageColors:st=null,printAnnotationStorage:rt=null}){var xt,mt;(xt=this._stats)==null||xt.time("Overall");const at=this._transport.getRenderingIntent(a,o,rt),{renderingIntent:it,cacheKey:ct}=at;Pt(this,Jr,!1),wt(this,rr,Pv).call(this),nt||(nt=this._transport.getOptionalContentConfig(it));let ot=this._intentStates.get(ct);ot||(ot=Object.create(null),this._intentStates.set(ct,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const ut=!!(it&RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=Promise.withResolvers(),ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(mt=this._stats)==null||mt.time("Page Request"),this._pumpOperatorList(at));const dt=ft=>{var gt;ot.renderTasks.delete(lt),(this._maybeCleanupAfterRender||ut)&&Pt(this,Jr,!0),wt(this,rr,du).call(this,!ut),ft?(lt.capability.reject(ft),this._abortOperatorList({intentState:ot,reason:ft instanceof Error?ft:new Error(ft)})):lt.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(gt=globalThis.Stats)!=null&&gt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},lt=new InternalRenderTask({callback:dt,params:{canvasContext:e,viewport:s,transform:j,background:_e},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:tt,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ut,pdfBug:this._pdfBug,pageColors:st});(ot.renderTasks||(ot.renderTasks=new Set)).add(lt);const ht=lt.task;return Promise.all([ot.displayReadyCapability.promise,nt]).then(([ft,gt])=>{var pt;if(this.destroyed){dt();return}if((pt=this._stats)==null||pt.time("Rendering"),!(gt.renderingIntent&it))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");lt.initializeGraphics({transparency:ft,optionalContentConfig:gt}),lt.operatorListChanged()}).catch(dt),ht}getOperatorList({intent:e="display",annotationMode:s=AnnotationMode.ENABLE,printAnnotationStorage:a=null}={}){var tt;function o(){_e.operatorList.lastChunk&&(_e.opListReadCapability.resolve(_e.operatorList),_e.renderTasks.delete(nt))}const j=this._transport.getRenderingIntent(e,s,a,!0);let _e=this._intentStates.get(j.cacheKey);_e||(_e=Object.create(null),this._intentStates.set(j.cacheKey,_e));let nt;return _e.opListReadCapability||(nt=Object.create(null),nt.operatorListChanged=o,_e.opListReadCapability=Promise.withResolvers(),(_e.renderTasks||(_e.renderTasks=new Set)).add(nt),_e.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(tt=this._stats)==null||tt.time("Page Request"),this._pumpOperatorList(j)),_e.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:s===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>XfaText.textContent(a));const s=this.streamTextContent(e);return new Promise(function(a,o){function j(){_e.read().then(function({value:tt,done:st}){if(st){a(nt);return}nt.lang??(nt.lang=tt.lang),Object.assign(nt.styles,tt.styles),nt.items.push(...tt.items),j()},o)}const _e=s.getReader(),nt={items:[],styles:Object.create(null),lang:null};j()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const a of s.renderTasks)e.push(a.completed),a.cancel();return this.objs.clear(),Pt(this,Jr,!1),wt(this,rr,Pv).call(this),Promise.all(e)}cleanup(e=!1){Pt(this,Jr,!0);const s=wt(this,rr,du).call(this,!1);return e&&s&&this._stats&&(this._stats=new StatTimer),s}_startRenderPage(e,s){var o,j;const a=this._intentStates.get(s);a&&((o=this._stats)==null||o.timeEnd("Page Request"),(j=a.displayReadyCapability)==null||j.resolve(e))}_renderPageChunk(e,s){for(let a=0,o=e.length;a<o;a++)s.operatorList.fnArray.push(e.fnArray[a]),s.operatorList.argsArray.push(e.argsArray[a]);s.operatorList.lastChunk=e.lastChunk,s.operatorList.separateAnnots=e.separateAnnots;for(const a of s.renderTasks)a.operatorListChanged();e.lastChunk&&wt(this,rr,du).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:s,annotationStorageSerializable:a}){const{map:o,transfer:j}=a,nt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:s,annotationStorage:o},j).getReader(),tt=this._intentStates.get(s);tt.streamReader=nt;const st=()=>{nt.read().then(({value:rt,done:at})=>{if(at){tt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(rt,tt),st())},rt=>{if(tt.streamReader=null,!this._transport.destroyed){if(tt.operatorList){tt.operatorList.lastChunk=!0;for(const at of tt.renderTasks)at.operatorListChanged();wt(this,rr,du).call(this,!0)}if(tt.displayReadyCapability)tt.displayReadyCapability.reject(rt);else if(tt.opListReadCapability)tt.opListReadCapability.reject(rt);else throw rt}})};st()}_abortOperatorList({intentState:e,reason:s,force:a=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!a){if(e.renderTasks.size>0)return;if(s instanceof RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;s.extraDelay>0&&s.extraDelay<1e3&&(o+=s.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:s,force:!0})},o);return}}if(e.streamReader.cancel(new AbortException(s.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[o,j]of this._intentStates)if(j===e){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}So=new WeakMap,Jr=new WeakMap,rr=new WeakSet,du=function(e=!1){if(wt(this,rr,Pv).call(this),!et(this,Jr)||this.destroyed)return!1;if(e)return Pt(this,So,setTimeout(()=>{Pt(this,So,null),wt(this,rr,du).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:s,operatorList:a}of this._intentStates.values())if(s.size>0||!a.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Pt(this,Jr,!1),!0},Pv=function(){et(this,So)&&(clearTimeout(et(this,So)),Pt(this,So,null))};var Fl,Ly;class LoopbackPort{constructor(){Dt(this,Fl,new Set);Dt(this,Ly,Promise.resolve())}postMessage(e,s){const a={data:structuredClone(e,s?{transfer:s}:null)};et(this,Ly).then(()=>{for(const o of et(this,Fl))o.call(this,a)})}addEventListener(e,s){et(this,Fl).add(s)}removeEventListener(e,s){et(this,Fl).delete(s)}terminate(){et(this,Fl).clear()}}Fl=new WeakMap,Ly=new WeakMap;const PDFWorkerUtil={isWorkerDisabled:!1,fakeWorkerId:0};isNodeJS&&(PDFWorkerUtil.isWorkerDisabled=!0,GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),PDFWorkerUtil.isSameOrigin=function(i,e){let s;try{if(s=new URL(i),!s.origin||s.origin==="null")return!1}catch{return!1}const a=new URL(e,s);return s.origin===a.origin},PDFWorkerUtil.createCDNWrapper=function(i){const e=`await import("${i}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Ll,Xu,Mv,Yu,Dv;const Hs=class Hs{constructor({name:e=null,port:s=null,verbosity:a=getVerbosityLevel()}={}){Dt(this,Xu);var o;if(this.name=e,this.destroyed=!1,this.verbosity=a,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,s){if((o=et(Hs,Ll))!=null&&o.has(s))throw new Error("Cannot use more than one PDFWorker per port.");(et(Hs,Ll)||Pt(Hs,Ll,new WeakMap)).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return isNodeJS?Promise.all([NodePackages.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),wt(this,Xu,Mv).call(this)}_initialize(){if(PDFWorkerUtil.isWorkerDisabled||et(Hs,Yu,Dv)){this._setupFakeWorker();return}let{workerSrc:e}=Hs;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const s=new Worker(e,{type:"module"}),a=new MessageHandler("main","worker",s),o=()=>{j.abort(),a.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},j=new AbortController;s.addEventListener("error",()=>{this._webWorker||o()},{signal:j.signal}),a.on("test",nt=>{if(j.abort(),this.destroyed||!nt){o();return}this._messageHandler=a,this._port=s,this._webWorker=s,wt(this,Xu,Mv).call(this)}),a.on("ready",nt=>{if(j.abort(),this.destroyed){o();return}try{_e()}catch{this._setupFakeWorker()}});const _e=()=>{const nt=new Uint8Array;a.send("test",nt,[nt.buffer])};_e();return}catch{info("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||(warn("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),Hs._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const a=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new MessageHandler(a+"_worker",a,s);e.setup(o,s),this._messageHandler=new MessageHandler(a,a+"_worker",s),wt(this,Xu,Mv).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=et(Hs,Ll))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var a;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const s=(a=et(this,Ll))==null?void 0:a.get(e.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new Hs(e)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>et(this,Yu,Dv)?et(this,Yu,Dv):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ll=new WeakMap,Xu=new WeakSet,Mv=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Yu=new WeakSet,Dv=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},Dt(Hs,Yu),Dt(Hs,Ll);let PDFWorker=Hs;var Zr,Tr,Ku,qu,Cr,Ol,Sp;class WorkerTransport{constructor(e,s,a,o,j){Dt(this,Ol);Dt(this,Zr,new Map);Dt(this,Tr,new Map);Dt(this,Ku,new Map);Dt(this,qu,new Map);Dt(this,Cr,null);this.messageHandler=e,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this.loadingParams=o.loadingParams,this._params=o,this.canvasFactory=j.canvasFactory,this.filterFactory=j.filterFactory,this.cMapReaderFactory=j.cMapReaderFactory,this.standardFontDataFactory=j.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(e,s=AnnotationMode.ENABLE,a=null,o=!1){let j=RenderingIntentFlag.DISPLAY,_e=SerializableEmpty;switch(e){case"any":j=RenderingIntentFlag.ANY;break;case"display":break;case"print":j=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${e}`)}switch(s){case AnnotationMode.DISABLE:j+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:j+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:j+=RenderingIntentFlag.ANNOTATIONS_STORAGE,_e=(j&RenderingIntentFlag.PRINT&&a instanceof PrintAnnotationStorage?a:this.annotationStorage).serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${s}`)}return o&&(j+=RenderingIntentFlag.OPLIST),{renderingIntent:j,cacheKey:`${j}_${_e.hash}`,annotationStorageSerializable:_e}}destroy(){var a;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(a=et(this,Cr))==null||a.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const o of et(this,Tr).values())e.push(o._destroy());et(this,Tr).clear(),et(this,Ku).clear(),et(this,qu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return e.push(s),Promise.all(e).then(()=>{var o;this.commonObjs.clear(),this.fontLoader.clear(),et(this,Zr).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(o=this._networkStream)==null||o.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:s}=this;e.on("GetReader",(a,o)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=j=>{this._lastProgress={loaded:j.loaded,total:j.total}},o.onPull=()=>{this._fullReader.read().then(function({value:j,done:_e}){if(_e){o.close();return}assert(j instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(j),1,[j])}).catch(j=>{o.error(j)})},o.onCancel=j=>{this._fullReader.cancel(j),o.ready.catch(_e=>{if(!this.destroyed)throw _e})}}),e.on("ReaderHeadersReady",a=>{const o=Promise.withResolvers(),j=this._fullReader;return j.headersReady.then(()=>{var _e;(!j.isStreamingSupported||!j.isRangeSupported)&&(this._lastProgress&&((_e=s.onProgress)==null||_e.call(s,this._lastProgress)),j.onProgress=nt=>{var tt;(tt=s.onProgress)==null||tt.call(s,{loaded:nt.loaded,total:nt.total})}),o.resolve({isStreamingSupported:j.isStreamingSupported,isRangeSupported:j.isRangeSupported,contentLength:j.contentLength})},o.reject),o.promise}),e.on("GetRangeReader",(a,o)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const j=this._networkStream.getRangeReader(a.begin,a.end);if(!j){o.close();return}o.onPull=()=>{j.read().then(function({value:_e,done:nt}){if(nt){o.close();return}assert(_e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(_e),1,[_e])}).catch(_e=>{o.error(_e)})},o.onCancel=_e=>{j.cancel(_e),o.ready.catch(nt=>{if(!this.destroyed)throw nt})}}),e.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(a,this))}),e.on("DocException",function(a){let o;switch(a.name){case"PasswordException":o=new PasswordException(a.message,a.code);break;case"InvalidPDFException":o=new InvalidPDFException(a.message);break;case"MissingPDFException":o=new MissingPDFException(a.message);break;case"UnexpectedResponseException":o=new UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":o=new UnknownErrorException(a.message,a.details);break;default:unreachable("DocException - expected a valid Error.")}s._capability.reject(o)}),e.on("PasswordRequest",a=>{if(Pt(this,Cr,Promise.withResolvers()),s.onPassword){const o=j=>{j instanceof Error?et(this,Cr).reject(j):et(this,Cr).resolve({password:j})};try{s.onPassword(o,a.code)}catch(j){et(this,Cr).reject(j)}}else et(this,Cr).reject(new PasswordException(a.message,a.code));return et(this,Cr).promise}),e.on("DataLoaded",a=>{var o;(o=s.onProgress)==null||o.call(s,{loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),e.on("StartRenderPage",a=>{if(this.destroyed)return;et(this,Tr).get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),e.on("commonobj",([a,o,j])=>{var _e;if(this.destroyed||this.commonObjs.has(a))return null;switch(o){case"Font":const{disableFontFace:nt,fontExtraProperties:tt,pdfBug:st}=this._params;if("error"in j){const ct=j.error;warn(`Error during font loading: ${ct}`),this.commonObjs.resolve(a,ct);break}const rt=st&&((_e=globalThis.FontInspector)!=null&&_e.enabled)?(ct,ot)=>globalThis.FontInspector.fontAdded(ct,ot):null,at=new FontFaceObject(j,{disableFontFace:nt,inspectFont:rt});this.fontLoader.bind(at).catch(()=>e.sendWithPromise("FontFallback",{id:a})).finally(()=>{!tt&&at.data&&(at.data=null),this.commonObjs.resolve(a,at)});break;case"CopyLocalImage":const{imageRef:it}=j;assert(it,"The imageRef must be defined.");for(const ct of et(this,Tr).values())for(const[,ot]of ct.objs)if((ot==null?void 0:ot.ref)===it)return ot.dataLen?(this.commonObjs.resolve(a,structuredClone(ot)),ot.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,j);break;default:throw new Error(`Got unknown common object type ${o}`)}return null}),e.on("obj",([a,o,j,_e])=>{var tt;if(this.destroyed)return;const nt=et(this,Tr).get(o);if(!nt.objs.has(a)){if(nt._intentStates.size===0){(tt=_e==null?void 0:_e.bitmap)==null||tt.close();return}switch(j){case"Image":nt.objs.resolve(a,_e),(_e==null?void 0:_e.dataLen)>MAX_IMAGE_SIZE_TO_CACHE&&(nt._maybeCleanupAfterRender=!0);break;case"Pattern":nt.objs.resolve(a,_e);break;default:throw new Error(`Got unknown object type ${j}`)}}}),e.on("DocProgress",a=>{var o;this.destroyed||(o=s.onProgress)==null||o.call(s,{loaded:a.loaded,total:a.total})}),e.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(a):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(a):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var a;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((a=this._fullReader)==null?void 0:a.filename)??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=e-1,a=et(this,Ku).get(s);if(a)return a;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(j=>{if(this.destroyed)throw new Error("Transport destroyed");j.refStr&&et(this,qu).set(j.refStr,e);const _e=new PDFPageProxy(s,j,this,this._params.pdfBug);return et(this,Tr).set(s,_e),_e});return et(this,Ku).set(s,o),o}getPageIndex(e){return isRefProxy(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:s})}getFieldObjects(){return wt(this,Ol,Sp).call(this,"GetFieldObjects")}hasJSActions(){return wt(this,Ol,Sp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return wt(this,Ol,Sp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return wt(this,Ol,Sp).call(this,"GetOptionalContentConfig").then(s=>new OptionalContentConfig(s,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",s=et(this,Zr).get(e);if(s)return s;const a=this.messageHandler.sendWithPromise(e,null).then(o=>{var j,_e;return{info:o[0],metadata:o[1]?new Metadata(o[1]):null,contentDispositionFilename:((j=this._fullReader)==null?void 0:j.filename)??null,contentLength:((_e=this._fullReader)==null?void 0:_e.contentLength)??null}});return et(this,Zr).set(e,a),a}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of et(this,Tr).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),et(this,Zr).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(e){if(!isRefProxy(e))return null;const s=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return et(this,qu).get(s)??null}}Zr=new WeakMap,Tr=new WeakMap,Ku=new WeakMap,qu=new WeakMap,Cr=new WeakMap,Ol=new WeakSet,Sp=function(e,s=null){const a=et(this,Zr).get(e);if(a)return a;const o=this.messageHandler.sendWithPromise(e,s);return et(this,Zr).set(e,o),o};const INITIAL_DATA=Symbol("INITIAL_DATA");var dr,Fm,u0;class PDFObjects{constructor(){Dt(this,Fm);Dt(this,dr,Object.create(null))}get(e,s=null){if(s){const o=wt(this,Fm,u0).call(this,e);return o.promise.then(()=>s(o.data)),null}const a=et(this,dr)[e];if(!a||a.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return a.data}has(e){const s=et(this,dr)[e];return!!s&&s.data!==INITIAL_DATA}resolve(e,s=null){const a=wt(this,Fm,u0).call(this,e);a.data=s,a.resolve()}clear(){var e;for(const s in et(this,dr)){const{data:a}=et(this,dr)[s];(e=a==null?void 0:a.bitmap)==null||e.close()}Pt(this,dr,Object.create(null))}*[Symbol.iterator](){for(const e in et(this,dr)){const{data:s}=et(this,dr)[e];s!==INITIAL_DATA&&(yield[e,s])}}}dr=new WeakMap,Fm=new WeakSet,u0=function(e){var s;return(s=et(this,dr))[e]||(s[e]={...Promise.withResolvers(),data:INITIAL_DATA})};var _o;class RenderTask{constructor(e){Dt(this,_o,null);Pt(this,_o,e),this.onContinue=null}get promise(){return et(this,_o).capability.promise}cancel(e=0){et(this,_o).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=et(this,_o).operatorList;if(!e)return!1;const{annotationCanvasMap:s}=et(this,_o);return e.form||e.canvas&&(s==null?void 0:s.size)>0}}_o=new WeakMap;var wo,Nl;const Wo=class Wo{constructor({callback:e,params:s,objs:a,commonObjs:o,annotationCanvasMap:j,operatorList:_e,pageIndex:nt,canvasFactory:tt,filterFactory:st,useRequestAnimationFrame:rt=!1,pdfBug:at=!1,pageColors:it=null}){Dt(this,wo,null);this.callback=e,this.params=s,this.objs=a,this.commonObjs=o,this.annotationCanvasMap=j,this.operatorListIdx=null,this.operatorList=_e,this._pageIndex=nt,this.canvasFactory=tt,this.filterFactory=st,this._pdfBug=at,this.pageColors=it,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=rt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:s}){var nt,tt;if(this.cancelled)return;if(this._canvas){if(et(Wo,Nl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");et(Wo,Nl).add(this._canvas)}this._pdfBug&&((nt=globalThis.StepperManager)!=null&&nt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:o,transform:j,background:_e}=this.params;this.gfx=new CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:j,viewport:o,transparency:e,background:_e}),this.operatorListIdx=0,this.graphicsReady=!0,(tt=this.graphicsReadyCallback)==null||tt.call(this)}cancel(e=null,s=0){var a;this.running=!1,this.cancelled=!0,(a=this.gfx)==null||a.endDrawing(),et(this,wo)&&(window.cancelAnimationFrame(et(this,wo)),Pt(this,wo,null)),et(Wo,Nl).delete(this._canvas),this.callback(e||new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Pt(this,wo,window.requestAnimationFrame(()=>{Pt(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),et(Wo,Nl).delete(this._canvas),this.callback())))}};wo=new WeakMap,Nl=new WeakMap,Dt(Wo,Nl,new WeakSet);let InternalRenderTask=Wo;const version="4.4.168",build="19fbc8998";function makeColorComp(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function scaleAndClamp(i){return Math.max(0,Math.min(255,255*i))}class ColorConverters{static CMYK_G([e,s,a,o]){return["G",1-Math.min(1,.3*e+.59*a+.11*s+o)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=scaleAndClamp(e),[e,e,e]}static G_HTML([e]){const s=makeColorComp(e);return`#${s}${s}${s}`}static RGB_G([e,s,a]){return["G",.3*e+.59*s+.11*a]}static RGB_rgb(e){return e.map(scaleAndClamp)}static RGB_HTML(e){return`#${e.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,s,a,o]){return["RGB",1-Math.min(1,e+o),1-Math.min(1,a+o),1-Math.min(1,s+o)]}static CMYK_rgb([e,s,a,o]){return[scaleAndClamp(1-Math.min(1,e+o)),scaleAndClamp(1-Math.min(1,a+o)),scaleAndClamp(1-Math.min(1,s+o))]}static CMYK_HTML(e){const s=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([e,s,a]){const o=1-e,j=1-s,_e=1-a,nt=Math.min(o,j,_e);return["CMYK",o,j,_e,nt]}}class XfaLayer{static setupStorage(e,s,a,o,j){const _e=o.getValue(s,{value:null});switch(a.name){case"textarea":if(_e.value!==null&&(e.textContent=_e.value),j==="print")break;e.addEventListener("input",nt=>{o.setValue(s,{value:nt.target.value})});break;case"input":if(a.attributes.type==="radio"||a.attributes.type==="checkbox"){if(_e.value===a.attributes.xfaOn?e.setAttribute("checked",!0):_e.value===a.attributes.xfaOff&&e.removeAttribute("checked"),j==="print")break;e.addEventListener("change",nt=>{o.setValue(s,{value:nt.target.checked?nt.target.getAttribute("xfaOn"):nt.target.getAttribute("xfaOff")})})}else{if(_e.value!==null&&e.setAttribute("value",_e.value),j==="print")break;e.addEventListener("input",nt=>{o.setValue(s,{value:nt.target.value})})}break;case"select":if(_e.value!==null){e.setAttribute("value",_e.value);for(const nt of a.children)nt.attributes.value===_e.value?nt.attributes.selected=!0:nt.attributes.hasOwnProperty("selected")&&delete nt.attributes.selected}e.addEventListener("input",nt=>{const tt=nt.target.options,st=tt.selectedIndex===-1?"":tt[tt.selectedIndex].value;o.setValue(s,{value:st})});break}}static setAttributes({html:e,element:s,storage:a=null,intent:o,linkService:j}){const{attributes:_e}=s,nt=e instanceof HTMLAnchorElement;_e.type==="radio"&&(_e.name=`${_e.name}-${o}`);for(const[tt,st]of Object.entries(_e))if(st!=null)switch(tt){case"class":st.length&&e.setAttribute(tt,st.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",st);break;case"style":Object.assign(e.style,st);break;case"textContent":e.textContent=st;break;default:(!nt||tt!=="href"&&tt!=="newWindow")&&e.setAttribute(tt,st)}nt&&j.addLinkAttributes(e,_e.href,_e.newWindow),a&&_e.dataId&&this.setupStorage(e,_e.dataId,s,a)}static render(e){var at,it;const s=e.annotationStorage,a=e.linkService,o=e.xfaHtml,j=e.intent||"display",_e=document.createElement(o.name);o.attributes&&this.setAttributes({html:_e,element:o,intent:j,linkService:a});const nt=j!=="richText",tt=e.div;if(tt.append(_e),e.viewport){const ct=`matrix(${e.viewport.transform.join(",")})`;tt.style.transform=ct}nt&&tt.setAttribute("class","xfaLayer xfaFont");const st=[];if(o.children.length===0){if(o.value){const ct=document.createTextNode(o.value);_e.append(ct),nt&&XfaText.shouldBuildText(o.name)&&st.push(ct)}return{textDivs:st}}const rt=[[o,-1,_e]];for(;rt.length>0;){const[ct,ot,ut]=rt.at(-1);if(ot+1===ct.children.length){rt.pop();continue}const dt=ct.children[++rt.at(-1)[1]];if(dt===null)continue;const{name:lt}=dt;if(lt==="#text"){const xt=document.createTextNode(dt.value);st.push(xt),ut.append(xt);continue}const ht=(at=dt==null?void 0:dt.attributes)!=null&&at.xmlns?document.createElementNS(dt.attributes.xmlns,lt):document.createElement(lt);if(ut.append(ht),dt.attributes&&this.setAttributes({html:ht,element:dt,storage:s,intent:j,linkService:a}),((it=dt.children)==null?void 0:it.length)>0)rt.push([dt,-1,ht]);else if(dt.value){const xt=document.createTextNode(dt.value);nt&&XfaText.shouldBuildText(lt)&&st.push(xt),ht.append(xt)}}for(const ct of tt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))ct.setAttribute("readOnly",!0);return{textDivs:st}}static update(e){const s=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=s,e.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class AnnotationElementFactory{static create(e){switch(e.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(e);case AnnotationType.TEXT:return new TextAnnotationElement(e);case AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(e);case"Btn":return e.data.radioButton?new RadioButtonWidgetAnnotationElement(e):e.data.checkBox?new CheckboxWidgetAnnotationElement(e):new PushButtonWidgetAnnotationElement(e);case"Ch":return new ChoiceWidgetAnnotationElement(e);case"Sig":return new SignatureWidgetAnnotationElement(e)}return new WidgetAnnotationElement(e);case AnnotationType.POPUP:return new PopupAnnotationElement(e);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(e);case AnnotationType.LINE:return new LineAnnotationElement(e);case AnnotationType.SQUARE:return new SquareAnnotationElement(e);case AnnotationType.CIRCLE:return new CircleAnnotationElement(e);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(e);case AnnotationType.CARET:return new CaretAnnotationElement(e);case AnnotationType.INK:return new InkAnnotationElement(e);case AnnotationType.POLYGON:return new PolygonAnnotationElement(e);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(e);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(e);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(e);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(e);case AnnotationType.STAMP:return new StampAnnotationElement(e);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(e);default:return new AnnotationElement(e)}}}var $l,Qu,Ju,Lm,h0;const _b=class _b{constructor(e,{isRenderable:s=!1,ignoreBorder:a=!1,createQuadrilaterals:o=!1}={}){Dt(this,Lm);Dt(this,$l,null);Dt(this,Qu,!1);Dt(this,Ju,null);this.isRenderable=s,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,s&&(this.container=this._createContainer(a)),o&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:s,richText:a}){return!!(e!=null&&e.str||s!=null&&s.str||a!=null&&a.str)}get hasPopupData(){return _b._hasPopupData(this.data)}updateEdited(e){var a;if(!this.container)return;et(this,$l)||Pt(this,$l,{rect:this.data.rect.slice(0)});const{rect:s}=e;s&&wt(this,Lm,h0).call(this,s),(a=et(this,Ju))==null||a.popup.updateEdited(e)}resetEdited(){var e;et(this,$l)&&(wt(this,Lm,h0).call(this,et(this,$l).rect),(e=et(this,Ju))==null||e.popup.resetEdited(),Pt(this,$l,null))}_createContainer(e){const{data:s,parent:{page:a,viewport:o}}=this,j=document.createElement("section");j.setAttribute("data-annotation-id",s.id),this instanceof WidgetAnnotationElement||(j.tabIndex=DEFAULT_TAB_INDEX);const{style:_e}=j;if(_e.zIndex=this.parent.zIndex++,s.popupRef&&j.setAttribute("aria-haspopup","dialog"),s.alternativeText&&(j.title=s.alternativeText),s.noRotate&&j.classList.add("norotate"),!s.rect||this instanceof PopupAnnotationElement){const{rotation:ut}=s;return!s.hasOwnCanvas&&ut!==0&&this.setRotation(ut,j),j}const{width:nt,height:tt}=getRectDims(s.rect);if(!e&&s.borderStyle.width>0){_e.borderWidth=`${s.borderStyle.width}px`;const ut=s.borderStyle.horizontalCornerRadius,dt=s.borderStyle.verticalCornerRadius;if(ut>0||dt>0){const ht=`calc(${ut}px * var(--scale-factor)) / calc(${dt}px * var(--scale-factor))`;_e.borderRadius=ht}else if(this instanceof RadioButtonWidgetAnnotationElement){const ht=`calc(${nt}px * var(--scale-factor)) / calc(${tt}px * var(--scale-factor))`;_e.borderRadius=ht}switch(s.borderStyle.style){case AnnotationBorderStyleType.SOLID:_e.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:_e.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:_e.borderBottomStyle="solid";break}const lt=s.borderColor||null;lt?(Pt(this,Qu,!0),_e.borderColor=Util.makeHexColor(lt[0]|0,lt[1]|0,lt[2]|0)):_e.borderWidth=0}const st=Util.normalizeRect([s.rect[0],a.view[3]-s.rect[1]+a.view[1],s.rect[2],a.view[3]-s.rect[3]+a.view[1]]),{pageWidth:rt,pageHeight:at,pageX:it,pageY:ct}=o.rawDims;_e.left=`${100*(st[0]-it)/rt}%`,_e.top=`${100*(st[1]-ct)/at}%`;const{rotation:ot}=s;return s.hasOwnCanvas||ot===0?(_e.width=`${100*nt/rt}%`,_e.height=`${100*tt/at}%`):this.setRotation(ot,j),j}setRotation(e,s=this.container){if(!this.data.rect)return;const{pageWidth:a,pageHeight:o}=this.parent.viewport.rawDims,{width:j,height:_e}=getRectDims(this.data.rect);let nt,tt;e%180===0?(nt=100*j/a,tt=100*_e/o):(nt=100*_e/a,tt=100*j/o),s.style.width=`${nt}%`,s.style.height=`${tt}%`,s.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(s,a,o)=>{const j=o.detail[s],_e=j[0],nt=j.slice(1);o.target.style[a]=ColorConverters[`${_e}_HTML`](nt),this.annotationStorage.setValue(this.data.id,{[a]:ColorConverters[`${_e}_rgb`](nt)})};return shadow(this,"_commonActions",{display:s=>{const{display:a}=s.detail,o=a%2===1;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:o,noPrint:a===1||a===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:a}=s.detail;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:a,noView:a})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{e("bgColor","backgroundColor",s)},fillColor:s=>{e("fillColor","backgroundColor",s)},fgColor:s=>{e("fgColor","color",s)},textColor:s=>{e("textColor","color",s)},borderColor:s=>{e("borderColor","borderColor",s)},strokeColor:s=>{e("strokeColor","borderColor",s)},rotation:s=>{const a=s.detail.rotation;this.setRotation(a),this.annotationStorage.setValue(this.data.id,{rotation:a})}})}_dispatchEventFromSandbox(e,s){const a=this._commonActions;for(const o of Object.keys(s.detail)){const j=e[o]||a[o];j==null||j(s)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const a=this._commonActions;for(const[o,j]of Object.entries(s)){const _e=a[o];if(_e){const nt={detail:{[o]:j},target:e};_e(nt),delete s[o]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[s,a,o,j]=this.data.rect.map(ut=>Math.fround(ut));if(e.length===8){const[ut,dt,lt,ht]=e.subarray(2,6);if(o===ut&&j===dt&&s===lt&&a===ht)return}const{style:_e}=this.container;let nt;if(et(this,Qu)){const{borderColor:ut,borderWidth:dt}=_e;_e.borderWidth=0,nt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ut}" stroke-width="${dt}">`],this.container.classList.add("hasBorder")}const tt=o-s,st=j-a,{svgFactory:rt}=this,at=rt.createElement("svg");at.classList.add("quadrilateralsContainer"),at.setAttribute("width",0),at.setAttribute("height",0);const it=rt.createElement("defs");at.append(it);const ct=rt.createElement("clipPath"),ot=`clippath_${this.data.id}`;ct.setAttribute("id",ot),ct.setAttribute("clipPathUnits","objectBoundingBox"),it.append(ct);for(let ut=2,dt=e.length;ut<dt;ut+=8){const lt=e[ut],ht=e[ut+1],xt=e[ut+2],mt=e[ut+3],ft=rt.createElement("rect"),gt=(xt-s)/tt,pt=(j-ht)/st,vt=(lt-xt)/tt,At=(ht-mt)/st;ft.setAttribute("x",gt),ft.setAttribute("y",pt),ft.setAttribute("width",vt),ft.setAttribute("height",At),ct.append(ft),nt==null||nt.push(`<rect vector-effect="non-scaling-stroke" x="${gt}" y="${pt}" width="${vt}" height="${At}"/>`)}et(this,Qu)&&(nt.push("</g></svg>')"),_e.backgroundImage=nt.join("")),this.container.append(at),this.container.style.clipPath=`url(#${ot})`}_createPopup(){const{container:e,data:s}=this;e.setAttribute("aria-haspopup","dialog");const a=Pt(this,Ju,new PopupAnnotationElement({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(a.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,s=null){const a=[];if(this._fieldObjects){const o=this._fieldObjects[e];if(o)for(const{page:j,id:_e,exportValues:nt}of o){if(j===-1||_e===s)continue;const tt=typeof nt=="string"?nt:null,st=document.querySelector(`[data-element-id="${_e}"]`);if(st&&!GetElementsByNameSet.has(st)){warn(`_getElementsByName - element not allowed: ${_e}`);continue}a.push({id:_e,exportValue:tt,domElement:st})}return a}for(const o of document.getElementsByName(e)){const{exportValue:j}=o,_e=o.getAttribute("data-element-id");_e!==s&&GetElementsByNameSet.has(o)&&a.push({id:_e,exportValue:j,domElement:o})}return a}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const s of e)s.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("switchannotationeditormode",{source:this,mode:e,editId:s})})}};$l=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Lm=new WeakSet,h0=function(e){const{container:{style:s},data:{rect:a,rotation:o},parent:{viewport:{rawDims:{pageWidth:j,pageHeight:_e,pageX:nt,pageY:tt}}}}=this;a==null||a.splice(0,4,...e);const{width:st,height:rt}=getRectDims(e);s.left=`${100*(e[0]-nt)/j}%`,s.top=`${100*(_e-e[3]+tt)/_e}%`,o===0?(s.width=`${100*st/j}%`,s.height=`${100*rt/_e}%`):this.setRotation(o)};let AnnotationElement=_b;var Qs,jo,LE,OE;class LinkAnnotationElement extends AnnotationElement{constructor(s,a=null){super(s,{isRenderable:!0,ignoreBorder:!!(a!=null&&a.ignoreBorder),createQuadrilaterals:!0});Dt(this,Qs);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:a}=this,o=document.createElement("a");o.setAttribute("data-element-id",s.id);let j=!1;return s.url?(a.addLinkAttributes(o,s.url,s.newWindow),j=!0):s.action?(this._bindNamedAction(o,s.action),j=!0):s.attachment?(wt(this,Qs,LE).call(this,o,s.attachment,s.attachmentDest),j=!0):s.setOCGState?(wt(this,Qs,OE).call(this,o,s.setOCGState),j=!0):s.dest?(this._bindLink(o,s.dest),j=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(o,s),j=!0),s.resetForm?(this._bindResetFormAction(o,s.resetForm),j=!0):this.isTooltipOnly&&!j&&(this._bindLink(o,""),j=!0)),this.container.classList.add("linkAnnotation"),j&&this.container.append(o),this.container}_bindLink(s,a){s.href=this.linkService.getDestinationHash(a),s.onclick=()=>(a&&this.linkService.goToDestination(a),!1),(a||a==="")&&wt(this,Qs,jo).call(this)}_bindNamedAction(s,a){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(a),!1),wt(this,Qs,jo).call(this)}_bindJSAction(s,a){s.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const j of Object.keys(a.actions)){const _e=o.get(j);_e&&(s[_e]=()=>{var nt;return(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a.id,name:j}}),!1})}s.onclick||(s.onclick=()=>!1),wt(this,Qs,jo).call(this)}_bindResetFormAction(s,a){const o=s.onclick;if(o||(s.href=this.linkService.getAnchorUrl("")),wt(this,Qs,jo).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),o||(s.onclick=()=>!1);return}s.onclick=()=>{var at;o==null||o();const{fields:j,refs:_e,include:nt}=a,tt=[];if(j.length!==0||_e.length!==0){const it=new Set(_e);for(const ct of j){const ot=this._fieldObjects[ct]||[];for(const{id:ut}of ot)it.add(ut)}for(const ct of Object.values(this._fieldObjects))for(const ot of ct)it.has(ot.id)===nt&&tt.push(ot)}else for(const it of Object.values(this._fieldObjects))tt.push(...it);const st=this.annotationStorage,rt=[];for(const it of tt){const{id:ct}=it;switch(rt.push(ct),it.type){case"text":{const ut=it.defaultValue||"";st.setValue(ct,{value:ut});break}case"checkbox":case"radiobutton":{const ut=it.defaultValue===it.exportValues;st.setValue(ct,{value:ut});break}case"combobox":case"listbox":{const ut=it.defaultValue||"";st.setValue(ct,{value:ut});break}default:continue}const ot=document.querySelector(`[data-element-id="${ct}"]`);if(ot){if(!GetElementsByNameSet.has(ot)){warn(`_bindResetFormAction - element not allowed: ${ct}`);continue}}else continue;ot.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:rt,name:"ResetForm"}})),!1}}}Qs=new WeakSet,jo=function(){this.container.setAttribute("data-internal-link","")},LE=function(s,a,o=null){s.href=this.linkService.getAnchorUrl(""),a.description&&(s.title=a.description),s.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(a.content,a.filename,o),!1},wt(this,Qs,jo).call(this)},OE=function(s,a){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(a),!1),wt(this,Qs,jo).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(e){var s;this.data.hasOwnCanvas&&(((s=e.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return util_FeatureTest.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,s,a,o,j){a.includes("mouse")?e.addEventListener(a,_e=>{var nt;(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:j(_e),shift:_e.shiftKey,modifier:this._getKeyModifier(_e)}})}):e.addEventListener(a,_e=>{var nt;if(a==="blur"){if(!s.focused||!_e.relatedTarget)return;s.focused=!1}else if(a==="focus"){if(s.focused)return;s.focused=!0}j&&((nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:j(_e)}}))})}_setEventListeners(e,s,a,o){var j,_e,nt;for(const[tt,st]of a)(st==="Action"||(j=this.data.actions)!=null&&j[st])&&((st==="Focus"||st==="Blur")&&(s||(s={focused:!1})),this._setEventListener(e,s,tt,st,o),st==="Focus"&&!((_e=this.data.actions)!=null&&_e.Blur)?this._setEventListener(e,s,"blur","Blur",null):st==="Blur"&&!((nt=this.data.actions)!=null&&nt.Focus)&&this._setEventListener(e,s,"focus","Focus",null))}_setBackgroundColor(e){const s=this.data.backgroundColor||null;e.style.backgroundColor=s===null?"transparent":Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(e){const s=["left","center","right"],{fontColor:a}=this.data.defaultAppearanceData,o=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,j=e.style;let _e;const nt=2,tt=st=>Math.round(10*st)/10;if(this.data.multiLine){const st=Math.abs(this.data.rect[3]-this.data.rect[1]-nt),rt=Math.round(st/(LINE_FACTOR*o))||1,at=st/rt;_e=Math.min(o,tt(at/LINE_FACTOR))}else{const st=Math.abs(this.data.rect[3]-this.data.rect[1]-nt);_e=Math.min(o,tt(st/LINE_FACTOR))}j.fontSize=`calc(${_e}px * var(--scale-factor))`,j.color=Util.makeHexColor(a[0],a[1],a[2]),this.data.textAlignment!==null&&(j.textAlign=s[this.data.textAlignment])}_setRequired(e,s){s?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",s)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){const s=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:s})}setPropertyOnSiblings(e,s,a,o){const j=this.annotationStorage;for(const _e of this._getElementsByName(e.name,e.id))_e.domElement&&(_e.domElement[s]=a),j.setValue(_e.id,{[o]:a})}render(){var o,j;const e=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){const _e=e.getValue(s,{value:this.data.fieldValue});let nt=_e.value||"";const tt=e.getValue(s,{charLimit:this.data.maxLen}).charLimit;tt&&nt.length>tt&&(nt=nt.slice(0,tt));let st=_e.formattedValue||((o=this.data.textContent)==null?void 0:o.join(`
`))||null;st&&this.data.comb&&(st=st.replaceAll(/\s+/g,""));const rt={userValue:nt,formattedValue:st,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=st??nt,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type="text",a.setAttribute("value",st??nt),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),GetElementsByNameSet.add(a),a.setAttribute("data-element-id",s),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(a,this.data.required),tt&&(a.maxLength=tt),a.addEventListener("input",it=>{e.setValue(s,{value:it.target.value}),this.setPropertyOnSiblings(a,"value",it.target.value,"value"),rt.formattedValue=null}),a.addEventListener("resetform",it=>{const ct=this.data.defaultFieldValue??"";a.value=rt.userValue=ct,rt.formattedValue=null});let at=it=>{const{formattedValue:ct}=rt;ct!=null&&(it.target.value=ct),it.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",ct=>{var ut;if(rt.focused)return;const{target:ot}=ct;rt.userValue&&(ot.value=rt.userValue),rt.lastCommittedValue=ot.value,rt.commitKey=1,(ut=this.data.actions)!=null&&ut.Focus||(rt.focused=!0)}),a.addEventListener("updatefromsandbox",ct=>{this.showElementAndHideCanvas(ct.target);const ot={value(ut){rt.userValue=ut.detail.value??"",e.setValue(s,{value:rt.userValue.toString()}),ut.target.value=rt.userValue},formattedValue(ut){const{formattedValue:dt}=ut.detail;rt.formattedValue=dt,dt!=null&&ut.target!==document.activeElement&&(ut.target.value=dt),e.setValue(s,{formattedValue:dt})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{var xt;const{charLimit:dt}=ut.detail,{target:lt}=ut;if(dt===0){lt.removeAttribute("maxLength");return}lt.setAttribute("maxLength",dt);let ht=rt.userValue;!ht||ht.length<=dt||(ht=ht.slice(0,dt),lt.value=rt.userValue=ht,e.setValue(s,{value:ht}),(xt=this.linkService.eventBus)==null||xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ht,willCommit:!0,commitKey:1,selStart:lt.selectionStart,selEnd:lt.selectionEnd}}))}};this._dispatchEventFromSandbox(ot,ct)}),a.addEventListener("keydown",ct=>{var dt;rt.commitKey=1;let ot=-1;if(ct.key==="Escape"?ot=0:ct.key==="Enter"&&!this.data.multiLine?ot=2:ct.key==="Tab"&&(rt.commitKey=3),ot===-1)return;const{value:ut}=ct.target;rt.lastCommittedValue!==ut&&(rt.lastCommittedValue=ut,rt.userValue=ut,(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ut,willCommit:!0,commitKey:ot,selStart:ct.target.selectionStart,selEnd:ct.target.selectionEnd}}))});const it=at;at=null,a.addEventListener("blur",ct=>{var ut,dt;if(!rt.focused||!ct.relatedTarget)return;(ut=this.data.actions)!=null&&ut.Blur||(rt.focused=!1);const{value:ot}=ct.target;rt.userValue=ot,rt.lastCommittedValue!==ot&&((dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ot,willCommit:!0,commitKey:rt.commitKey,selStart:ct.target.selectionStart,selEnd:ct.target.selectionEnd}})),it(ct)}),(j=this.data.actions)!=null&&j.Keystroke&&a.addEventListener("beforeinput",ct=>{var ft;rt.lastCommittedValue=null;const{data:ot,target:ut}=ct,{value:dt,selectionStart:lt,selectionEnd:ht}=ut;let xt=lt,mt=ht;switch(ct.inputType){case"deleteWordBackward":{const gt=dt.substring(0,lt).match(/\w*[^\w]*$/);gt&&(xt-=gt[0].length);break}case"deleteWordForward":{const gt=dt.substring(lt).match(/^[^\w]*\w*/);gt&&(mt+=gt[0].length);break}case"deleteContentBackward":lt===ht&&(xt-=1);break;case"deleteContentForward":lt===ht&&(mt+=1);break}ct.preventDefault(),(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:dt,change:ot||"",willCommit:!1,selStart:xt,selEnd:mt}})}),this._setEventListeners(a,rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ct=>ct.target.value)}if(at&&a.addEventListener("blur",at),this.data.comb){const ct=(this.data.rect[2]-this.data.rect[0])/tt;a.classList.add("comb"),a.style.letterSpacing=`calc(${ct}px * var(--scale-factor) - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell",this.data.hasOwnCanvas&&(a.hidden=!0);return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,s=this.data,a=s.id;let o=e.getValue(a,{value:s.exportValue===s.fieldValue}).value;typeof o=="string"&&(o=o!=="Off",e.setValue(a,{value:o})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const j=document.createElement("input");return GetElementsByNameSet.add(j),j.setAttribute("data-element-id",a),j.disabled=s.readOnly,this._setRequired(j,this.data.required),j.type="checkbox",j.name=s.fieldName,o&&j.setAttribute("checked",!0),j.setAttribute("exportValue",s.exportValue),j.tabIndex=DEFAULT_TAB_INDEX,j.addEventListener("change",_e=>{const{name:nt,checked:tt}=_e.target;for(const st of this._getElementsByName(nt,a)){const rt=tt&&st.exportValue===s.exportValue;st.domElement&&(st.domElement.checked=rt),e.setValue(st.id,{value:rt})}e.setValue(a,{value:tt})}),j.addEventListener("resetform",_e=>{const nt=s.defaultFieldValue||"Off";_e.target.checked=nt===s.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",_e=>{const nt={value(tt){tt.target.checked=tt.detail.value!=="Off",e.setValue(a,{value:tt.target.checked})}};this._dispatchEventFromSandbox(nt,_e)}),this._setEventListeners(j,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_e=>_e.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,s=this.data,a=s.id;let o=e.getValue(a,{value:s.fieldValue===s.buttonValue}).value;if(typeof o=="string"&&(o=o!==s.buttonValue,e.setValue(a,{value:o})),o)for(const _e of this._getElementsByName(s.fieldName,a))e.setValue(_e.id,{value:!1});const j=document.createElement("input");if(GetElementsByNameSet.add(j),j.setAttribute("data-element-id",a),j.disabled=s.readOnly,this._setRequired(j,this.data.required),j.type="radio",j.name=s.fieldName,o&&j.setAttribute("checked",!0),j.tabIndex=DEFAULT_TAB_INDEX,j.addEventListener("change",_e=>{const{name:nt,checked:tt}=_e.target;for(const st of this._getElementsByName(nt,a))e.setValue(st.id,{value:!1});e.setValue(a,{value:tt})}),j.addEventListener("resetform",_e=>{const nt=s.defaultFieldValue;_e.target.checked=nt!=null&&nt===s.buttonValue}),this.enableScripting&&this.hasJSActions){const _e=s.buttonValue;j.addEventListener("updatefromsandbox",nt=>{const tt={value:st=>{const rt=_e===st.detail.value;for(const at of this._getElementsByName(st.target.name)){const it=rt&&at.id===a;at.domElement&&(at.domElement.checked=it),e.setValue(at.id,{value:it})}}};this._dispatchEventFromSandbox(tt,nt)}),this._setEventListeners(j,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const s=e.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),e}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,s=this.data.id,a=e.getValue(s,{value:this.data.fieldValue}),o=document.createElement("select");GetElementsByNameSet.add(o),o.setAttribute("data-element-id",s),o.disabled=this.data.readOnly,this._setRequired(o,this.data.required),o.name=this.data.fieldName,o.tabIndex=DEFAULT_TAB_INDEX;let j=this.data.combo&&this.data.options.length>0;this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",rt=>{const at=this.data.defaultFieldValue;for(const it of o.options)it.selected=it.value===at});for(const rt of this.data.options){const at=document.createElement("option");at.textContent=rt.displayValue,at.value=rt.exportValue,a.value.includes(rt.exportValue)&&(at.setAttribute("selected",!0),j=!1),o.append(at)}let _e=null;if(j){const rt=document.createElement("option");rt.value=" ",rt.setAttribute("hidden",!0),rt.setAttribute("selected",!0),o.prepend(rt),_e=()=>{rt.remove(),o.removeEventListener("input",_e),_e=null},o.addEventListener("input",_e)}const nt=rt=>{const at=rt?"value":"textContent",{options:it,multiple:ct}=o;return ct?Array.prototype.filter.call(it,ot=>ot.selected).map(ot=>ot[at]):it.selectedIndex===-1?null:it[it.selectedIndex][at]};let tt=nt(!1);const st=rt=>{const at=rt.target.options;return Array.prototype.map.call(at,it=>({displayValue:it.textContent,exportValue:it.value}))};return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",rt=>{const at={value(it){_e==null||_e();const ct=it.detail.value,ot=new Set(Array.isArray(ct)?ct:[ct]);for(const ut of o.options)ut.selected=ot.has(ut.value);e.setValue(s,{value:nt(!0)}),tt=nt(!1)},multipleSelection(it){o.multiple=!0},remove(it){const ct=o.options,ot=it.detail.remove;ct[ot].selected=!1,o.remove(ot),ct.length>0&&Array.prototype.findIndex.call(ct,dt=>dt.selected)===-1&&(ct[0].selected=!0),e.setValue(s,{value:nt(!0),items:st(it)}),tt=nt(!1)},clear(it){for(;o.length!==0;)o.remove(0);e.setValue(s,{value:null,items:[]}),tt=nt(!1)},insert(it){const{index:ct,displayValue:ot,exportValue:ut}=it.detail.insert,dt=o.children[ct],lt=document.createElement("option");lt.textContent=ot,lt.value=ut,dt?dt.before(lt):o.append(lt),e.setValue(s,{value:nt(!0),items:st(it)}),tt=nt(!1)},items(it){const{items:ct}=it.detail;for(;o.length!==0;)o.remove(0);for(const ot of ct){const{displayValue:ut,exportValue:dt}=ot,lt=document.createElement("option");lt.textContent=ut,lt.value=dt,o.append(lt)}o.options.length>0&&(o.options[0].selected=!0),e.setValue(s,{value:nt(!0),items:st(it)}),tt=nt(!1)},indices(it){const ct=new Set(it.detail.indices);for(const ot of it.target.options)ot.selected=ct.has(ot.index);e.setValue(s,{value:nt(!0)}),tt=nt(!1)},editable(it){it.target.disabled=!it.detail.editable}};this._dispatchEventFromSandbox(at,rt)}),o.addEventListener("input",rt=>{var ct;const at=nt(!0),it=nt(!1);e.setValue(s,{value:at}),rt.preventDefault(),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:tt,change:it,changeEx:at,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(o,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],rt=>rt.target.value)):o.addEventListener("input",function(rt){e.setValue(s,{value:nt(!0)})}),this.data.combo&&this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(e){const{data:s,elements:a}=e;super(e,{isRenderable:AnnotationElement._hasPopupData(s)}),this.elements=a,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const a of this.elements)a.popup=e,s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${AnnotationPrefix}${a}`).join(",")),this.container}}var Zu,Oy,Ny,_h,Bl,us,_i,Ul,Om,Nm,_d,na,fr,ga,jm,xa,$m,Hl,zl,is,Iv,d0,NE,jE,$E,BE,Fv,Lv,f0;class PopupElement{constructor({container:e,color:s,elements:a,titleObj:o,modificationDate:j,contentsObj:_e,richText:nt,parent:tt,rect:st,parentRect:rt,open:at}){Dt(this,is);Dt(this,Zu,wt(this,is,$E).bind(this));Dt(this,Oy,wt(this,is,f0).bind(this));Dt(this,Ny,wt(this,is,Lv).bind(this));Dt(this,_h,wt(this,is,Fv).bind(this));Dt(this,Bl,null);Dt(this,us,null);Dt(this,_i,null);Dt(this,Ul,null);Dt(this,Om,null);Dt(this,Nm,null);Dt(this,_d,null);Dt(this,na,!1);Dt(this,fr,null);Dt(this,ga,null);Dt(this,jm,null);Dt(this,xa,null);Dt(this,$m,null);Dt(this,Hl,null);Dt(this,zl,!1);var it;Pt(this,us,e),Pt(this,$m,o),Pt(this,_i,_e),Pt(this,xa,nt),Pt(this,Nm,tt),Pt(this,Bl,s),Pt(this,jm,st),Pt(this,_d,rt),Pt(this,Om,a),Pt(this,Ul,PDFDateString.toDateObject(j)),this.trigger=a.flatMap(ct=>ct.getElementsToTriggerPopup());for(const ct of this.trigger)ct.addEventListener("click",et(this,_h)),ct.addEventListener("mouseenter",et(this,Ny)),ct.addEventListener("mouseleave",et(this,Oy)),ct.classList.add("popupTriggerArea");for(const ct of a)(it=ct.container)==null||it.addEventListener("keydown",et(this,Zu));et(this,us).hidden=!0,at&&wt(this,is,Fv).call(this)}render(){if(et(this,fr))return;const e=Pt(this,fr,document.createElement("div"));if(e.className="popup",et(this,Bl)){const j=e.style.outlineColor=Util.makeHexColor(...et(this,Bl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${j} 30%, white)`:e.style.backgroundColor=Util.makeHexColor(...et(this,Bl).map(nt=>Math.floor(.7*(255-nt)+nt)))}const s=document.createElement("span");s.className="header";const a=document.createElement("h1");if(s.append(a),{dir:a.dir,str:a.textContent}=et(this,$m),e.append(s),et(this,Ul)){const j=document.createElement("span");j.classList.add("popupDate"),j.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),j.setAttribute("data-l10n-args",JSON.stringify({date:et(this,Ul).toLocaleDateString(),time:et(this,Ul).toLocaleTimeString()})),s.append(j)}const o=et(this,is,Iv);if(o)XfaLayer.render({xfaHtml:o,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const j=this._formatContents(et(this,_i));e.append(j)}et(this,us).append(e)}_formatContents({str:e,dir:s}){const a=document.createElement("p");a.classList.add("popupContent"),a.dir=s;const o=e.split(/(?:\r\n?|\n)/);for(let j=0,_e=o.length;j<_e;++j){const nt=o[j];a.append(document.createTextNode(nt)),j<_e-1&&a.append(document.createElement("br"))}return a}updateEdited({rect:e,popupContent:s}){var a;et(this,Hl)||Pt(this,Hl,{contentsObj:et(this,_i),richText:et(this,xa)}),e&&Pt(this,ga,null),s&&(Pt(this,xa,wt(this,is,jE).call(this,s)),Pt(this,_i,null)),(a=et(this,fr))==null||a.remove(),Pt(this,fr,null)}resetEdited(){var e;et(this,Hl)&&({contentsObj:ds(this,_i)._,richText:ds(this,xa)._}=et(this,Hl),Pt(this,Hl,null),(e=et(this,fr))==null||e.remove(),Pt(this,fr,null),Pt(this,ga,null))}forceHide(){Pt(this,zl,this.isVisible),et(this,zl)&&(et(this,us).hidden=!0)}maybeShow(){et(this,zl)&&(et(this,fr)||wt(this,is,Lv).call(this),Pt(this,zl,!1),et(this,us).hidden=!1)}get isVisible(){return et(this,us).hidden===!1}}Zu=new WeakMap,Oy=new WeakMap,Ny=new WeakMap,_h=new WeakMap,Bl=new WeakMap,us=new WeakMap,_i=new WeakMap,Ul=new WeakMap,Om=new WeakMap,Nm=new WeakMap,_d=new WeakMap,na=new WeakMap,fr=new WeakMap,ga=new WeakMap,jm=new WeakMap,xa=new WeakMap,$m=new WeakMap,Hl=new WeakMap,zl=new WeakMap,is=new WeakSet,Iv=function(){const e=et(this,xa),s=et(this,_i);return e!=null&&e.str&&(!(s!=null&&s.str)||s.str===e.str)&&et(this,xa).html||null},d0=function(){var e,s,a;return((a=(s=(e=et(this,is,Iv))==null?void 0:e.attributes)==null?void 0:s.style)==null?void 0:a.fontSize)||0},NE=function(){var e,s,a;return((a=(s=(e=et(this,is,Iv))==null?void 0:e.attributes)==null?void 0:s.style)==null?void 0:a.color)||null},jE=function(e){const s=[],a={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:s}]}},o={style:{color:et(this,is,NE),fontSize:et(this,is,d0)?`calc(${et(this,is,d0)}px * var(--scale-factor))`:""}};for(const j of e.split(`
`))s.push({name:"span",value:j,attributes:o});return a},$E=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&et(this,na))&&wt(this,is,Fv).call(this)},BE=function(){if(et(this,ga)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:j}}}=et(this,Nm);let _e=!!et(this,_d),nt=_e?et(this,_d):et(this,jm);for(const ot of et(this,Om))if(!nt||Util.intersect(ot.data.rect,nt)!==null){nt=ot.data.rect,_e=!0;break}const tt=Util.normalizeRect([nt[0],e[3]-nt[1]+e[1],nt[2],e[3]-nt[3]+e[1]]),rt=_e?nt[2]-nt[0]+5:0,at=tt[0]+rt,it=tt[1];Pt(this,ga,[100*(at-o)/s,100*(it-j)/a]);const{style:ct}=et(this,us);ct.left=`${et(this,ga)[0]}%`,ct.top=`${et(this,ga)[1]}%`},Fv=function(){Pt(this,na,!et(this,na)),et(this,na)?(wt(this,is,Lv).call(this),et(this,us).addEventListener("click",et(this,_h)),et(this,us).addEventListener("keydown",et(this,Zu))):(wt(this,is,f0).call(this),et(this,us).removeEventListener("click",et(this,_h)),et(this,us).removeEventListener("keydown",et(this,Zu)))},Lv=function(){et(this,fr)||this.render(),this.isVisible?et(this,na)&&et(this,us).classList.add("focused"):(wt(this,is,BE).call(this),et(this,us).hidden=!1,et(this,us).style.zIndex=parseInt(et(this,us).style.zIndex)+1e3)},f0=function(){et(this,us).classList.remove("focused"),!(et(this,na)||!this.isVisible)&&(et(this,us).hidden=!0,et(this,us).style.zIndex=parseInt(et(this,us).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const s of this.textContent){const a=document.createElement("span");a.textContent=s,e.append(a)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Bm;class LineAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Dt(this,Bm,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:a,height:o}=getRectDims(s.rect),j=this.svgFactory.create(a,o,!0),_e=Pt(this,Bm,this.svgFactory.createElement("svg:line"));return _e.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),_e.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),_e.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),_e.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),_e.setAttribute("stroke-width",s.borderStyle.width||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),j.append(_e),this.container.append(j),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Bm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bm=new WeakMap;var Um;class SquareAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Dt(this,Um,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:a,height:o}=getRectDims(s.rect),j=this.svgFactory.create(a,o,!0),_e=s.borderStyle.width,nt=Pt(this,Um,this.svgFactory.createElement("svg:rect"));return nt.setAttribute("x",_e/2),nt.setAttribute("y",_e/2),nt.setAttribute("width",a-_e),nt.setAttribute("height",o-_e),nt.setAttribute("stroke-width",_e||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),j.append(nt),this.container.append(j),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Um)}addHighlightArea(){this.container.classList.add("highlightArea")}}Um=new WeakMap;var Hm;class CircleAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Dt(this,Hm,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:a,height:o}=getRectDims(s.rect),j=this.svgFactory.create(a,o,!0),_e=s.borderStyle.width,nt=Pt(this,Hm,this.svgFactory.createElement("svg:ellipse"));return nt.setAttribute("cx",a/2),nt.setAttribute("cy",o/2),nt.setAttribute("rx",a/2-_e/2),nt.setAttribute("ry",o/2-_e/2),nt.setAttribute("stroke-width",_e||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),j.append(nt),this.container.append(j),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Hm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hm=new WeakMap;var zm;class PolylineAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Dt(this,zm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,vertices:a,borderStyle:o,popupRef:j}}=this;if(!a)return this.container;const{width:_e,height:nt}=getRectDims(s),tt=this.svgFactory.create(_e,nt,!0);let st=[];for(let at=0,it=a.length;at<it;at+=2){const ct=a[at]-s[0],ot=s[3]-a[at+1];st.push(`${ct},${ot}`)}st=st.join(" ");const rt=Pt(this,zm,this.svgFactory.createElement(this.svgElementName));return rt.setAttribute("points",st),rt.setAttribute("stroke-width",o.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),tt.append(rt),this.container.append(tt),!j&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,zm)}addHighlightArea(){this.container.classList.add("highlightArea")}}zm=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wm;class InkAnnotationElement extends AnnotationElement{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});Dt(this,Wm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,inkLists:a,borderStyle:o,popupRef:j}}=this,{width:_e,height:nt}=getRectDims(s),tt=this.svgFactory.create(_e,nt,!0);for(const st of a){let rt=[];for(let it=0,ct=st.length;it<ct;it+=2){const ot=st[it]-s[0],ut=s[3]-st[it+1];rt.push(`${ot},${ut}`)}rt=rt.join(" ");const at=this.svgFactory.createElement(this.svgElementName);et(this,Wm).push(at),at.setAttribute("points",rt),at.setAttribute("stroke-width",o.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),!j&&this.hasPopupData&&this._createPopup(),tt.append(at)}return this.container.append(tt),this.container}getElementsToTriggerPopup(){return et(this,Wm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wm=new WeakMap;class HighlightAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Vm,Gm,p0;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(s){var o;super(s,{isRenderable:!0});Dt(this,Gm);Dt(this,Vm,null);const{file:a}=this.data;this.filename=a.filename,this.content=a.content,(o=this.linkService.eventBus)==null||o.dispatch("fileattachmentannotation",{source:this,...a})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:a}=this;let o;a.hasAppearance||a.fillAlpha===0?o=document.createElement("div"):(o=document.createElement("img"),o.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(a.name)?"paperclip":"pushpin"}.svg`,a.fillAlpha&&a.fillAlpha<1&&(o.style=`filter: opacity(${Math.round(a.fillAlpha*100)}%);`)),o.addEventListener("dblclick",wt(this,Gm,p0).bind(this)),Pt(this,Vm,o);const{isMac:j}=util_FeatureTest.platform;return s.addEventListener("keydown",_e=>{_e.key==="Enter"&&(j?_e.metaKey:_e.ctrlKey)&&wt(this,Gm,p0).call(this)}),!a.popupRef&&this.hasPopupData?this._createPopup():o.classList.add("popupTriggerArea"),s.append(o),s}getElementsToTriggerPopup(){return et(this,Vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vm=new WeakMap,Gm=new WeakSet,p0=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.content,this.filename)};var Xm,Wl,_f,ou,UE,g0,nE;let AnnotationLayer$1=(nE=class{constructor({div:e,accessibilityManager:s,annotationCanvasMap:a,annotationEditorUIManager:o,page:j,viewport:_e}){Dt(this,ou);Dt(this,Xm,null);Dt(this,Wl,null);Dt(this,_f,new Map);this.div=e,Pt(this,Xm,s),Pt(this,Wl,a),this.page=j,this.viewport=_e,this.zIndex=0,this._annotationEditorUIManager=o}async render(e){var _e;const{annotations:s}=e,a=this.div;setLayerDimensions(a,this.viewport);const o=new Map,j={data:null,layer:a,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:e.annotationStorage||new AnnotationStorage,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const nt of s){if(nt.noHTML)continue;const tt=nt.annotationType===AnnotationType.POPUP;if(tt){const at=o.get(nt.id);if(!at)continue;j.elements=at}else{const{width:at,height:it}=getRectDims(nt.rect);if(at<=0||it<=0)continue}j.data=nt;const st=AnnotationElementFactory.create(j);if(!st.isRenderable)continue;if(!tt&&nt.popupRef){const at=o.get(nt.popupRef);at?at.push(st):o.set(nt.popupRef,[st])}const rt=st.render();nt.hidden&&(rt.style.visibility="hidden"),wt(this,ou,UE).call(this,rt,nt.id),st.annotationEditorType>0&&(et(this,_f).set(st.data.id,st),(_e=this._annotationEditorUIManager)==null||_e.renderAnnotationElement(st))}wt(this,ou,g0).call(this)}update({viewport:e}){const s=this.div;this.viewport=e,setLayerDimensions(s,{rotation:e.rotation}),wt(this,ou,g0).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(et(this,_f).values())}getEditableAnnotation(e){return et(this,_f).get(e)}},Xm=new WeakMap,Wl=new WeakMap,_f=new WeakMap,ou=new WeakSet,UE=function(e,s){var o;const a=e.firstChild||e;a.id=`${AnnotationPrefix}${s}`,this.div.append(e),(o=et(this,Xm))==null||o.moveElementInDOM(this.div,e,a,!1)},g0=function(){if(!et(this,Wl))return;const e=this.div;for(const[s,a]of et(this,Wl)){const o=e.querySelector(`[data-annotation-id="${s}"]`);if(!o)continue;a.className="annotationContent";const{firstChild:j}=o;j?j.nodeName==="CANVAS"?j.replaceWith(a):j.classList.contains("annotationContent")?j.after(a):j.before(a):o.append(a)}et(this,Wl).clear()},nE);const EOL_PATTERN=/\r\n?|\n/g;var Ym,Km,qm,Qm,Jm,pr,Gs,Zm,Xs,ep,ps,HE,zE,WE,Ov,lo,Nv,jv,VE,m0,GE;const ls=class ls extends AnnotationEditor{constructor(s){super({...s,name:"freeTextEditor"});Dt(this,ps);Dt(this,Ym,this.editorDivBlur.bind(this));Dt(this,Km,this.editorDivFocus.bind(this));Dt(this,qm,this.editorDivInput.bind(this));Dt(this,Qm,this.editorDivKeydown.bind(this));Dt(this,Jm,this.editorDivPaste.bind(this));Dt(this,pr);Dt(this,Gs,"");Dt(this,Zm,`${this.id}-editor`);Dt(this,Xs);Dt(this,ep,null);Pt(this,pr,s.color||ls._defaultColor||AnnotationEditor._defaultLineColor),Pt(this,Xs,s.fontSize||ls._defaultFontSize)}static get _keyboardManager(){const s=ls.prototype,a=_e=>_e.isEmpty(),o=AnnotationEditorUIManager.TRANSLATE_SMALL,j=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],s.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],s._translateEmpty,{args:[-o,0],checker:a}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s._translateEmpty,{args:[-j,0],checker:a}],[["ArrowRight","mac+ArrowRight"],s._translateEmpty,{args:[o,0],checker:a}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s._translateEmpty,{args:[j,0],checker:a}],[["ArrowUp","mac+ArrowUp"],s._translateEmpty,{args:[0,-o],checker:a}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s._translateEmpty,{args:[0,-j],checker:a}],[["ArrowDown","mac+ArrowDown"],s._translateEmpty,{args:[0,o],checker:a}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s._translateEmpty,{args:[0,j],checker:a}]]))}static initialize(s,a){AnnotationEditor.initialize(s,a,{strings:["pdfjs-free-text-default-content"]});const o=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(o.getPropertyValue("--freetext-padding"))}static updateDefaultParams(s,a){switch(s){case AnnotationEditorParamsType.FREETEXT_SIZE:ls._defaultFontSize=a;break;case AnnotationEditorParamsType.FREETEXT_COLOR:ls._defaultColor=a;break}}updateParams(s,a){switch(s){case AnnotationEditorParamsType.FREETEXT_SIZE:wt(this,ps,HE).call(this,a);break;case AnnotationEditorParamsType.FREETEXT_COLOR:wt(this,ps,zE).call(this,a);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,ls._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,ls._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,et(this,Xs)],[AnnotationEditorParamsType.FREETEXT_COLOR,et(this,pr)]]}_translateEmpty(s,a){this._uiManager.translateSelectedEditors(s,a,!0)}getInitialTranslation(){const s=this.parentScale;return[-ls._internalPadding*s,-(ls._internalPadding+et(this,Xs))*s]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const s=this._uiManager._signal;this.editorDiv.addEventListener("keydown",et(this,Qm),{signal:s}),this.editorDiv.addEventListener("focus",et(this,Km),{signal:s}),this.editorDiv.addEventListener("blur",et(this,Ym),{signal:s}),this.editorDiv.addEventListener("input",et(this,qm),{signal:s}),this.editorDiv.addEventListener("paste",et(this,Jm),{signal:s})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",et(this,Zm)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",et(this,Qm)),this.editorDiv.removeEventListener("focus",et(this,Km)),this.editorDiv.removeEventListener("blur",et(this,Ym)),this.editorDiv.removeEventListener("input",et(this,qm)),this.editorDiv.removeEventListener("paste",et(this,Jm)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),s.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var s;this.width||(this.enableEditMode(),this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const s=et(this,Gs),a=Pt(this,Gs,wt(this,ps,WE).call(this).trimEnd());if(s===a)return;const o=j=>{if(Pt(this,Gs,j),!j){this.remove();return}wt(this,ps,jv).call(this),this._uiManager.rebuild(this),wt(this,ps,Ov).call(this)};this.addCommands({cmd:()=>{o(a)},undo:()=>{o(s)},mustExec:!1}),wt(this,ps,Ov).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(s){this.enterInEditMode()}keydown(s){s.target===this.div&&s.key==="Enter"&&(this.enterInEditMode(),s.preventDefault())}editorDivKeydown(s){ls._keyboardManager.exec(this,s)}editorDivFocus(s){this.isEditing=!0}editorDivBlur(s){this.isEditing=!1}editorDivInput(s){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let s,a;this.width&&(s=this.x,a=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",et(this,Zm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(j=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("default-content",j)}),this.editorDiv.contentEditable=!0;const{style:o}=this.editorDiv;if(o.fontSize=`calc(${et(this,Xs)}px * var(--scale-factor))`,o.color=et(this,pr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){const[j,_e]=this.parentDimensions;if(this.annotationElementId){const{position:nt}=et(this,ep);let[tt,st]=this.getInitialTranslation();[tt,st]=this.pageTranslationToScreen(tt,st);const[rt,at]=this.pageDimensions,[it,ct]=this.pageTranslation;let ot,ut;switch(this.rotation){case 0:ot=s+(nt[0]-it)/rt,ut=a+this.height-(nt[1]-ct)/at;break;case 90:ot=s+(nt[0]-it)/rt,ut=a-(nt[1]-ct)/at,[tt,st]=[st,-tt];break;case 180:ot=s-this.width+(nt[0]-it)/rt,ut=a-(nt[1]-ct)/at,[tt,st]=[-tt,-st];break;case 270:ot=s+(nt[0]-it-this.height*at)/rt,ut=a+(nt[1]-ct-this.width*rt)/at,[tt,st]=[-st,tt];break}this.setAt(ot*j,ut*_e,tt,st)}else this.setAt(s*j,a*_e,this.width*j,this.height*_e);wt(this,ps,jv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(s){var ot,ut,dt;const a=s.clipboardData||window.clipboardData,{types:o}=a;if(o.length===1&&o[0]==="text/plain")return;s.preventDefault();const j=wt(ot=ls,lo,m0).call(ot,a.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!j)return;const _e=window.getSelection();if(!_e.rangeCount)return;this.editorDiv.normalize(),_e.deleteFromDocument();const nt=_e.getRangeAt(0);if(!j.includes(`
`)){nt.insertNode(document.createTextNode(j)),this.editorDiv.normalize(),_e.collapseToStart();return}const{startContainer:tt,startOffset:st}=nt,rt=[],at=[];if(tt.nodeType===Node.TEXT_NODE){const lt=tt.parentElement;if(at.push(tt.nodeValue.slice(st).replaceAll(EOL_PATTERN,"")),lt!==this.editorDiv){let ht=rt;for(const xt of this.editorDiv.childNodes){if(xt===lt){ht=at;continue}ht.push(wt(ut=ls,lo,Nv).call(ut,xt))}}rt.push(tt.nodeValue.slice(0,st).replaceAll(EOL_PATTERN,""))}else if(tt===this.editorDiv){let lt=rt,ht=0;for(const xt of this.editorDiv.childNodes)ht++===st&&(lt=at),lt.push(wt(dt=ls,lo,Nv).call(dt,xt))}Pt(this,Gs,`${rt.join(`
`)}${j}${at.join(`
`)}`),wt(this,ps,jv).call(this);const it=new Range;let ct=rt.reduce((lt,ht)=>lt+ht.length,0);for(const{firstChild:lt}of this.editorDiv.childNodes)if(lt.nodeType===Node.TEXT_NODE){const ht=lt.nodeValue.length;if(ct<=ht){it.setStart(lt,ct),it.setEnd(lt,ct);break}ct-=ht}_e.removeAllRanges(),_e.addRange(it)}get contentDiv(){return this.editorDiv}static deserialize(s,a,o){var nt;let j=null;if(s instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:tt,fontColor:st},rect:rt,rotation:at,id:it},textContent:ct,textPosition:ot,parent:{page:{pageNumber:ut}}}=s;if(!ct||ct.length===0)return null;j=s={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(st),fontSize:tt,value:ct.join(`
`),position:ot,pageIndex:ut-1,rect:rt.slice(0),rotation:at,id:it,deleted:!1}}const _e=super.deserialize(s,a,o);return Pt(_e,Xs,s.fontSize),Pt(_e,pr,Util.makeHexColor(...s.color)),Pt(_e,Gs,wt(nt=ls,lo,m0).call(nt,s.value)),_e.annotationElementId=s.id||null,Pt(_e,ep,j),_e}serialize(s=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const a=ls._internalPadding*this.parentScale,o=this.getRect(a,a),j=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:et(this,pr)),_e={annotationType:AnnotationEditorType.FREETEXT,color:j,fontSize:et(this,Xs),value:wt(this,ps,VE).call(this),pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return s?_e:this.annotationElementId&&!wt(this,ps,GE).call(this,_e)?null:(_e.id=this.annotationElementId,_e)}renderAnnotationElement(s){const a=super.renderAnnotationElement(s);if(this.deleted)return a;const{style:o}=a;o.fontSize=`calc(${et(this,Xs)}px * var(--scale-factor))`,o.color=et(this,pr),a.replaceChildren();for(const _e of et(this,Gs).split(`
`)){const nt=document.createElement("div");nt.append(_e?document.createTextNode(_e):document.createElement("br")),a.append(nt)}const j=ls._internalPadding*this.parentScale;return s.updateEdited({rect:this.getRect(j,j),popupContent:et(this,Gs)}),a}resetAnnotationElement(s){super.resetAnnotationElement(s),s.resetEdited()}};Ym=new WeakMap,Km=new WeakMap,qm=new WeakMap,Qm=new WeakMap,Jm=new WeakMap,pr=new WeakMap,Gs=new WeakMap,Zm=new WeakMap,Xs=new WeakMap,ep=new WeakMap,ps=new WeakSet,HE=function(s){const a=j=>{this.editorDiv.style.fontSize=`calc(${j}px * var(--scale-factor))`,this.translate(0,-(j-et(this,Xs))*this.parentScale),Pt(this,Xs,j),wt(this,ps,Ov).call(this)},o=et(this,Xs);this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zE=function(s){const a=j=>{Pt(this,pr,this.editorDiv.style.color=j)},o=et(this,pr);this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},WE=function(){var a;const s=[];this.editorDiv.normalize();for(const o of this.editorDiv.childNodes)s.push(wt(a=ls,lo,Nv).call(a,o));return s.join(`
`)},Ov=function(){const[s,a]=this.parentDimensions;let o;if(this.isAttachedToDOM)o=this.div.getBoundingClientRect();else{const{currentLayer:j,div:_e}=this,nt=_e.style.display,tt=_e.classList.contains("hidden");_e.classList.remove("hidden"),_e.style.display="hidden",j.div.append(this.div),o=_e.getBoundingClientRect(),_e.remove(),_e.style.display=nt,_e.classList.toggle("hidden",tt)}this.rotation%180===this.parentRotation%180?(this.width=o.width/s,this.height=o.height/a):(this.width=o.height/s,this.height=o.width/a),this.fixAndSetPosition()},lo=new WeakSet,Nv=function(s){return(s.nodeType===Node.TEXT_NODE?s.nodeValue:s.innerText).replaceAll(EOL_PATTERN,"")},jv=function(){if(this.editorDiv.replaceChildren(),!!et(this,Gs))for(const s of et(this,Gs).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(a)}},VE=function(){return et(this,Gs).replaceAll(""," ")},m0=function(s){return s.replaceAll(" ","")},GE=function(s){const{value:a,fontSize:o,color:j,pageIndex:_e}=et(this,ep);return this._hasBeenMoved||s.value!==a||s.fontSize!==o||s.color.some((nt,tt)=>nt!==j[tt])||s.pageIndex!==_e},Dt(ls,lo),Hn(ls,"_freeTextDefaultContent",""),Hn(ls,"_internalPadding",0),Hn(ls,"_defaultColor",null),Hn(ls,"_defaultFontSize",10),Hn(ls,"_type","freetext"),Hn(ls,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=ls;var ev,To,gr,js,XE,$v,YE,KE,v0;class Outliner{constructor(e,s=0,a=0,o=!0){Dt(this,js);Dt(this,ev);Dt(this,To,[]);Dt(this,gr,[]);let j=1/0,_e=-1/0,nt=1/0,tt=-1/0;const rt=10**-4;for(const{x:lt,y:ht,width:xt,height:mt}of e){const ft=Math.floor((lt-s)/rt)*rt,gt=Math.ceil((lt+xt+s)/rt)*rt,pt=Math.floor((ht-s)/rt)*rt,vt=Math.ceil((ht+mt+s)/rt)*rt,At=[ft,pt,vt,!0],Rt=[gt,pt,vt,!1];et(this,To).push(At,Rt),j=Math.min(j,ft),_e=Math.max(_e,gt),nt=Math.min(nt,pt),tt=Math.max(tt,vt)}const at=_e-j+2*a,it=tt-nt+2*a,ct=j-a,ot=nt-a,ut=et(this,To).at(o?-1:-2),dt=[ut[0],ut[2]];for(const lt of et(this,To)){const[ht,xt,mt]=lt;lt[0]=(ht-ct)/at,lt[1]=(xt-ot)/it,lt[2]=(mt-ot)/it}Pt(this,ev,{x:ct,y:ot,width:at,height:it,lastPoint:dt})}getOutlines(){et(this,To).sort((s,a)=>s[0]-a[0]||s[1]-a[1]||s[2]-a[2]);const e=[];for(const s of et(this,To))s[3]?(e.push(...wt(this,js,v0).call(this,s)),wt(this,js,YE).call(this,s)):(wt(this,js,KE).call(this,s),e.push(...wt(this,js,v0).call(this,s)));return wt(this,js,XE).call(this,e)}}ev=new WeakMap,To=new WeakMap,gr=new WeakMap,js=new WeakSet,XE=function(e){const s=[],a=new Set;for(const _e of e){const[nt,tt,st]=_e;s.push([nt,tt,_e],[nt,st,_e])}s.sort((_e,nt)=>_e[1]-nt[1]||_e[0]-nt[0]);for(let _e=0,nt=s.length;_e<nt;_e+=2){const tt=s[_e][2],st=s[_e+1][2];tt.push(st),st.push(tt),a.add(tt),a.add(st)}const o=[];let j;for(;a.size>0;){const _e=a.values().next().value;let[nt,tt,st,rt,at]=_e;a.delete(_e);let it=nt,ct=tt;for(j=[nt,st],o.push(j);;){let ot;if(a.has(rt))ot=rt;else if(a.has(at))ot=at;else break;a.delete(ot),[nt,tt,st,rt,at]=ot,it!==nt&&(j.push(it,ct,nt,ct===tt?tt:st),it=nt),ct=ct===tt?st:tt}j.push(it,ct)}return new HighlightOutline(o,et(this,ev))},$v=function(e){const s=et(this,gr);let a=0,o=s.length-1;for(;a<=o;){const j=a+o>>1,_e=s[j][0];if(_e===e)return j;_e<e?a=j+1:o=j-1}return o+1},YE=function([,e,s]){const a=wt(this,js,$v).call(this,e);et(this,gr).splice(a,0,[e,s])},KE=function([,e,s]){const a=wt(this,js,$v).call(this,e);for(let o=a;o<et(this,gr).length;o++){const[j,_e]=et(this,gr)[o];if(j!==e)break;if(j===e&&_e===s){et(this,gr).splice(o,1);return}}for(let o=a-1;o>=0;o--){const[j,_e]=et(this,gr)[o];if(j!==e)break;if(j===e&&_e===s){et(this,gr).splice(o,1);return}}},v0=function(e){const[s,a,o]=e,j=[[s,a,o]],_e=wt(this,js,$v).call(this,o);for(let nt=0;nt<_e;nt++){const[tt,st]=et(this,gr)[nt];for(let rt=0,at=j.length;rt<at;rt++){const[,it,ct]=j[rt];if(!(st<=it||ct<=tt)){if(it>=tt){if(ct>st)j[rt][1]=st;else{if(at===1)return[];j.splice(rt,1),rt--,at--}continue}j[rt][2]=tt,ct>st&&j.push([s,st,ct])}}}return j};class Outline{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,s){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof FreeHighlightOutline}}var tv,tp;class HighlightOutline extends Outline{constructor(s,a){super();Dt(this,tv);Dt(this,tp);Pt(this,tp,s),Pt(this,tv,a)}toSVGPath(){const s=[];for(const a of et(this,tp)){let[o,j]=a;s.push(`M${o} ${j}`);for(let _e=2;_e<a.length;_e+=2){const nt=a[_e],tt=a[_e+1];nt===o?(s.push(`V${tt}`),j=tt):tt===j&&(s.push(`H${nt}`),o=nt)}s.push("Z")}return s.join(" ")}serialize([s,a,o,j],_e){const nt=[],tt=o-s,st=j-a;for(const rt of et(this,tp)){const at=new Array(rt.length);for(let it=0;it<rt.length;it+=2)at[it]=s+rt[it]*tt,at[it+1]=j-rt[it+1]*st;nt.push(at)}return nt}get box(){return et(this,tv)}}tv=new WeakMap,tp=new WeakMap;var Rr,ba,np,sp,kr,Zn,Vl,Gl,nv,sv,rp,ip,Co,rv,jy,$y,iv,y0;const Ur=class Ur{constructor({x:e,y:s},a,o,j,_e,nt=0){Dt(this,iv);Dt(this,Rr);Dt(this,ba,[]);Dt(this,np);Dt(this,sp);Dt(this,kr,[]);Dt(this,Zn,new Float64Array(18));Dt(this,Vl);Dt(this,Gl);Dt(this,nv);Dt(this,sv);Dt(this,rp);Dt(this,ip);Dt(this,Co,[]);Pt(this,Rr,a),Pt(this,ip,j*o),Pt(this,sp,_e),et(this,Zn).set([NaN,NaN,NaN,NaN,e,s],6),Pt(this,np,nt),Pt(this,sv,et(Ur,rv)*o),Pt(this,nv,et(Ur,$y)*o),Pt(this,rp,o),et(this,Co).push(e,s)}get free(){return!0}isEmpty(){return isNaN(et(this,Zn)[8])}add({x:e,y:s}){var At;Pt(this,Vl,e),Pt(this,Gl,s);const[a,o,j,_e]=et(this,Rr);let[nt,tt,st,rt]=et(this,Zn).subarray(8,12);const at=e-st,it=s-rt,ct=Math.hypot(at,it);if(ct<et(this,nv))return!1;const ot=ct-et(this,sv),ut=ot/ct,dt=ut*at,lt=ut*it;let ht=nt,xt=tt;nt=st,tt=rt,st+=dt,rt+=lt,(At=et(this,Co))==null||At.push(e,s);const mt=-lt/ot,ft=dt/ot,gt=mt*et(this,ip),pt=ft*et(this,ip);return et(this,Zn).set(et(this,Zn).subarray(2,8),0),et(this,Zn).set([st+gt,rt+pt],4),et(this,Zn).set(et(this,Zn).subarray(14,18),12),et(this,Zn).set([st-gt,rt-pt],16),isNaN(et(this,Zn)[6])?(et(this,kr).length===0&&(et(this,Zn).set([nt+gt,tt+pt],2),et(this,kr).push(NaN,NaN,NaN,NaN,(nt+gt-a)/j,(tt+pt-o)/_e),et(this,Zn).set([nt-gt,tt-pt],14),et(this,ba).push(NaN,NaN,NaN,NaN,(nt-gt-a)/j,(tt-pt-o)/_e)),et(this,Zn).set([ht,xt,nt,tt,st,rt],6),!this.isEmpty()):(et(this,Zn).set([ht,xt,nt,tt,st,rt],6),Math.abs(Math.atan2(xt-tt,ht-nt)-Math.atan2(lt,dt))<Math.PI/2?([nt,tt,st,rt]=et(this,Zn).subarray(2,6),et(this,kr).push(NaN,NaN,NaN,NaN,((nt+st)/2-a)/j,((tt+rt)/2-o)/_e),[nt,tt,ht,xt]=et(this,Zn).subarray(14,18),et(this,ba).push(NaN,NaN,NaN,NaN,((ht+nt)/2-a)/j,((xt+tt)/2-o)/_e),!0):([ht,xt,nt,tt,st,rt]=et(this,Zn).subarray(0,6),et(this,kr).push(((ht+5*nt)/6-a)/j,((xt+5*tt)/6-o)/_e,((5*nt+st)/6-a)/j,((5*tt+rt)/6-o)/_e,((nt+st)/2-a)/j,((tt+rt)/2-o)/_e),[st,rt,nt,tt,ht,xt]=et(this,Zn).subarray(12,18),et(this,ba).push(((ht+5*nt)/6-a)/j,((xt+5*tt)/6-o)/_e,((5*nt+st)/6-a)/j,((5*tt+rt)/6-o)/_e,((nt+st)/2-a)/j,((tt+rt)/2-o)/_e),!0))}toSVGPath(){if(this.isEmpty())return"";const e=et(this,kr),s=et(this,ba),a=et(this,Zn).subarray(4,6),o=et(this,Zn).subarray(16,18),[j,_e,nt,tt]=et(this,Rr),[st,rt,at,it]=wt(this,iv,y0).call(this);if(isNaN(et(this,Zn)[6])&&!this.isEmpty())return`M${(et(this,Zn)[2]-j)/nt} ${(et(this,Zn)[3]-_e)/tt} L${(et(this,Zn)[4]-j)/nt} ${(et(this,Zn)[5]-_e)/tt} L${st} ${rt} L${at} ${it} L${(et(this,Zn)[16]-j)/nt} ${(et(this,Zn)[17]-_e)/tt} L${(et(this,Zn)[14]-j)/nt} ${(et(this,Zn)[15]-_e)/tt} Z`;const ct=[];ct.push(`M${e[4]} ${e[5]}`);for(let ot=6;ot<e.length;ot+=6)isNaN(e[ot])?ct.push(`L${e[ot+4]} ${e[ot+5]}`):ct.push(`C${e[ot]} ${e[ot+1]} ${e[ot+2]} ${e[ot+3]} ${e[ot+4]} ${e[ot+5]}`);ct.push(`L${(a[0]-j)/nt} ${(a[1]-_e)/tt} L${st} ${rt} L${at} ${it} L${(o[0]-j)/nt} ${(o[1]-_e)/tt}`);for(let ot=s.length-6;ot>=6;ot-=6)isNaN(s[ot])?ct.push(`L${s[ot+4]} ${s[ot+5]}`):ct.push(`C${s[ot]} ${s[ot+1]} ${s[ot+2]} ${s[ot+3]} ${s[ot+4]} ${s[ot+5]}`);return ct.push(`L${s[4]} ${s[5]} Z`),ct.join(" ")}getOutlines(){var lt;const e=et(this,kr),s=et(this,ba),a=et(this,Zn),o=a.subarray(4,6),j=a.subarray(16,18),[_e,nt,tt,st]=et(this,Rr),rt=new Float64Array((((lt=et(this,Co))==null?void 0:lt.length)??0)+2);for(let ht=0,xt=rt.length-2;ht<xt;ht+=2)rt[ht]=(et(this,Co)[ht]-_e)/tt,rt[ht+1]=(et(this,Co)[ht+1]-nt)/st;rt[rt.length-2]=(et(this,Vl)-_e)/tt,rt[rt.length-1]=(et(this,Gl)-nt)/st;const[at,it,ct,ot]=wt(this,iv,y0).call(this);if(isNaN(a[6])&&!this.isEmpty()){const ht=new Float64Array(36);return ht.set([NaN,NaN,NaN,NaN,(a[2]-_e)/tt,(a[3]-nt)/st,NaN,NaN,NaN,NaN,(a[4]-_e)/tt,(a[5]-nt)/st,NaN,NaN,NaN,NaN,at,it,NaN,NaN,NaN,NaN,ct,ot,NaN,NaN,NaN,NaN,(a[16]-_e)/tt,(a[17]-nt)/st,NaN,NaN,NaN,NaN,(a[14]-_e)/tt,(a[15]-nt)/st],0),new FreeHighlightOutline(ht,rt,et(this,Rr),et(this,rp),et(this,np),et(this,sp))}const ut=new Float64Array(et(this,kr).length+24+et(this,ba).length);let dt=e.length;for(let ht=0;ht<dt;ht+=2){if(isNaN(e[ht])){ut[ht]=ut[ht+1]=NaN;continue}ut[ht]=e[ht],ut[ht+1]=e[ht+1]}ut.set([NaN,NaN,NaN,NaN,(o[0]-_e)/tt,(o[1]-nt)/st,NaN,NaN,NaN,NaN,at,it,NaN,NaN,NaN,NaN,ct,ot,NaN,NaN,NaN,NaN,(j[0]-_e)/tt,(j[1]-nt)/st],dt),dt+=24;for(let ht=s.length-6;ht>=6;ht-=6)for(let xt=0;xt<6;xt+=2){if(isNaN(s[ht+xt])){ut[dt]=ut[dt+1]=NaN,dt+=2;continue}ut[dt]=s[ht+xt],ut[dt+1]=s[ht+xt+1],dt+=2}return ut.set([NaN,NaN,NaN,NaN,s[4],s[5]],dt),new FreeHighlightOutline(ut,rt,et(this,Rr),et(this,rp),et(this,np),et(this,sp))}};Rr=new WeakMap,ba=new WeakMap,np=new WeakMap,sp=new WeakMap,kr=new WeakMap,Zn=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,nv=new WeakMap,sv=new WeakMap,rp=new WeakMap,ip=new WeakMap,Co=new WeakMap,rv=new WeakMap,jy=new WeakMap,$y=new WeakMap,iv=new WeakSet,y0=function(){const e=et(this,Zn).subarray(4,6),s=et(this,Zn).subarray(16,18),[a,o,j,_e]=et(this,Rr);return[(et(this,Vl)+(e[0]-s[0])/2-a)/j,(et(this,Gl)+(e[1]-s[1])/2-o)/_e,(et(this,Vl)+(s[0]-e[0])/2-a)/j,(et(this,Gl)+(s[1]-e[1])/2-o)/_e]},Dt(Ur,rv,8),Dt(Ur,jy,2),Dt(Ur,$y,et(Ur,rv)+et(Ur,jy));let FreeOutliner=Ur;var ap,Xl,$a,av,Ys,ov,fs,Us,_p,wp,qE;class FreeHighlightOutline extends Outline{constructor(s,a,o,j,_e,nt){super();Dt(this,Us);Dt(this,ap);Dt(this,Xl,null);Dt(this,$a);Dt(this,av);Dt(this,Ys);Dt(this,ov);Dt(this,fs);Pt(this,fs,s),Pt(this,Ys,a),Pt(this,ap,o),Pt(this,ov,j),Pt(this,$a,_e),Pt(this,av,nt),wt(this,Us,qE).call(this,nt);const{x:tt,y:st,width:rt,height:at}=et(this,Xl);for(let it=0,ct=s.length;it<ct;it+=2)s[it]=(s[it]-tt)/rt,s[it+1]=(s[it+1]-st)/at;for(let it=0,ct=a.length;it<ct;it+=2)a[it]=(a[it]-tt)/rt,a[it+1]=(a[it+1]-st)/at}toSVGPath(){const s=[`M${et(this,fs)[4]} ${et(this,fs)[5]}`];for(let a=6,o=et(this,fs).length;a<o;a+=6){if(isNaN(et(this,fs)[a])){s.push(`L${et(this,fs)[a+4]} ${et(this,fs)[a+5]}`);continue}s.push(`C${et(this,fs)[a]} ${et(this,fs)[a+1]} ${et(this,fs)[a+2]} ${et(this,fs)[a+3]} ${et(this,fs)[a+4]} ${et(this,fs)[a+5]}`)}return s.push("Z"),s.join(" ")}serialize([s,a,o,j],_e){const nt=o-s,tt=j-a;let st,rt;switch(_e){case 0:st=wt(this,Us,_p).call(this,et(this,fs),s,j,nt,-tt),rt=wt(this,Us,_p).call(this,et(this,Ys),s,j,nt,-tt);break;case 90:st=wt(this,Us,wp).call(this,et(this,fs),s,a,nt,tt),rt=wt(this,Us,wp).call(this,et(this,Ys),s,a,nt,tt);break;case 180:st=wt(this,Us,_p).call(this,et(this,fs),o,a,-nt,tt),rt=wt(this,Us,_p).call(this,et(this,Ys),o,a,-nt,tt);break;case 270:st=wt(this,Us,wp).call(this,et(this,fs),o,j,-nt,-tt),rt=wt(this,Us,wp).call(this,et(this,Ys),o,j,-nt,-tt);break}return{outline:Array.from(st),points:[Array.from(rt)]}}get box(){return et(this,Xl)}getNewOutline(s,a){const{x:o,y:j,width:_e,height:nt}=et(this,Xl),[tt,st,rt,at]=et(this,ap),it=_e*rt,ct=nt*at,ot=o*rt+tt,ut=j*at+st,dt=new FreeOutliner({x:et(this,Ys)[0]*it+ot,y:et(this,Ys)[1]*ct+ut},et(this,ap),et(this,ov),s,et(this,av),a??et(this,$a));for(let lt=2;lt<et(this,Ys).length;lt+=2)dt.add({x:et(this,Ys)[lt]*it+ot,y:et(this,Ys)[lt+1]*ct+ut});return dt.getOutlines()}}ap=new WeakMap,Xl=new WeakMap,$a=new WeakMap,av=new WeakMap,Ys=new WeakMap,ov=new WeakMap,fs=new WeakMap,Us=new WeakSet,_p=function(s,a,o,j,_e){const nt=new Float64Array(s.length);for(let tt=0,st=s.length;tt<st;tt+=2)nt[tt]=a+s[tt]*j,nt[tt+1]=o+s[tt+1]*_e;return nt},wp=function(s,a,o,j,_e){const nt=new Float64Array(s.length);for(let tt=0,st=s.length;tt<st;tt+=2)nt[tt]=a+s[tt+1]*j,nt[tt+1]=o+s[tt]*_e;return nt},qE=function(s){const a=et(this,fs);let o=a[4],j=a[5],_e=o,nt=j,tt=o,st=j,rt=o,at=j;const it=s?Math.max:Math.min;for(let lt=6,ht=a.length;lt<ht;lt+=6){if(isNaN(a[lt]))_e=Math.min(_e,a[lt+4]),nt=Math.min(nt,a[lt+5]),tt=Math.max(tt,a[lt+4]),st=Math.max(st,a[lt+5]),at<a[lt+5]?(rt=a[lt+4],at=a[lt+5]):at===a[lt+5]&&(rt=it(rt,a[lt+4]));else{const xt=Util.bezierBoundingBox(o,j,...a.slice(lt,lt+6));_e=Math.min(_e,xt[0]),nt=Math.min(nt,xt[1]),tt=Math.max(tt,xt[2]),st=Math.max(st,xt[3]),at<xt[3]?(rt=xt[2],at=xt[3]):at===xt[3]&&(rt=it(rt,xt[2]))}o=a[lt+4],j=a[lt+5]}const ct=_e-et(this,$a),ot=nt-et(this,$a),ut=tt-_e+2*et(this,$a),dt=st-nt+2*et(this,$a);Pt(this,Xl,{x:ct,y:ot,width:ut,height:dt,lastPoint:[rt,at]})};var lv,cv,mr,Yl,op,vs,uv,lp,hv,dv,vr,cp,os,x0,b0,QE,$o,JE,fo;const Hr=class Hr{constructor({editor:e=null,uiManager:s=null}){Dt(this,os);Dt(this,lv,wt(this,os,QE).bind(this));Dt(this,cv,wt(this,os,JE).bind(this));Dt(this,mr,null);Dt(this,Yl,null);Dt(this,op);Dt(this,vs,null);Dt(this,uv,!1);Dt(this,lp,!1);Dt(this,hv,null);Dt(this,dv);Dt(this,vr,null);Dt(this,cp);var a;e?(Pt(this,lp,!1),Pt(this,cp,AnnotationEditorParamsType.HIGHLIGHT_COLOR),Pt(this,hv,e)):(Pt(this,lp,!0),Pt(this,cp,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),Pt(this,vr,(e==null?void 0:e._uiManager)||s),Pt(this,dv,et(this,vr)._eventBus),Pt(this,op,(e==null?void 0:e.color)||((a=et(this,vr))==null?void 0:a.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Hr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Hr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Hr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Hr.prototype._moveToPrevious],[["Home","mac+Home"],Hr.prototype._moveToBeginning],[["End","mac+End"],Hr.prototype._moveToEnd]]))}renderButton(){const e=Pt(this,mr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const s=et(this,vr)._signal;e.addEventListener("click",wt(this,os,$o).bind(this),{signal:s}),e.addEventListener("keydown",et(this,lv),{signal:s});const a=Pt(this,Yl,document.createElement("span"));return a.className="swatch",a.setAttribute("aria-hidden",!0),a.style.backgroundColor=et(this,op),e.append(a),e}renderMainDropdown(){const e=Pt(this,vs,wt(this,os,x0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===et(this,mr)){wt(this,os,$o).call(this,e);return}const s=e.target.getAttribute("data-color");s&&wt(this,os,b0).call(this,s,e)}_moveToNext(e){var s,a;if(!et(this,os,fo)){wt(this,os,$o).call(this,e);return}if(e.target===et(this,mr)){(s=et(this,vs).firstChild)==null||s.focus();return}(a=e.target.nextSibling)==null||a.focus()}_moveToPrevious(e){var s,a;if(e.target===((s=et(this,vs))==null?void 0:s.firstChild)||e.target===et(this,mr)){et(this,os,fo)&&this._hideDropdownFromKeyboard();return}et(this,os,fo)||wt(this,os,$o).call(this,e),(a=e.target.previousSibling)==null||a.focus()}_moveToBeginning(e){var s;if(!et(this,os,fo)){wt(this,os,$o).call(this,e);return}(s=et(this,vs).firstChild)==null||s.focus()}_moveToEnd(e){var s;if(!et(this,os,fo)){wt(this,os,$o).call(this,e);return}(s=et(this,vs).lastChild)==null||s.focus()}hideDropdown(){var e;(e=et(this,vs))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",et(this,cv))}_hideDropdownFromKeyboard(){var e;if(!et(this,lp)){if(!et(this,os,fo)){(e=et(this,hv))==null||e.unselect();return}this.hideDropdown(),et(this,mr).focus({preventScroll:!0,focusVisible:et(this,uv)})}}updateColor(e){if(et(this,Yl)&&(et(this,Yl).style.backgroundColor=e),!et(this,vs))return;const s=et(this,vr).highlightColors.values();for(const a of et(this,vs).children)a.setAttribute("aria-selected",s.next().value===e)}destroy(){var e,s;(e=et(this,mr))==null||e.remove(),Pt(this,mr,null),Pt(this,Yl,null),(s=et(this,vs))==null||s.remove(),Pt(this,vs,null)}};lv=new WeakMap,cv=new WeakMap,mr=new WeakMap,Yl=new WeakMap,op=new WeakMap,vs=new WeakMap,uv=new WeakMap,lp=new WeakMap,hv=new WeakMap,dv=new WeakMap,vr=new WeakMap,cp=new WeakMap,os=new WeakSet,x0=function(){const e=document.createElement("div"),s=et(this,vr)._signal;e.addEventListener("contextmenu",noContextMenu,{signal:s}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[a,o]of et(this,vr).highlightColors){const j=document.createElement("button");j.tabIndex="0",j.role="option",j.setAttribute("data-color",o),j.title=a,j.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${a}`);const _e=document.createElement("span");j.append(_e),_e.className="swatch",_e.style.backgroundColor=o,j.setAttribute("aria-selected",o===et(this,op)),j.addEventListener("click",wt(this,os,b0).bind(this,o),{signal:s}),e.append(j)}return e.addEventListener("keydown",et(this,lv),{signal:s}),e},b0=function(e,s){s.stopPropagation(),et(this,dv).dispatch("switchannotationeditorparams",{source:this,type:et(this,cp),value:e})},QE=function(e){Hr._keyboardManager.exec(this,e)},$o=function(e){if(et(this,os,fo)){this.hideDropdown();return}if(Pt(this,uv,e.detail===0),window.addEventListener("pointerdown",et(this,cv),{signal:et(this,vr)._signal}),et(this,vs)){et(this,vs).classList.remove("hidden");return}const s=Pt(this,vs,wt(this,os,x0).call(this));et(this,mr).append(s)},JE=function(e){var s;(s=et(this,vs))!=null&&s.contains(e.target)||this.hideDropdown()},fo=function(){return et(this,vs)&&!et(this,vs).classList.contains("hidden")};let ColorPicker=Hr;var up,fv,Ro,Kl,hp,nr,pv,gv,Ql,yr,Ls,Ks,By,dp,Jl,ys,fp,Pr,mv,Jn,E0,A0,ZE,eA,tA,S0,Tp,ir,fu,nA,Bv,Cp,sA,rA,iA,aA;const ns=class ns extends AnnotationEditor{constructor(s){super({...s,name:"highlightEditor"});Dt(this,Jn);Dt(this,up,null);Dt(this,fv,0);Dt(this,Ro);Dt(this,Kl,null);Dt(this,hp,null);Dt(this,nr,null);Dt(this,pv,null);Dt(this,gv,0);Dt(this,Ql,null);Dt(this,yr,null);Dt(this,Ls,null);Dt(this,Ks,!1);Dt(this,By,wt(this,Jn,nA).bind(this));Dt(this,dp,null);Dt(this,Jl);Dt(this,ys,null);Dt(this,fp,"");Dt(this,Pr);Dt(this,mv,"");this.color=s.color||ns._defaultColor,Pt(this,Pr,s.thickness||ns._defaultThickness),Pt(this,Jl,s.opacity||ns._defaultOpacity),Pt(this,Ro,s.boxes||null),Pt(this,mv,s.methodOfCreation||""),Pt(this,fp,s.text||""),this._isDraggable=!1,s.highlightId>-1?(Pt(this,Ks,!0),wt(this,Jn,A0).call(this,s),wt(this,Jn,Tp).call(this)):(Pt(this,up,s.anchorNode),Pt(this,fv,s.anchorOffset),Pt(this,pv,s.focusNode),Pt(this,gv,s.focusOffset),wt(this,Jn,E0).call(this),wt(this,Jn,Tp).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const s=ns.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],s._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],s._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],s._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],s._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:et(this,Ks)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:et(this,Pr),methodOfCreation:et(this,mv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(s){return{numberOfColors:s.get("color").size}}static initialize(s,a){var o;AnnotationEditor.initialize(s,a),ns._defaultColor||(ns._defaultColor=((o=a.highlightColors)==null?void 0:o.values().next().value)||"#fff066")}static updateDefaultParams(s,a){switch(s){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:ns._defaultColor=a;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:ns._defaultThickness=a;break}}translateInPage(s,a){}get toolbarPosition(){return et(this,dp)}updateParams(s,a){switch(s){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:wt(this,Jn,ZE).call(this,a);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:wt(this,Jn,eA).call(this,a);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,ns._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,ns._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||ns._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,et(this,Pr)||ns._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,et(this,Ks)]]}async addEditToolbar(){const s=await super.addEditToolbar();return s?(this._uiManager.highlightColors&&(Pt(this,hp,new ColorPicker({editor:this})),s.addColorPicker(et(this,hp))),s):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(wt(this,Jn,Cp).call(this))}getBaseTranslation(){return[0,0]}getRect(s,a){return super.getRect(s,a,wt(this,Jn,Cp).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){wt(this,Jn,S0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(wt(this,Jn,Tp).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(s){var o;let a=!1;this.parent&&!s?wt(this,Jn,S0).call(this):s&&(wt(this,Jn,Tp).call(this,s),a=!this.parent&&((o=this.div)==null?void 0:o.classList.contains("selectedEditor"))),super.setParent(s),this.show(this._isVisible),a&&this.select()}rotate(s){var j,_e,nt;const{drawLayer:a}=this.parent;let o;et(this,Ks)?(s=(s-this.rotation+360)%360,o=wt(j=ns,ir,fu).call(j,et(this,yr).box,s)):o=wt(_e=ns,ir,fu).call(_e,this,s),a.rotate(et(this,Ls),s),a.rotate(et(this,ys),s),a.updateBox(et(this,Ls),o),a.updateBox(et(this,ys),wt(nt=ns,ir,fu).call(nt,et(this,nr).box,s))}render(){if(this.div)return this.div;const s=super.render();et(this,fp)&&(s.setAttribute("aria-label",et(this,fp)),s.setAttribute("role","mark")),et(this,Ks)?s.classList.add("free"):this.div.addEventListener("keydown",et(this,By),{signal:this._uiManager._signal});const a=Pt(this,Ql,document.createElement("div"));s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",a.style.clipPath=et(this,Kl);const[o,j]=this.parentDimensions;return this.setDims(this.width*o,this.height*j),bindEvents(this,et(this,Ql),["pointerover","pointerleave"]),this.enableEditing(),s}pointerover(){this.parent.drawLayer.addClass(et(this,ys),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(et(this,ys),"hovered")}_moveCaret(s){switch(this.parent.unselect(this),s){case 0:case 2:wt(this,Jn,Bv).call(this,!0);break;case 1:case 3:wt(this,Jn,Bv).call(this,!1);break}}select(){var s,a;super.select(),et(this,ys)&&((s=this.parent)==null||s.drawLayer.removeClass(et(this,ys),"hovered"),(a=this.parent)==null||a.drawLayer.addClass(et(this,ys),"selected"))}unselect(){var s;super.unselect(),et(this,ys)&&((s=this.parent)==null||s.drawLayer.removeClass(et(this,ys),"selected"),et(this,Ks)||wt(this,Jn,Bv).call(this,!1))}get _mustFixPosition(){return!et(this,Ks)}show(s=this._isVisible){super.show(s),this.parent&&(this.parent.drawLayer.show(et(this,Ls),s),this.parent.drawLayer.show(et(this,ys),s))}static startHighlighting(s,a,{target:o,x:j,y:_e}){const{x:nt,y:tt,width:st,height:rt}=o.getBoundingClientRect(),at=dt=>{wt(this,ir,iA).call(this,s,dt)},it=s._signal,ct={capture:!0,passive:!1,signal:it},ot=dt=>{dt.preventDefault(),dt.stopPropagation()},ut=dt=>{o.removeEventListener("pointermove",at),window.removeEventListener("blur",ut),window.removeEventListener("pointerup",ut),window.removeEventListener("pointerdown",ot,ct),window.removeEventListener("contextmenu",noContextMenu),wt(this,ir,aA).call(this,s,dt)};window.addEventListener("blur",ut,{signal:it}),window.addEventListener("pointerup",ut,{signal:it}),window.addEventListener("pointerdown",ot,ct),window.addEventListener("contextmenu",noContextMenu,{signal:it}),o.addEventListener("pointermove",at,{signal:it}),this._freeHighlight=new FreeOutliner({x:j,y:_e},[nt,tt,st,rt],s.scale,this._defaultThickness/2,a,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=s.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(s,a,o){var ut;const j=super.deserialize(s,a,o),{rect:[_e,nt,tt,st],color:rt,quadPoints:at}=s;j.color=Util.makeHexColor(...rt),Pt(j,Jl,s.opacity);const[it,ct]=j.pageDimensions;j.width=(tt-_e)/it,j.height=(st-nt)/ct;const ot=Pt(j,Ro,[]);for(let dt=0;dt<at.length;dt+=8)ot.push({x:(at[4]-tt)/it,y:(st-(1-at[dt+5]))/ct,width:(at[dt+2]-at[dt])/it,height:(at[dt+5]-at[dt+1])/ct});return wt(ut=j,Jn,E0).call(ut),j}serialize(s=!1){if(this.isEmpty()||s)return null;const a=this.getRect(0,0),o=AnnotationEditor._colorManager.convert(this.color);return{annotationType:AnnotationEditorType.HIGHLIGHT,color:o,opacity:et(this,Jl),thickness:et(this,Pr),quadPoints:wt(this,Jn,sA).call(this),outlines:wt(this,Jn,rA).call(this,a),pageIndex:this.pageIndex,rect:a,rotation:wt(this,Jn,Cp).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};up=new WeakMap,fv=new WeakMap,Ro=new WeakMap,Kl=new WeakMap,hp=new WeakMap,nr=new WeakMap,pv=new WeakMap,gv=new WeakMap,Ql=new WeakMap,yr=new WeakMap,Ls=new WeakMap,Ks=new WeakMap,By=new WeakMap,dp=new WeakMap,Jl=new WeakMap,ys=new WeakMap,fp=new WeakMap,Pr=new WeakMap,mv=new WeakMap,Jn=new WeakSet,E0=function(){const s=new Outliner(et(this,Ro),.001);Pt(this,yr,s.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=et(this,yr).box;const a=new Outliner(et(this,Ro),.0025,.001,this._uiManager.direction==="ltr");Pt(this,nr,a.getOutlines());const{lastPoint:o}=et(this,nr).box;Pt(this,dp,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},A0=function({highlightOutlines:s,highlightId:a,clipPathId:o}){var at,it;if(Pt(this,yr,s),Pt(this,nr,s.getNewOutline(et(this,Pr)/2+1.5,.0025)),a>=0)Pt(this,Ls,a),Pt(this,Kl,o),this.parent.drawLayer.finalizeLine(a,s),Pt(this,ys,this.parent.drawLayer.highlightOutline(et(this,nr)));else if(this.parent){const ct=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(et(this,Ls),s),this.parent.drawLayer.updateBox(et(this,Ls),wt(at=ns,ir,fu).call(at,et(this,yr).box,(ct-this.rotation+360)%360)),this.parent.drawLayer.updateLine(et(this,ys),et(this,nr)),this.parent.drawLayer.updateBox(et(this,ys),wt(it=ns,ir,fu).call(it,et(this,nr).box,ct))}const{x:_e,y:nt,width:tt,height:st}=s.box;switch(this.rotation){case 0:this.x=_e,this.y=nt,this.width=tt,this.height=st;break;case 90:{const[ct,ot]=this.parentDimensions;this.x=nt,this.y=1-_e,this.width=tt*ot/ct,this.height=st*ct/ot;break}case 180:this.x=1-_e,this.y=1-nt,this.width=tt,this.height=st;break;case 270:{const[ct,ot]=this.parentDimensions;this.x=1-nt,this.y=_e,this.width=tt*ot/ct,this.height=st*ct/ot;break}}const{lastPoint:rt}=et(this,nr).box;Pt(this,dp,[(rt[0]-_e)/tt,(rt[1]-nt)/st])},ZE=function(s){const a=j=>{var _e,nt;this.color=j,(_e=this.parent)==null||_e.drawLayer.changeColor(et(this,Ls),j),(nt=et(this,hp))==null||nt.updateColor(j)},o=this.color;this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(s)},!0)},eA=function(s){const a=et(this,Pr),o=j=>{Pt(this,Pr,j),wt(this,Jn,tA).call(this,j)};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:s},!0)},tA=function(s){if(!et(this,Ks))return;wt(this,Jn,A0).call(this,{highlightOutlines:et(this,yr).getNewOutline(s/2)}),this.fixAndSetPosition();const[a,o]=this.parentDimensions;this.setDims(this.width*a,this.height*o)},S0=function(){et(this,Ls)===null||!this.parent||(this.parent.drawLayer.remove(et(this,Ls)),Pt(this,Ls,null),this.parent.drawLayer.remove(et(this,ys)),Pt(this,ys,null))},Tp=function(s=this.parent){et(this,Ls)===null&&({id:ds(this,Ls)._,clipPathId:ds(this,Kl)._}=s.drawLayer.highlight(et(this,yr),this.color,et(this,Jl)),Pt(this,ys,s.drawLayer.highlightOutline(et(this,nr))),et(this,Ql)&&(et(this,Ql).style.clipPath=et(this,Kl)))},ir=new WeakSet,fu=function({x:s,y:a,width:o,height:j},_e){switch(_e){case 90:return{x:1-a-j,y:s,width:j,height:o};case 180:return{x:1-s-o,y:1-a-j,width:o,height:j};case 270:return{x:a,y:1-s-o,width:j,height:o}}return{x:s,y:a,width:o,height:j}},nA=function(s){ns._keyboardManager.exec(this,s)},Bv=function(s){if(!et(this,up))return;const a=window.getSelection();s?a.setPosition(et(this,up),et(this,fv)):a.setPosition(et(this,pv),et(this,gv))},Cp=function(){return et(this,Ks)?this.rotation:0},sA=function(){if(et(this,Ks))return null;const[s,a]=this.pageDimensions,o=et(this,Ro),j=new Float32Array(o.length*8);let _e=0;for(const{x:nt,y:tt,width:st,height:rt}of o){const at=nt*s,it=(1-tt-rt)*a;j[_e]=j[_e+4]=at,j[_e+1]=j[_e+3]=it,j[_e+2]=j[_e+6]=at+st*s,j[_e+5]=j[_e+7]=it+rt*a,_e+=8}return j},rA=function(s){return et(this,yr).serialize(s,wt(this,Jn,Cp).call(this))},iA=function(s,a){this._freeHighlight.add(a)&&s.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},aA=function(s,a){this._freeHighlight.isEmpty()?s.drawLayer.removeFreeHighlight(this._freeHighlightId):s.createAndAddNewEditor(a,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Dt(ns,ir),Hn(ns,"_defaultColor",null),Hn(ns,"_defaultOpacity",1),Hn(ns,"_defaultThickness",12),Hn(ns,"_l10nPromise"),Hn(ns,"_type","highlight"),Hn(ns,"_editorType",AnnotationEditorType.HIGHLIGHT),Hn(ns,"_freeHighlightId",-1),Hn(ns,"_freeHighlight",null),Hn(ns,"_freeHighlightClipId","");let HighlightEditor=ns;var Zl,_c,vv,yv,xv,eu,Mr,eo,sr,tu,nu,to,su,ru,ko,Gn,oA,lA,cA,uA,_0,hA,w0,dA,fA,pA,gA,mA,Bo,T0,Uv,Hv,pu,C0,zv,uo,vA,R0,yA,xA,k0,Wv,Rp;const cs=class cs extends AnnotationEditor{constructor(s){super({...s,name:"inkEditor"});Dt(this,Gn);Dt(this,Zl,0);Dt(this,_c,0);Dt(this,vv,this.canvasPointermove.bind(this));Dt(this,yv,this.canvasPointerleave.bind(this));Dt(this,xv,this.canvasPointerup.bind(this));Dt(this,eu,this.canvasPointerdown.bind(this));Dt(this,Mr,null);Dt(this,eo,new Path2D);Dt(this,sr,!1);Dt(this,tu,!1);Dt(this,nu,!1);Dt(this,to,null);Dt(this,su,0);Dt(this,ru,0);Dt(this,ko,null);this.color=s.color||null,this.thickness=s.thickness||null,this.opacity=s.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(s,a){AnnotationEditor.initialize(s,a)}static updateDefaultParams(s,a){switch(s){case AnnotationEditorParamsType.INK_THICKNESS:cs._defaultThickness=a;break;case AnnotationEditorParamsType.INK_COLOR:cs._defaultColor=a;break;case AnnotationEditorParamsType.INK_OPACITY:cs._defaultOpacity=a/100;break}}updateParams(s,a){switch(s){case AnnotationEditorParamsType.INK_THICKNESS:wt(this,Gn,oA).call(this,a);break;case AnnotationEditorParamsType.INK_COLOR:wt(this,Gn,lA).call(this,a);break;case AnnotationEditorParamsType.INK_OPACITY:wt(this,Gn,cA).call(this,a);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,cs._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,cs._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(cs._defaultOpacity*100)]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||cs._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||cs._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??cs._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(wt(this,Gn,Uv).call(this),wt(this,Gn,Hv).call(this)),this.isAttachedToDOM||(this.parent.add(this),wt(this,Gn,pu).call(this)),wt(this,Gn,Rp).call(this)))}remove(){var s;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,et(this,Mr)&&(clearTimeout(et(this,Mr)),Pt(this,Mr,null)),(s=et(this,to))==null||s.disconnect(),Pt(this,to,null),super.remove())}setParent(s){!this.parent&&s?this._uiManager.removeShouldRescale(this):this.parent&&s===null&&this._uiManager.addShouldRescale(this),super.setParent(s)}onScaleChanging(){const[s,a]=this.parentDimensions,o=this.width*s,j=this.height*a;this.setDimensions(o,j)}enableEditMode(){et(this,sr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",et(this,eu),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",et(this,eu)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){et(this,sr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Pt(this,sr,!0),this.div.classList.add("disabled"),wt(this,Gn,Rp).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),this.enableEditMode())}canvasPointerdown(s){s.button!==0||!this.isInEditMode()||et(this,sr)||(this.setInForeground(),s.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),wt(this,Gn,hA).call(this,s.offsetX,s.offsetY))}canvasPointermove(s){s.preventDefault(),wt(this,Gn,w0).call(this,s.offsetX,s.offsetY)}canvasPointerup(s){s.preventDefault(),wt(this,Gn,T0).call(this,s)}canvasPointerleave(s){wt(this,Gn,T0).call(this,s)}get isResizable(){return!this.isEmpty()&&et(this,sr)}render(){if(this.div)return this.div;let s,a;this.width&&(s=this.x,a=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[o,j,_e,nt]=wt(this,Gn,uA).call(this);if(this.setAt(o,j,0,0),this.setDims(_e,nt),wt(this,Gn,Uv).call(this),this.width){const[tt,st]=this.parentDimensions;this.setAspectRatio(this.width*tt,this.height*st),this.setAt(s*tt,a*st,this.width*tt,this.height*st),Pt(this,nu,!0),wt(this,Gn,pu).call(this),this.setDims(this.width*tt,this.height*st),wt(this,Gn,Bo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return wt(this,Gn,Hv).call(this),this.div}setDimensions(s,a){const o=Math.round(s),j=Math.round(a);if(et(this,su)===o&&et(this,ru)===j)return;Pt(this,su,o),Pt(this,ru,j),this.canvas.style.visibility="hidden";const[_e,nt]=this.parentDimensions;this.width=s/_e,this.height=a/nt,this.fixAndSetPosition(),et(this,sr)&&wt(this,Gn,C0).call(this,s,a),wt(this,Gn,pu).call(this),wt(this,Gn,Bo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(s,a,o){var dt,lt,ht;if(s instanceof InkAnnotationElement)return null;const j=super.deserialize(s,a,o);j.thickness=s.thickness,j.color=Util.makeHexColor(...s.color),j.opacity=s.opacity;const[_e,nt]=j.pageDimensions,tt=j.width*_e,st=j.height*nt,rt=j.parentScale,at=s.thickness/2;Pt(j,sr,!0),Pt(j,su,Math.round(tt)),Pt(j,ru,Math.round(st));const{paths:it,rect:ct,rotation:ot}=s;for(let{bezier:xt}of it){xt=wt(dt=cs,uo,yA).call(dt,xt,ct,ot);const mt=[];j.paths.push(mt);let ft=rt*(xt[0]-at),gt=rt*(xt[1]-at);for(let vt=2,At=xt.length;vt<At;vt+=6){const Rt=rt*(xt[vt]-at),bt=rt*(xt[vt+1]-at),Tt=rt*(xt[vt+2]-at),Lt=rt*(xt[vt+3]-at),Yt=rt*(xt[vt+4]-at),zt=rt*(xt[vt+5]-at);mt.push([[ft,gt],[Rt,bt],[Tt,Lt],[Yt,zt]]),ft=Yt,gt=zt}const pt=wt(this,uo,vA).call(this,mt);j.bezierPath2D.push(pt)}const ut=wt(lt=j,Gn,k0).call(lt);return Pt(j,_c,Math.max(AnnotationEditor.MIN_SIZE,ut[2]-ut[0])),Pt(j,Zl,Math.max(AnnotationEditor.MIN_SIZE,ut[3]-ut[1])),wt(ht=j,Gn,C0).call(ht,tt,st),j}serialize(){if(this.isEmpty())return null;const s=this.getRect(0,0),a=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:a,thickness:this.thickness,opacity:this.opacity,paths:wt(this,Gn,xA).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,s),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Zl=new WeakMap,_c=new WeakMap,vv=new WeakMap,yv=new WeakMap,xv=new WeakMap,eu=new WeakMap,Mr=new WeakMap,eo=new WeakMap,sr=new WeakMap,tu=new WeakMap,nu=new WeakMap,to=new WeakMap,su=new WeakMap,ru=new WeakMap,ko=new WeakMap,Gn=new WeakSet,oA=function(s){const a=j=>{this.thickness=j,wt(this,Gn,Rp).call(this)},o=this.thickness;this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},lA=function(s){const a=j=>{this.color=j,wt(this,Gn,Bo).call(this)},o=this.color;this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cA=function(s){const a=j=>{this.opacity=j,wt(this,Gn,Bo).call(this)};s/=100;const o=this.opacity;this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},uA=function(){const{parentRotation:s,parentDimensions:[a,o]}=this;switch(s){case 90:return[0,o,o,a];case 180:return[a,o,a,o];case 270:return[a,0,o,a];default:return[0,0,a,o]}},_0=function(){const{ctx:s,color:a,opacity:o,thickness:j,parentScale:_e,scaleFactor:nt}=this;s.lineWidth=j*_e/nt,s.lineCap="round",s.lineJoin="round",s.miterLimit=10,s.strokeStyle=`${a}${opacityToHex(o)}`},hA=function(s,a){const o=this._uiManager._signal;this.canvas.addEventListener("contextmenu",noContextMenu,{signal:o}),this.canvas.addEventListener("pointerleave",et(this,yv),{signal:o}),this.canvas.addEventListener("pointermove",et(this,vv),{signal:o}),this.canvas.addEventListener("pointerup",et(this,xv),{signal:o}),this.canvas.removeEventListener("pointerdown",et(this,eu)),this.isEditing=!0,et(this,nu)||(Pt(this,nu,!0),wt(this,Gn,pu).call(this),this.thickness||(this.thickness=cs._defaultThickness),this.color||(this.color=cs._defaultColor||AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=cs._defaultOpacity)),this.currentPath.push([s,a]),Pt(this,tu,!1),wt(this,Gn,_0).call(this),Pt(this,ko,()=>{wt(this,Gn,pA).call(this),et(this,ko)&&window.requestAnimationFrame(et(this,ko))}),window.requestAnimationFrame(et(this,ko))},w0=function(s,a){const[o,j]=this.currentPath.at(-1);if(this.currentPath.length>1&&s===o&&a===j)return;const _e=this.currentPath;let nt=et(this,eo);if(_e.push([s,a]),Pt(this,tu,!0),_e.length<=2){nt.moveTo(..._e[0]),nt.lineTo(s,a);return}_e.length===3&&(Pt(this,eo,nt=new Path2D),nt.moveTo(..._e[0])),wt(this,Gn,gA).call(this,nt,..._e.at(-3),..._e.at(-2),s,a)},dA=function(){if(this.currentPath.length===0)return;const s=this.currentPath.at(-1);et(this,eo).lineTo(...s)},fA=function(s,a){Pt(this,ko,null),s=Math.min(Math.max(s,0),this.canvas.width),a=Math.min(Math.max(a,0),this.canvas.height),wt(this,Gn,w0).call(this,s,a),wt(this,Gn,dA).call(this);let o;if(this.currentPath.length!==1)o=wt(this,Gn,mA).call(this);else{const st=[s,a];o=[[st,st.slice(),st.slice(),st]]}const j=et(this,eo),_e=this.currentPath;this.currentPath=[],Pt(this,eo,new Path2D);const nt=()=>{this.allRawPaths.push(_e),this.paths.push(o),this.bezierPath2D.push(j),this._uiManager.rebuild(this)},tt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(wt(this,Gn,Uv).call(this),wt(this,Gn,Hv).call(this)),wt(this,Gn,Rp).call(this))};this.addCommands({cmd:nt,undo:tt,mustExec:!0})},pA=function(){if(!et(this,tu))return;Pt(this,tu,!1);const s=Math.ceil(this.thickness*this.parentScale),a=this.currentPath.slice(-3),o=a.map(nt=>nt[0]),j=a.map(nt=>nt[1]);Math.min(...o)-s,Math.max(...o)+s,Math.min(...j)-s,Math.max(...j)+s;const{ctx:_e}=this;_e.save(),_e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const nt of this.bezierPath2D)_e.stroke(nt);_e.stroke(et(this,eo)),_e.restore()},gA=function(s,a,o,j,_e,nt,tt){const st=(a+j)/2,rt=(o+_e)/2,at=(j+nt)/2,it=(_e+tt)/2;s.bezierCurveTo(st+2*(j-st)/3,rt+2*(_e-rt)/3,at+2*(j-at)/3,it+2*(_e-it)/3,at,it)},mA=function(){const s=this.currentPath;if(s.length<=2)return[[s[0],s[0],s.at(-1),s.at(-1)]];const a=[];let o,[j,_e]=s[0];for(o=1;o<s.length-2;o++){const[ct,ot]=s[o],[ut,dt]=s[o+1],lt=(ct+ut)/2,ht=(ot+dt)/2,xt=[j+2*(ct-j)/3,_e+2*(ot-_e)/3],mt=[lt+2*(ct-lt)/3,ht+2*(ot-ht)/3];a.push([[j,_e],xt,mt,[lt,ht]]),[j,_e]=[lt,ht]}const[nt,tt]=s[o],[st,rt]=s[o+1],at=[j+2*(nt-j)/3,_e+2*(tt-_e)/3],it=[st+2*(nt-st)/3,rt+2*(tt-rt)/3];return a.push([[j,_e],at,it,[st,rt]]),a},Bo=function(){if(this.isEmpty()){wt(this,Gn,zv).call(this);return}wt(this,Gn,_0).call(this);const{canvas:s,ctx:a}=this;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,s.width,s.height),wt(this,Gn,zv).call(this);for(const o of this.bezierPath2D)a.stroke(o)},T0=function(s){this.canvas.removeEventListener("pointerleave",et(this,yv)),this.canvas.removeEventListener("pointermove",et(this,vv)),this.canvas.removeEventListener("pointerup",et(this,xv)),this.canvas.addEventListener("pointerdown",et(this,eu),{signal:this._uiManager._signal}),et(this,Mr)&&clearTimeout(et(this,Mr)),Pt(this,Mr,setTimeout(()=>{Pt(this,Mr,null),this.canvas.removeEventListener("contextmenu",noContextMenu)},10)),wt(this,Gn,fA).call(this,s.offsetX,s.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Uv=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Hv=function(){Pt(this,to,new ResizeObserver(s=>{const a=s[0].contentRect;a.width&&a.height&&this.setDimensions(a.width,a.height)})),et(this,to).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=et(this,to))==null||s.disconnect(),Pt(this,to,null)},{once:!0})},pu=function(){if(!et(this,nu))return;const[s,a]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*s),this.canvas.height=Math.ceil(this.height*a),wt(this,Gn,zv).call(this)},C0=function(s,a){const o=wt(this,Gn,Wv).call(this),j=(s-o)/et(this,_c),_e=(a-o)/et(this,Zl);this.scaleFactor=Math.min(j,_e)},zv=function(){const s=wt(this,Gn,Wv).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+s,this.translationY*this.scaleFactor+s)},uo=new WeakSet,vA=function(s){const a=new Path2D;for(let o=0,j=s.length;o<j;o++){const[_e,nt,tt,st]=s[o];o===0&&a.moveTo(..._e),a.bezierCurveTo(nt[0],nt[1],tt[0],tt[1],st[0],st[1])}return a},R0=function(s,a,o){const[j,_e,nt,tt]=a;switch(o){case 0:for(let st=0,rt=s.length;st<rt;st+=2)s[st]+=j,s[st+1]=tt-s[st+1];break;case 90:for(let st=0,rt=s.length;st<rt;st+=2){const at=s[st];s[st]=s[st+1]+j,s[st+1]=at+_e}break;case 180:for(let st=0,rt=s.length;st<rt;st+=2)s[st]=nt-s[st],s[st+1]+=_e;break;case 270:for(let st=0,rt=s.length;st<rt;st+=2){const at=s[st];s[st]=nt-s[st+1],s[st+1]=tt-at}break;default:throw new Error("Invalid rotation")}return s},yA=function(s,a,o){const[j,_e,nt,tt]=a;switch(o){case 0:for(let st=0,rt=s.length;st<rt;st+=2)s[st]-=j,s[st+1]=tt-s[st+1];break;case 90:for(let st=0,rt=s.length;st<rt;st+=2){const at=s[st];s[st]=s[st+1]-_e,s[st+1]=at-j}break;case 180:for(let st=0,rt=s.length;st<rt;st+=2)s[st]=nt-s[st],s[st+1]-=_e;break;case 270:for(let st=0,rt=s.length;st<rt;st+=2){const at=s[st];s[st]=tt-s[st+1],s[st+1]=nt-at}break;default:throw new Error("Invalid rotation")}return s},xA=function(s,a,o,j){var rt,at;const _e=[],nt=this.thickness/2,tt=s*a+nt,st=s*o+nt;for(const it of this.paths){const ct=[],ot=[];for(let ut=0,dt=it.length;ut<dt;ut++){const[lt,ht,xt,mt]=it[ut];if(lt[0]===mt[0]&&lt[1]===mt[1]&&dt===1){const Lt=s*lt[0]+tt,Yt=s*lt[1]+st;ct.push(Lt,Yt),ot.push(Lt,Yt);break}const ft=s*lt[0]+tt,gt=s*lt[1]+st,pt=s*ht[0]+tt,vt=s*ht[1]+st,At=s*xt[0]+tt,Rt=s*xt[1]+st,bt=s*mt[0]+tt,Tt=s*mt[1]+st;ut===0&&(ct.push(ft,gt),ot.push(ft,gt)),ct.push(pt,vt,At,Rt,bt,Tt),ot.push(pt,vt),ut===dt-1&&ot.push(bt,Tt)}_e.push({bezier:wt(rt=cs,uo,R0).call(rt,ct,j,this.rotation),points:wt(at=cs,uo,R0).call(at,ot,j,this.rotation)})}return _e},k0=function(){let s=1/0,a=-1/0,o=1/0,j=-1/0;for(const _e of this.paths)for(const[nt,tt,st,rt]of _e){const at=Util.bezierBoundingBox(...nt,...tt,...st,...rt);s=Math.min(s,at[0]),o=Math.min(o,at[1]),a=Math.max(a,at[2]),j=Math.max(j,at[3])}return[s,o,a,j]},Wv=function(){return et(this,sr)?Math.ceil(this.thickness*this.parentScale):0},Rp=function(s=!1){if(this.isEmpty())return;if(!et(this,sr)){wt(this,Gn,Bo).call(this);return}const a=wt(this,Gn,k0).call(this),o=wt(this,Gn,Wv).call(this);Pt(this,_c,Math.max(AnnotationEditor.MIN_SIZE,a[2]-a[0])),Pt(this,Zl,Math.max(AnnotationEditor.MIN_SIZE,a[3]-a[1]));const j=Math.ceil(o+et(this,_c)*this.scaleFactor),_e=Math.ceil(o+et(this,Zl)*this.scaleFactor),[nt,tt]=this.parentDimensions;this.width=j/nt,this.height=_e/tt,this.setAspectRatio(j,_e);const st=this.translationX,rt=this.translationY;this.translationX=-a[0],this.translationY=-a[1],wt(this,Gn,pu).call(this),wt(this,Gn,Bo).call(this),Pt(this,su,j),Pt(this,ru,_e),this.setDims(j,_e);const at=s?o/this.scaleFactor/2:0;this.translate(st-this.translationX-at,rt-this.translationY-at)},Dt(cs,uo),Hn(cs,"_defaultColor",null),Hn(cs,"_defaultOpacity",1),Hn(cs,"_defaultThickness",1),Hn(cs,"_type","ink"),Hn(cs,"_editorType",AnnotationEditorType.INK);let InkEditor=cs;var Rs,ks,Po,no,Mo,pp,Dr,so,Ir,xr,bv,es,kp,Pp,Vv,P0,bA,EA,M0,Gv,AA;const Vp=class Vp extends AnnotationEditor{constructor(s){super({...s,name:"stampEditor"});Dt(this,es);Dt(this,Rs,null);Dt(this,ks,null);Dt(this,Po,null);Dt(this,no,null);Dt(this,Mo,null);Dt(this,pp,"");Dt(this,Dr,null);Dt(this,so,null);Dt(this,Ir,null);Dt(this,xr,!1);Dt(this,bv,!1);Pt(this,no,s.bitmapUrl),Pt(this,Mo,s.bitmapFile)}static initialize(s,a){AnnotationEditor.initialize(s,a)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(a=>`image/${a}`))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(s){return this.supportedTypes.includes(s)}static paste(s,a){a.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:s.getAsFile()})}remove(){var s,a;et(this,ks)&&(Pt(this,Rs,null),this._uiManager.imageManager.deleteId(et(this,ks)),(s=et(this,Dr))==null||s.remove(),Pt(this,Dr,null),(a=et(this,so))==null||a.disconnect(),Pt(this,so,null),et(this,Ir)&&(clearTimeout(et(this,Ir)),Pt(this,Ir,null))),super.remove()}rebuild(){if(!this.parent){et(this,ks)&&wt(this,es,Vv).call(this);return}super.rebuild(),this.div!==null&&(et(this,ks)&&et(this,Dr)===null&&wt(this,es,Vv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(et(this,Po)||et(this,Rs)||et(this,no)||et(this,Mo)||et(this,ks))}get isResizable(){return!0}render(){if(this.div)return this.div;let s,a;if(this.width&&(s=this.x,a=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),et(this,Rs)?wt(this,es,P0).call(this):wt(this,es,Vv).call(this),this.width){const[o,j]=this.parentDimensions;this.setAt(s*o,a*j,this.width*o,this.height*j)}return this.div}getImageForAltText(){return et(this,Dr)}static deserialize(s,a,o){if(s instanceof StampAnnotationElement)return null;const j=super.deserialize(s,a,o),{rect:_e,bitmapUrl:nt,bitmapId:tt,isSvg:st,accessibilityData:rt}=s;tt&&o.imageManager.isValidId(tt)?Pt(j,ks,tt):Pt(j,no,nt),Pt(j,xr,st);const[at,it]=j.pageDimensions;return j.width=(_e[2]-_e[0])/at,j.height=(_e[3]-_e[1])/it,rt&&(j.altTextData=rt),j}serialize(s=!1,a=null){if(this.isEmpty())return null;const o={annotationType:AnnotationEditorType.STAMP,bitmapId:et(this,ks),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:et(this,xr),structTreeParentId:this._structTreeParentId};if(s)return o.bitmapUrl=wt(this,es,Gv).call(this,!0),o.accessibilityData=this.altTextData,o;const{decorative:j,altText:_e}=this.altTextData;if(!j&&_e&&(o.accessibilityData={type:"Figure",alt:_e}),a===null)return o;a.stamps||(a.stamps=new Map);const nt=et(this,xr)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!a.stamps.has(et(this,ks)))a.stamps.set(et(this,ks),{area:nt,serialized:o}),o.bitmap=wt(this,es,Gv).call(this,!1);else if(et(this,xr)){const tt=a.stamps.get(et(this,ks));nt>tt.area&&(tt.area=nt,tt.serialized.bitmap.close(),tt.serialized.bitmap=wt(this,es,Gv).call(this,!1))}return o}};Rs=new WeakMap,ks=new WeakMap,Po=new WeakMap,no=new WeakMap,Mo=new WeakMap,pp=new WeakMap,Dr=new WeakMap,so=new WeakMap,Ir=new WeakMap,xr=new WeakMap,bv=new WeakMap,es=new WeakSet,kp=function(s,a=!1){if(!s){this.remove();return}Pt(this,Rs,s.bitmap),a||(Pt(this,ks,s.id),Pt(this,xr,s.isSvg)),s.file&&Pt(this,pp,s.file.name),wt(this,es,P0).call(this)},Pp=function(){Pt(this,Po,null),this._uiManager.enableWaiting(!1),et(this,Dr)&&this.div.focus()},Vv=function(){if(et(this,ks)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(et(this,ks)).then(o=>wt(this,es,kp).call(this,o,!0)).finally(()=>wt(this,es,Pp).call(this));return}if(et(this,no)){const o=et(this,no);Pt(this,no,null),this._uiManager.enableWaiting(!0),Pt(this,Po,this._uiManager.imageManager.getFromUrl(o).then(j=>wt(this,es,kp).call(this,j)).finally(()=>wt(this,es,Pp).call(this)));return}if(et(this,Mo)){const o=et(this,Mo);Pt(this,Mo,null),this._uiManager.enableWaiting(!0),Pt(this,Po,this._uiManager.imageManager.getFromFile(o).then(j=>wt(this,es,kp).call(this,j)).finally(()=>wt(this,es,Pp).call(this)));return}const s=document.createElement("input");s.type="file",s.accept=Vp.supportedTypesStr;const a=this._uiManager._signal;Pt(this,Po,new Promise(o=>{s.addEventListener("change",async()=>{if(!s.files||s.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const j=await this._uiManager.imageManager.getFromFile(s.files[0]);wt(this,es,kp).call(this,j)}o()},{signal:a}),s.addEventListener("cancel",()=>{this.remove(),o()},{signal:a})}).finally(()=>wt(this,es,Pp).call(this))),s.click()},P0=function(){const{div:s}=this;let{width:a,height:o}=et(this,Rs);const[j,_e]=this.pageDimensions,nt=.75;if(this.width)a=this.width*j,o=this.height*_e;else if(a>nt*j||o>nt*_e){const at=Math.min(nt*j/a,nt*_e/o);a*=at,o*=at}const[tt,st]=this.parentDimensions;this.setDims(a*tt/j,o*st/_e),this._uiManager.enableWaiting(!1);const rt=Pt(this,Dr,document.createElement("canvas"));s.append(rt),s.hidden=!1,wt(this,es,M0).call(this,a,o),wt(this,es,AA).call(this),et(this,bv)||(this.parent.addUndoableEditor(this),Pt(this,bv,!0)),this._reportTelemetry({action:"inserted_image"}),et(this,pp)&&rt.setAttribute("aria-label",et(this,pp))},bA=function(s,a){var nt;const[o,j]=this.parentDimensions;this.width=s/o,this.height=a/j,this.setDims(s,a),(nt=this._initialOptions)!=null&&nt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,et(this,Ir)!==null&&clearTimeout(et(this,Ir)),Pt(this,Ir,setTimeout(()=>{Pt(this,Ir,null),wt(this,es,M0).call(this,s,a)},200))},EA=function(s,a){const{width:o,height:j}=et(this,Rs);let _e=o,nt=j,tt=et(this,Rs);for(;_e>2*s||nt>2*a;){const st=_e,rt=nt;_e>2*s&&(_e=_e>=16384?Math.floor(_e/2)-1:Math.ceil(_e/2)),nt>2*a&&(nt=nt>=16384?Math.floor(nt/2)-1:Math.ceil(nt/2));const at=new OffscreenCanvas(_e,nt);at.getContext("2d").drawImage(tt,0,0,st,rt,0,0,_e,nt),tt=at.transferToImageBitmap()}return tt},M0=function(s,a){s=Math.ceil(s),a=Math.ceil(a);const o=et(this,Dr);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const j=et(this,xr)?et(this,Rs):wt(this,es,EA).call(this,s,a);if(this._uiManager.hasMLManager&&!this.hasAltText()){const tt=new OffscreenCanvas(s,a).getContext("2d");tt.drawImage(j,0,0,j.width,j.height,0,0,s,a),this._uiManager.mlGuess({service:"image-to-text",request:{data:tt.getImageData(0,0,s,a).data,width:s,height:a,channels:4}}).then(st=>{const rt=(st==null?void 0:st.output)||"";this.parent&&rt&&!this.hasAltText()&&(this.altTextData={altText:rt,decorative:!1})})}const _e=o.getContext("2d");_e.filter=this._uiManager.hcmFilter,_e.drawImage(j,0,0,j.width,j.height,0,0,s,a)},Gv=function(s){if(s){if(et(this,xr)){const j=this._uiManager.imageManager.getSvgUrl(et(this,ks));if(j)return j}const a=document.createElement("canvas");return{width:a.width,height:a.height}=et(this,Rs),a.getContext("2d").drawImage(et(this,Rs),0,0),a.toDataURL()}if(et(this,xr)){const[a,o]=this.pageDimensions,j=Math.round(this.width*a*PixelsPerInch.PDF_TO_CSS_UNITS),_e=Math.round(this.height*o*PixelsPerInch.PDF_TO_CSS_UNITS),nt=new OffscreenCanvas(j,_e);return nt.getContext("2d").drawImage(et(this,Rs),0,0,et(this,Rs).width,et(this,Rs).height,0,0,j,_e),nt.transferToImageBitmap()}return structuredClone(et(this,Rs))},AA=function(){this._uiManager._signal&&(Pt(this,so,new ResizeObserver(s=>{const a=s[0].contentRect;a.width&&a.height&&wt(this,es,bA).call(this,a.width,a.height)})),et(this,so).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=et(this,so))==null||s.disconnect(),Pt(this,so,null)},{once:!0}))},Hn(Vp,"_type","stamp"),Hn(Vp,"_editorType",AnnotationEditorType.STAMP);let StampEditor=Vp;var iu,gp,Fr,au,ro,io,ao,qs,Do,mp,vp,Os,qn,Io,Ps,SA,D0,I0,F0,Xv;const ar=class ar{constructor({uiManager:e,pageIndex:s,div:a,accessibilityManager:o,annotationLayer:j,drawLayer:_e,textLayer:nt,viewport:tt,l10n:st}){Dt(this,Ps);Dt(this,iu);Dt(this,gp,!1);Dt(this,Fr,null);Dt(this,au,null);Dt(this,ro,null);Dt(this,io,null);Dt(this,ao,null);Dt(this,qs,new Map);Dt(this,Do,!1);Dt(this,mp,!1);Dt(this,vp,!1);Dt(this,Os,null);Dt(this,qn);const rt=[...et(ar,Io).values()];if(!ar._initialized){ar._initialized=!0;for(const at of rt)at.initialize(st,e)}e.registerEditorTypes(rt),Pt(this,qn,e),this.pageIndex=s,this.div=a,Pt(this,iu,o),Pt(this,Fr,j),this.viewport=tt,Pt(this,Os,nt),this.drawLayer=_e,et(this,qn).addLayer(this)}get isEmpty(){return et(this,qs).size===0}get isInvisible(){return this.isEmpty&&et(this,qn).getMode()===AnnotationEditorType.NONE}updateToolbar(e){et(this,qn).updateToolbar(e)}updateMode(e=et(this,qn).getMode()){switch(wt(this,Ps,Xv).call(this),e){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;for(const a of et(ar,Io).values())s.toggle(`${a._type}Editing`,e===a._editorType);this.div.hidden=!1}hasTextLayer(e){var s;return e===((s=et(this,Os))==null?void 0:s.div)}addInkEditorIfNeeded(e){if(et(this,qn).getMode()!==AnnotationEditorType.INK)return;if(!e){for(const a of et(this,qs).values())if(a.isEmpty()){a.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){et(this,qn).setEditingState(e)}addCommands(e){et(this,qn).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var s;(s=et(this,Fr))==null||s.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const a of et(this,qs).values())a.enableEditing(),a.show(!0),a.annotationElementId&&(et(this,qn).removeChangedExistingAnnotation(a),e.add(a.annotationElementId));if(!et(this,Fr))return;const s=et(this,Fr).getEditableAnnotations();for(const a of s){if(a.hide(),et(this,qn).isDeletedAnnotationElement(a.data.id)||e.has(a.data.id))continue;const o=this.deserialize(a);o&&(this.addOrRebuild(o),o.enableEditing())}}disable(){var o;Pt(this,vp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,s=new Map;for(const j of et(this,qs).values())if(j.disableEditing(),!!j.annotationElementId){if(j.serialize()!==null){e.set(j.annotationElementId,j);continue}else s.set(j.annotationElementId,j);(o=this.getEditableAnnotation(j.annotationElementId))==null||o.show(),j.remove()}if(et(this,Fr)){const j=et(this,Fr).getEditableAnnotations();for(const _e of j){const{id:nt}=_e.data;if(et(this,qn).isDeletedAnnotationElement(nt))continue;let tt=s.get(nt);if(tt){tt.resetAnnotationElement(_e),tt.show(!1),_e.show();continue}tt=e.get(nt),tt&&(et(this,qn).addChangedExistingAnnotation(tt),tt.renderAnnotationElement(_e),tt.show(!1)),_e.show()}}wt(this,Ps,Xv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:a}=this.div;for(const j of et(ar,Io).values())a.remove(`${j._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Pt(this,vp,!1)}getEditableAnnotation(e){var s;return((s=et(this,Fr))==null?void 0:s.getEditableAnnotation(e))||null}setActiveEditor(e){et(this,qn).getActive()!==e&&et(this,qn).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=et(this,Os))!=null&&e.div&&!et(this,io)&&(Pt(this,io,wt(this,Ps,SA).bind(this)),et(this,Os).div.addEventListener("pointerdown",et(this,io),{signal:et(this,qn)._signal}),et(this,Os).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=et(this,Os))!=null&&e.div&&et(this,io)&&(et(this,Os).div.removeEventListener("pointerdown",et(this,io)),Pt(this,io,null),et(this,Os).div.classList.remove("highlighting"))}enableClick(){if(et(this,ro))return;const e=et(this,qn)._signal;Pt(this,ro,this.pointerdown.bind(this)),Pt(this,au,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",et(this,ro),{signal:e}),this.div.addEventListener("pointerup",et(this,au),{signal:e})}disableClick(){et(this,ro)&&(this.div.removeEventListener("pointerdown",et(this,ro)),this.div.removeEventListener("pointerup",et(this,au)),Pt(this,ro,null),Pt(this,au,null))}attach(e){et(this,qs).set(e.id,e);const{annotationElementId:s}=e;s&&et(this,qn).isDeletedAnnotationElement(s)&&et(this,qn).removeDeletedAnnotationElement(e)}detach(e){var s;et(this,qs).delete(e.id),(s=et(this,iu))==null||s.removePointerInTextLayer(e.contentDiv),!et(this,vp)&&e.annotationElementId&&et(this,qn).addDeletedAnnotationElement(e)}remove(e){this.detach(e),et(this,qn).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,et(this,mp)||this.addInkEditorIfNeeded(!1)}changeParent(e){var s;e.parent!==this&&(e.parent&&e.annotationElementId&&(et(this,qn).addDeletedAnnotationElement(e.annotationElementId),AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(s=e.parent)==null||s.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),et(this,qn).addEditor(e),this.attach(e),!e.isAttachedToDOM){const s=e.render();this.div.append(s),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),et(this,qn).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var a;if(!e.isAttachedToDOM)return;const{activeElement:s}=document;e.div.contains(s)&&!et(this,ao)&&(e._focusEventsAllowed=!1,Pt(this,ao,setTimeout(()=>{Pt(this,ao,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:et(this,qn)._signal}),s.focus())},0))),e._structTreeParentId=(a=et(this,iu))==null?void 0:a.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const s=()=>e._uiManager.rebuild(e),a=()=>{e.remove()};this.addCommands({cmd:s,undo:a,mustExec:!1})}getNextId(){return et(this,qn).getId()}get _signal(){return et(this,qn)._signal}canCreateNewEmptyEditor(){var e;return(e=et(this,Ps,D0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,s){et(this,qn).updateToolbar(e),et(this,qn).updateMode(e);const{offsetX:a,offsetY:o}=wt(this,Ps,F0).call(this),j=this.getNextId(),_e=wt(this,Ps,I0).call(this,{parent:this,id:j,x:a,y:o,uiManager:et(this,qn),isCentered:!0,...s});_e&&this.add(_e)}deserialize(e){var s;return((s=et(ar,Io).get(e.annotationType??e.annotationEditorType))==null?void 0:s.deserialize(e,this,et(this,qn)))||null}createAndAddNewEditor(e,s,a={}){const o=this.getNextId(),j=wt(this,Ps,I0).call(this,{parent:this,id:o,x:e.offsetX,y:e.offsetY,uiManager:et(this,qn),isCentered:s,...a});return j&&this.add(j),j}addNewEditor(){this.createAndAddNewEditor(wt(this,Ps,F0).call(this),!0)}setSelected(e){et(this,qn).setSelected(e)}toggleSelected(e){et(this,qn).toggleSelected(e)}isSelected(e){return et(this,qn).isSelected(e)}unselect(e){et(this,qn).unselect(e)}pointerup(e){const{isMac:s}=util_FeatureTest.platform;if(!(e.button!==0||e.ctrlKey&&s)&&e.target===this.div&&et(this,Do)){if(Pt(this,Do,!1),!et(this,gp)){Pt(this,gp,!0);return}if(et(this,qn).getMode()===AnnotationEditorType.STAMP){et(this,qn).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(et(this,qn).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),et(this,Do)){Pt(this,Do,!1);return}const{isMac:s}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&s||e.target!==this.div)return;Pt(this,Do,!0);const a=et(this,qn).getActive();Pt(this,gp,!a||a.isEmpty())}findNewParent(e,s,a){const o=et(this,qn).findParent(s,a);return o===null||o===this?!1:(o.changeParent(e),!0)}destroy(){var e,s;((e=et(this,qn).getActive())==null?void 0:e.parent)===this&&(et(this,qn).commitOrRemove(),et(this,qn).setActiveEditor(null)),et(this,ao)&&(clearTimeout(et(this,ao)),Pt(this,ao,null));for(const a of et(this,qs).values())(s=et(this,iu))==null||s.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,et(this,qs).clear(),et(this,qn).removeLayer(this)}render({viewport:e}){this.viewport=e,setLayerDimensions(this.div,e);for(const s of et(this,qn).getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:e}){et(this,qn).commitOrRemove(),wt(this,Ps,Xv).call(this);const s=this.viewport.rotation,a=e.rotation;if(this.viewport=e,setLayerDimensions(this.div,{rotation:a}),s!==a)for(const o of et(this,qs).values())o.rotate(a);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:s}=this.viewport.rawDims;return[e,s]}get scale(){return et(this,qn).viewParameters.realScale}};iu=new WeakMap,gp=new WeakMap,Fr=new WeakMap,au=new WeakMap,ro=new WeakMap,io=new WeakMap,ao=new WeakMap,qs=new WeakMap,Do=new WeakMap,mp=new WeakMap,vp=new WeakMap,Os=new WeakMap,qn=new WeakMap,Io=new WeakMap,Ps=new WeakSet,SA=function(e){if(et(this,qn).unselectAll(),e.target===et(this,Os).div){const{isMac:s}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&s)return;et(this,qn).showAllEditors("highlight",!0,!0),et(this,Os).div.classList.add("free"),HighlightEditor.startHighlighting(this,et(this,qn).direction==="ltr",e),et(this,Os).div.addEventListener("pointerup",()=>{et(this,Os).div.classList.remove("free")},{once:!0,signal:et(this,qn)._signal}),e.preventDefault()}},D0=function(){return et(ar,Io).get(et(this,qn).getMode())},I0=function(e){const s=et(this,Ps,D0);return s?new s.prototype.constructor(e):null},F0=function(){const{x:e,y:s,width:a,height:o}=this.div.getBoundingClientRect(),j=Math.max(0,e),_e=Math.max(0,s),nt=Math.min(window.innerWidth,e+a),tt=Math.min(window.innerHeight,s+o),st=(j+nt)/2-e,rt=(_e+tt)/2-s,[at,it]=this.viewport.rotation%180===0?[st,rt]:[rt,st];return{offsetX:at,offsetY:it}},Xv=function(){Pt(this,mp,!0);for(const e of et(this,qs).values())e.isEmpty()&&e.remove();Pt(this,mp,!1)},Hn(ar,"_initialized",!1),Dt(ar,Io,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(e=>[e._editorType,e])));let AnnotationEditorLayer=ar;var Lr,Ev,xs,Fo,Av,L0,lu,O0,_A;const Ss=class Ss{constructor({pageIndex:e}){Dt(this,lu);Dt(this,Lr,null);Dt(this,Ev,0);Dt(this,xs,new Map);Dt(this,Fo,new Map);this.pageIndex=e}setParent(e){if(!et(this,Lr)){Pt(this,Lr,e);return}if(et(this,Lr)!==e){if(et(this,xs).size>0)for(const s of et(this,xs).values())s.remove(),e.append(s);Pt(this,Lr,e)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}highlight(e,s,a,o=!1){const j=ds(this,Ev)._++,_e=wt(this,lu,O0).call(this,e.box);_e.classList.add("highlight"),e.free&&_e.classList.add("free");const nt=Ss._svgFactory.createElement("defs");_e.append(nt);const tt=Ss._svgFactory.createElement("path");nt.append(tt);const st=`path_p${this.pageIndex}_${j}`;tt.setAttribute("id",st),tt.setAttribute("d",e.toSVGPath()),o&&et(this,Fo).set(j,tt);const rt=wt(this,lu,_A).call(this,nt,st),at=Ss._svgFactory.createElement("use");return _e.append(at),_e.setAttribute("fill",s),_e.setAttribute("fill-opacity",a),at.setAttribute("href",`#${st}`),et(this,xs).set(j,_e),{id:j,clipPathId:`url(#${rt})`}}highlightOutline(e){const s=ds(this,Ev)._++,a=wt(this,lu,O0).call(this,e.box);a.classList.add("highlightOutline");const o=Ss._svgFactory.createElement("defs");a.append(o);const j=Ss._svgFactory.createElement("path");o.append(j);const _e=`path_p${this.pageIndex}_${s}`;j.setAttribute("id",_e),j.setAttribute("d",e.toSVGPath()),j.setAttribute("vector-effect","non-scaling-stroke");let nt;if(e.free){a.classList.add("free");const rt=Ss._svgFactory.createElement("mask");o.append(rt),nt=`mask_p${this.pageIndex}_${s}`,rt.setAttribute("id",nt),rt.setAttribute("maskUnits","objectBoundingBox");const at=Ss._svgFactory.createElement("rect");rt.append(at),at.setAttribute("width","1"),at.setAttribute("height","1"),at.setAttribute("fill","white");const it=Ss._svgFactory.createElement("use");rt.append(it),it.setAttribute("href",`#${_e}`),it.setAttribute("stroke","none"),it.setAttribute("fill","black"),it.setAttribute("fill-rule","nonzero"),it.classList.add("mask")}const tt=Ss._svgFactory.createElement("use");a.append(tt),tt.setAttribute("href",`#${_e}`),nt&&tt.setAttribute("mask",`url(#${nt})`);const st=tt.cloneNode();return a.append(st),tt.classList.add("mainOutline"),st.classList.add("secondaryOutline"),et(this,xs).set(s,a),s}finalizeLine(e,s){const a=et(this,Fo).get(e);et(this,Fo).delete(e),this.updateBox(e,s.box),a.setAttribute("d",s.toSVGPath())}updateLine(e,s){et(this,xs).get(e).firstChild.firstChild.setAttribute("d",s.toSVGPath())}removeFreeHighlight(e){this.remove(e),et(this,Fo).delete(e)}updatePath(e,s){et(this,Fo).get(e).setAttribute("d",s.toSVGPath())}updateBox(e,s){var a;wt(a=Ss,Av,L0).call(a,et(this,xs).get(e),s)}show(e,s){et(this,xs).get(e).classList.toggle("hidden",!s)}rotate(e,s){et(this,xs).get(e).setAttribute("data-main-rotation",s)}changeColor(e,s){et(this,xs).get(e).setAttribute("fill",s)}changeOpacity(e,s){et(this,xs).get(e).setAttribute("fill-opacity",s)}addClass(e,s){et(this,xs).get(e).classList.add(s)}removeClass(e,s){et(this,xs).get(e).classList.remove(s)}remove(e){et(this,Lr)!==null&&(et(this,xs).get(e).remove(),et(this,xs).delete(e))}destroy(){Pt(this,Lr,null);for(const e of et(this,xs).values())e.remove();et(this,xs).clear()}};Lr=new WeakMap,Ev=new WeakMap,xs=new WeakMap,Fo=new WeakMap,Av=new WeakSet,L0=function(e,{x:s=0,y:a=0,width:o=1,height:j=1}={}){const{style:_e}=e;_e.top=`${100*a}%`,_e.left=`${100*s}%`,_e.width=`${100*o}%`,_e.height=`${100*j}%`},lu=new WeakSet,O0=function(e){var a;const s=Ss._svgFactory.create(1,1,!0);return et(this,Lr).append(s),s.setAttribute("aria-hidden",!0),wt(a=Ss,Av,L0).call(a,s,e),s},_A=function(e,s){const a=Ss._svgFactory.createElement("clipPath");e.append(a);const o=`clip_${s}`;a.setAttribute("id",o),a.setAttribute("clipPathUnits","objectBoundingBox");const j=Ss._svgFactory.createElement("use");return a.append(j),j.setAttribute("href",`#${s}`),j.classList.add("clip"),o},Dt(Ss,Av);let DrawLayer=Ss;var __webpack_exports__AbortException=__webpack_exports__.AbortException,__webpack_exports__AnnotationEditorLayer=__webpack_exports__.AnnotationEditorLayer,__webpack_exports__AnnotationEditorParamsType=__webpack_exports__.AnnotationEditorParamsType,__webpack_exports__AnnotationEditorType=__webpack_exports__.AnnotationEditorType,__webpack_exports__AnnotationEditorUIManager=__webpack_exports__.AnnotationEditorUIManager,__webpack_exports__AnnotationLayer=__webpack_exports__.AnnotationLayer,__webpack_exports__AnnotationMode=__webpack_exports__.AnnotationMode,__webpack_exports__CMapCompressionType=__webpack_exports__.CMapCompressionType,__webpack_exports__ColorPicker=__webpack_exports__.ColorPicker,__webpack_exports__DOMSVGFactory=__webpack_exports__.DOMSVGFactory,__webpack_exports__DrawLayer=__webpack_exports__.DrawLayer,__webpack_exports__FeatureTest=__webpack_exports__.FeatureTest,__webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions,__webpack_exports__ImageKind=__webpack_exports__.ImageKind,__webpack_exports__InvalidPDFException=__webpack_exports__.InvalidPDFException,__webpack_exports__MissingPDFException=__webpack_exports__.MissingPDFException,__webpack_exports__OPS=__webpack_exports__.OPS,__webpack_exports__Outliner=__webpack_exports__.Outliner,__webpack_exports__PDFDataRangeTransport=__webpack_exports__.PDFDataRangeTransport,__webpack_exports__PDFDateString=__webpack_exports__.PDFDateString,__webpack_exports__PDFWorker=__webpack_exports__.PDFWorker,__webpack_exports__PasswordResponses=__webpack_exports__.PasswordResponses,__webpack_exports__PermissionFlag=__webpack_exports__.PermissionFlag,__webpack_exports__PixelsPerInch=__webpack_exports__.PixelsPerInch,__webpack_exports__RenderingCancelledException=__webpack_exports__.RenderingCancelledException,__webpack_exports__TextLayer=__webpack_exports__.TextLayer,__webpack_exports__UnexpectedResponseException=__webpack_exports__.UnexpectedResponseException,__webpack_exports__Util=__webpack_exports__.Util,__webpack_exports__VerbosityLevel=__webpack_exports__.VerbosityLevel,__webpack_exports__XfaLayer=__webpack_exports__.XfaLayer,__webpack_exports__build=__webpack_exports__.build,__webpack_exports__createValidAbsoluteUrl=__webpack_exports__.createValidAbsoluteUrl,__webpack_exports__fetchData=__webpack_exports__.fetchData,__webpack_exports__getDocument=__webpack_exports__.getDocument,__webpack_exports__getFilenameFromUrl=__webpack_exports__.getFilenameFromUrl,__webpack_exports__getPdfFilenameFromUrl=__webpack_exports__.getPdfFilenameFromUrl,__webpack_exports__getXfaPageViewport=__webpack_exports__.getXfaPageViewport,__webpack_exports__isDataScheme=__webpack_exports__.isDataScheme,__webpack_exports__isPdfFile=__webpack_exports__.isPdfFile,__webpack_exports__noContextMenu=__webpack_exports__.noContextMenu,__webpack_exports__normalizeUnicode=__webpack_exports__.normalizeUnicode,__webpack_exports__renderTextLayer=__webpack_exports__.renderTextLayer,__webpack_exports__setLayerDimensions=__webpack_exports__.setLayerDimensions,__webpack_exports__shadow=__webpack_exports__.shadow,__webpack_exports__updateTextLayer=__webpack_exports__.updateTextLayer,__webpack_exports__version=__webpack_exports__.version;const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException:__webpack_exports__AbortException,AnnotationEditorLayer:__webpack_exports__AnnotationEditorLayer,AnnotationEditorParamsType:__webpack_exports__AnnotationEditorParamsType,AnnotationEditorType:__webpack_exports__AnnotationEditorType,AnnotationEditorUIManager:__webpack_exports__AnnotationEditorUIManager,AnnotationLayer:__webpack_exports__AnnotationLayer,AnnotationMode:__webpack_exports__AnnotationMode,CMapCompressionType:__webpack_exports__CMapCompressionType,ColorPicker:__webpack_exports__ColorPicker,DOMSVGFactory:__webpack_exports__DOMSVGFactory,DrawLayer:__webpack_exports__DrawLayer,FeatureTest:__webpack_exports__FeatureTest,GlobalWorkerOptions:__webpack_exports__GlobalWorkerOptions,ImageKind:__webpack_exports__ImageKind,InvalidPDFException:__webpack_exports__InvalidPDFException,MissingPDFException:__webpack_exports__MissingPDFException,OPS:__webpack_exports__OPS,Outliner:__webpack_exports__Outliner,PDFDataRangeTransport:__webpack_exports__PDFDataRangeTransport,PDFDateString:__webpack_exports__PDFDateString,PDFWorker:__webpack_exports__PDFWorker,PasswordResponses:__webpack_exports__PasswordResponses,PermissionFlag:__webpack_exports__PermissionFlag,PixelsPerInch:__webpack_exports__PixelsPerInch,RenderingCancelledException:__webpack_exports__RenderingCancelledException,TextLayer:__webpack_exports__TextLayer,UnexpectedResponseException:__webpack_exports__UnexpectedResponseException,Util:__webpack_exports__Util,VerbosityLevel:__webpack_exports__VerbosityLevel,XfaLayer:__webpack_exports__XfaLayer,build:__webpack_exports__build,createValidAbsoluteUrl:__webpack_exports__createValidAbsoluteUrl,fetchData:__webpack_exports__fetchData,getDocument:__webpack_exports__getDocument,getFilenameFromUrl:__webpack_exports__getFilenameFromUrl,getPdfFilenameFromUrl:__webpack_exports__getPdfFilenameFromUrl,getXfaPageViewport:__webpack_exports__getXfaPageViewport,isDataScheme:__webpack_exports__isDataScheme,isPdfFile:__webpack_exports__isPdfFile,noContextMenu:__webpack_exports__noContextMenu,normalizeUnicode:__webpack_exports__normalizeUnicode,renderTextLayer:__webpack_exports__renderTextLayer,setLayerDimensions:__webpack_exports__setLayerDimensions,shadow:__webpack_exports__shadow,updateTextLayer:__webpack_exports__updateTextLayer,version:__webpack_exports__version},Symbol.toStringTag,{value:"Module"}));var __spreadArray=function(i,e,s){if(s||arguments.length===2)for(var a=0,o=e.length,j;a<o;a++)(j||!(a in e))&&(j||(j=Array.prototype.slice.call(e,0,a)),j[a]=e[a]);return i.concat(j||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(i,e){var s={};return allEvents.forEach(function(a){var o=i[a];o&&(e?s[a]=function(j){return o(j,e(a))}:s[a]=o)}),s}function makeCancellablePromise(i){var e=!1,s=new Promise(function(a,o){i.then(function(j){return!e&&a(j)}).catch(function(j){return!e&&o(j)})});return{promise:s,cancel:function(){e=!0}}}var prefix="Invariant failed";function invariant(i,e){if(!i)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(i,e,s){for(s of i.keys())if(dequal(s,e))return s}function dequal(i,e){var s,a,o;if(i===e)return!0;if(i&&e&&(s=i.constructor)===e.constructor){if(s===Date)return i.getTime()===e.getTime();if(s===RegExp)return i.toString()===e.toString();if(s===Array){if((a=i.length)===e.length)for(;a--&&dequal(i[a],e[a]););return a===-1}if(s===Set){if(i.size!==e.size)return!1;for(a of i)if(o=a,o&&typeof o=="object"&&(o=find(e,o),!o)||!e.has(o))return!1;return!0}if(s===Map){if(i.size!==e.size)return!1;for(a of i)if(o=a[0],o&&typeof o=="object"&&(o=find(e,o),!o)||!dequal(a[1],e.get(o)))return!1;return!0}if(s===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(s===DataView){if((a=i.byteLength)===e.byteLength)for(;a--&&i.getInt8(a)===e.getInt8(a););return a===-1}if(ArrayBuffer.isView(i)){if((a=i.byteLength)===e.byteLength)for(;a--&&i[a]===e[a];);return a===-1}if(!s||typeof i=="object"){a=0;for(s in i)if(has.call(i,s)&&++a&&!has.call(e,s)||!(s in e)||!dequal(i[s],e[s]))return!1;return Object.keys(e).length===a}}return i!==i&&e!==e}const documentContext=reactExports.createContext(null);function Message({children:i,type:e}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(s=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(s):Array.isArray(e)?s(e):e.then(s)}).then(s=>{invariant(Array.isArray(s));const a=s[0];new Promise(o=>{invariant(this.pdfDocument),a instanceof Object?this.pdfDocument.getPageIndex(a).then(j=>{o(j)}).catch(()=>{invariant(!1)}):typeof a=="number"?o(a):invariant(!1)}).then(o=>{const j=o+1;invariant(this.pdfViewer),invariant(j>=1&&j<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:o,pageNumber:j})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const s=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:e})}addLinkAttributes(e,s,a){e.href=s,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i<"u"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser),i instanceof Blob}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i));const[e="",s=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(i){i!=null&&i.cancel&&i.cancel()}function makePageCallback(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise((e,s)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return s(new Error("Error while reading a file."));e(a.result)},a.onerror=o=>{if(!o.target)return s(new Error("Error while reading a file."));const{error:j}=o.target;if(!j)return s(new Error("Error while reading a file."));switch(j.code){case j.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case j.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case j.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},a.readAsArrayBuffer(i)})}function reducer(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=function(i,e,s,a){function o(j){return j instanceof s?j:new s(function(_e){_e(j)})}return new(s||(s=Promise))(function(j,_e){function nt(rt){try{st(a.next(rt))}catch(at){_e(at)}}function tt(rt){try{st(a.throw(rt))}catch(at){_e(at)}}function st(rt){rt.done?j(rt.value):o(rt.value).then(nt,tt)}st((a=a.apply(i,e||[])).next())})},__rest$1=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(i,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");i(s);break}case PasswordResponses.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");i(s);break}}};function isParameterObject(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Document=reactExports.forwardRef(function(e,s){var{children:a,className:o,error:j="Failed to load PDF file.",externalLinkRel:_e,externalLinkTarget:nt,file:tt,inputRef:st,imageResourcesPath:rt,loading:at="Loading PDF",noData:it="No PDF file specified.",onItemClick:ct,onLoadError:ot,onLoadProgress:ut,onLoadSuccess:dt,onPassword:lt=defaultOnPassword,onSourceError:ht,onSourceSuccess:xt,options:mt,renderMode:ft,rotate:gt}=e,pt=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[vt,At]=useResolver(),{value:Rt,error:bt}=vt,[Tt,Lt]=useResolver(),{value:Yt,error:zt}=Tt,Wt=reactExports.useRef(new LinkService),Bt=reactExports.useRef([]),Ut=reactExports.useRef(void 0),_t=reactExports.useRef(void 0);tt&&tt!==Ut.current&&isParameterObject(tt)&&(warning$1(!dequal(tt,Ut.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Ut.current=tt),mt&&mt!==_t.current&&(warning$1(!dequal(mt,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=mt);const $t=reactExports.useRef({scrollPageIntoView:ln=>{const{dest:cn,pageNumber:dn,pageIndex:qt=dn-1}=ln;if(ct){ct({dest:cn,pageIndex:qt,pageNumber:dn});return}const sn=Bt.current[qt];if(sn){sn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${dn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:Wt,pages:Bt,viewer:$t}),[]);function Xt(){xt&&xt()}function Ct(){bt&&(warning$1(!1,bt.toString()),ht&&ht(bt))}function yt(){At({type:"RESET"})}reactExports.useEffect(yt,[tt,At]);const Et=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!tt)return null;if(typeof tt=="string")return isDataURI(tt)?{data:dataURItoByteString(tt)}:(displayCORSWarning(),{url:tt});if(tt instanceof PDFDataRangeTransport)return{range:tt};if(isArrayBuffer(tt))return{data:tt};if(isBrowser&&isBlob(tt))return{data:yield loadFromFile(tt)};if(invariant(typeof tt=="object"),invariant(isParameterObject(tt)),"url"in tt&&typeof tt.url=="string"){if(isDataURI(tt.url)){const{url:ln}=tt,cn=__rest$1(tt,["url"]),dn=dataURItoByteString(ln);return Object.assign({data:dn},cn)}displayCORSWarning()}return tt}),[tt]);reactExports.useEffect(()=>{const ln=makeCancellablePromise(Et());return ln.promise.then(cn=>{At({type:"RESOLVE",value:cn})}).catch(cn=>{At({type:"REJECT",error:cn})}),()=>{cancelRunningTask(ln)}},[Et,At]),reactExports.useEffect(()=>{if(!(typeof Rt>"u")){if(Rt===!1){Ct();return}Xt()}},[Rt]);function St(){Yt&&(dt&&dt(Yt),Bt.current=new Array(Yt.numPages),Wt.current.setDocument(Yt))}function Ft(){zt&&(warning$1(!1,zt.toString()),ot&&ot(zt))}reactExports.useEffect(function(){Lt({type:"RESET"})},[Lt,Rt]),reactExports.useEffect(function(){if(!Rt)return;const cn=mt?Object.assign(Object.assign({},Rt),mt):Rt,dn=__webpack_exports__getDocument(cn);ut&&(dn.onProgress=ut),lt&&(dn.onPassword=lt);const qt=dn,sn=qt.promise.then(It=>{Lt({type:"RESOLVE",value:It})}).catch(It=>{qt.destroyed||Lt({type:"REJECT",error:It})});return()=>{sn.finally(()=>qt.destroy())}},[mt,Lt,Rt]),reactExports.useEffect(()=>{if(!(typeof Yt>"u")){if(Yt===!1){Ft();return}St()}},[Yt]),reactExports.useEffect(function(){Wt.current.setViewer($t.current),Wt.current.setExternalLinkRel(_e),Wt.current.setExternalLinkTarget(nt)},[_e,nt]);const kt=reactExports.useCallback((ln,cn)=>{Bt.current[ln]=cn},[]),Ot=reactExports.useCallback(ln=>{delete Bt.current[ln]},[]),Gt=reactExports.useMemo(()=>({imageResourcesPath:rt,linkService:Wt.current,onItemClick:ct,pdf:Yt,registerPage:kt,renderMode:ft,rotate:gt,unregisterPage:Ot}),[rt,ct,Yt,kt,ft,gt,Ot]),Vt=reactExports.useMemo(()=>makeEventProps(pt,()=>Yt),[pt,Yt]);function rn(){return jsxRuntimeExports.jsx(documentContext.Provider,{value:Gt,children:a})}function an(){return tt?Yt==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof at=="function"?at():at}):Yt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof j=="function"?j():j}):rn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof it=="function"?it():it})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",o),ref:st,style:{"--scale-factor":"1"}},Vt,{children:an()}))});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var s=i.filter(Boolean);if(s.length<=1){var a=s[0];return a||null}return function(j){s.forEach(function(_e){typeof _e=="function"?_e(j):_e&&(_e.current=j)})}}const pageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(i){return i in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(i){return"children"in i}function isStructTreeNodeWithOnlyContentChild(i){return isStructTreeNode(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function getRoleAttributes(i){const e={};if(isStructTreeNode(i)){const{role:s}=i,a=s.match(HEADING_PATTERN);if(a)e.role="heading",e["aria-level"]=Number(a[1]);else if(isPdfRole(s)){const o=PDF_ROLE_TO_HTML_ROLE[s];o&&(e.role=o)}}return e}function getBaseAttributes(i){const e={};if(isStructTreeNode(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),isStructTreeNodeWithOnlyContentChild(i)){const[s]=i.children;if(s){const a=getBaseAttributes(s);return Object.assign(Object.assign({},e),a)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function getAttributes(i){return i?Object.assign(Object.assign({},getRoleAttributes(i)),getBaseAttributes(i)):null}function StructTreeItem({className:i,node:e}){const s=reactExports.useMemo(()=>getAttributes(e),[e]),a=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((o,j)=>jsxRuntimeExports.jsx(StructTreeItem,{node:o},j)),[e]);return jsxRuntimeExports.jsx("span",Object.assign({className:i},s,{children:a}))}function usePageContext(){return reactExports.useContext(pageContext)}function StructTree(){const i=usePageContext();invariant(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:s}=i,[a,o]=useResolver(),{value:j,error:_e}=a,{customTextRenderer:nt,page:tt}=i;function st(){j&&s&&s(j)}function rt(){_e&&(warning$1(!1,_e.toString()),e&&e(_e))}return reactExports.useEffect(function(){o({type:"RESET"})},[o,tt]),reactExports.useEffect(function(){if(nt||!tt)return;const it=makeCancellablePromise(tt.getStructTree()),ct=it;return it.promise.then(ot=>{o({type:"RESOLVE",value:ot})}).catch(ot=>{o({type:"REJECT",error:ot})}),()=>cancelRunningTask(ct)},[nt,tt,o]),reactExports.useEffect(()=>{if(j!==void 0){if(j===!1){rt();return}st()}},[j]),j?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:j}):null}const ANNOTATION_MODE=__webpack_exports__AnnotationMode;function Canvas(i){const e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},e),i),{_className:a,canvasBackground:o,devicePixelRatio:j=getDevicePixelRatio(),onRenderError:_e,onRenderSuccess:nt,page:tt,renderForms:st,renderTextLayer:rt,rotate:at,scale:it}=s,{canvasRef:ct}=i;invariant(tt);const ot=reactExports.useRef(null);function ut(){tt&&nt&&nt(makePageCallback(tt,it))}function dt(mt){isCancelException(mt)||(warning$1(!1,mt.toString()),_e&&_e(mt))}const lt=reactExports.useMemo(()=>tt.getViewport({scale:it*j,rotation:at}),[j,tt,at,it]),ht=reactExports.useMemo(()=>tt.getViewport({scale:it,rotation:at}),[tt,at,it]);reactExports.useEffect(function(){if(!tt)return;tt.cleanup();const{current:ft}=ot;if(!ft)return;ft.width=lt.width,ft.height=lt.height,ft.style.width=`${Math.floor(ht.width)}px`,ft.style.height=`${Math.floor(ht.height)}px`,ft.style.visibility="hidden";const gt={annotationMode:st?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:ft.getContext("2d",{alpha:!1}),viewport:lt};o&&(gt.background=o);const pt=tt.render(gt),vt=pt;return pt.promise.then(()=>{ft.style.visibility="",ut()}).catch(dt),()=>cancelRunningTask(vt)},[o,tt,st,lt,ht]);const xt=reactExports.useCallback(()=>{const{current:mt}=ot;mt&&(mt.width=0,mt.height=0)},[]);return reactExports.useEffect(()=>xt,[xt]),jsxRuntimeExports.jsx("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(ct,ot),style:{display:"block",userSelect:"none"},children:rt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(i){return"str"in i}function TextLayer(){const i=usePageContext();invariant(i);const{customTextRenderer:e,onGetTextError:s,onGetTextSuccess:a,onRenderTextLayerError:o,onRenderTextLayerSuccess:j,page:_e,pageIndex:nt,pageNumber:tt,rotate:st,scale:rt}=i;invariant(_e);const[at,it]=useResolver(),{value:ct,error:ot}=at,ut=reactExports.useRef(null),dt=reactExports.useRef(void 0);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function lt(){ct&&a&&a(ct)}function ht(){ot&&(warning$1(!1,ot.toString()),s&&s(ot))}reactExports.useEffect(function(){it({type:"RESET"})},[_e,it]),reactExports.useEffect(function(){if(!_e)return;const At=makeCancellablePromise(_e.getTextContent()),Rt=At;return At.promise.then(bt=>{it({type:"RESOLVE",value:bt})}).catch(bt=>{it({type:"REJECT",error:bt})}),()=>cancelRunningTask(Rt)},[_e,it]),reactExports.useEffect(()=>{if(ct!==void 0){if(ct===!1){ht();return}lt()}},[ct]);const xt=reactExports.useCallback(()=>{j&&j()},[j]),mt=reactExports.useCallback(vt=>{warning$1(!1,vt.toString()),o&&o(vt)},[o]);function ft(){const vt=dt.current;vt&&vt.classList.add("active")}function gt(){const vt=dt.current;vt&&vt.classList.remove("active")}const pt=reactExports.useMemo(()=>_e.getViewport({scale:rt,rotation:st}),[_e,st,rt]);return reactExports.useLayoutEffect(function(){if(!_e||!ct)return;const{current:At}=ut;if(!At)return;At.innerHTML="";const Rt=_e.streamTextContent({includeMarkedContent:!0}),bt={container:At,textContentSource:Rt,viewport:pt},Tt=new __webpack_exports__TextLayer(bt),Lt=Tt;return Tt.render().then(()=>{const Yt=document.createElement("div");Yt.className="endOfContent",At.append(Yt),dt.current=Yt;const zt=At.querySelectorAll('[role="presentation"]');if(e){let Wt=0;ct.items.forEach((Bt,Ut)=>{if(!isTextItem(Bt))return;const _t=zt[Wt];if(!_t)return;const $t=e(Object.assign({pageIndex:nt,pageNumber:tt,itemIndex:Ut},Bt));_t.innerHTML=$t,Wt+=Bt.str&&Bt.hasEOL?2:1})}xt()}).catch(mt),()=>cancelRunningTask(Lt)},[e,mt,xt,_e,nt,tt,ct,pt]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:gt,onMouseDown:ft,ref:ut})}function AnnotationLayer(){const i=useDocumentContext(),e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},i),e),{imageResourcesPath:a,linkService:o,onGetAnnotationsError:j,onGetAnnotationsSuccess:_e,onRenderAnnotationLayerError:nt,onRenderAnnotationLayerSuccess:tt,page:st,pdf:rt,renderForms:at,rotate:it,scale:ct=1}=s;invariant(rt),invariant(st),invariant(o);const[ot,ut]=useResolver(),{value:dt,error:lt}=ot,ht=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function xt(){dt&&_e&&_e(dt)}function mt(){lt&&(warning$1(!1,lt.toString()),j&&j(lt))}reactExports.useEffect(function(){ut({type:"RESET"})},[ut,st]),reactExports.useEffect(function(){if(!st)return;const At=makeCancellablePromise(st.getAnnotations()),Rt=At;return At.promise.then(bt=>{ut({type:"RESOLVE",value:bt})}).catch(bt=>{ut({type:"REJECT",error:bt})}),()=>{cancelRunningTask(Rt)}},[ut,st]),reactExports.useEffect(()=>{if(dt!==void 0){if(dt===!1){mt();return}xt()}},[dt]);function ft(){tt&&tt()}function gt(vt){warning$1(!1,`${vt}`),nt&&nt(vt)}const pt=reactExports.useMemo(()=>st.getViewport({scale:ct,rotation:it}),[st,it,ct]);return reactExports.useEffect(function(){if(!rt||!st||!o||!dt)return;const{current:At}=ht;if(!At)return;const Rt=pt.clone({dontFlip:!0}),bt={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:At,l10n:null,page:st,viewport:Rt},Tt={annotations:dt,annotationStorage:rt.annotationStorage,div:At,imageResourcesPath:a,linkService:o,page:st,renderForms:at,viewport:Rt};At.innerHTML="";try{new __webpack_exports__AnnotationLayer(bt).render(Tt),ft()}catch(Lt){gt(Lt)}return()=>{}},[dt,a,o,st,rt,at,pt]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:ht})}var __rest=function(i,e){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(s[a[o]]=i[a[o]]);return s};const defaultScale=1;function Page(i){const e=useDocumentContext(),s=Object.assign(Object.assign({},e),i),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:o=!0,canvasBackground:j,canvasRef:_e,children:nt,className:tt,customRenderer:st,customTextRenderer:rt,devicePixelRatio:at,error:it="Failed to load the page.",height:ct,inputRef:ot,loading:ut="Loading page",noData:dt="No page specified.",onGetAnnotationsError:lt,onGetAnnotationsSuccess:ht,onGetStructTreeError:xt,onGetStructTreeSuccess:mt,onGetTextError:ft,onGetTextSuccess:gt,onLoadError:pt,onLoadSuccess:vt,onRenderAnnotationLayerError:At,onRenderAnnotationLayerSuccess:Rt,onRenderError:bt,onRenderSuccess:Tt,onRenderTextLayerError:Lt,onRenderTextLayerSuccess:Yt,pageIndex:zt,pageNumber:Wt,pdf:Bt,registerPage:Ut,renderAnnotationLayer:_t=!0,renderForms:$t=!1,renderMode:Xt="canvas",renderTextLayer:Ct=!0,rotate:yt,scale:Et=defaultScale,unregisterPage:St,width:Ft}=s,kt=__rest(s,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Ot,Gt]=useResolver(),{value:Vt,error:rn}=Ot,an=reactExports.useRef(null);invariant(Bt);const ln=isProvided(Wt)?Wt-1:zt??null,cn=Wt??(isProvided(zt)?zt+1:null),dn=yt??(Vt?Vt.rotate:null),qt=reactExports.useMemo(()=>{if(!Vt)return null;let En=1;const Fn=Et??defaultScale;if(Ft||ct){const Mn=Vt.getViewport({scale:1,rotation:dn});Ft?En=Ft/Mn.width:ct&&(En=ct/Mn.height)}return Fn*En},[ct,Vt,dn,Et,Ft]);reactExports.useEffect(function(){return()=>{isProvided(ln)&&o&&St&&St(ln)}},[o,Bt,ln,St]);function sn(){if(vt){if(!Vt||!qt)return;vt(makePageCallback(Vt,qt))}if(o&&Ut){if(!isProvided(ln)||!an.current)return;Ut(ln,an.current)}}function It(){rn&&(warning$1(!1,rn.toString()),pt&&pt(rn))}reactExports.useEffect(function(){Gt({type:"RESET"})},[Gt,Bt,ln]),reactExports.useEffect(function(){if(!Bt||!cn)return;const Fn=makeCancellablePromise(Bt.getPage(cn)),Mn=Fn;return Fn.promise.then(Bn=>{Gt({type:"RESOLVE",value:Bn})}).catch(Bn=>{Gt({type:"REJECT",error:Bn})}),()=>cancelRunningTask(Mn)},[Gt,Bt,cn]),reactExports.useEffect(()=>{if(Vt!==void 0){if(Vt===!1){It();return}sn()}},[Vt,qt]);const Ht=reactExports.useMemo(()=>Vt&&isProvided(ln)&&cn&&isProvided(dn)&&isProvided(qt)?{_className:a,canvasBackground:j,customTextRenderer:rt,devicePixelRatio:at,onGetAnnotationsError:lt,onGetAnnotationsSuccess:ht,onGetStructTreeError:xt,onGetStructTreeSuccess:mt,onGetTextError:ft,onGetTextSuccess:gt,onRenderAnnotationLayerError:At,onRenderAnnotationLayerSuccess:Rt,onRenderError:bt,onRenderSuccess:Tt,onRenderTextLayerError:Lt,onRenderTextLayerSuccess:Yt,page:Vt,pageIndex:ln,pageNumber:cn,renderForms:$t,renderTextLayer:Ct,rotate:dn,scale:qt}:null,[a,j,rt,at,lt,ht,xt,mt,ft,gt,At,Rt,bt,Tt,Lt,Yt,Vt,ln,cn,$t,Ct,dn,qt]),Qt=reactExports.useMemo(()=>makeEventProps(kt,()=>Vt&&(qt?makePageCallback(Vt,qt):void 0)),[kt,Vt,qt]),tn=`${ln}@${qt}/${dn}`;function un(){switch(Xt){case"custom":return invariant(st),jsxRuntimeExports.jsx(st,{},`${tn}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:_e},`${tn}_canvas`)}}function mn(){return Ct?jsxRuntimeExports.jsx(TextLayer,{},`${tn}_text`):null}function vn(){return _t?jsxRuntimeExports.jsx(AnnotationLayer,{},`${tn}_annotations`):null}function Zt(){return jsxRuntimeExports.jsxs(pageContext.Provider,{value:Ht,children:[un(),mn(),vn(),nt]})}function An(){return cn?Bt===null||Vt===void 0||Vt===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof ut=="function"?ut():ut}):Bt===!1||Vt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof it=="function"?it():it}):Zt():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof dt=="function"?dt():dt})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(a,tt),"data-page-number":cn,ref:mergeRefs(ot,an),style:{"--scale-factor":`${qt}`,backgroundColor:j||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Qt,{children:An()}))}displayWorkerWarning();__webpack_exports__GlobalWorkerOptions.workerSrc="pdf.worker.mjs";__webpack_exports__GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${__webpack_exports__version}/build/pdf.worker.min.mjs`;const PDFViewer=({fileUrl:i})=>{const[e,s]=reactExports.useState(null),a=reactExports.useRef(null),[o,j]=reactExports.useState(0),_e=({numPages:nt})=>{s(nt)};return reactExports.useEffect(()=>{const nt=()=>{a.current&&j(a.current.offsetWidth*.9)};return nt(),window.addEventListener("resize",nt),()=>window.removeEventListener("resize",nt)},[]),jsxRuntimeExports.jsx("div",{ref:a,style:{width:"100%",display:"flex",justifyContent:"center",overflowY:"scroll",maxHeight:"90vh"},children:jsxRuntimeExports.jsx(Document,{file:i,onLoadSuccess:_e,children:Array.from(new Array(e),(nt,tt)=>jsxRuntimeExports.jsx(Page,{renderTextLayer:!1,renderAnnotationLayer:!1,customTextRenderer:!1,pageNumber:tt+1,width:o},tt))})})};function LuDownload(i){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"15",y2:"3"},child:[]}]})(i)}function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{var Wn;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=_t,e.bytesToString=rn,e.createValidAbsoluteUrl=Xt,e.getModificationDate=En,e.getUuid=Dn,e.getVerbosityLevel=zt,e.info=Wt,e.isArrayBuffer=Zt,e.isArrayEqual=An,e.isNodeJS=void 0,e.normalizeUnicode=wn,e.objectFromMap=dn,e.objectSize=cn,e.setVerbosityLevel=Yt,e.shadow=Ct,e.string32=ln,e.stringToBytes=an,e.stringToPDFString=un,e.stringToUTF8String=mn,e.unreachable=Ut,e.utf8StringToString=vn,e.warn=Bt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const a=[1,0,0,1,0,0];e.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=o;const j=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=j;const _e=1.35;e.LINE_FACTOR=_e;const nt=.35;e.LINE_DESCENT_FACTOR=nt;const tt=nt/_e;e.BASELINE_FACTOR=tt;const st={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=st;const rt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=rt;const at="pdfjs_internal_editor_";e.AnnotationEditorPrefix=at;const it={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=it;const ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=ct;const ot={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=ot;const ut={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=ut;const dt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=dt;const lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=lt;const ht={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=ht;const xt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=xt;const mt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=mt;const ft={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=ft;const gt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=gt;const pt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=pt;const vt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=vt;const At={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=At;const Rt={NONE:0,BINARY:1};e.CMapCompressionType=Rt;const bt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=bt;const Tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Tt;let Lt=At.WARNINGS;function Yt(Tn){Number.isInteger(Tn)&&(Lt=Tn)}function zt(){return Lt}function Wt(Tn){Lt>=At.INFOS&&console.log(`Info: ${Tn}`)}function Bt(Tn){Lt>=At.WARNINGS&&console.log(`Warning: ${Tn}`)}function Ut(Tn){throw new Error(Tn)}function _t(Tn,hn){Tn||Ut(hn)}function $t(Tn){switch(Tn==null?void 0:Tn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xt(Tn,hn=null,nn=null){if(!Tn)return null;try{if(nn&&typeof Tn=="string"){if(nn.addDefaultProtocol&&Tn.startsWith("www.")){const In=Tn.match(/\./g);(In==null?void 0:In.length)>=2&&(Tn=`http://${Tn}`)}if(nn.tryConvertEncoding)try{Tn=mn(Tn)}catch{}}const gn=hn?new URL(Tn,hn):new URL(Tn);if($t(gn))return gn}catch{}return null}function Ct(Tn,hn,nn,gn=!1){return Object.defineProperty(Tn,hn,{value:nn,enumerable:!gn,configurable:!0,writable:!1}),nn}const yt=function(){function hn(nn,gn){this.constructor===hn&&Ut("Cannot initialize BaseException."),this.message=nn,this.name=gn}return hn.prototype=new Error,hn.constructor=hn,hn}();e.BaseException=yt;class Et extends yt{constructor(hn,nn){super(hn,"PasswordException"),this.code=nn}}e.PasswordException=Et;class St extends yt{constructor(hn,nn){super(hn,"UnknownErrorException"),this.details=nn}}e.UnknownErrorException=St;class Ft extends yt{constructor(hn){super(hn,"InvalidPDFException")}}e.InvalidPDFException=Ft;class kt extends yt{constructor(hn){super(hn,"MissingPDFException")}}e.MissingPDFException=kt;class Ot extends yt{constructor(hn,nn){super(hn,"UnexpectedResponseException"),this.status=nn}}e.UnexpectedResponseException=Ot;class Gt extends yt{constructor(hn){super(hn,"FormatError")}}e.FormatError=Gt;class Vt extends yt{constructor(hn){super(hn,"AbortException")}}e.AbortException=Vt;function rn(Tn){(typeof Tn!="object"||(Tn==null?void 0:Tn.length)===void 0)&&Ut("Invalid argument for bytesToString");const hn=Tn.length,nn=8192;if(hn<nn)return String.fromCharCode.apply(null,Tn);const gn=[];for(let In=0;In<hn;In+=nn){const Ln=Math.min(In+nn,hn),Mt=Tn.subarray(In,Ln);gn.push(String.fromCharCode.apply(null,Mt))}return gn.join("")}function an(Tn){typeof Tn!="string"&&Ut("Invalid argument for stringToBytes");const hn=Tn.length,nn=new Uint8Array(hn);for(let gn=0;gn<hn;++gn)nn[gn]=Tn.charCodeAt(gn)&255;return nn}function ln(Tn){return String.fromCharCode(Tn>>24&255,Tn>>16&255,Tn>>8&255,Tn&255)}function cn(Tn){return Object.keys(Tn).length}function dn(Tn){const hn=Object.create(null);for(const[nn,gn]of Tn)hn[nn]=gn;return hn}function qt(){const Tn=new Uint8Array(4);return Tn[0]=1,new Uint32Array(Tn.buffer,0,1)[0]===1}function sn(){try{return new Function(""),!0}catch{return!1}}class It{static get isLittleEndian(){return Ct(this,"isLittleEndian",qt())}static get isEvalSupported(){return Ct(this,"isEvalSupported",sn())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ct(this,"platform",{isWin:!1,isMac:!1}):Ct(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var hn,nn;return Ct(this,"isCSSRoundSupported",(nn=(hn=globalThis.CSS)==null?void 0:hn.supports)==null?void 0:nn.call(hn,"width: round(1.5px, 1px)"))}}e.FeatureTest=It;const Ht=[...Array(256).keys()].map(Tn=>Tn.toString(16).padStart(2,"0"));class Qt{static makeHexColor(hn,nn,gn){return`#${Ht[hn]}${Ht[nn]}${Ht[gn]}`}static scaleMinMax(hn,nn){let gn;hn[0]?(hn[0]<0&&(gn=nn[0],nn[0]=nn[1],nn[1]=gn),nn[0]*=hn[0],nn[1]*=hn[0],hn[3]<0&&(gn=nn[2],nn[2]=nn[3],nn[3]=gn),nn[2]*=hn[3],nn[3]*=hn[3]):(gn=nn[0],nn[0]=nn[2],nn[2]=gn,gn=nn[1],nn[1]=nn[3],nn[3]=gn,hn[1]<0&&(gn=nn[2],nn[2]=nn[3],nn[3]=gn),nn[2]*=hn[1],nn[3]*=hn[1],hn[2]<0&&(gn=nn[0],nn[0]=nn[1],nn[1]=gn),nn[0]*=hn[2],nn[1]*=hn[2]),nn[0]+=hn[4],nn[1]+=hn[4],nn[2]+=hn[5],nn[3]+=hn[5]}static transform(hn,nn){return[hn[0]*nn[0]+hn[2]*nn[1],hn[1]*nn[0]+hn[3]*nn[1],hn[0]*nn[2]+hn[2]*nn[3],hn[1]*nn[2]+hn[3]*nn[3],hn[0]*nn[4]+hn[2]*nn[5]+hn[4],hn[1]*nn[4]+hn[3]*nn[5]+hn[5]]}static applyTransform(hn,nn){const gn=hn[0]*nn[0]+hn[1]*nn[2]+nn[4],In=hn[0]*nn[1]+hn[1]*nn[3]+nn[5];return[gn,In]}static applyInverseTransform(hn,nn){const gn=nn[0]*nn[3]-nn[1]*nn[2],In=(hn[0]*nn[3]-hn[1]*nn[2]+nn[2]*nn[5]-nn[4]*nn[3])/gn,Ln=(-hn[0]*nn[1]+hn[1]*nn[0]+nn[4]*nn[1]-nn[5]*nn[0])/gn;return[In,Ln]}static getAxialAlignedBoundingBox(hn,nn){const gn=this.applyTransform(hn,nn),In=this.applyTransform(hn.slice(2,4),nn),Ln=this.applyTransform([hn[0],hn[3]],nn),Mt=this.applyTransform([hn[2],hn[1]],nn);return[Math.min(gn[0],In[0],Ln[0],Mt[0]),Math.min(gn[1],In[1],Ln[1],Mt[1]),Math.max(gn[0],In[0],Ln[0],Mt[0]),Math.max(gn[1],In[1],Ln[1],Mt[1])]}static inverseTransform(hn){const nn=hn[0]*hn[3]-hn[1]*hn[2];return[hn[3]/nn,-hn[1]/nn,-hn[2]/nn,hn[0]/nn,(hn[2]*hn[5]-hn[4]*hn[3])/nn,(hn[4]*hn[1]-hn[5]*hn[0])/nn]}static singularValueDecompose2dScale(hn){const nn=[hn[0],hn[2],hn[1],hn[3]],gn=hn[0]*nn[0]+hn[1]*nn[2],In=hn[0]*nn[1]+hn[1]*nn[3],Ln=hn[2]*nn[0]+hn[3]*nn[2],Mt=hn[2]*nn[1]+hn[3]*nn[3],Jt=(gn+Mt)/2,pn=Math.sqrt((gn+Mt)**2-4*(gn*Mt-Ln*In))/2,bn=Jt+pn||1,_n=Jt-pn||1;return[Math.sqrt(bn),Math.sqrt(_n)]}static normalizeRect(hn){const nn=hn.slice(0);return hn[0]>hn[2]&&(nn[0]=hn[2],nn[2]=hn[0]),hn[1]>hn[3]&&(nn[1]=hn[3],nn[3]=hn[1]),nn}static intersect(hn,nn){const gn=Math.max(Math.min(hn[0],hn[2]),Math.min(nn[0],nn[2])),In=Math.min(Math.max(hn[0],hn[2]),Math.max(nn[0],nn[2]));if(gn>In)return null;const Ln=Math.max(Math.min(hn[1],hn[3]),Math.min(nn[1],nn[3])),Mt=Math.min(Math.max(hn[1],hn[3]),Math.max(nn[1],nn[3]));return Ln>Mt?null:[gn,Ln,In,Mt]}static bezierBoundingBox(hn,nn,gn,In,Ln,Mt,Jt,pn){const bn=[],_n=[[],[]];let xn,Nt,jt,Kt,en,on,fn,yn;for(let jn=0;jn<2;++jn){if(jn===0?(Nt=6*hn-12*gn+6*Ln,xn=-3*hn+9*gn-9*Ln+3*Jt,jt=3*gn-3*hn):(Nt=6*nn-12*In+6*Mt,xn=-3*nn+9*In-9*Mt+3*pn,jt=3*In-3*nn),Math.abs(xn)<1e-12){if(Math.abs(Nt)<1e-12)continue;Kt=-jt/Nt,0<Kt&&Kt<1&&bn.push(Kt);continue}fn=Nt*Nt-4*jt*xn,yn=Math.sqrt(fn),!(fn<0)&&(en=(-Nt+yn)/(2*xn),0<en&&en<1&&bn.push(en),on=(-Nt-yn)/(2*xn),0<on&&on<1&&bn.push(on))}let Rn=bn.length,kn;const Sn=Rn;for(;Rn--;)Kt=bn[Rn],kn=1-Kt,_n[0][Rn]=kn*kn*kn*hn+3*kn*kn*Kt*gn+3*kn*Kt*Kt*Ln+Kt*Kt*Kt*Jt,_n[1][Rn]=kn*kn*kn*nn+3*kn*kn*Kt*In+3*kn*Kt*Kt*Mt+Kt*Kt*Kt*pn;return _n[0][Sn]=hn,_n[1][Sn]=nn,_n[0][Sn+1]=Jt,_n[1][Sn+1]=pn,_n[0].length=_n[1].length=Sn+2,[Math.min(..._n[0]),Math.min(..._n[1]),Math.max(..._n[0]),Math.max(..._n[1])]}}e.Util=Qt;const tn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function un(Tn){if(Tn[0]>=""){let nn;if(Tn[0]===""&&Tn[1]===""?nn="utf-16be":Tn[0]===""&&Tn[1]===""?nn="utf-16le":Tn[0]===""&&Tn[1]===""&&Tn[2]===""&&(nn="utf-8"),nn)try{const gn=new TextDecoder(nn,{fatal:!0}),In=an(Tn);return gn.decode(In)}catch(gn){Bt(`stringToPDFString: "${gn}".`)}}const hn=[];for(let nn=0,gn=Tn.length;nn<gn;nn++){const In=tn[Tn.charCodeAt(nn)];hn.push(In?String.fromCharCode(In):Tn.charAt(nn))}return hn.join("")}function mn(Tn){return decodeURIComponent(escape(Tn))}function vn(Tn){return unescape(encodeURIComponent(Tn))}function Zt(Tn){return typeof Tn=="object"&&(Tn==null?void 0:Tn.byteLength)!==void 0}function An(Tn,hn){if(Tn.length!==hn.length)return!1;for(let nn=0,gn=Tn.length;nn<gn;nn++)if(Tn[nn]!==hn[nn])return!1;return!0}function En(Tn=new Date){return[Tn.getUTCFullYear().toString(),(Tn.getUTCMonth()+1).toString().padStart(2,"0"),Tn.getUTCDate().toString().padStart(2,"0"),Tn.getUTCHours().toString().padStart(2,"0"),Tn.getUTCMinutes().toString().padStart(2,"0"),Tn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Fn{constructor(){Dt(this,Wn,!1);this.promise=new Promise((hn,nn)=>{this.resolve=gn=>{Pt(this,Wn,!0),hn(gn)},this.reject=gn=>{Pt(this,Wn,!0),nn(gn)}})}get settled(){return et(this,Wn)}}Wn=new WeakMap,e.PromiseCapability=Fn;let Mn=null,Bn=null;function wn(Tn){return Mn||(Mn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bn=new Map([["","t"]])),Tn.replaceAll(Mn,(hn,nn,gn)=>nn?nn.normalize("NFKC"):Bn.get(gn))}function Dn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Tn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Tn);else for(let hn=0;hn<32;hn++)Tn[hn]=Math.floor(Math.random()*255);return rn(Tn)}const Un="pdfjs_internal_id_";e.AnnotationPrefix=Un},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var i,s,a,o,gu,Yv,nt,tt,st,rt,at,it,ct,ot,ut,Kv,lt,ht,N0,mt,ft;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(pt){if(typeof pt=="string"||pt instanceof URL?pt={url:pt}:(0,_util.isArrayBuffer)(pt)&&(pt={data:pt}),typeof pt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!pt.url&&!pt.data&&!pt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const vt=new PDFDocumentLoadingTask,{docId:At}=vt,Rt=pt.url?getUrlProp(pt.url):null,bt=pt.data?getDataProp(pt.data):null,Tt=pt.httpHeaders||null,Lt=pt.withCredentials===!0,Yt=pt.password??null,zt=pt.range instanceof PDFDataRangeTransport?pt.range:null,Wt=Number.isInteger(pt.rangeChunkSize)&&pt.rangeChunkSize>0?pt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Bt=pt.worker instanceof PDFWorker?pt.worker:null;const Ut=pt.verbosity,_t=typeof pt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(pt.docBaseUrl)?pt.docBaseUrl:null,$t=typeof pt.cMapUrl=="string"?pt.cMapUrl:null,Xt=pt.cMapPacked!==!1,Ct=pt.CMapReaderFactory||DefaultCMapReaderFactory,yt=typeof pt.standardFontDataUrl=="string"?pt.standardFontDataUrl:null,Et=pt.StandardFontDataFactory||DefaultStandardFontDataFactory,St=pt.stopAtErrors!==!0,Ft=Number.isInteger(pt.maxImageSize)&&pt.maxImageSize>-1?pt.maxImageSize:-1,kt=pt.isEvalSupported!==!1,Ot=typeof pt.isOffscreenCanvasSupported=="boolean"?pt.isOffscreenCanvasSupported:!_util.isNodeJS,Gt=Number.isInteger(pt.canvasMaxAreaInBytes)?pt.canvasMaxAreaInBytes:-1,Vt=typeof pt.disableFontFace=="boolean"?pt.disableFontFace:_util.isNodeJS,rn=pt.fontExtraProperties===!0,an=pt.enableXfa===!0,ln=pt.ownerDocument||globalThis.document,cn=pt.disableRange===!0,dn=pt.disableStream===!0,qt=pt.disableAutoFetch===!0,sn=pt.pdfBug===!0,It=zt?zt.length:pt.length??NaN,Ht=typeof pt.useSystemFonts=="boolean"?pt.useSystemFonts:!_util.isNodeJS&&!Vt,Qt=typeof pt.useWorkerFetch=="boolean"?pt.useWorkerFetch:Ct===_display_utils.DOMCMapReaderFactory&&Et===_display_utils.DOMStandardFontDataFactory&&$t&&yt&&(0,_display_utils.isValidFetchUrl)($t,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(yt,document.baseURI),tn=pt.canvasFactory||new DefaultCanvasFactory({ownerDocument:ln}),un=pt.filterFactory||new DefaultFilterFactory({docId:At,ownerDocument:ln}),mn=null;(0,_util.setVerbosityLevel)(Ut);const vn={canvasFactory:tn,filterFactory:un};if(Qt||(vn.cMapReaderFactory=new Ct({baseUrl:$t,isCompressed:Xt}),vn.standardFontDataFactory=new Et({baseUrl:yt})),!Bt){const En={verbosity:Ut,port:_worker_options.GlobalWorkerOptions.workerPort};Bt=En.port?PDFWorker.fromPort(En):new PDFWorker(En),vt._worker=Bt}const Zt={docId:At,apiVersion:"3.11.174",data:bt,password:Yt,disableAutoFetch:qt,rangeChunkSize:Wt,length:It,docBaseUrl:_t,enableXfa:an,evaluatorOptions:{maxImageSize:Ft,disableFontFace:Vt,ignoreErrors:St,isEvalSupported:kt,isOffscreenCanvasSupported:Ot,canvasMaxAreaInBytes:Gt,fontExtraProperties:rn,useSystemFonts:Ht,cMapUrl:Qt?$t:null,standardFontDataUrl:Qt?yt:null}},An={ignoreErrors:St,isEvalSupported:kt,disableFontFace:Vt,fontExtraProperties:rn,enableXfa:an,ownerDocument:ln,disableAutoFetch:qt,pdfBug:sn,styleElement:mn};return Bt.promise.then(function(){if(vt.destroyed)throw new Error("Loading aborted");const En=_fetchDocument(Bt,Zt),Fn=new Promise(function(Mn){let Bn;zt?Bn=new _transport_stream.PDFDataTransportStream({length:It,initialData:zt.initialData,progressiveDone:zt.progressiveDone,contentDispositionFilename:zt.contentDispositionFilename,disableRange:cn,disableStream:dn},zt):bt||(Bn=(Dn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Dn):(0,_display_utils.isValidFetchUrl)(Dn.url)?new _displayFetch_stream.PDFFetchStream(Dn):new _displayNetwork.PDFNetworkStream(Dn))({url:Rt,length:It,httpHeaders:Tt,withCredentials:Lt,rangeChunkSize:Wt,disableRange:cn,disableStream:dn})),Mn(Bn)});return Promise.all([En,Fn]).then(function([Mn,Bn]){if(vt.destroyed)throw new Error("Loading aborted");const wn=new _message_handler.MessageHandler(At,Mn,Bt.port),Dn=new WorkerTransport(wn,vt,Bn,An,vn);vt._transport=Dn,wn.send("Ready",null)})}).catch(vt._capability.reject),vt}async function _fetchDocument(pt,vt){if(pt.destroyed)throw new Error("Worker was destroyed");const At=await pt.messageHandler.sendWithPromise("GetDocRequest",vt,vt.data?[vt.data.buffer]:null);if(pt.destroyed)throw new Error("Worker was destroyed");return At}function getUrlProp(pt){if(pt instanceof URL)return pt.href;try{return new URL(pt,window.location).href}catch{if(_util.isNodeJS&&typeof pt=="string")return pt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(pt){if(_util.isNodeJS&&typeof Buffer<"u"&&pt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(pt instanceof Uint8Array&&pt.byteLength===pt.buffer.byteLength)return pt;if(typeof pt=="string")return(0,_util.stringToBytes)(pt);if(typeof pt=="object"&&!isNaN(pt==null?void 0:pt.length)||(0,_util.isArrayBuffer)(pt))return new Uint8Array(pt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ds(e,i)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var vt,At,Rt;this.destroyed=!0;try{(vt=this._worker)!=null&&vt.port&&(this._worker._pendingDestroy=!0),await((At=this._transport)==null?void 0:At.destroy())}catch(bt){throw(Rt=this._worker)!=null&&Rt.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};i=new WeakMap,Dt(e,i,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(vt,At,Rt=!1,bt=null){this.length=vt,this.initialData=At,this.progressiveDone=Rt,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(vt){this._rangeListeners.push(vt)}addProgressListener(vt){this._progressListeners.push(vt)}addProgressiveReadListener(vt){this._progressiveReadListeners.push(vt)}addProgressiveDoneListener(vt){this._progressiveDoneListeners.push(vt)}onDataRange(vt,At){for(const Rt of this._rangeListeners)Rt(vt,At)}onDataProgress(vt,At){this._readyCapability.promise.then(()=>{for(const Rt of this._progressListeners)Rt(vt,At)})}onDataProgressiveRead(vt){this._readyCapability.promise.then(()=>{for(const At of this._progressiveReadListeners)At(vt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const vt of this._progressiveDoneListeners)vt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(vt,At){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(vt,At){this._pdfInfo=vt,this._transport=At,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Rt=>{if(!Rt)return Rt;const bt=[];for(const Tt in Rt)bt.push(...Rt[Tt]);return bt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(vt){return this._transport.getPage(vt)}getPageIndex(vt){return this._transport.getPageIndex(vt)}getDestinations(){return this._transport.getDestinations()}getDestination(vt){return this._transport.getDestination(vt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(vt=!1){return this._transport.startCleanup(vt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(vt,At,Rt,bt=!1){Dt(this,o);Dt(this,s,null);Dt(this,a,!1);this._pageIndex=vt,this._pageInfo=At,this._transport=Rt,this._stats=bt?new _display_utils.StatTimer:null,this._pdfBug=bt,this.commonObjs=Rt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:vt,rotation:At=this.rotate,offsetX:Rt=0,offsetY:bt=0,dontFlip:Tt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:vt,rotation:At,offsetX:Rt,offsetY:bt,dontFlip:Tt})}getAnnotations({intent:vt="display"}={}){const At=this._transport.getRenderingIntent(vt);return this._transport.getAnnotations(this._pageIndex,At.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var vt;return((vt=this._transport._htmlForXfa)==null?void 0:vt.children[this._pageIndex])||null}render({canvasContext:vt,viewport:At,intent:Rt="display",annotationMode:bt=_util.AnnotationMode.ENABLE,transform:Tt=null,background:Lt=null,optionalContentConfigPromise:Yt=null,annotationCanvasMap:zt=null,pageColors:Wt=null,printAnnotationStorage:Bt=null}){var Et,St;(Et=this._stats)==null||Et.time("Overall");const Ut=this._transport.getRenderingIntent(Rt,bt,Bt);Pt(this,a,!1),wt(this,o,Yv).call(this),Yt||(Yt=this._transport.getOptionalContentConfig());let _t=this._intentStates.get(Ut.cacheKey);_t||(_t=Object.create(null),this._intentStates.set(Ut.cacheKey,_t)),_t.streamReaderCancelTimeout&&(clearTimeout(_t.streamReaderCancelTimeout),_t.streamReaderCancelTimeout=null);const $t=!!(Ut.renderingIntent&_util.RenderingIntentFlag.PRINT);_t.displayReadyCapability||(_t.displayReadyCapability=new _util.PromiseCapability,_t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(St=this._stats)==null||St.time("Page Request"),this._pumpOperatorList(Ut));const Xt=Ft=>{var kt,Ot;_t.renderTasks.delete(Ct),(this._maybeCleanupAfterRender||$t)&&Pt(this,a,!0),wt(this,o,gu).call(this,!$t),Ft?(Ct.capability.reject(Ft),this._abortOperatorList({intentState:_t,reason:Ft instanceof Error?Ft:new Error(Ft)})):Ct.capability.resolve(),(kt=this._stats)==null||kt.timeEnd("Rendering"),(Ot=this._stats)==null||Ot.timeEnd("Overall")},Ct=new InternalRenderTask({callback:Xt,params:{canvasContext:vt,viewport:At,transform:Tt,background:Lt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:zt,operatorList:_t.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!$t,pdfBug:this._pdfBug,pageColors:Wt});(_t.renderTasks||(_t.renderTasks=new Set)).add(Ct);const yt=Ct.task;return Promise.all([_t.displayReadyCapability.promise,Yt]).then(([Ft,kt])=>{var Ot;if(this.destroyed){Xt();return}(Ot=this._stats)==null||Ot.time("Rendering"),Ct.initializeGraphics({transparency:Ft,optionalContentConfig:kt}),Ct.operatorListChanged()}).catch(Xt),yt}getOperatorList({intent:vt="display",annotationMode:At=_util.AnnotationMode.ENABLE,printAnnotationStorage:Rt=null}={}){var zt;function bt(){Lt.operatorList.lastChunk&&(Lt.opListReadCapability.resolve(Lt.operatorList),Lt.renderTasks.delete(Yt))}const Tt=this._transport.getRenderingIntent(vt,At,Rt,!0);let Lt=this._intentStates.get(Tt.cacheKey);Lt||(Lt=Object.create(null),this._intentStates.set(Tt.cacheKey,Lt));let Yt;return Lt.opListReadCapability||(Yt=Object.create(null),Yt.operatorListChanged=bt,Lt.opListReadCapability=new _util.PromiseCapability,(Lt.renderTasks||(Lt.renderTasks=new Set)).add(Yt),Lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(zt=this._stats)==null||zt.time("Page Request"),this._pumpOperatorList(Tt)),Lt.opListReadCapability.promise}streamTextContent({includeMarkedContent:vt=!1,disableNormalization:At=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:vt===!0,disableNormalization:At===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent(vt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Rt=>_xfa_text.XfaText.textContent(Rt));const At=this.streamTextContent(vt);return new Promise(function(Rt,bt){function Tt(){Lt.read().then(function({value:zt,done:Wt}){if(Wt){Rt(Yt);return}Object.assign(Yt.styles,zt.styles),Yt.items.push(...zt.items),Tt()},bt)}const Lt=At.getReader(),Yt={items:[],styles:Object.create(null)};Tt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const vt=[];for(const At of this._intentStates.values())if(this._abortOperatorList({intentState:At,reason:new Error("Page was destroyed."),force:!0}),!At.opListReadCapability)for(const Rt of At.renderTasks)vt.push(Rt.completed),Rt.cancel();return this.objs.clear(),Pt(this,a,!1),wt(this,o,Yv).call(this),Promise.all(vt)}cleanup(vt=!1){Pt(this,a,!0);const At=wt(this,o,gu).call(this,!1);return vt&&At&&this._stats&&(this._stats=new _display_utils.StatTimer),At}_startRenderPage(vt,At){var bt,Tt;const Rt=this._intentStates.get(At);Rt&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(Tt=Rt.displayReadyCapability)==null||Tt.resolve(vt))}_renderPageChunk(vt,At){for(let Rt=0,bt=vt.length;Rt<bt;Rt++)At.operatorList.fnArray.push(vt.fnArray[Rt]),At.operatorList.argsArray.push(vt.argsArray[Rt]);At.operatorList.lastChunk=vt.lastChunk,At.operatorList.separateAnnots=vt.separateAnnots;for(const Rt of At.renderTasks)Rt.operatorListChanged();vt.lastChunk&&wt(this,o,gu).call(this,!0)}_pumpOperatorList({renderingIntent:vt,cacheKey:At,annotationStorageSerializable:Rt}){const{map:bt,transfers:Tt}=Rt,Yt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:vt,cacheKey:At,annotationStorage:bt},Tt).getReader(),zt=this._intentStates.get(At);zt.streamReader=Yt;const Wt=()=>{Yt.read().then(({value:Bt,done:Ut})=>{if(Ut){zt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Bt,zt),Wt())},Bt=>{if(zt.streamReader=null,!this._transport.destroyed){if(zt.operatorList){zt.operatorList.lastChunk=!0;for(const Ut of zt.renderTasks)Ut.operatorListChanged();wt(this,o,gu).call(this,!0)}if(zt.displayReadyCapability)zt.displayReadyCapability.reject(Bt);else if(zt.opListReadCapability)zt.opListReadCapability.reject(Bt);else throw Bt}})};Wt()}_abortOperatorList({intentState:vt,reason:At,force:Rt=!1}){if(vt.streamReader){if(vt.streamReaderCancelTimeout&&(clearTimeout(vt.streamReaderCancelTimeout),vt.streamReaderCancelTimeout=null),!Rt){if(vt.renderTasks.size>0)return;if(At instanceof _display_utils.RenderingCancelledException){let bt=RENDERING_CANCELLED_TIMEOUT;At.extraDelay>0&&At.extraDelay<1e3&&(bt+=At.extraDelay),vt.streamReaderCancelTimeout=setTimeout(()=>{vt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:vt,reason:At,force:!0})},bt);return}}if(vt.streamReader.cancel(new _util.AbortException(At.message)).catch(()=>{}),vt.streamReader=null,!this._transport.destroyed){for(const[bt,Tt]of this._intentStates)if(Tt===vt){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,a=new WeakMap,o=new WeakSet,gu=function(vt=!1){if(wt(this,o,Yv).call(this),!et(this,a)||this.destroyed)return!1;if(vt)return Pt(this,s,setTimeout(()=>{Pt(this,s,null),wt(this,o,gu).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:At,operatorList:Rt}of this._intentStates.values())if(At.size>0||!Rt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Pt(this,a,!1),!0},Yv=function(){et(this,s)&&(clearTimeout(et(this,s)),Pt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Dt(this,nt,new Set);Dt(this,tt,Promise.resolve())}postMessage(vt,At){const Rt={data:structuredClone(vt,At?{transfer:At}:null)};et(this,tt).then(()=>{for(const bt of et(this,nt))bt.call(this,Rt)})}addEventListener(vt,At){et(this,nt).add(At)}removeEventListener(vt,At){et(this,nt).delete(At)}terminate(){et(this,nt).clear()}}nt=new WeakMap,tt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const pt=(st=document==null?void 0:document.currentScript)==null?void 0:st.src;pt&&(PDFWorkerUtil.fallbackWorkerSrc=pt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(pt,vt){let At;try{if(At=new URL(pt),!At.origin||At.origin==="null")return!1}catch{return!1}const Rt=new URL(vt,At);return At.origin===Rt.origin},PDFWorkerUtil.createCDNWrapper=function(pt){const vt=`importScripts("${pt}");`;return URL.createObjectURL(new Blob([vt]))}}const _PDFWorker=class _PDFWorker{constructor({name:pt=null,port:vt=null,verbosity:At=(0,_util.getVerbosityLevel)()}={}){var Rt;if(this.name=pt,this.destroyed=!1,this.verbosity=At,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,vt){if((Rt=et(_PDFWorker,rt))!=null&&Rt.has(vt))throw new Error("Cannot use more than one PDFWorker per port.");(et(_PDFWorker,rt)||Pt(_PDFWorker,rt,new WeakMap)).set(vt,this),this._initializeFromPort(vt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(pt){this._port=pt,this._messageHandler=new _message_handler.MessageHandler("main","worker",pt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:pt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,pt)||(pt=PDFWorkerUtil.createCDNWrapper(new URL(pt,window.location).href));const vt=new Worker(pt),At=new _message_handler.MessageHandler("main","worker",vt),Rt=()=>{vt.removeEventListener("error",bt),At.destroy(),vt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||Rt()};vt.addEventListener("error",bt),At.on("test",Lt=>{if(vt.removeEventListener("error",bt),this.destroyed){Rt();return}Lt?(this._messageHandler=At,this._port=vt,this._webWorker=vt,this._readyCapability.resolve(),At.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),At.destroy(),vt.terminate())}),At.on("ready",Lt=>{if(vt.removeEventListener("error",bt),this.destroyed){Rt();return}try{Tt()}catch{this._setupFakeWorker()}});const Tt=()=>{const Lt=new Uint8Array;At.send("test",Lt,[Lt.buffer])};Tt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(pt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const vt=new LoopbackPort;this._port=vt;const At=`fake${PDFWorkerUtil.fakeWorkerId++}`,Rt=new _message_handler.MessageHandler(At+"_worker",At,vt);pt.setup(Rt,vt);const bt=new _message_handler.MessageHandler(At,At+"_worker",vt);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(pt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${pt.message}".`))})}destroy(){var pt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(pt=et(_PDFWorker,rt))==null||pt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(pt){var At;if(!(pt!=null&&pt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const vt=(At=et(this,rt))==null?void 0:At.get(pt.port);if(vt){if(vt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return vt}return new _PDFWorker(pt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var pt;try{return((pt=globalThis.pdfjsWorker)==null?void 0:pt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};rt=new WeakMap,Dt(_PDFWorker,rt);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(vt,At,Rt,bt,Tt){Dt(this,ut);Dt(this,at,new Map);Dt(this,it,new Map);Dt(this,ct,new Map);Dt(this,ot,null);this.messageHandler=vt,this.loadingTask=At,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this._params=bt,this.canvasFactory=Tt.canvasFactory,this.filterFactory=Tt.filterFactory,this.cMapReaderFactory=Tt.cMapReaderFactory,this.standardFontDataFactory=Tt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Rt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(vt,At=_util.AnnotationMode.ENABLE,Rt=null,bt=!1){let Tt=_util.RenderingIntentFlag.DISPLAY,Lt=_annotation_storage.SerializableEmpty;switch(vt){case"any":Tt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Tt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${vt}`)}switch(At){case _util.AnnotationMode.DISABLE:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Lt=(Tt&_util.RenderingIntentFlag.PRINT&&Rt instanceof _annotation_storage.PrintAnnotationStorage?Rt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${At}`)}return bt&&(Tt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Tt,cacheKey:`${Tt}_${Lt.hash}`,annotationStorageSerializable:Lt}}destroy(){var Rt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Rt=et(this,ot))==null||Rt.reject(new Error("Worker was destroyed during onPassword callback"));const vt=[];for(const bt of et(this,it).values())vt.push(bt._destroy());et(this,it).clear(),et(this,ct).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const At=this.messageHandler.sendWithPromise("Terminate",null);return vt.push(At),Promise.all(vt).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),et(this,at).clear(),this.filterFactory.destroy(),(bt=this._networkStream)==null||bt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:vt,loadingTask:At}=this;vt.on("GetReader",(Rt,bt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Tt=>{this._lastProgress={loaded:Tt.loaded,total:Tt.total}},bt.onPull=()=>{this._fullReader.read().then(function({value:Tt,done:Lt}){if(Lt){bt.close();return}(0,_util.assert)(Tt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Tt),1,[Tt])}).catch(Tt=>{bt.error(Tt)})},bt.onCancel=Tt=>{this._fullReader.cancel(Tt),bt.ready.catch(Lt=>{if(!this.destroyed)throw Lt})}}),vt.on("ReaderHeadersReady",Rt=>{const bt=new _util.PromiseCapability,Tt=this._fullReader;return Tt.headersReady.then(()=>{var Lt;(!Tt.isStreamingSupported||!Tt.isRangeSupported)&&(this._lastProgress&&((Lt=At.onProgress)==null||Lt.call(At,this._lastProgress)),Tt.onProgress=Yt=>{var zt;(zt=At.onProgress)==null||zt.call(At,{loaded:Yt.loaded,total:Yt.total})}),bt.resolve({isStreamingSupported:Tt.isStreamingSupported,isRangeSupported:Tt.isRangeSupported,contentLength:Tt.contentLength})},bt.reject),bt.promise}),vt.on("GetRangeReader",(Rt,bt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Tt=this._networkStream.getRangeReader(Rt.begin,Rt.end);if(!Tt){bt.close();return}bt.onPull=()=>{Tt.read().then(function({value:Lt,done:Yt}){if(Yt){bt.close();return}(0,_util.assert)(Lt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Lt),1,[Lt])}).catch(Lt=>{bt.error(Lt)})},bt.onCancel=Lt=>{Tt.cancel(Lt),bt.ready.catch(Yt=>{if(!this.destroyed)throw Yt})}}),vt.on("GetDoc",({pdfInfo:Rt})=>{this._numPages=Rt.numPages,this._htmlForXfa=Rt.htmlForXfa,delete Rt.htmlForXfa,At._capability.resolve(new PDFDocumentProxy(Rt,this))}),vt.on("DocException",function(Rt){let bt;switch(Rt.name){case"PasswordException":bt=new _util.PasswordException(Rt.message,Rt.code);break;case"InvalidPDFException":bt=new _util.InvalidPDFException(Rt.message);break;case"MissingPDFException":bt=new _util.MissingPDFException(Rt.message);break;case"UnexpectedResponseException":bt=new _util.UnexpectedResponseException(Rt.message,Rt.status);break;case"UnknownErrorException":bt=new _util.UnknownErrorException(Rt.message,Rt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}At._capability.reject(bt)}),vt.on("PasswordRequest",Rt=>{if(Pt(this,ot,new _util.PromiseCapability),At.onPassword){const bt=Tt=>{Tt instanceof Error?et(this,ot).reject(Tt):et(this,ot).resolve({password:Tt})};try{At.onPassword(bt,Rt.code)}catch(Tt){et(this,ot).reject(Tt)}}else et(this,ot).reject(new _util.PasswordException(Rt.message,Rt.code));return et(this,ot).promise}),vt.on("DataLoaded",Rt=>{var bt;(bt=At.onProgress)==null||bt.call(At,{loaded:Rt.length,total:Rt.length}),this.downloadInfoCapability.resolve(Rt)}),vt.on("StartRenderPage",Rt=>{if(this.destroyed)return;et(this,it).get(Rt.pageIndex)._startRenderPage(Rt.transparency,Rt.cacheKey)}),vt.on("commonobj",([Rt,bt,Tt])=>{var Lt;if(!this.destroyed&&!this.commonObjs.has(Rt))switch(bt){case"Font":const Yt=this._params;if("error"in Tt){const Bt=Tt.error;(0,_util.warn)(`Error during font loading: ${Bt}`),this.commonObjs.resolve(Rt,Bt);break}const zt=Yt.pdfBug&&((Lt=globalThis.FontInspector)!=null&&Lt.enabled)?(Bt,Ut)=>globalThis.FontInspector.fontAdded(Bt,Ut):null,Wt=new _font_loader.FontFaceObject(Tt,{isEvalSupported:Yt.isEvalSupported,disableFontFace:Yt.disableFontFace,ignoreErrors:Yt.ignoreErrors,inspectFont:zt});this.fontLoader.bind(Wt).catch(Bt=>vt.sendWithPromise("FontFallback",{id:Rt})).finally(()=>{!Yt.fontExtraProperties&&Wt.data&&(Wt.data=null),this.commonObjs.resolve(Rt,Wt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Rt,Tt);break;default:throw new Error(`Got unknown common object type ${bt}`)}}),vt.on("obj",([Rt,bt,Tt,Lt])=>{var zt;if(this.destroyed)return;const Yt=et(this,it).get(bt);if(!Yt.objs.has(Rt))switch(Tt){case"Image":if(Yt.objs.resolve(Rt,Lt),Lt){let Wt;if(Lt.bitmap){const{width:Bt,height:Ut}=Lt;Wt=Bt*Ut*4}else Wt=((zt=Lt.data)==null?void 0:zt.length)||0;Wt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Yt._maybeCleanupAfterRender=!0)}break;case"Pattern":Yt.objs.resolve(Rt,Lt);break;default:throw new Error(`Got unknown object type ${Tt}`)}}),vt.on("DocProgress",Rt=>{var bt;this.destroyed||(bt=At.onProgress)==null||bt.call(At,{loaded:Rt.loaded,total:Rt.total})}),vt.on("FetchBuiltInCMap",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Rt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),vt.on("FetchStandardFontData",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Rt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Rt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:vt,transfers:At}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:vt,filename:((Rt=this._fullReader)==null?void 0:Rt.filename)??null},At).finally(()=>{this.annotationStorage.resetModified()})}getPage(vt){if(!Number.isInteger(vt)||vt<=0||vt>this._numPages)return Promise.reject(new Error("Invalid page request."));const At=vt-1,Rt=et(this,ct).get(At);if(Rt)return Rt;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:At}).then(Tt=>{if(this.destroyed)throw new Error("Transport destroyed");const Lt=new PDFPageProxy(At,Tt,this,this._params.pdfBug);return et(this,it).set(At,Lt),Lt});return et(this,ct).set(At,bt),bt}getPageIndex(vt){return typeof vt!="object"||vt===null||!Number.isInteger(vt.num)||vt.num<0||!Number.isInteger(vt.gen)||vt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:vt.num,gen:vt.gen})}getAnnotations(vt,At){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:vt,intent:At})}getFieldObjects(){return wt(this,ut,Kv).call(this,"GetFieldObjects")}hasJSActions(){return wt(this,ut,Kv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(vt){return typeof vt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:vt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return wt(this,ut,Kv).call(this,"GetDocJSActions")}getPageJSActions(vt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:vt})}getStructTree(vt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:vt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(vt=>new _optional_content_config.OptionalContentConfig(vt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const vt="GetMetadata",At=et(this,at).get(vt);if(At)return At;const Rt=this.messageHandler.sendWithPromise(vt,null).then(bt=>{var Tt,Lt;return{info:bt[0],metadata:bt[1]?new _metadata.Metadata(bt[1]):null,contentDispositionFilename:((Tt=this._fullReader)==null?void 0:Tt.filename)??null,contentLength:((Lt=this._fullReader)==null?void 0:Lt.contentLength)??null}});return et(this,at).set(vt,Rt),Rt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(vt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const At of et(this,it).values())if(!At.cleanup())throw new Error(`startCleanup: Page ${At.pageNumber} is currently rendering.`);this.commonObjs.clear(),vt||this.fontLoader.clear(),et(this,at).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:vt,enableXfa:At}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:vt,enableXfa:At})}}at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakSet,Kv=function(vt,At=null){const Rt=et(this,at).get(vt);if(Rt)return Rt;const bt=this.messageHandler.sendWithPromise(vt,At);return et(this,at).set(vt,bt),bt};class PDFObjects{constructor(){Dt(this,ht);Dt(this,lt,Object.create(null))}get(vt,At=null){if(At){const bt=wt(this,ht,N0).call(this,vt);return bt.capability.promise.then(()=>At(bt.data)),null}const Rt=et(this,lt)[vt];if(!(Rt!=null&&Rt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${vt}.`);return Rt.data}has(vt){const At=et(this,lt)[vt];return(At==null?void 0:At.capability.settled)||!1}resolve(vt,At=null){const Rt=wt(this,ht,N0).call(this,vt);Rt.data=At,Rt.capability.resolve()}clear(){var vt;for(const At in et(this,lt)){const{data:Rt}=et(this,lt)[At];(vt=Rt==null?void 0:Rt.bitmap)==null||vt.close()}Pt(this,lt,Object.create(null))}}lt=new WeakMap,ht=new WeakSet,N0=function(vt){var At;return(At=et(this,lt))[vt]||(At[vt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(vt){Dt(this,mt,null);Pt(this,mt,vt),this.onContinue=null}get promise(){return et(this,mt).capability.promise}cancel(vt=0){et(this,mt).cancel(null,vt)}get separateAnnots(){const{separateAnnots:vt}=et(this,mt).operatorList;if(!vt)return!1;const{annotationCanvasMap:At}=et(this,mt);return vt.form||vt.canvas&&(At==null?void 0:At.size)>0}}mt=new WeakMap,exports.RenderTask=RenderTask;const gt=class gt{constructor({callback:vt,params:At,objs:Rt,commonObjs:bt,annotationCanvasMap:Tt,operatorList:Lt,pageIndex:Yt,canvasFactory:zt,filterFactory:Wt,useRequestAnimationFrame:Bt=!1,pdfBug:Ut=!1,pageColors:_t=null}){this.callback=vt,this.params=At,this.objs=Rt,this.commonObjs=bt,this.annotationCanvasMap=Tt,this.operatorListIdx=null,this.operatorList=Lt,this._pageIndex=Yt,this.canvasFactory=zt,this.filterFactory=Wt,this._pdfBug=Ut,this.pageColors=_t,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Bt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=At.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:vt=!1,optionalContentConfig:At}){var Yt,zt;if(this.cancelled)return;if(this._canvas){if(et(gt,ft).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");et(gt,ft).add(this._canvas)}this._pdfBug&&((Yt=globalThis.StepperManager)!=null&&Yt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Rt,viewport:bt,transform:Tt,background:Lt}=this.params;this.gfx=new _canvas.CanvasGraphics(Rt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:At},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Tt,viewport:bt,transparency:vt,background:Lt}),this.operatorListIdx=0,this.graphicsReady=!0,(zt=this.graphicsReadyCallback)==null||zt.call(this)}cancel(vt=null,At=0){var Rt;this.running=!1,this.cancelled=!0,(Rt=this.gfx)==null||Rt.endDrawing(),et(gt,ft).delete(this._canvas),this.callback(vt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,At))}operatorListChanged(){var vt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(vt=this.stepper)==null||vt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),et(gt,ft).delete(this._canvas),this.callback())))}};ft=new WeakMap,Dt(gt,ft,new WeakSet);let InternalRenderTask=gt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,s)=>{var st,rt,at,wA,ct;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var a=s(1),o=s(4),j=s(8);const _e=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=_e;class nt{constructor(){Dt(this,at);Dt(this,st,!1);Dt(this,rt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ut,dt){const lt=et(this,rt).get(ut);return lt===void 0?dt:Object.assign(dt,lt)}getRawValue(ut){return et(this,rt).get(ut)}remove(ut){if(et(this,rt).delete(ut),et(this,rt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const dt of et(this,rt).values())if(dt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ut,dt){const lt=et(this,rt).get(ut);let ht=!1;if(lt!==void 0)for(const[xt,mt]of Object.entries(dt))lt[xt]!==mt&&(ht=!0,lt[xt]=mt);else ht=!0,et(this,rt).set(ut,dt);ht&&wt(this,at,wA).call(this),dt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(dt.constructor._type)}has(ut){return et(this,rt).has(ut)}getAll(){return et(this,rt).size>0?(0,a.objectFromMap)(et(this,rt)):null}setAll(ut){for(const[dt,lt]of Object.entries(ut))this.setValue(dt,lt)}get size(){return et(this,rt).size}resetModified(){et(this,st)&&(Pt(this,st,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tt(this)}get serializable(){if(et(this,rt).size===0)return _e;const ut=new Map,dt=new j.MurmurHash3_64,lt=[],ht=Object.create(null);let xt=!1;for(const[mt,ft]of et(this,rt)){const gt=ft instanceof o.AnnotationEditor?ft.serialize(!1,ht):ft;gt&&(ut.set(mt,gt),dt.update(`${mt}:${JSON.stringify(gt)}`),xt||(xt=!!gt.bitmap))}if(xt)for(const mt of ut.values())mt.bitmap&&lt.push(mt.bitmap);return ut.size>0?{map:ut,hash:dt.hexdigest(),transfers:lt}:_e}}st=new WeakMap,rt=new WeakMap,at=new WeakSet,wA=function(){et(this,st)||(Pt(this,st,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=nt;class tt extends nt{constructor(dt){super();Dt(this,ct);const{map:lt,hash:ht,transfers:xt}=dt.serializable,mt=structuredClone(lt,xt?{transfer:xt}:null);Pt(this,ct,{map:mt,hash:ht,transfers:xt})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return et(this,ct)}}ct=new WeakMap,e.PrintAnnotationStorage=tt},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,ft,gt,j0,$0,At,B0,U0,TA,CA,RA,H0,kA;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var a=s(5),o=s(1),j=s(6);const Bt=class Bt{constructor(_t){Dt(this,gt);Dt(this,tt,"");Dt(this,st,!1);Dt(this,rt,null);Dt(this,at,null);Dt(this,it,null);Dt(this,ct,!1);Dt(this,ot,null);Dt(this,ut,this.focusin.bind(this));Dt(this,dt,this.focusout.bind(this));Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt,!1);Hn(this,"_initialOptions",Object.create(null));Hn(this,"_uiManager",null);Hn(this,"_focusEventsAllowed",!0);Hn(this,"_l10nPromise",null);Dt(this,mt,!1);Dt(this,ft,Bt._zIndex++);this.constructor===Bt&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=_t.parent,this.id=_t.id,this.width=this.height=null,this.pageIndex=_t.parent.pageIndex,this.name=_t.name,this.div=null,this._uiManager=_t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=_t.isCentered,this._structTreeParentId=null;const{rotation:$t,rawDims:{pageWidth:Xt,pageHeight:Ct,pageX:yt,pageY:Et}}=this.parent.viewport;this.rotation=$t,this.pageRotation=(360+$t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Xt,Ct],this.pageTranslation=[yt,Et];const[St,Ft]=this.parentDimensions;this.x=_t.x/St,this.y=_t.y/Ft,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(_t){const $t=new nt({id:_t.parent.getNextId(),parent:_t.parent,uiManager:_t._uiManager});$t.annotationElementId=_t.annotationElementId,$t.deleted=!0,$t._uiManager.addToAnnotationStorage($t)}static initialize(_t,$t=null){if(Bt._l10nPromise||(Bt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ct=>[Ct,_t.get(Ct)]))),$t!=null&&$t.strings)for(const Ct of $t.strings)Bt._l10nPromise.set(Ct,_t.get(Ct));if(Bt._borderLineWidth!==-1)return;const Xt=getComputedStyle(document.documentElement);Bt._borderLineWidth=parseFloat(Xt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(_t,$t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(_t){return!1}static paste(_t,$t){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return et(this,mt)}set _isDraggable(_t){var $t;Pt(this,mt,_t),($t=this.div)==null||$t.classList.toggle("draggable",_t)}center(){const[_t,$t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*$t/(_t*2),this.y+=this.width*_t/($t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*$t/(_t*2),this.y-=this.width*_t/($t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(_t){this._uiManager.addCommands(_t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=et(this,ft)}setParent(_t){_t!==null&&(this.pageIndex=_t.pageIndex,this.pageDimensions=_t.pageDimensions),this.parent=_t}focusin(_t){this._focusEventsAllowed&&(et(this,lt)?Pt(this,lt,!1):this.parent.setSelected(this))}focusout(_t){var Xt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const $t=_t.relatedTarget;$t!=null&&$t.closest(`#${this.id}`)||(_t.preventDefault(),(Xt=this.parent)!=null&&Xt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(_t,$t,Xt,Ct){const[yt,Et]=this.parentDimensions;[Xt,Ct]=this.screenToPageTranslation(Xt,Ct),this.x=(_t+Xt)/yt,this.y=($t+Ct)/Et,this.fixAndSetPosition()}translate(_t,$t){wt(this,gt,j0).call(this,this.parentDimensions,_t,$t)}translateInPage(_t,$t){wt(this,gt,j0).call(this,this.pageDimensions,_t,$t),this.div.scrollIntoView({block:"nearest"})}drag(_t,$t){const[Xt,Ct]=this.parentDimensions;if(this.x+=_t/Xt,this.y+=$t/Ct,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:kt,y:Ot}=this.div.getBoundingClientRect();this.parent.findNewParent(this,kt,Ot)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:yt,y:Et}=this;const[St,Ft]=wt(this,gt,$0).call(this);yt+=St,Et+=Ft,this.div.style.left=`${(100*yt).toFixed(2)}%`,this.div.style.top=`${(100*Et).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[_t,$t]=this.pageDimensions;let{x:Xt,y:Ct,width:yt,height:Et}=this;switch(yt*=_t,Et*=$t,Xt*=_t,Ct*=$t,this.rotation){case 0:Xt=Math.max(0,Math.min(_t-yt,Xt)),Ct=Math.max(0,Math.min($t-Et,Ct));break;case 90:Xt=Math.max(0,Math.min(_t-Et,Xt)),Ct=Math.min($t,Math.max(yt,Ct));break;case 180:Xt=Math.min(_t,Math.max(yt,Xt)),Ct=Math.min($t,Math.max(Et,Ct));break;case 270:Xt=Math.min(_t,Math.max(Et,Xt)),Ct=Math.max(0,Math.min($t-yt,Ct));break}this.x=Xt/=_t,this.y=Ct/=$t;const[St,Ft]=wt(this,gt,$0).call(this);Xt+=St,Ct+=Ft;const{style:kt}=this.div;kt.left=`${(100*Xt).toFixed(2)}%`,kt.top=`${(100*Ct).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(_t,$t){var Xt;return wt(Xt=Bt,At,B0).call(Xt,_t,$t,this.parentRotation)}pageTranslationToScreen(_t,$t){var Xt;return wt(Xt=Bt,At,B0).call(Xt,_t,$t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:_t,pageDimensions:[$t,Xt]}=this,Ct=$t*_t,yt=Xt*_t;return o.FeatureTest.isCSSRoundSupported?[Math.round(Ct),Math.round(yt)]:[Ct,yt]}setDims(_t,$t){var yt;const[Xt,Ct]=this.parentDimensions;this.div.style.width=`${(100*_t/Xt).toFixed(2)}%`,et(this,ct)||(this.div.style.height=`${(100*$t/Ct).toFixed(2)}%`),(yt=et(this,rt))==null||yt.classList.toggle("small",_t<Bt.SMALL_EDITOR_SIZE||$t<Bt.SMALL_EDITOR_SIZE)}fixDims(){const{style:_t}=this.div,{height:$t,width:Xt}=_t,Ct=Xt.endsWith("%"),yt=!et(this,ct)&&$t.endsWith("%");if(Ct&&yt)return;const[Et,St]=this.parentDimensions;Ct||(_t.width=`${(100*parseFloat(Xt)/Et).toFixed(2)}%`),!et(this,ct)&&!yt&&(_t.height=`${(100*parseFloat($t)/St).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(et(this,rt))return;const _t=Pt(this,rt,document.createElement("button"));_t.className="altText";const $t=await Bt._l10nPromise.get("editor_alt_text_button_label");_t.textContent=$t,_t.setAttribute("aria-label",$t),_t.tabIndex="0",_t.addEventListener("contextmenu",j.noContextMenu),_t.addEventListener("pointerdown",Xt=>Xt.stopPropagation()),_t.addEventListener("click",Xt=>{Xt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),_t.addEventListener("keydown",Xt=>{Xt.target===_t&&Xt.key==="Enter"&&(Xt.preventDefault(),this._uiManager.editAltText(this))}),wt(this,gt,H0).call(this),this.div.append(_t),Bt.SMALL_EDITOR_SIZE||(Bt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(_t.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:et(this,tt),decorative:et(this,st)}}set altTextData({altText:_t,decorative:$t}){et(this,tt)===_t&&et(this,st)===$t||(Pt(this,tt,_t),Pt(this,st,$t),wt(this,gt,H0).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",et(this,ut)),this.div.addEventListener("focusout",et(this,dt));const[_t,$t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*$t/_t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*_t/$t).toFixed(2)}%`);const[Xt,Ct]=this.getInitialTranslation();return this.translate(Xt,Ct),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(_t){const{isMac:$t}=o.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&$t){_t.preventDefault();return}Pt(this,lt,!0),wt(this,gt,kA).call(this,_t)}moveInDOM(){var _t;(_t=this.parent)==null||_t.moveEditorInDOM(this)}_setParentAndPosition(_t,$t,Xt){_t.changeParent(this),this.x=$t,this.y=Xt,this.fixAndSetPosition()}getRect(_t,$t){const Xt=this.parentScale,[Ct,yt]=this.pageDimensions,[Et,St]=this.pageTranslation,Ft=_t/Xt,kt=$t/Xt,Ot=this.x*Ct,Gt=this.y*yt,Vt=this.width*Ct,rn=this.height*yt;switch(this.rotation){case 0:return[Ot+Ft+Et,yt-Gt-kt-rn+St,Ot+Ft+Vt+Et,yt-Gt-kt+St];case 90:return[Ot+kt+Et,yt-Gt+Ft+St,Ot+kt+rn+Et,yt-Gt+Ft+Vt+St];case 180:return[Ot-Ft-Vt+Et,yt-Gt+kt+St,Ot-Ft+Et,yt-Gt+kt+rn+St];case 270:return[Ot-kt-rn+Et,yt-Gt-Ft-Vt+St,Ot-kt+Et,yt-Gt-Ft+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(_t,$t){const[Xt,Ct,yt,Et]=_t,St=yt-Xt,Ft=Et-Ct;switch(this.rotation){case 0:return[Xt,$t-Et,St,Ft];case 90:return[Xt,$t-Ct,Ft,St];case 180:return[yt,$t-Ct,St,Ft];case 270:return[yt,$t-Et,Ft,St];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Pt(this,xt,!0)}disableEditMode(){Pt(this,xt,!1)}isInEditMode(){return et(this,xt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _t,$t;(_t=this.div)==null||_t.addEventListener("focusin",et(this,ut)),($t=this.div)==null||$t.addEventListener("focusout",et(this,dt))}serialize(_t=!1,$t=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(_t,$t,Xt){const Ct=new this.prototype.constructor({parent:$t,id:$t.getNextId(),uiManager:Xt});Ct.rotation=_t.rotation;const[yt,Et]=Ct.pageDimensions,[St,Ft,kt,Ot]=Ct.getRectInCurrentCoords(_t.rect,Et);return Ct.x=St/yt,Ct.y=Ft/Et,Ct.width=kt/yt,Ct.height=Ot/Et,Ct}remove(){var _t;this.div.removeEventListener("focusin",et(this,ut)),this.div.removeEventListener("focusout",et(this,dt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(_t=et(this,rt))==null||_t.remove(),Pt(this,rt,null),Pt(this,at,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(wt(this,gt,TA).call(this),et(this,ot).classList.remove("hidden"))}select(){var _t;this.makeResizable(),(_t=this.div)==null||_t.classList.add("selectedEditor")}unselect(){var _t,$t,Xt;(_t=et(this,ot))==null||_t.classList.add("hidden"),($t=this.div)==null||$t.classList.remove("selectedEditor"),(Xt=this.div)!=null&&Xt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(_t,$t){}disableEditing(){et(this,rt)&&(et(this,rt).hidden=!0)}enableEditing(){et(this,rt)&&(et(this,rt).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return et(this,ht)}set isEditing(_t){Pt(this,ht,_t),this.parent&&(_t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(_t,$t){Pt(this,ct,!0);const Xt=_t/$t,{style:Ct}=this.div;Ct.aspectRatio=Xt,Ct.height="auto"}static get MIN_SIZE(){return 16}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakSet,j0=function([_t,$t],Xt,Ct){[Xt,Ct]=this.screenToPageTranslation(Xt,Ct),this.x+=Xt/_t,this.y+=Ct/$t,this.fixAndSetPosition()},$0=function(){const[_t,$t]=this.parentDimensions,{_borderLineWidth:Xt}=Bt,Ct=Xt/_t,yt=Xt/$t;switch(this.rotation){case 90:return[-Ct,yt];case 180:return[Ct,yt];case 270:return[Ct,-yt];default:return[-Ct,-yt]}},At=new WeakSet,B0=function(_t,$t,Xt){switch(Xt){case 90:return[$t,-_t];case 180:return[-_t,-$t];case 270:return[-$t,_t];default:return[_t,$t]}},U0=function(_t){switch(_t){case 90:{const[$t,Xt]=this.pageDimensions;return[0,-$t/Xt,Xt/$t,0]}case 180:return[-1,0,0,-1];case 270:{const[$t,Xt]=this.pageDimensions;return[0,$t/Xt,-Xt/$t,0]}default:return[1,0,0,1]}},TA=function(){if(et(this,ot))return;Pt(this,ot,document.createElement("div")),et(this,ot).classList.add("resizers");const _t=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||_t.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const $t of _t){const Xt=document.createElement("div");et(this,ot).append(Xt),Xt.classList.add("resizer",$t),Xt.addEventListener("pointerdown",wt(this,gt,CA).bind(this,$t)),Xt.addEventListener("contextmenu",j.noContextMenu)}this.div.prepend(et(this,ot))},CA=function(_t,$t){$t.preventDefault();const{isMac:Xt}=o.FeatureTest.platform;if($t.button!==0||$t.ctrlKey&&Xt)return;const Ct=wt(this,gt,RA).bind(this,_t),yt=this._isDraggable;this._isDraggable=!1;const Et={passive:!0,capture:!0};window.addEventListener("pointermove",Ct,Et);const St=this.x,Ft=this.y,kt=this.width,Ot=this.height,Gt=this.parent.div.style.cursor,Vt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle($t.target).cursor;const rn=()=>{this._isDraggable=yt,window.removeEventListener("pointerup",rn),window.removeEventListener("blur",rn),window.removeEventListener("pointermove",Ct,Et),this.parent.div.style.cursor=Gt,this.div.style.cursor=Vt;const an=this.x,ln=this.y,cn=this.width,dn=this.height;an===St&&ln===Ft&&cn===kt&&dn===Ot||this.addCommands({cmd:()=>{this.width=cn,this.height=dn,this.x=an,this.y=ln;const[qt,sn]=this.parentDimensions;this.setDims(qt*cn,sn*dn),this.fixAndSetPosition()},undo:()=>{this.width=kt,this.height=Ot,this.x=St,this.y=Ft;const[qt,sn]=this.parentDimensions;this.setDims(qt*kt,sn*Ot),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",rn),window.addEventListener("blur",rn)},RA=function(_t,$t){const[Xt,Ct]=this.parentDimensions,yt=this.x,Et=this.y,St=this.width,Ft=this.height,kt=Bt.MIN_SIZE/Xt,Ot=Bt.MIN_SIZE/Ct,Gt=wn=>Math.round(wn*1e4)/1e4,Vt=wt(this,gt,U0).call(this,this.rotation),rn=(wn,Dn)=>[Vt[0]*wn+Vt[2]*Dn,Vt[1]*wn+Vt[3]*Dn],an=wt(this,gt,U0).call(this,360-this.rotation),ln=(wn,Dn)=>[an[0]*wn+an[2]*Dn,an[1]*wn+an[3]*Dn];let cn,dn,qt=!1,sn=!1;switch(_t){case"topLeft":qt=!0,cn=(wn,Dn)=>[0,0],dn=(wn,Dn)=>[wn,Dn];break;case"topMiddle":cn=(wn,Dn)=>[wn/2,0],dn=(wn,Dn)=>[wn/2,Dn];break;case"topRight":qt=!0,cn=(wn,Dn)=>[wn,0],dn=(wn,Dn)=>[0,Dn];break;case"middleRight":sn=!0,cn=(wn,Dn)=>[wn,Dn/2],dn=(wn,Dn)=>[0,Dn/2];break;case"bottomRight":qt=!0,cn=(wn,Dn)=>[wn,Dn],dn=(wn,Dn)=>[0,0];break;case"bottomMiddle":cn=(wn,Dn)=>[wn/2,Dn],dn=(wn,Dn)=>[wn/2,0];break;case"bottomLeft":qt=!0,cn=(wn,Dn)=>[0,Dn],dn=(wn,Dn)=>[wn,0];break;case"middleLeft":sn=!0,cn=(wn,Dn)=>[0,Dn/2],dn=(wn,Dn)=>[wn,Dn/2];break}const It=cn(St,Ft),Ht=dn(St,Ft);let Qt=rn(...Ht);const tn=Gt(yt+Qt[0]),un=Gt(Et+Qt[1]);let mn=1,vn=1,[Zt,An]=this.screenToPageTranslation($t.movementX,$t.movementY);if([Zt,An]=ln(Zt/Xt,An/Ct),qt){const wn=Math.hypot(St,Ft);mn=vn=Math.max(Math.min(Math.hypot(Ht[0]-It[0]-Zt,Ht[1]-It[1]-An)/wn,1/St,1/Ft),kt/St,Ot/Ft)}else sn?mn=Math.max(kt,Math.min(1,Math.abs(Ht[0]-It[0]-Zt)))/St:vn=Math.max(Ot,Math.min(1,Math.abs(Ht[1]-It[1]-An)))/Ft;const En=Gt(St*mn),Fn=Gt(Ft*vn);Qt=rn(...dn(En,Fn));const Mn=tn-Qt[0],Bn=un-Qt[1];this.width=En,this.height=Fn,this.x=Mn,this.y=Bn,this.setDims(Xt*En,Ct*Fn),this.fixAndSetPosition()},H0=async function(){var Xt;const _t=et(this,rt);if(!_t)return;if(!et(this,tt)&&!et(this,st)){_t.classList.remove("done"),(Xt=et(this,at))==null||Xt.remove();return}Bt._l10nPromise.get("editor_alt_text_edit_button_label").then(Ct=>{_t.setAttribute("aria-label",Ct)});let $t=et(this,at);if(!$t){Pt(this,at,$t=document.createElement("span")),$t.className="tooltip",$t.setAttribute("role","tooltip");const Ct=$t.id=`alt-text-tooltip-${this.id}`;_t.setAttribute("aria-describedby",Ct);const yt=100;_t.addEventListener("mouseenter",()=>{Pt(this,it,setTimeout(()=>{Pt(this,it,null),et(this,at).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},yt))}),_t.addEventListener("mouseleave",()=>{var Et;clearTimeout(et(this,it)),Pt(this,it,null),(Et=et(this,at))==null||Et.classList.remove("show")})}_t.classList.add("done"),$t.innerText=et(this,st)?await Bt._l10nPromise.get("editor_alt_text_decorative_tooltip"):et(this,tt),$t.parentNode||_t.append($t)},kA=function(_t){if(!this._isDraggable)return;const $t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Xt,Ct;$t&&(Xt={passive:!0,capture:!0},Ct=Et=>{const[St,Ft]=this.screenToPageTranslation(Et.movementX,Et.movementY);this._uiManager.dragSelectedEditors(St,Ft)},window.addEventListener("pointermove",Ct,Xt));const yt=()=>{if(window.removeEventListener("pointerup",yt),window.removeEventListener("blur",yt),$t&&window.removeEventListener("pointermove",Ct,Xt),Pt(this,lt,!1),!this._uiManager.endDragSession()){const{isMac:Et}=o.FeatureTest.platform;_t.ctrlKey&&!Et||_t.shiftKey||_t.metaKey&&Et?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",yt),window.addEventListener("blur",yt)},Dt(Bt,At),Hn(Bt,"_borderLineWidth",-1),Hn(Bt,"_colorManager",new a.ColorManager),Hn(Bt,"_zIndex",1),Hn(Bt,"SMALL_EDITOR_SIZE",0);let _e=Bt;e.AnnotationEditor=_e;class nt extends _e{constructor(_t){super(_t),this.annotationElementId=_t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,s)=>{var ct,ot,ut,dt,lt,z0,mt,ft,gt,pt,vt,PA,bt,Tt,Lt,Yt,zt,Wt,Bt,Ut,_t,$t,Xt,Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an,ln,cn,dn,qt,sn,It,Ht,Qt,tn,un,mn,vn,Zt,MA,W0,V0,qv,G0,X0,Js,Mp,DA,IA,Y0,Dp,K0;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=j,e.opacityToHex=_e;var a=s(1),o=s(6);function j(Ln,Mt,Jt){for(const pn of Jt)Mt.addEventListener(pn,Ln[pn].bind(Ln))}function _e(Ln){return Math.round(Math.min(255,Math.max(1,255*Ln))).toString(16).padStart(2,"0")}class nt{constructor(){Dt(this,ct,0)}getId(){return`${a.AnnotationEditorPrefix}${ds(this,ct)._++}`}}ct=new WeakMap;const xt=class xt{constructor(){Dt(this,lt);Dt(this,ot,(0,a.getUuid)());Dt(this,ut,0);Dt(this,dt,null)}static get _isSVGFittingCanvas(){const Mt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pn=new OffscreenCanvas(1,3).getContext("2d"),bn=new Image;bn.src=Mt;const _n=bn.decode().then(()=>(pn.drawImage(bn,0,0,1,1,0,0,1,3),new Uint32Array(pn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",_n)}async getFromFile(Mt){const{lastModified:Jt,name:pn,size:bn,type:_n}=Mt;return wt(this,lt,z0).call(this,`${Jt}_${pn}_${bn}_${_n}`,Mt)}async getFromUrl(Mt){return wt(this,lt,z0).call(this,Mt,Mt)}async getFromId(Mt){et(this,dt)||Pt(this,dt,new Map);const Jt=et(this,dt).get(Mt);return Jt?Jt.bitmap?(Jt.refCounter+=1,Jt):Jt.file?this.getFromFile(Jt.file):this.getFromUrl(Jt.url):null}getSvgUrl(Mt){const Jt=et(this,dt).get(Mt);return Jt!=null&&Jt.isSvg?Jt.svgUrl:null}deleteId(Mt){et(this,dt)||Pt(this,dt,new Map);const Jt=et(this,dt).get(Mt);Jt&&(Jt.refCounter-=1,Jt.refCounter===0&&(Jt.bitmap=null))}isValidId(Mt){return Mt.startsWith(`image_${et(this,ot)}_`)}};ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakSet,z0=async function(Mt,Jt){et(this,dt)||Pt(this,dt,new Map);let pn=et(this,dt).get(Mt);if(pn===null)return null;if(pn!=null&&pn.bitmap)return pn.refCounter+=1,pn;try{pn||(pn={bitmap:null,id:`image_${et(this,ot)}_${ds(this,ut)._++}`,refCounter:0,isSvg:!1});let bn;if(typeof Jt=="string"){pn.url=Jt;const _n=await fetch(Jt);if(!_n.ok)throw new Error(_n.statusText);bn=await _n.blob()}else bn=pn.file=Jt;if(bn.type==="image/svg+xml"){const _n=xt._isSVGFittingCanvas,xn=new FileReader,Nt=new Image,jt=new Promise((Kt,en)=>{Nt.onload=()=>{pn.bitmap=Nt,pn.isSvg=!0,Kt()},xn.onload=async()=>{const on=pn.svgUrl=xn.result;Nt.src=await _n?`${on}#svgView(preserveAspectRatio(none))`:on},Nt.onerror=xn.onerror=en});xn.readAsDataURL(bn),await jt}else pn.bitmap=await createImageBitmap(bn);pn.refCounter=1}catch(bn){console.error(bn),pn=null}return et(this,dt).set(Mt,pn),pn&&et(this,dt).set(pn.id,pn),pn};let tt=xt;class st{constructor(Mt=128){Dt(this,mt,[]);Dt(this,ft,!1);Dt(this,gt);Dt(this,pt,-1);Pt(this,gt,Mt)}add({cmd:Mt,undo:Jt,mustExec:pn,type:bn=NaN,overwriteIfSameType:_n=!1,keepUndo:xn=!1}){if(pn&&Mt(),et(this,ft))return;const Nt={cmd:Mt,undo:Jt,type:bn};if(et(this,pt)===-1){et(this,mt).length>0&&(et(this,mt).length=0),Pt(this,pt,0),et(this,mt).push(Nt);return}if(_n&&et(this,mt)[et(this,pt)].type===bn){xn&&(Nt.undo=et(this,mt)[et(this,pt)].undo),et(this,mt)[et(this,pt)]=Nt;return}const jt=et(this,pt)+1;jt===et(this,gt)?et(this,mt).splice(0,1):(Pt(this,pt,jt),jt<et(this,mt).length&&et(this,mt).splice(jt)),et(this,mt).push(Nt)}undo(){et(this,pt)!==-1&&(Pt(this,ft,!0),et(this,mt)[et(this,pt)].undo(),Pt(this,ft,!1),Pt(this,pt,et(this,pt)-1))}redo(){et(this,pt)<et(this,mt).length-1&&(Pt(this,pt,et(this,pt)+1),Pt(this,ft,!0),et(this,mt)[et(this,pt)].cmd(),Pt(this,ft,!1))}hasSomethingToUndo(){return et(this,pt)!==-1}hasSomethingToRedo(){return et(this,pt)<et(this,mt).length-1}destroy(){Pt(this,mt,null)}}mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,pt=new WeakMap,e.CommandManager=st;class rt{constructor(Mt){Dt(this,vt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Jt}=a.FeatureTest.platform;for(const[pn,bn,_n={}]of Mt)for(const xn of pn){const Nt=xn.startsWith("mac+");Jt&&Nt?(this.callbacks.set(xn.slice(4),{callback:bn,options:_n}),this.allKeys.add(xn.split("+").at(-1))):!Jt&&!Nt&&(this.callbacks.set(xn,{callback:bn,options:_n}),this.allKeys.add(xn.split("+").at(-1)))}}exec(Mt,Jt){if(!this.allKeys.has(Jt.key))return;const pn=this.callbacks.get(wt(this,vt,PA).call(this,Jt));if(!pn)return;const{callback:bn,options:{bubbles:_n=!1,args:xn=[],checker:Nt=null}}=pn;Nt&&!Nt(Mt,Jt)||(bn.bind(Mt,...xn)(),_n||(Jt.stopPropagation(),Jt.preventDefault()))}}vt=new WeakSet,PA=function(Mt){Mt.altKey&&this.buffer.push("alt"),Mt.ctrlKey&&this.buffer.push("ctrl"),Mt.metaKey&&this.buffer.push("meta"),Mt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Mt.key);const Jt=this.buffer.join("+");return this.buffer.length=0,Jt},e.KeyboardManager=rt;const Rt=class Rt{get _colors(){const Mt=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Mt),(0,a.shadow)(this,"_colors",Mt)}convert(Mt){const Jt=(0,o.getRGB)(Mt);if(!window.matchMedia("(forced-colors: active)").matches)return Jt;for(const[pn,bn]of this._colors)if(bn.every((_n,xn)=>_n===Jt[xn]))return Rt._colorsMapping.get(pn);return Jt}getHexCode(Mt){const Jt=this._colors.get(Mt);return Jt?a.Util.makeHexColor(...Jt):Mt}};Hn(Rt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let at=Rt;e.ColorManager=at;const In=class In{constructor(Mt,Jt,pn,bn,_n,xn){Dt(this,Zt);Dt(this,bt,null);Dt(this,Tt,new Map);Dt(this,Lt,new Map);Dt(this,Yt,null);Dt(this,zt,null);Dt(this,Wt,new st);Dt(this,Bt,0);Dt(this,Ut,new Set);Dt(this,_t,null);Dt(this,$t,null);Dt(this,Xt,new Set);Dt(this,Ct,null);Dt(this,yt,new nt);Dt(this,Et,!1);Dt(this,St,!1);Dt(this,Ft,null);Dt(this,kt,a.AnnotationEditorType.NONE);Dt(this,Ot,new Set);Dt(this,Gt,null);Dt(this,Vt,this.blur.bind(this));Dt(this,rn,this.focus.bind(this));Dt(this,an,this.copy.bind(this));Dt(this,ln,this.cut.bind(this));Dt(this,cn,this.paste.bind(this));Dt(this,dn,this.keydown.bind(this));Dt(this,qt,this.onEditingAction.bind(this));Dt(this,sn,this.onPageChanging.bind(this));Dt(this,It,this.onScaleChanging.bind(this));Dt(this,Ht,this.onRotationChanging.bind(this));Dt(this,Qt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Dt(this,tn,[0,0]);Dt(this,un,null);Dt(this,mn,null);Dt(this,vn,null);Pt(this,mn,Mt),Pt(this,vn,Jt),Pt(this,Yt,pn),this._eventBus=bn,this._eventBus._on("editingaction",et(this,qt)),this._eventBus._on("pagechanging",et(this,sn)),this._eventBus._on("scalechanging",et(this,It)),this._eventBus._on("rotationchanging",et(this,Ht)),Pt(this,zt,_n.annotationStorage),Pt(this,Ct,_n.filterFactory),Pt(this,Gt,xn),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Mt=In.prototype,Jt=_n=>{const{activeElement:xn}=document;return xn&&et(_n,mn).contains(xn)&&_n.hasSomethingToControl()},pn=this.TRANSLATE_SMALL,bn=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new rt([[["ctrl+a","mac+meta+a"],Mt.selectAll],[["ctrl+z","mac+meta+z"],Mt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Mt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Mt.delete],[["Escape","mac+Escape"],Mt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Mt.translateSelectedEditors,{args:[-pn,0],checker:Jt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Mt.translateSelectedEditors,{args:[-bn,0],checker:Jt}],[["ArrowRight","mac+ArrowRight"],Mt.translateSelectedEditors,{args:[pn,0],checker:Jt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Mt.translateSelectedEditors,{args:[bn,0],checker:Jt}],[["ArrowUp","mac+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-pn],checker:Jt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-bn],checker:Jt}],[["ArrowDown","mac+ArrowDown"],Mt.translateSelectedEditors,{args:[0,pn],checker:Jt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Mt.translateSelectedEditors,{args:[0,bn],checker:Jt}]]))}destroy(){wt(this,Zt,qv).call(this),wt(this,Zt,W0).call(this),this._eventBus._off("editingaction",et(this,qt)),this._eventBus._off("pagechanging",et(this,sn)),this._eventBus._off("scalechanging",et(this,It)),this._eventBus._off("rotationchanging",et(this,Ht));for(const Mt of et(this,Lt).values())Mt.destroy();et(this,Lt).clear(),et(this,Tt).clear(),et(this,Xt).clear(),Pt(this,bt,null),et(this,Ot).clear(),et(this,Wt).destroy(),et(this,Yt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",et(this,Gt)?et(this,Ct).addHCMFilter(et(this,Gt).foreground,et(this,Gt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(et(this,mn)).direction)}editAltText(Mt){var Jt;(Jt=et(this,Yt))==null||Jt.editAltText(this,Mt)}onPageChanging({pageNumber:Mt}){Pt(this,Bt,Mt-1)}focusMainContainer(){et(this,mn).focus()}findParent(Mt,Jt){for(const pn of et(this,Lt).values()){const{x:bn,y:_n,width:xn,height:Nt}=pn.div.getBoundingClientRect();if(Mt>=bn&&Mt<=bn+xn&&Jt>=_n&&Jt<=_n+Nt)return pn}return null}disableUserSelect(Mt=!1){et(this,vn).classList.toggle("noUserSelect",Mt)}addShouldRescale(Mt){et(this,Xt).add(Mt)}removeShouldRescale(Mt){et(this,Xt).delete(Mt)}onScaleChanging({scale:Mt}){this.commitOrRemove(),this.viewParameters.realScale=Mt*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Jt of et(this,Xt))Jt.onScaleChanging()}onRotationChanging({pagesRotation:Mt}){this.commitOrRemove(),this.viewParameters.rotation=Mt}addToAnnotationStorage(Mt){!Mt.isEmpty()&&et(this,zt)&&!et(this,zt).has(Mt.id)&&et(this,zt).setValue(Mt.id,Mt)}blur(){if(!this.hasSelection)return;const{activeElement:Mt}=document;for(const Jt of et(this,Ot))if(Jt.div.contains(Mt)){Pt(this,Ft,[Jt,Mt]),Jt._focusEventsAllowed=!1;break}}focus(){if(!et(this,Ft))return;const[Mt,Jt]=et(this,Ft);Pt(this,Ft,null),Jt.addEventListener("focusin",()=>{Mt._focusEventsAllowed=!0},{once:!0}),Jt.focus()}addEditListeners(){wt(this,Zt,V0).call(this),wt(this,Zt,G0).call(this)}removeEditListeners(){wt(this,Zt,qv).call(this),wt(this,Zt,X0).call(this)}copy(Mt){var pn;if(Mt.preventDefault(),(pn=et(this,bt))==null||pn.commitOrRemove(),!this.hasSelection)return;const Jt=[];for(const bn of et(this,Ot)){const _n=bn.serialize(!0);_n&&Jt.push(_n)}Jt.length!==0&&Mt.clipboardData.setData("application/pdfjs",JSON.stringify(Jt))}cut(Mt){this.copy(Mt),this.delete()}paste(Mt){Mt.preventDefault();const{clipboardData:Jt}=Mt;for(const _n of Jt.items)for(const xn of et(this,$t))if(xn.isHandlingMimeForPasting(_n.type)){xn.paste(_n,this.currentLayer);return}let pn=Jt.getData("application/pdfjs");if(!pn)return;try{pn=JSON.parse(pn)}catch(_n){(0,a.warn)(`paste: "${_n.message}".`);return}if(!Array.isArray(pn))return;this.unselectAll();const bn=this.currentLayer;try{const _n=[];for(const jt of pn){const Kt=bn.deserialize(jt);if(!Kt)return;_n.push(Kt)}const xn=()=>{for(const jt of _n)wt(this,Zt,Y0).call(this,jt);wt(this,Zt,K0).call(this,_n)},Nt=()=>{for(const jt of _n)jt.remove()};this.addCommands({cmd:xn,undo:Nt,mustExec:!0})}catch(_n){(0,a.warn)(`paste: "${_n.message}".`)}}keydown(Mt){var Jt;(Jt=this.getActive())!=null&&Jt.shouldGetKeyboardEvents()||In._keyboardManager.exec(this,Mt)}onEditingAction(Mt){["undo","redo","delete","selectAll"].includes(Mt.name)&&this[Mt.name]()}setEditingState(Mt){Mt?(wt(this,Zt,MA).call(this),wt(this,Zt,V0).call(this),wt(this,Zt,G0).call(this),wt(this,Zt,Js).call(this,{isEditing:et(this,kt)!==a.AnnotationEditorType.NONE,isEmpty:wt(this,Zt,Dp).call(this),hasSomethingToUndo:et(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:et(this,Wt).hasSomethingToRedo(),hasSelectedEditor:!1})):(wt(this,Zt,W0).call(this),wt(this,Zt,qv).call(this),wt(this,Zt,X0).call(this),wt(this,Zt,Js).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Mt){if(!et(this,$t)){Pt(this,$t,Mt);for(const Jt of et(this,$t))wt(this,Zt,Mp).call(this,Jt.defaultPropertiesToUpdate)}}getId(){return et(this,yt).getId()}get currentLayer(){return et(this,Lt).get(et(this,Bt))}getLayer(Mt){return et(this,Lt).get(Mt)}get currentPageIndex(){return et(this,Bt)}addLayer(Mt){et(this,Lt).set(Mt.pageIndex,Mt),et(this,Et)?Mt.enable():Mt.disable()}removeLayer(Mt){et(this,Lt).delete(Mt.pageIndex)}updateMode(Mt,Jt=null){if(et(this,kt)!==Mt){if(Pt(this,kt,Mt),Mt===a.AnnotationEditorType.NONE){this.setEditingState(!1),wt(this,Zt,IA).call(this);return}this.setEditingState(!0),wt(this,Zt,DA).call(this),this.unselectAll();for(const pn of et(this,Lt).values())pn.updateMode(Mt);if(Jt){for(const pn of et(this,Tt).values())if(pn.annotationElementId===Jt){this.setSelected(pn),pn.enterInEditMode();break}}}}updateToolbar(Mt){Mt!==et(this,kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Mt})}updateParams(Mt,Jt){if(et(this,$t)){if(Mt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Mt);return}for(const pn of et(this,Ot))pn.updateParams(Mt,Jt);for(const pn of et(this,$t))pn.updateDefaultParams(Mt,Jt)}}enableWaiting(Mt=!1){if(et(this,St)!==Mt){Pt(this,St,Mt);for(const Jt of et(this,Lt).values())Mt?Jt.disableClick():Jt.enableClick(),Jt.div.classList.toggle("waiting",Mt)}}getEditors(Mt){const Jt=[];for(const pn of et(this,Tt).values())pn.pageIndex===Mt&&Jt.push(pn);return Jt}getEditor(Mt){return et(this,Tt).get(Mt)}addEditor(Mt){et(this,Tt).set(Mt.id,Mt)}removeEditor(Mt){var Jt;et(this,Tt).delete(Mt.id),this.unselect(Mt),(!Mt.annotationElementId||!et(this,Ut).has(Mt.annotationElementId))&&((Jt=et(this,zt))==null||Jt.remove(Mt.id))}addDeletedAnnotationElement(Mt){et(this,Ut).add(Mt.annotationElementId),Mt.deleted=!0}isDeletedAnnotationElement(Mt){return et(this,Ut).has(Mt)}removeDeletedAnnotationElement(Mt){et(this,Ut).delete(Mt.annotationElementId),Mt.deleted=!1}setActiveEditor(Mt){et(this,bt)!==Mt&&(Pt(this,bt,Mt),Mt&&wt(this,Zt,Mp).call(this,Mt.propertiesToUpdate))}toggleSelected(Mt){if(et(this,Ot).has(Mt)){et(this,Ot).delete(Mt),Mt.unselect(),wt(this,Zt,Js).call(this,{hasSelectedEditor:this.hasSelection});return}et(this,Ot).add(Mt),Mt.select(),wt(this,Zt,Mp).call(this,Mt.propertiesToUpdate),wt(this,Zt,Js).call(this,{hasSelectedEditor:!0})}setSelected(Mt){for(const Jt of et(this,Ot))Jt!==Mt&&Jt.unselect();et(this,Ot).clear(),et(this,Ot).add(Mt),Mt.select(),wt(this,Zt,Mp).call(this,Mt.propertiesToUpdate),wt(this,Zt,Js).call(this,{hasSelectedEditor:!0})}isSelected(Mt){return et(this,Ot).has(Mt)}unselect(Mt){Mt.unselect(),et(this,Ot).delete(Mt),wt(this,Zt,Js).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return et(this,Ot).size!==0}undo(){et(this,Wt).undo(),wt(this,Zt,Js).call(this,{hasSomethingToUndo:et(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:wt(this,Zt,Dp).call(this)})}redo(){et(this,Wt).redo(),wt(this,Zt,Js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:et(this,Wt).hasSomethingToRedo(),isEmpty:wt(this,Zt,Dp).call(this)})}addCommands(Mt){et(this,Wt).add(Mt),wt(this,Zt,Js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:wt(this,Zt,Dp).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Mt=[...et(this,Ot)],Jt=()=>{for(const bn of Mt)bn.remove()},pn=()=>{for(const bn of Mt)wt(this,Zt,Y0).call(this,bn)};this.addCommands({cmd:Jt,undo:pn,mustExec:!0})}commitOrRemove(){var Mt;(Mt=et(this,bt))==null||Mt.commitOrRemove()}hasSomethingToControl(){return et(this,bt)||this.hasSelection}selectAll(){for(const Mt of et(this,Ot))Mt.commit();wt(this,Zt,K0).call(this,et(this,Tt).values())}unselectAll(){if(et(this,bt)){et(this,bt).commitOrRemove();return}if(this.hasSelection){for(const Mt of et(this,Ot))Mt.unselect();et(this,Ot).clear(),wt(this,Zt,Js).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Mt,Jt,pn=!1){if(pn||this.commitOrRemove(),!this.hasSelection)return;et(this,tn)[0]+=Mt,et(this,tn)[1]+=Jt;const[bn,_n]=et(this,tn),xn=[...et(this,Ot)],Nt=1e3;et(this,un)&&clearTimeout(et(this,un)),Pt(this,un,setTimeout(()=>{Pt(this,un,null),et(this,tn)[0]=et(this,tn)[1]=0,this.addCommands({cmd:()=>{for(const jt of xn)et(this,Tt).has(jt.id)&&jt.translateInPage(bn,_n)},undo:()=>{for(const jt of xn)et(this,Tt).has(jt.id)&&jt.translateInPage(-bn,-_n)},mustExec:!1})},Nt));for(const jt of xn)jt.translateInPage(Mt,Jt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Pt(this,_t,new Map);for(const Mt of et(this,Ot))et(this,_t).set(Mt,{savedX:Mt.x,savedY:Mt.y,savedPageIndex:Mt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!et(this,_t))return!1;this.disableUserSelect(!1);const Mt=et(this,_t);Pt(this,_t,null);let Jt=!1;for(const[{x:bn,y:_n,pageIndex:xn},Nt]of Mt)Nt.newX=bn,Nt.newY=_n,Nt.newPageIndex=xn,Jt||(Jt=bn!==Nt.savedX||_n!==Nt.savedY||xn!==Nt.savedPageIndex);if(!Jt)return!1;const pn=(bn,_n,xn,Nt)=>{if(et(this,Tt).has(bn.id)){const jt=et(this,Lt).get(Nt);jt?bn._setParentAndPosition(jt,_n,xn):(bn.pageIndex=Nt,bn.x=_n,bn.y=xn)}};return this.addCommands({cmd:()=>{for(const[bn,{newX:_n,newY:xn,newPageIndex:Nt}]of Mt)pn(bn,_n,xn,Nt)},undo:()=>{for(const[bn,{savedX:_n,savedY:xn,savedPageIndex:Nt}]of Mt)pn(bn,_n,xn,Nt)},mustExec:!0}),!0}dragSelectedEditors(Mt,Jt){if(et(this,_t))for(const pn of et(this,_t).keys())pn.drag(Mt,Jt)}rebuild(Mt){if(Mt.parent===null){const Jt=this.getLayer(Mt.pageIndex);Jt?(Jt.changeParent(Mt),Jt.addOrRebuild(Mt)):(this.addEditor(Mt),this.addToAnnotationStorage(Mt),Mt.rebuild())}else Mt.parent.addOrRebuild(Mt)}isActive(Mt){return et(this,bt)===Mt}getActive(){return et(this,bt)}getMode(){return et(this,kt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new tt)}};bt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Yt=new WeakMap,zt=new WeakMap,Wt=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,_t=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Ct=new WeakMap,yt=new WeakMap,Et=new WeakMap,St=new WeakMap,Ft=new WeakMap,kt=new WeakMap,Ot=new WeakMap,Gt=new WeakMap,Vt=new WeakMap,rn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,qt=new WeakMap,sn=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,un=new WeakMap,mn=new WeakMap,vn=new WeakMap,Zt=new WeakSet,MA=function(){window.addEventListener("focus",et(this,rn)),window.addEventListener("blur",et(this,Vt))},W0=function(){window.removeEventListener("focus",et(this,rn)),window.removeEventListener("blur",et(this,Vt))},V0=function(){window.addEventListener("keydown",et(this,dn),{capture:!0})},qv=function(){window.removeEventListener("keydown",et(this,dn),{capture:!0})},G0=function(){document.addEventListener("copy",et(this,an)),document.addEventListener("cut",et(this,ln)),document.addEventListener("paste",et(this,cn))},X0=function(){document.removeEventListener("copy",et(this,an)),document.removeEventListener("cut",et(this,ln)),document.removeEventListener("paste",et(this,cn))},Js=function(Mt){Object.entries(Mt).some(([pn,bn])=>et(this,Qt)[pn]!==bn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(et(this,Qt),Mt)})},Mp=function(Mt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Mt})},DA=function(){if(!et(this,Et)){Pt(this,Et,!0);for(const Mt of et(this,Lt).values())Mt.enable()}},IA=function(){if(this.unselectAll(),et(this,Et)){Pt(this,Et,!1);for(const Mt of et(this,Lt).values())Mt.disable()}},Y0=function(Mt){const Jt=et(this,Lt).get(Mt.pageIndex);Jt?Jt.addOrRebuild(Mt):this.addEditor(Mt)},Dp=function(){if(et(this,Tt).size===0)return!0;if(et(this,Tt).size===1)for(const Mt of et(this,Tt).values())return Mt.isEmpty();return!1},K0=function(Mt){et(this,Ot).clear();for(const Jt of Mt)Jt.isEmpty()||(et(this,Ot).add(Jt),Jt.select());wt(this,Zt,Js).call(this,{hasSelectedEditor:!0})},Hn(In,"TRANSLATE_SMALL",1),Hn(In,"TRANSLATE_BIG",10);let it=In;e.AnnotationEditorUIManager=it},(i,e,s)=>{var Bt,Ut,_t,$t,Xt,Ct,yt,Et,St,Ft,kt,Ot,mu,vu,q0,Qv,Jv,Ip,Fp;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=pt,e.getColorValues=Tt,e.getCurrentTransform=Lt,e.getCurrentTransformInverse=Yt,e.getFilenameFromUrl=lt,e.getPdfFilenameFromUrl=ht,e.getRGB=bt,e.getXfaPageViewport=Rt,e.isDataScheme=ut,e.isPdfFile=dt,e.isValidFetchUrl=mt,e.loadScript=gt,e.noContextMenu=ft,e.setLayerDimensions=zt;var a=s(7),o=s(1);const j="http://www.w3.org/2000/svg",Wt=class Wt{};Hn(Wt,"CSS",96),Hn(Wt,"PDF",72),Hn(Wt,"PDF_TO_CSS_UNITS",Wt.CSS/Wt.PDF);let _e=Wt;e.PixelsPerInch=_e;class nt extends a.BaseFilterFactory{constructor({docId:It,ownerDocument:Ht=globalThis.document}={}){super();Dt(this,Ot);Dt(this,Bt);Dt(this,Ut);Dt(this,_t);Dt(this,$t);Dt(this,Xt);Dt(this,Ct);Dt(this,yt);Dt(this,Et);Dt(this,St);Dt(this,Ft);Dt(this,kt,0);Pt(this,_t,It),Pt(this,$t,Ht)}addFilter(It){if(!It)return"none";let Ht=et(this,Ot,mu).get(It);if(Ht)return Ht;let Qt,tn,un,mn;if(It.length===1){const En=It[0],Fn=new Array(256);for(let Mn=0;Mn<256;Mn++)Fn[Mn]=En[Mn]/255;mn=Qt=tn=un=Fn.join(",")}else{const[En,Fn,Mn]=It,Bn=new Array(256),wn=new Array(256),Dn=new Array(256);for(let Un=0;Un<256;Un++)Bn[Un]=En[Un]/255,wn[Un]=Fn[Un]/255,Dn[Un]=Mn[Un]/255;Qt=Bn.join(","),tn=wn.join(","),un=Dn.join(","),mn=`${Qt}${tn}${un}`}if(Ht=et(this,Ot,mu).get(mn),Ht)return et(this,Ot,mu).set(It,Ht),Ht;const vn=`g_${et(this,_t)}_transfer_map_${ds(this,kt)._++}`,Zt=`url(#${vn})`;et(this,Ot,mu).set(It,Zt),et(this,Ot,mu).set(mn,Zt);const An=wt(this,Ot,Qv).call(this,vn);return wt(this,Ot,Ip).call(this,Qt,tn,un,An),Zt}addHCMFilter(It,Ht){var Fn;const Qt=`${It}-${Ht}`;if(et(this,Ct)===Qt)return et(this,yt);if(Pt(this,Ct,Qt),Pt(this,yt,"none"),(Fn=et(this,Xt))==null||Fn.remove(),!It||!Ht)return et(this,yt);const tn=wt(this,Ot,Fp).call(this,It);It=o.Util.makeHexColor(...tn);const un=wt(this,Ot,Fp).call(this,Ht);if(Ht=o.Util.makeHexColor(...un),et(this,Ot,vu).style.color="",It==="#000000"&&Ht==="#ffffff"||It===Ht)return et(this,yt);const mn=new Array(256);for(let Mn=0;Mn<=255;Mn++){const Bn=Mn/255;mn[Mn]=Bn<=.03928?Bn/12.92:((Bn+.055)/1.055)**2.4}const vn=mn.join(","),Zt=`g_${et(this,_t)}_hcm_filter`,An=Pt(this,Et,wt(this,Ot,Qv).call(this,Zt));wt(this,Ot,Ip).call(this,vn,vn,vn,An),wt(this,Ot,q0).call(this,An);const En=(Mn,Bn)=>{const wn=tn[Mn]/255,Dn=un[Mn]/255,Un=new Array(Bn+1);for(let Wn=0;Wn<=Bn;Wn++)Un[Wn]=wn+Wn/Bn*(Dn-wn);return Un.join(",")};return wt(this,Ot,Ip).call(this,En(0,5),En(1,5),En(2,5),An),Pt(this,yt,`url(#${Zt})`),et(this,yt)}addHighlightHCMFilter(It,Ht,Qt,tn){var Dn;const un=`${It}-${Ht}-${Qt}-${tn}`;if(et(this,St)===un)return et(this,Ft);if(Pt(this,St,un),Pt(this,Ft,"none"),(Dn=et(this,Et))==null||Dn.remove(),!It||!Ht)return et(this,Ft);const[mn,vn]=[It,Ht].map(wt(this,Ot,Fp).bind(this));let Zt=Math.round(.2126*mn[0]+.7152*mn[1]+.0722*mn[2]),An=Math.round(.2126*vn[0]+.7152*vn[1]+.0722*vn[2]),[En,Fn]=[Qt,tn].map(wt(this,Ot,Fp).bind(this));An<Zt&&([Zt,An,En,Fn]=[An,Zt,Fn,En]),et(this,Ot,vu).style.color="";const Mn=(Un,Wn,Tn)=>{const hn=new Array(256),nn=(An-Zt)/Tn,gn=Un/255,In=(Wn-Un)/(255*Tn);let Ln=0;for(let Mt=0;Mt<=Tn;Mt++){const Jt=Math.round(Zt+Mt*nn),pn=gn+Mt*In;for(let bn=Ln;bn<=Jt;bn++)hn[bn]=pn;Ln=Jt+1}for(let Mt=Ln;Mt<256;Mt++)hn[Mt]=hn[Ln-1];return hn.join(",")},Bn=`g_${et(this,_t)}_hcm_highlight_filter`,wn=Pt(this,Et,wt(this,Ot,Qv).call(this,Bn));return wt(this,Ot,q0).call(this,wn),wt(this,Ot,Ip).call(this,Mn(En[0],Fn[0],5),Mn(En[1],Fn[1],5),Mn(En[2],Fn[2],5),wn),Pt(this,Ft,`url(#${Bn})`),et(this,Ft)}destroy(It=!1){It&&(et(this,yt)||et(this,Ft))||(et(this,Ut)&&(et(this,Ut).parentNode.parentNode.remove(),Pt(this,Ut,null)),et(this,Bt)&&(et(this,Bt).clear(),Pt(this,Bt,null)),Pt(this,kt,0))}}Bt=new WeakMap,Ut=new WeakMap,_t=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Ct=new WeakMap,yt=new WeakMap,Et=new WeakMap,St=new WeakMap,Ft=new WeakMap,kt=new WeakMap,Ot=new WeakSet,mu=function(){return et(this,Bt)||Pt(this,Bt,new Map)},vu=function(){if(!et(this,Ut)){const It=et(this,$t).createElement("div"),{style:Ht}=It;Ht.visibility="hidden",Ht.contain="strict",Ht.width=Ht.height=0,Ht.position="absolute",Ht.top=Ht.left=0,Ht.zIndex=-1;const Qt=et(this,$t).createElementNS(j,"svg");Qt.setAttribute("width",0),Qt.setAttribute("height",0),Pt(this,Ut,et(this,$t).createElementNS(j,"defs")),It.append(Qt),Qt.append(et(this,Ut)),et(this,$t).body.append(It)}return et(this,Ut)},q0=function(It){const Ht=et(this,$t).createElementNS(j,"feColorMatrix");Ht.setAttribute("type","matrix"),Ht.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),It.append(Ht)},Qv=function(It){const Ht=et(this,$t).createElementNS(j,"filter");return Ht.setAttribute("color-interpolation-filters","sRGB"),Ht.setAttribute("id",It),et(this,Ot,vu).append(Ht),Ht},Jv=function(It,Ht,Qt){const tn=et(this,$t).createElementNS(j,Ht);tn.setAttribute("type","discrete"),tn.setAttribute("tableValues",Qt),It.append(tn)},Ip=function(It,Ht,Qt,tn){const un=et(this,$t).createElementNS(j,"feComponentTransfer");tn.append(un),wt(this,Ot,Jv).call(this,un,"feFuncR",It),wt(this,Ot,Jv).call(this,un,"feFuncG",Ht),wt(this,Ot,Jv).call(this,un,"feFuncB",Qt)},Fp=function(It){return et(this,Ot,vu).style.color=It,bt(getComputedStyle(et(this,Ot,vu)).getPropertyValue("color"))},e.DOMFilterFactory=nt;class tt extends a.BaseCanvasFactory{constructor({ownerDocument:sn=globalThis.document}={}){super(),this._document=sn}_createCanvas(sn,It){const Ht=this._document.createElement("canvas");return Ht.width=sn,Ht.height=It,Ht}}e.DOMCanvasFactory=tt;async function st(qt,sn=!1){if(mt(qt,document.baseURI)){const It=await fetch(qt);if(!It.ok)throw new Error(It.statusText);return sn?new Uint8Array(await It.arrayBuffer()):(0,o.stringToBytes)(await It.text())}return new Promise((It,Ht)=>{const Qt=new XMLHttpRequest;Qt.open("GET",qt,!0),sn&&(Qt.responseType="arraybuffer"),Qt.onreadystatechange=()=>{if(Qt.readyState===XMLHttpRequest.DONE){if(Qt.status===200||Qt.status===0){let tn;if(sn&&Qt.response?tn=new Uint8Array(Qt.response):!sn&&Qt.responseText&&(tn=(0,o.stringToBytes)(Qt.responseText)),tn){It(tn);return}}Ht(new Error(Qt.statusText))}},Qt.send(null)})}class rt extends a.BaseCMapReaderFactory{_fetchData(sn,It){return st(sn,this.isCompressed).then(Ht=>({cMapData:Ht,compressionType:It}))}}e.DOMCMapReaderFactory=rt;class at extends a.BaseStandardFontDataFactory{_fetchData(sn){return st(sn,!0)}}e.DOMStandardFontDataFactory=at;class it extends a.BaseSVGFactory{_createSVG(sn){return document.createElementNS(j,sn)}}e.DOMSVGFactory=it;class ct{constructor({viewBox:sn,scale:It,rotation:Ht,offsetX:Qt=0,offsetY:tn=0,dontFlip:un=!1}){this.viewBox=sn,this.scale=It,this.rotation=Ht,this.offsetX=Qt,this.offsetY=tn;const mn=(sn[2]+sn[0])/2,vn=(sn[3]+sn[1])/2;let Zt,An,En,Fn;switch(Ht%=360,Ht<0&&(Ht+=360),Ht){case 180:Zt=-1,An=0,En=0,Fn=1;break;case 90:Zt=0,An=1,En=1,Fn=0;break;case 270:Zt=0,An=-1,En=-1,Fn=0;break;case 0:Zt=1,An=0,En=0,Fn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}un&&(En=-En,Fn=-Fn);let Mn,Bn,wn,Dn;Zt===0?(Mn=Math.abs(vn-sn[1])*It+Qt,Bn=Math.abs(mn-sn[0])*It+tn,wn=(sn[3]-sn[1])*It,Dn=(sn[2]-sn[0])*It):(Mn=Math.abs(mn-sn[0])*It+Qt,Bn=Math.abs(vn-sn[1])*It+tn,wn=(sn[2]-sn[0])*It,Dn=(sn[3]-sn[1])*It),this.transform=[Zt*It,An*It,En*It,Fn*It,Mn-Zt*It*mn-En*It*vn,Bn-An*It*mn-Fn*It*vn],this.width=wn,this.height=Dn}get rawDims(){const{viewBox:sn}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:sn[2]-sn[0],pageHeight:sn[3]-sn[1],pageX:sn[0],pageY:sn[1]})}clone({scale:sn=this.scale,rotation:It=this.rotation,offsetX:Ht=this.offsetX,offsetY:Qt=this.offsetY,dontFlip:tn=!1}={}){return new ct({viewBox:this.viewBox.slice(),scale:sn,rotation:It,offsetX:Ht,offsetY:Qt,dontFlip:tn})}convertToViewportPoint(sn,It){return o.Util.applyTransform([sn,It],this.transform)}convertToViewportRectangle(sn){const It=o.Util.applyTransform([sn[0],sn[1]],this.transform),Ht=o.Util.applyTransform([sn[2],sn[3]],this.transform);return[It[0],It[1],Ht[0],Ht[1]]}convertToPdfPoint(sn,It){return o.Util.applyInverseTransform([sn,It],this.transform)}}e.PageViewport=ct;class ot extends o.BaseException{constructor(sn,It=0){super(sn,"RenderingCancelledException"),this.extraDelay=It}}e.RenderingCancelledException=ot;function ut(qt){const sn=qt.length;let It=0;for(;It<sn&&qt[It].trim()==="";)It++;return qt.substring(It,It+5).toLowerCase()==="data:"}function dt(qt){return typeof qt=="string"&&/\.pdf$/i.test(qt)}function lt(qt,sn=!1){return sn||([qt]=qt.split(/[#?]/,1)),qt.substring(qt.lastIndexOf("/")+1)}function ht(qt,sn="document.pdf"){if(typeof qt!="string")return sn;if(ut(qt))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),sn;const It=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ht=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Qt=It.exec(qt);let tn=Ht.exec(Qt[1])||Ht.exec(Qt[2])||Ht.exec(Qt[3]);if(tn&&(tn=tn[0],tn.includes("%")))try{tn=Ht.exec(decodeURIComponent(tn))[0]}catch{}return tn||sn}class xt{constructor(){Hn(this,"started",Object.create(null));Hn(this,"times",[])}time(sn){sn in this.started&&(0,o.warn)(`Timer is already running for ${sn}`),this.started[sn]=Date.now()}timeEnd(sn){sn in this.started||(0,o.warn)(`Timer has not been started for ${sn}`),this.times.push({name:sn,start:this.started[sn],end:Date.now()}),delete this.started[sn]}toString(){const sn=[];let It=0;for(const{name:Ht}of this.times)It=Math.max(Ht.length,It);for(const{name:Ht,start:Qt,end:tn}of this.times)sn.push(`${Ht.padEnd(It)} ${tn-Qt}ms
`);return sn.join("")}}e.StatTimer=xt;function mt(qt,sn){try{const{protocol:It}=sn?new URL(qt,sn):new URL(qt);return It==="http:"||It==="https:"}catch{return!1}}function ft(qt){qt.preventDefault()}function gt(qt,sn=!1){return new Promise((It,Ht)=>{const Qt=document.createElement("script");Qt.src=qt,Qt.onload=function(tn){sn&&Qt.remove(),It(tn)},Qt.onerror=function(){Ht(new Error(`Cannot load script at: ${Qt.src}`))},(document.head||document.documentElement).append(Qt)})}function pt(qt){console.log("Deprecated API usage: "+qt)}let vt;class At{static toDateObject(sn){if(!sn||typeof sn!="string")return null;vt||(vt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const It=vt.exec(sn);if(!It)return null;const Ht=parseInt(It[1],10);let Qt=parseInt(It[2],10);Qt=Qt>=1&&Qt<=12?Qt-1:0;let tn=parseInt(It[3],10);tn=tn>=1&&tn<=31?tn:1;let un=parseInt(It[4],10);un=un>=0&&un<=23?un:0;let mn=parseInt(It[5],10);mn=mn>=0&&mn<=59?mn:0;let vn=parseInt(It[6],10);vn=vn>=0&&vn<=59?vn:0;const Zt=It[7]||"Z";let An=parseInt(It[8],10);An=An>=0&&An<=23?An:0;let En=parseInt(It[9],10)||0;return En=En>=0&&En<=59?En:0,Zt==="-"?(un+=An,mn+=En):Zt==="+"&&(un-=An,mn-=En),new Date(Date.UTC(Ht,Qt,tn,un,mn,vn))}}e.PDFDateString=At;function Rt(qt,{scale:sn=1,rotation:It=0}){const{width:Ht,height:Qt}=qt.attributes.style,tn=[0,0,parseInt(Ht),parseInt(Qt)];return new ct({viewBox:tn,scale:sn,rotation:It})}function bt(qt){if(qt.startsWith("#")){const sn=parseInt(qt.slice(1),16);return[(sn&16711680)>>16,(sn&65280)>>8,sn&255]}return qt.startsWith("rgb(")?qt.slice(4,-1).split(",").map(sn=>parseInt(sn)):qt.startsWith("rgba(")?qt.slice(5,-1).split(",").map(sn=>parseInt(sn)).slice(0,3):((0,o.warn)(`Not a valid color format: "${qt}"`),[0,0,0])}function Tt(qt){const sn=document.createElement("span");sn.style.visibility="hidden",document.body.append(sn);for(const It of qt.keys()){sn.style.color=It;const Ht=window.getComputedStyle(sn).color;qt.set(It,bt(Ht))}sn.remove()}function Lt(qt){const{a:sn,b:It,c:Ht,d:Qt,e:tn,f:un}=qt.getTransform();return[sn,It,Ht,Qt,tn,un]}function Yt(qt){const{a:sn,b:It,c:Ht,d:Qt,e:tn,f:un}=qt.getTransform().invertSelf();return[sn,It,Ht,Qt,tn,un]}function zt(qt,sn,It=!1,Ht=!0){if(sn instanceof ct){const{pageWidth:Qt,pageHeight:tn}=sn.rawDims,{style:un}=qt,mn=o.FeatureTest.isCSSRoundSupported,vn=`var(--scale-factor) * ${Qt}px`,Zt=`var(--scale-factor) * ${tn}px`,An=mn?`round(${vn}, 1px)`:`calc(${vn})`,En=mn?`round(${Zt}, 1px)`:`calc(${Zt})`;!It||sn.rotation%180===0?(un.width=An,un.height=En):(un.width=En,un.height=An)}Ht&&qt.setAttribute("data-main-rotation",sn.rotation)}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var a=s(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(rt){return"none"}addHCMFilter(rt,at){return"none"}addHighlightHCMFilter(rt,at,it,ct){return"none"}destroy(rt=!1){}}e.BaseFilterFactory=o;class j{constructor(){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(rt,at){if(rt<=0||at<=0)throw new Error("Invalid canvas size");const it=this._createCanvas(rt,at);return{canvas:it,context:it.getContext("2d")}}reset(rt,at,it){if(!rt.canvas)throw new Error("Canvas is not specified");if(at<=0||it<=0)throw new Error("Invalid canvas size");rt.canvas.width=at,rt.canvas.height=it}destroy(rt){if(!rt.canvas)throw new Error("Canvas is not specified");rt.canvas.width=0,rt.canvas.height=0,rt.canvas=null,rt.context=null}_createCanvas(rt,at){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=j;class _e{constructor({baseUrl:rt=null,isCompressed:at=!0}){this.constructor===_e&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=rt,this.isCompressed=at}async fetch({name:rt}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!rt)throw new Error("CMap name must be specified.");const at=this.baseUrl+rt+(this.isCompressed?".bcmap":""),it=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(at,it).catch(ct=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${at}`)})}_fetchData(rt,at){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=_e;class nt{constructor({baseUrl:rt=null}){this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=rt}async fetch({filename:rt}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!rt)throw new Error("Font filename must be specified.");const at=`${this.baseUrl}${rt}`;return this._fetchData(at).catch(it=>{throw new Error(`Unable to load font data at: ${at}`)})}_fetchData(rt){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=nt;class tt{constructor(){this.constructor===tt&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(rt,at,it=!1){if(rt<=0||at<=0)throw new Error("Invalid SVG dimensions");const ct=this._createSVG("svg:svg");return ct.setAttribute("version","1.1"),it||(ct.setAttribute("width",`${rt}px`),ct.setAttribute("height",`${at}px`)),ct.setAttribute("preserveAspectRatio","none"),ct.setAttribute("viewBox",`0 0 ${rt} ${at}`),ct}createElement(rt){if(typeof rt!="string")throw new Error("Invalid SVG element type");return this._createSVG(rt)}_createSVG(rt){(0,a.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=tt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var a=s(1);const o=3285377520,j=4294901760,_e=65535;class nt{constructor(st){this.h1=st?st&4294967295:o,this.h2=st?st&4294967295:o}update(st){let rt,at;if(typeof st=="string"){rt=new Uint8Array(st.length*2),at=0;for(let pt=0,vt=st.length;pt<vt;pt++){const At=st.charCodeAt(pt);At<=255?rt[at++]=At:(rt[at++]=At>>>8,rt[at++]=At&255)}}else if((0,a.isArrayBuffer)(st))rt=st.slice(),at=rt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const it=at>>2,ct=at-it*4,ot=new Uint32Array(rt.buffer,0,it);let ut=0,dt=0,lt=this.h1,ht=this.h2;const xt=3432918353,mt=461845907,ft=xt&_e,gt=mt&_e;for(let pt=0;pt<it;pt++)pt&1?(ut=ot[pt],ut=ut*xt&j|ut*ft&_e,ut=ut<<15|ut>>>17,ut=ut*mt&j|ut*gt&_e,lt^=ut,lt=lt<<13|lt>>>19,lt=lt*5+3864292196):(dt=ot[pt],dt=dt*xt&j|dt*ft&_e,dt=dt<<15|dt>>>17,dt=dt*mt&j|dt*gt&_e,ht^=dt,ht=ht<<13|ht>>>19,ht=ht*5+3864292196);switch(ut=0,ct){case 3:ut^=rt[it*4+2]<<16;case 2:ut^=rt[it*4+1]<<8;case 1:ut^=rt[it*4],ut=ut*xt&j|ut*ft&_e,ut=ut<<15|ut>>>17,ut=ut*mt&j|ut*gt&_e,it&1?lt^=ut:ht^=ut}this.h1=lt,this.h2=ht}hexdigest(){let st=this.h1,rt=this.h2;return st^=rt>>>1,st=st*3981806797&j|st*36045&_e,rt=rt*4283543511&j|((rt<<16|st>>>16)*2950163797&j)>>>16,st^=rt>>>1,st=st*444984403&j|st*60499&_e,rt=rt*3301882366&j|((rt<<16|st>>>16)*3120437893&j)>>>16,st^=rt>>>1,(st>>>0).toString(16).padStart(8,"0")+(rt>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=nt},(i,e,s)=>{var _e;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=s(1);class o{constructor({ownerDocument:tt=globalThis.document,styleElement:st=null}){Dt(this,_e,new Set);this._document=tt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(tt){this.nativeFontFaces.add(tt),this._document.fonts.add(tt)}removeNativeFontFace(tt){this.nativeFontFaces.delete(tt),this._document.fonts.delete(tt)}insertRule(tt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const st=this.styleElement.sheet;st.insertRule(tt,st.cssRules.length)}clear(){for(const tt of this.nativeFontFaces)this._document.fonts.delete(tt);this.nativeFontFaces.clear(),et(this,_e).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(tt){if(!(!tt||et(this,_e).has(tt.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:st,src:rt,style:at}=tt,it=new FontFace(st,rt,at);this.addNativeFontFace(it);try{await it.load(),et(this,_e).add(st)}catch{(0,a.warn)(`Cannot load system font: ${tt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(it)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(tt){if(tt.attached||tt.missingFile&&!tt.systemFontInfo)return;if(tt.attached=!0,tt.systemFontInfo){await this.loadSystemFont(tt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const rt=tt.createNativeFontFace();if(rt){this.addNativeFontFace(rt);try{await rt.loaded}catch(at){throw(0,a.warn)(`Failed to load font '${rt.family}': '${at}'.`),tt.disableFontFace=!0,at}}return}const st=tt.createFontFaceRule();if(st){if(this.insertRule(st),this.isSyncFontLoadingSupported)return;await new Promise(rt=>{const at=this._queueLoadingCallback(rt);this._prepareFontLoadEvent(tt,at)})}}get isFontLoadingAPISupported(){var st;const tt=!!((st=this._document)!=null&&st.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",tt)}get isSyncFontLoadingSupported(){let tt=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(tt=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",tt)}_queueLoadingCallback(tt){function st(){for((0,a.assert)(!at.done,"completeRequest() cannot be called twice."),at.done=!0;rt.length>0&&rt[0].done;){const it=rt.shift();setTimeout(it.callback,0)}}const{loadingRequests:rt}=this,at={done:!1,complete:st,callback:tt};return rt.push(at),at}get _loadTestFont(){const tt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",tt)}_prepareFontLoadEvent(tt,st){function rt(bt,Tt){return bt.charCodeAt(Tt)<<24|bt.charCodeAt(Tt+1)<<16|bt.charCodeAt(Tt+2)<<8|bt.charCodeAt(Tt+3)&255}function at(bt,Tt,Lt,Yt){const zt=bt.substring(0,Tt),Wt=bt.substring(Tt+Lt);return zt+Yt+Wt}let it,ct;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const ut=ot.getContext("2d");let dt=0;function lt(bt,Tt){if(++dt>30){(0,a.warn)("Load test font never loaded."),Tt();return}if(ut.font="30px "+bt,ut.fillText(".",0,20),ut.getImageData(0,0,1,1).data[3]>0){Tt();return}setTimeout(lt.bind(null,bt,Tt))}const ht=`lt${Date.now()}${this.loadTestFontId++}`;let xt=this._loadTestFont;xt=at(xt,976,ht.length,ht);const ft=16,gt=1482184792;let pt=rt(xt,ft);for(it=0,ct=ht.length-3;it<ct;it+=4)pt=pt-gt+rt(ht,it)|0;it<ht.length&&(pt=pt-gt+rt(ht+"XXX",it)|0),xt=at(xt,ft,4,(0,a.string32)(pt));const vt=`url(data:font/opentype;base64,${btoa(xt)});`,At=`@font-face {font-family:"${ht}";src:${vt}}`;this.insertRule(At);const Rt=this._document.createElement("div");Rt.style.visibility="hidden",Rt.style.width=Rt.style.height="10px",Rt.style.position="absolute",Rt.style.top=Rt.style.left="0px";for(const bt of[tt.loadedName,ht]){const Tt=this._document.createElement("span");Tt.textContent="Hi",Tt.style.fontFamily=bt,Rt.append(Tt)}this._document.body.append(Rt),lt(ht,()=>{Rt.remove(),st.complete()})}}_e=new WeakMap,e.FontLoader=o;class j{constructor(tt,{isEvalSupported:st=!0,disableFontFace:rt=!1,ignoreErrors:at=!1,inspectFont:it=null}){this.compiledGlyphs=Object.create(null);for(const ct in tt)this[ct]=tt[ct];this.isEvalSupported=st!==!1,this.disableFontFace=rt===!0,this.ignoreErrors=at===!0,this._inspectFont=it}createNativeFontFace(){var st;if(!this.data||this.disableFontFace)return null;let tt;if(!this.cssFontInfo)tt=new FontFace(this.loadedName,this.data,{});else{const rt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(rt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),tt=new FontFace(this.cssFontInfo.fontFamily,this.data,rt)}return(st=this._inspectFont)==null||st.call(this,this),tt}createFontFaceRule(){var at;if(!this.data||this.disableFontFace)return null;const tt=(0,a.bytesToString)(this.data),st=`url(data:${this.mimetype};base64,${btoa(tt)});`;let rt;if(!this.cssFontInfo)rt=`@font-face {font-family:"${this.loadedName}";src:${st}}`;else{let it=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(it+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${it}src:${st}}`}return(at=this._inspectFont)==null||at.call(this,this,st),rt}getPathGenerator(tt,st){if(this.compiledGlyphs[st]!==void 0)return this.compiledGlyphs[st];let rt;try{rt=tt.get(this.loadedName+"_path_"+st)}catch(at){if(!this.ignoreErrors)throw at;return(0,a.warn)(`getPathGenerator - ignoring character: "${at}".`),this.compiledGlyphs[st]=function(it,ct){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const at=[];for(const it of rt){const ct=it.args!==void 0?it.args.join(","):"";at.push("c.",it.cmd,"(",ct,`);
`)}return this.compiledGlyphs[st]=new Function("c","size",at.join(""))}return this.compiledGlyphs[st]=function(at,it){for(const ct of rt)ct.cmd==="scale"&&(ct.args=[it,-it]),at[ct.cmd].apply(at,ct.args)}}}e.FontFaceObject=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var a=s(7);s(1);const o=function(st){return new Promise((rt,at)=>{require$$6.readFile(st,(ct,ot)=>{if(ct||!ot){at(new Error(ct));return}rt(new Uint8Array(ot))})})};class j extends a.BaseFilterFactory{}e.NodeFilterFactory=j;class _e extends a.BaseCanvasFactory{_createCanvas(rt,at){return require$$6.createCanvas(rt,at)}}e.NodeCanvasFactory=_e;class nt extends a.BaseCMapReaderFactory{_fetchData(rt,at){return o(rt).then(it=>({cMapData:it,compressionType:at}))}}e.NodeCMapReaderFactory=nt;class tt extends a.BaseStandardFontDataFactory{_fetchData(rt){return o(rt)}}e.NodeStandardFontDataFactory=tt},(i,e,s)=>{var Ut,Q0,J0;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var a=s(1),o=s(6),j=s(12),_e=s(13);const nt=16,tt=100,st=4096,rt=15,at=10,it=1e3,ct=16;function ot(Ct,yt){if(Ct._removeMirroring)throw new Error("Context is already forwarding operations.");Ct.__originalSave=Ct.save,Ct.__originalRestore=Ct.restore,Ct.__originalRotate=Ct.rotate,Ct.__originalScale=Ct.scale,Ct.__originalTranslate=Ct.translate,Ct.__originalTransform=Ct.transform,Ct.__originalSetTransform=Ct.setTransform,Ct.__originalResetTransform=Ct.resetTransform,Ct.__originalClip=Ct.clip,Ct.__originalMoveTo=Ct.moveTo,Ct.__originalLineTo=Ct.lineTo,Ct.__originalBezierCurveTo=Ct.bezierCurveTo,Ct.__originalRect=Ct.rect,Ct.__originalClosePath=Ct.closePath,Ct.__originalBeginPath=Ct.beginPath,Ct._removeMirroring=()=>{Ct.save=Ct.__originalSave,Ct.restore=Ct.__originalRestore,Ct.rotate=Ct.__originalRotate,Ct.scale=Ct.__originalScale,Ct.translate=Ct.__originalTranslate,Ct.transform=Ct.__originalTransform,Ct.setTransform=Ct.__originalSetTransform,Ct.resetTransform=Ct.__originalResetTransform,Ct.clip=Ct.__originalClip,Ct.moveTo=Ct.__originalMoveTo,Ct.lineTo=Ct.__originalLineTo,Ct.bezierCurveTo=Ct.__originalBezierCurveTo,Ct.rect=Ct.__originalRect,Ct.closePath=Ct.__originalClosePath,Ct.beginPath=Ct.__originalBeginPath,delete Ct._removeMirroring},Ct.save=function(){yt.save(),this.__originalSave()},Ct.restore=function(){yt.restore(),this.__originalRestore()},Ct.translate=function(St,Ft){yt.translate(St,Ft),this.__originalTranslate(St,Ft)},Ct.scale=function(St,Ft){yt.scale(St,Ft),this.__originalScale(St,Ft)},Ct.transform=function(St,Ft,kt,Ot,Gt,Vt){yt.transform(St,Ft,kt,Ot,Gt,Vt),this.__originalTransform(St,Ft,kt,Ot,Gt,Vt)},Ct.setTransform=function(St,Ft,kt,Ot,Gt,Vt){yt.setTransform(St,Ft,kt,Ot,Gt,Vt),this.__originalSetTransform(St,Ft,kt,Ot,Gt,Vt)},Ct.resetTransform=function(){yt.resetTransform(),this.__originalResetTransform()},Ct.rotate=function(St){yt.rotate(St),this.__originalRotate(St)},Ct.clip=function(St){yt.clip(St),this.__originalClip(St)},Ct.moveTo=function(Et,St){yt.moveTo(Et,St),this.__originalMoveTo(Et,St)},Ct.lineTo=function(Et,St){yt.lineTo(Et,St),this.__originalLineTo(Et,St)},Ct.bezierCurveTo=function(Et,St,Ft,kt,Ot,Gt){yt.bezierCurveTo(Et,St,Ft,kt,Ot,Gt),this.__originalBezierCurveTo(Et,St,Ft,kt,Ot,Gt)},Ct.rect=function(Et,St,Ft,kt){yt.rect(Et,St,Ft,kt),this.__originalRect(Et,St,Ft,kt)},Ct.closePath=function(){yt.closePath(),this.__originalClosePath()},Ct.beginPath=function(){yt.beginPath(),this.__originalBeginPath()}}class ut{constructor(yt){this.canvasFactory=yt,this.cache=Object.create(null)}getCanvas(yt,Et,St){let Ft;return this.cache[yt]!==void 0?(Ft=this.cache[yt],this.canvasFactory.reset(Ft,Et,St)):(Ft=this.canvasFactory.create(Et,St),this.cache[yt]=Ft),Ft}delete(yt){delete this.cache[yt]}clear(){for(const yt in this.cache){const Et=this.cache[yt];this.canvasFactory.destroy(Et),delete this.cache[yt]}}}function dt(Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn){const[an,ln,cn,dn,qt,sn]=(0,o.getCurrentTransform)(Ct);if(ln===0&&cn===0){const Qt=Ot*an+qt,tn=Math.round(Qt),un=Gt*dn+sn,mn=Math.round(un),vn=(Ot+Vt)*an+qt,Zt=Math.abs(Math.round(vn)-tn)||1,An=(Gt+rn)*dn+sn,En=Math.abs(Math.round(An)-mn)||1;return Ct.setTransform(Math.sign(an),0,0,Math.sign(dn),tn,mn),Ct.drawImage(yt,Et,St,Ft,kt,0,0,Zt,En),Ct.setTransform(an,ln,cn,dn,qt,sn),[Zt,En]}if(an===0&&dn===0){const Qt=Gt*cn+qt,tn=Math.round(Qt),un=Ot*ln+sn,mn=Math.round(un),vn=(Gt+rn)*cn+qt,Zt=Math.abs(Math.round(vn)-tn)||1,An=(Ot+Vt)*ln+sn,En=Math.abs(Math.round(An)-mn)||1;return Ct.setTransform(0,Math.sign(ln),Math.sign(cn),0,tn,mn),Ct.drawImage(yt,Et,St,Ft,kt,0,0,En,Zt),Ct.setTransform(an,ln,cn,dn,qt,sn),[En,Zt]}Ct.drawImage(yt,Et,St,Ft,kt,Ot,Gt,Vt,rn);const It=Math.hypot(an,ln),Ht=Math.hypot(cn,dn);return[It*Vt,Ht*rn]}function lt(Ct){const{width:yt,height:Et}=Ct;if(yt>it||Et>it)return null;const St=1e3,Ft=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),kt=yt+1;let Ot=new Uint8Array(kt*(Et+1)),Gt,Vt,rn;const an=yt+7&-8;let ln=new Uint8Array(an*Et),cn=0;for(const Ht of Ct.data){let Qt=128;for(;Qt>0;)ln[cn++]=Ht&Qt?0:255,Qt>>=1}let dn=0;for(cn=0,ln[cn]!==0&&(Ot[0]=1,++dn),Vt=1;Vt<yt;Vt++)ln[cn]!==ln[cn+1]&&(Ot[Vt]=ln[cn]?2:1,++dn),cn++;for(ln[cn]!==0&&(Ot[Vt]=2,++dn),Gt=1;Gt<Et;Gt++){cn=Gt*an,rn=Gt*kt,ln[cn-an]!==ln[cn]&&(Ot[rn]=ln[cn]?1:8,++dn);let Ht=(ln[cn]?4:0)+(ln[cn-an]?8:0);for(Vt=1;Vt<yt;Vt++)Ht=(Ht>>2)+(ln[cn+1]?4:0)+(ln[cn-an+1]?8:0),Ft[Ht]&&(Ot[rn+Vt]=Ft[Ht],++dn),cn++;if(ln[cn-an]!==ln[cn]&&(Ot[rn+Vt]=ln[cn]?2:4,++dn),dn>St)return null}for(cn=an*(Et-1),rn=Gt*kt,ln[cn]!==0&&(Ot[rn]=8,++dn),Vt=1;Vt<yt;Vt++)ln[cn]!==ln[cn+1]&&(Ot[rn+Vt]=ln[cn]?4:8,++dn),cn++;if(ln[cn]!==0&&(Ot[rn+Vt]=4,++dn),dn>St)return null;const qt=new Int32Array([0,kt,-1,0,-kt,0,0,0,1]),sn=new Path2D;for(Gt=0;dn&&Gt<=Et;Gt++){let Ht=Gt*kt;const Qt=Ht+yt;for(;Ht<Qt&&!Ot[Ht];)Ht++;if(Ht===Qt)continue;sn.moveTo(Ht%kt,Gt);const tn=Ht;let un=Ot[Ht];do{const mn=qt[un];do Ht+=mn;while(!Ot[Ht]);const vn=Ot[Ht];vn!==5&&vn!==10?(un=vn,Ot[Ht]=0):(un=vn&51*un>>4,Ot[Ht]&=un>>2|un<<2),sn.lineTo(Ht%kt,Ht/kt|0),Ot[Ht]||--dn}while(tn!==Ht);--Gt}return ln=null,Ot=null,function(Ht){Ht.save(),Ht.scale(1/yt,-1/Et),Ht.translate(0,-Et),Ht.fill(sn),Ht.beginPath(),Ht.restore()}}class ht{constructor(yt,Et){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,yt,Et])}clone(){const yt=Object.create(this);return yt.clipBox=this.clipBox.slice(),yt}setCurrentPoint(yt,Et){this.x=yt,this.y=Et}updatePathMinMax(yt,Et,St){[Et,St]=a.Util.applyTransform([Et,St],yt),this.minX=Math.min(this.minX,Et),this.minY=Math.min(this.minY,St),this.maxX=Math.max(this.maxX,Et),this.maxY=Math.max(this.maxY,St)}updateRectMinMax(yt,Et){const St=a.Util.applyTransform(Et,yt),Ft=a.Util.applyTransform(Et.slice(2),yt);this.minX=Math.min(this.minX,St[0],Ft[0]),this.minY=Math.min(this.minY,St[1],Ft[1]),this.maxX=Math.max(this.maxX,St[0],Ft[0]),this.maxY=Math.max(this.maxY,St[1],Ft[1])}updateScalingPathMinMax(yt,Et){a.Util.scaleMinMax(yt,Et),this.minX=Math.min(this.minX,Et[0]),this.maxX=Math.max(this.maxX,Et[1]),this.minY=Math.min(this.minY,Et[2]),this.maxY=Math.max(this.maxY,Et[3])}updateCurvePathMinMax(yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an){const ln=a.Util.bezierBoundingBox(Et,St,Ft,kt,Ot,Gt,Vt,rn);if(an){an[0]=Math.min(an[0],ln[0],ln[2]),an[1]=Math.max(an[1],ln[0],ln[2]),an[2]=Math.min(an[2],ln[1],ln[3]),an[3]=Math.max(an[3],ln[1],ln[3]);return}this.updateRectMinMax(yt,ln)}getPathBoundingBox(yt=j.PathType.FILL,Et=null){const St=[this.minX,this.minY,this.maxX,this.maxY];if(yt===j.PathType.STROKE){Et||(0,a.unreachable)("Stroke bounding box must include transform.");const Ft=a.Util.singularValueDecompose2dScale(Et),kt=Ft[0]*this.lineWidth/2,Ot=Ft[1]*this.lineWidth/2;St[0]-=kt,St[1]-=Ot,St[2]+=kt,St[3]+=Ot}return St}updateClipFromPath(){const yt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(yt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(yt){this.clipBox=yt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(yt=j.PathType.FILL,Et=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(yt,Et))}}function xt(Ct,yt){if(typeof ImageData<"u"&&yt instanceof ImageData){Ct.putImageData(yt,0,0);return}const Et=yt.height,St=yt.width,Ft=Et%ct,kt=(Et-Ft)/ct,Ot=Ft===0?kt:kt+1,Gt=Ct.createImageData(St,ct);let Vt=0,rn;const an=yt.data,ln=Gt.data;let cn,dn,qt,sn;if(yt.kind===a.ImageKind.GRAYSCALE_1BPP){const It=an.byteLength,Ht=new Uint32Array(ln.buffer,0,ln.byteLength>>2),Qt=Ht.length,tn=St+7>>3,un=4294967295,mn=a.FeatureTest.isLittleEndian?4278190080:255;for(cn=0;cn<Ot;cn++){for(qt=cn<kt?ct:Ft,rn=0,dn=0;dn<qt;dn++){const vn=It-Vt;let Zt=0;const An=vn>tn?St:vn*8-7,En=An&-8;let Fn=0,Mn=0;for(;Zt<En;Zt+=8)Mn=an[Vt++],Ht[rn++]=Mn&128?un:mn,Ht[rn++]=Mn&64?un:mn,Ht[rn++]=Mn&32?un:mn,Ht[rn++]=Mn&16?un:mn,Ht[rn++]=Mn&8?un:mn,Ht[rn++]=Mn&4?un:mn,Ht[rn++]=Mn&2?un:mn,Ht[rn++]=Mn&1?un:mn;for(;Zt<An;Zt++)Fn===0&&(Mn=an[Vt++],Fn=128),Ht[rn++]=Mn&Fn?un:mn,Fn>>=1}for(;rn<Qt;)Ht[rn++]=0;Ct.putImageData(Gt,0,cn*ct)}}else if(yt.kind===a.ImageKind.RGBA_32BPP){for(dn=0,sn=St*ct*4,cn=0;cn<kt;cn++)ln.set(an.subarray(Vt,Vt+sn)),Vt+=sn,Ct.putImageData(Gt,0,dn),dn+=ct;cn<Ot&&(sn=St*Ft*4,ln.set(an.subarray(Vt,Vt+sn)),Ct.putImageData(Gt,0,dn))}else if(yt.kind===a.ImageKind.RGB_24BPP)for(qt=ct,sn=St*qt,cn=0;cn<Ot;cn++){for(cn>=kt&&(qt=Ft,sn=St*qt),rn=0,dn=sn;dn--;)ln[rn++]=an[Vt++],ln[rn++]=an[Vt++],ln[rn++]=an[Vt++],ln[rn++]=255;Ct.putImageData(Gt,0,cn*ct)}else throw new Error(`bad image kind: ${yt.kind}`)}function mt(Ct,yt){if(yt.bitmap){Ct.drawImage(yt.bitmap,0,0);return}const Et=yt.height,St=yt.width,Ft=Et%ct,kt=(Et-Ft)/ct,Ot=Ft===0?kt:kt+1,Gt=Ct.createImageData(St,ct);let Vt=0;const rn=yt.data,an=Gt.data;for(let ln=0;ln<Ot;ln++){const cn=ln<kt?ct:Ft;({srcPos:Vt}=(0,_e.convertBlackAndWhiteToRGBA)({src:rn,srcPos:Vt,dest:an,width:St,height:cn,nonBlackColor:0})),Ct.putImageData(Gt,0,ln*ct)}}function ft(Ct,yt){const Et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const St of Et)Ct[St]!==void 0&&(yt[St]=Ct[St]);Ct.setLineDash!==void 0&&(yt.setLineDash(Ct.getLineDash()),yt.lineDashOffset=Ct.lineDashOffset)}function gt(Ct){if(Ct.strokeStyle=Ct.fillStyle="#000000",Ct.fillRule="nonzero",Ct.globalAlpha=1,Ct.lineWidth=1,Ct.lineCap="butt",Ct.lineJoin="miter",Ct.miterLimit=10,Ct.globalCompositeOperation="source-over",Ct.font="10px sans-serif",Ct.setLineDash!==void 0&&(Ct.setLineDash([]),Ct.lineDashOffset=0),!a.isNodeJS){const{filter:yt}=Ct;yt!=="none"&&yt!==""&&(Ct.filter="none")}}function pt(Ct,yt,Et,St){const Ft=Ct.length;for(let kt=3;kt<Ft;kt+=4){const Ot=Ct[kt];if(Ot===0)Ct[kt-3]=yt,Ct[kt-2]=Et,Ct[kt-1]=St;else if(Ot<255){const Gt=255-Ot;Ct[kt-3]=Ct[kt-3]*Ot+yt*Gt>>8,Ct[kt-2]=Ct[kt-2]*Ot+Et*Gt>>8,Ct[kt-1]=Ct[kt-1]*Ot+St*Gt>>8}}}function vt(Ct,yt,Et){const St=Ct.length,Ft=1/255;for(let kt=3;kt<St;kt+=4){const Ot=Et?Et[Ct[kt]]:Ct[kt];yt[kt]=yt[kt]*Ot*Ft|0}}function At(Ct,yt,Et){const St=Ct.length;for(let Ft=3;Ft<St;Ft+=4){const kt=Ct[Ft-3]*77+Ct[Ft-2]*152+Ct[Ft-1]*28;yt[Ft]=Et?yt[Ft]*Et[kt>>8]>>8:yt[Ft]*kt>>16}}function Rt(Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an){const ln=!!kt,cn=ln?kt[0]:0,dn=ln?kt[1]:0,qt=ln?kt[2]:0,sn=Ft==="Luminosity"?At:vt,Ht=Math.min(St,Math.ceil(1048576/Et));for(let Qt=0;Qt<St;Qt+=Ht){const tn=Math.min(Ht,St-Qt),un=Ct.getImageData(Gt-rn,Qt+(Vt-an),Et,tn),mn=yt.getImageData(Gt,Qt+Vt,Et,tn);ln&&pt(un.data,cn,dn,qt),sn(un.data,mn.data,Ot),yt.putImageData(mn,Gt,Qt+Vt)}}function bt(Ct,yt,Et,St){const Ft=St[0],kt=St[1],Ot=St[2]-Ft,Gt=St[3]-kt;Ot===0||Gt===0||(Rt(yt.context,Et,Ot,Gt,yt.subtype,yt.backdrop,yt.transferMap,Ft,kt,yt.offsetX,yt.offsetY),Ct.save(),Ct.globalAlpha=1,Ct.globalCompositeOperation="source-over",Ct.setTransform(1,0,0,1,0,0),Ct.drawImage(Et.canvas,0,0),Ct.restore())}function Tt(Ct,yt){const Et=a.Util.singularValueDecompose2dScale(Ct);Et[0]=Math.fround(Et[0]),Et[1]=Math.fround(Et[1]);const St=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return yt!==void 0?yt:Et[0]<=St||Et[1]<=St}const Lt=["butt","round","square"],Yt=["miter","round","bevel"],zt={},Wt={},Xt=class Xt{constructor(yt,Et,St,Ft,kt,{optionalContentConfig:Ot,markedContentStack:Gt=null},Vt,rn){Dt(this,Ut);this.ctx=yt,this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Et,this.objs=St,this.canvasFactory=Ft,this.filterFactory=kt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Gt||[],this.optionalContentConfig=Ot,this.cachedCanvases=new ut(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Vt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=rn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(yt,Et=null){return typeof yt=="string"?yt.startsWith("g_")?this.commonObjs.get(yt):this.objs.get(yt):Et}beginDrawing({transform:yt,viewport:Et,transparency:St=!1,background:Ft=null}){const kt=this.ctx.canvas.width,Ot=this.ctx.canvas.height,Gt=this.ctx.fillStyle;if(this.ctx.fillStyle=Ft||"#ffffff",this.ctx.fillRect(0,0,kt,Ot),this.ctx.fillStyle=Gt,St){const Vt=this.cachedCanvases.getCanvas("transparent",kt,Ot);this.compositeCtx=this.ctx,this.transparentCanvas=Vt.canvas,this.ctx=Vt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),yt&&(this.ctx.transform(...yt),this.outputScaleX=yt[0],this.outputScaleY=yt[0]),this.ctx.transform(...Et.transform),this.viewportScale=Et.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(yt,Et,St,Ft){const kt=yt.argsArray,Ot=yt.fnArray;let Gt=Et||0;const Vt=kt.length;if(Vt===Gt)return Gt;const rn=Vt-Gt>at&&typeof St=="function",an=rn?Date.now()+rt:0;let ln=0;const cn=this.commonObjs,dn=this.objs;let qt;for(;;){if(Ft!==void 0&&Gt===Ft.nextBreakPoint)return Ft.breakIt(Gt,St),Gt;if(qt=Ot[Gt],qt!==a.OPS.dependency)this[qt].apply(this,kt[Gt]);else for(const sn of kt[Gt]){const It=sn.startsWith("g_")?cn:dn;if(!It.has(sn))return It.get(sn,St),Gt}if(Gt++,Gt===Vt)return Gt;if(rn&&++ln>at){if(Date.now()>an)return St(),Gt;ln=0}}}endDrawing(){wt(this,Ut,Q0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const yt of this._cachedBitmapsMap.values()){for(const Et of yt.values())typeof HTMLCanvasElement<"u"&&Et instanceof HTMLCanvasElement&&(Et.width=Et.height=0);yt.clear()}this._cachedBitmapsMap.clear(),wt(this,Ut,J0).call(this)}_scaleImage(yt,Et){const St=yt.width,Ft=yt.height;let kt=Math.max(Math.hypot(Et[0],Et[1]),1),Ot=Math.max(Math.hypot(Et[2],Et[3]),1),Gt=St,Vt=Ft,rn="prescale1",an,ln;for(;kt>2&&Gt>1||Ot>2&&Vt>1;){let cn=Gt,dn=Vt;kt>2&&Gt>1&&(cn=Gt>=16384?Math.floor(Gt/2)-1||1:Math.ceil(Gt/2),kt/=Gt/cn),Ot>2&&Vt>1&&(dn=Vt>=16384?Math.floor(Vt/2)-1||1:Math.ceil(Vt)/2,Ot/=Vt/dn),an=this.cachedCanvases.getCanvas(rn,cn,dn),ln=an.context,ln.clearRect(0,0,cn,dn),ln.drawImage(yt,0,0,Gt,Vt,0,0,cn,dn),yt=an.canvas,Gt=cn,Vt=dn,rn=rn==="prescale1"?"prescale2":"prescale1"}return{img:yt,paintWidth:Gt,paintHeight:Vt}}_createMaskCanvas(yt){const Et=this.ctx,{width:St,height:Ft}=yt,kt=this.current.fillColor,Ot=this.current.patternFill,Gt=(0,o.getCurrentTransform)(Et);let Vt,rn,an,ln;if((yt.bitmap||yt.data)&&yt.count>1){const Zt=yt.bitmap||yt.data.buffer;rn=JSON.stringify(Ot?Gt:[Gt.slice(0,4),kt]),Vt=this._cachedBitmapsMap.get(Zt),Vt||(Vt=new Map,this._cachedBitmapsMap.set(Zt,Vt));const An=Vt.get(rn);if(An&&!Ot){const En=Math.round(Math.min(Gt[0],Gt[2])+Gt[4]),Fn=Math.round(Math.min(Gt[1],Gt[3])+Gt[5]);return{canvas:An,offsetX:En,offsetY:Fn}}an=An}an||(ln=this.cachedCanvases.getCanvas("maskCanvas",St,Ft),mt(ln.context,yt));let cn=a.Util.transform(Gt,[1/St,0,0,-1/Ft,0,0]);cn=a.Util.transform(cn,[1,0,0,1,0,-Ft]);const dn=a.Util.applyTransform([0,0],cn),qt=a.Util.applyTransform([St,Ft],cn),sn=a.Util.normalizeRect([dn[0],dn[1],qt[0],qt[1]]),It=Math.round(sn[2]-sn[0])||1,Ht=Math.round(sn[3]-sn[1])||1,Qt=this.cachedCanvases.getCanvas("fillCanvas",It,Ht),tn=Qt.context,un=Math.min(dn[0],qt[0]),mn=Math.min(dn[1],qt[1]);tn.translate(-un,-mn),tn.transform(...cn),an||(an=this._scaleImage(ln.canvas,(0,o.getCurrentTransformInverse)(tn)),an=an.img,Vt&&Ot&&Vt.set(rn,an)),tn.imageSmoothingEnabled=Tt((0,o.getCurrentTransform)(tn),yt.interpolate),dt(tn,an,0,0,an.width,an.height,0,0,St,Ft),tn.globalCompositeOperation="source-in";const vn=a.Util.transform((0,o.getCurrentTransformInverse)(tn),[1,0,0,1,-un,-mn]);return tn.fillStyle=Ot?kt.getPattern(Et,this,vn,j.PathType.FILL):kt,tn.fillRect(0,0,St,Ft),Vt&&!Ot&&(this.cachedCanvases.delete("fillCanvas"),Vt.set(rn,Qt.canvas)),{canvas:Qt.canvas,offsetX:Math.round(un),offsetY:Math.round(mn)}}setLineWidth(yt){yt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=yt,this.ctx.lineWidth=yt}setLineCap(yt){this.ctx.lineCap=Lt[yt]}setLineJoin(yt){this.ctx.lineJoin=Yt[yt]}setMiterLimit(yt){this.ctx.miterLimit=yt}setDash(yt,Et){const St=this.ctx;St.setLineDash!==void 0&&(St.setLineDash(yt),St.lineDashOffset=Et)}setRenderingIntent(yt){}setFlatness(yt){}setGState(yt){for(const[Et,St]of yt)switch(Et){case"LW":this.setLineWidth(St);break;case"LC":this.setLineCap(St);break;case"LJ":this.setLineJoin(St);break;case"ML":this.setMiterLimit(St);break;case"D":this.setDash(St[0],St[1]);break;case"RI":this.setRenderingIntent(St);break;case"FL":this.setFlatness(St);break;case"Font":this.setFont(St[0],St[1]);break;case"CA":this.current.strokeAlpha=St;break;case"ca":this.current.fillAlpha=St,this.ctx.globalAlpha=St;break;case"BM":this.ctx.globalCompositeOperation=St;break;case"SMask":this.current.activeSMask=St?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(St);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const yt=this.inSMaskMode;this.current.activeSMask&&!yt?this.beginSMaskMode():!this.current.activeSMask&&yt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const yt=this.ctx.canvas.width,Et=this.ctx.canvas.height,St="smaskGroupAt"+this.groupLevel,Ft=this.cachedCanvases.getCanvas(St,yt,Et);this.suspendedCtx=this.ctx,this.ctx=Ft.context;const kt=this.ctx;kt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,kt),ot(kt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(yt){if(!this.current.activeSMask)return;yt?(yt[0]=Math.floor(yt[0]),yt[1]=Math.floor(yt[1]),yt[2]=Math.ceil(yt[2]),yt[3]=Math.ceil(yt[3])):yt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Et=this.current.activeSMask,St=this.suspendedCtx;bt(St,Et,this.ctx,yt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const yt=this.current;this.stateStack.push(yt),this.current=yt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(yt,Et,St,Ft,kt,Ot){this.ctx.transform(yt,Et,St,Ft,kt,Ot),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(yt,Et,St){const Ft=this.ctx,kt=this.current;let Ot=kt.x,Gt=kt.y,Vt,rn;const an=(0,o.getCurrentTransform)(Ft),ln=an[0]===0&&an[3]===0||an[1]===0&&an[2]===0,cn=ln?St.slice(0):null;for(let dn=0,qt=0,sn=yt.length;dn<sn;dn++)switch(yt[dn]|0){case a.OPS.rectangle:Ot=Et[qt++],Gt=Et[qt++];const It=Et[qt++],Ht=Et[qt++],Qt=Ot+It,tn=Gt+Ht;Ft.moveTo(Ot,Gt),It===0||Ht===0?Ft.lineTo(Qt,tn):(Ft.lineTo(Qt,Gt),Ft.lineTo(Qt,tn),Ft.lineTo(Ot,tn)),ln||kt.updateRectMinMax(an,[Ot,Gt,Qt,tn]),Ft.closePath();break;case a.OPS.moveTo:Ot=Et[qt++],Gt=Et[qt++],Ft.moveTo(Ot,Gt),ln||kt.updatePathMinMax(an,Ot,Gt);break;case a.OPS.lineTo:Ot=Et[qt++],Gt=Et[qt++],Ft.lineTo(Ot,Gt),ln||kt.updatePathMinMax(an,Ot,Gt);break;case a.OPS.curveTo:Vt=Ot,rn=Gt,Ot=Et[qt+4],Gt=Et[qt+5],Ft.bezierCurveTo(Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],Ot,Gt),kt.updateCurvePathMinMax(an,Vt,rn,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],Ot,Gt,cn),qt+=6;break;case a.OPS.curveTo2:Vt=Ot,rn=Gt,Ft.bezierCurveTo(Ot,Gt,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3]),kt.updateCurvePathMinMax(an,Vt,rn,Ot,Gt,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],cn),Ot=Et[qt+2],Gt=Et[qt+3],qt+=4;break;case a.OPS.curveTo3:Vt=Ot,rn=Gt,Ot=Et[qt+2],Gt=Et[qt+3],Ft.bezierCurveTo(Et[qt],Et[qt+1],Ot,Gt,Ot,Gt),kt.updateCurvePathMinMax(an,Vt,rn,Et[qt],Et[qt+1],Ot,Gt,Ot,Gt,cn),qt+=4;break;case a.OPS.closePath:Ft.closePath();break}ln&&kt.updateScalingPathMinMax(an,cn),kt.setCurrentPoint(Ot,Gt)}closePath(){this.ctx.closePath()}stroke(yt=!0){const Et=this.ctx,St=this.current.strokeColor;Et.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof St=="object"&&(St!=null&&St.getPattern)?(Et.save(),Et.strokeStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.STROKE),this.rescaleAndStroke(!1),Et.restore()):this.rescaleAndStroke(!0)),yt&&this.consumePath(this.current.getClippedPathBoundingBox()),Et.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(yt=!0){const Et=this.ctx,St=this.current.fillColor,Ft=this.current.patternFill;let kt=!1;Ft&&(Et.save(),Et.fillStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.FILL),kt=!0);const Ot=this.current.getClippedPathBoundingBox();this.contentVisible&&Ot!==null&&(this.pendingEOFill?(Et.fill("evenodd"),this.pendingEOFill=!1):Et.fill()),kt&&Et.restore(),yt&&this.consumePath(Ot)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=zt}eoClip(){this.pendingClip=Wt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const yt=this.pendingTextPaths,Et=this.ctx;if(yt===void 0){Et.beginPath();return}Et.save(),Et.beginPath();for(const St of yt)Et.setTransform(...St.transform),Et.translate(St.x,St.y),St.addToPath(Et,St.fontSize);Et.restore(),Et.clip(),Et.beginPath(),delete this.pendingTextPaths}setCharSpacing(yt){this.current.charSpacing=yt}setWordSpacing(yt){this.current.wordSpacing=yt}setHScale(yt){this.current.textHScale=yt/100}setLeading(yt){this.current.leading=-yt}setFont(yt,Et){var an;const St=this.commonObjs.get(yt),Ft=this.current;if(!St)throw new Error(`Can't find font for ${yt}`);if(Ft.fontMatrix=St.fontMatrix||a.FONT_IDENTITY_MATRIX,(Ft.fontMatrix[0]===0||Ft.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+yt),Et<0?(Et=-Et,Ft.fontDirection=-1):Ft.fontDirection=1,this.current.font=St,this.current.fontSize=Et,St.isType3Font)return;const kt=St.loadedName||"sans-serif",Ot=((an=St.systemFontInfo)==null?void 0:an.css)||`"${kt}", ${St.fallbackName}`;let Gt="normal";St.black?Gt="900":St.bold&&(Gt="bold");const Vt=St.italic?"italic":"normal";let rn=Et;Et<nt?rn=nt:Et>tt&&(rn=tt),this.current.fontSizeScale=Et/rn,this.ctx.font=`${Vt} ${Gt} ${rn}px ${Ot}`}setTextRenderingMode(yt){this.current.textRenderingMode=yt}setTextRise(yt){this.current.textRise=yt}moveText(yt,Et){this.current.x=this.current.lineX+=yt,this.current.y=this.current.lineY+=Et}setLeadingMoveText(yt,Et){this.setLeading(-Et),this.moveText(yt,Et)}setTextMatrix(yt,Et,St,Ft,kt,Ot){this.current.textMatrix=[yt,Et,St,Ft,kt,Ot],this.current.textMatrixScale=Math.hypot(yt,Et),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(yt,Et,St,Ft){const kt=this.ctx,Ot=this.current,Gt=Ot.font,Vt=Ot.textRenderingMode,rn=Ot.fontSize/Ot.fontSizeScale,an=Vt&a.TextRenderingMode.FILL_STROKE_MASK,ln=!!(Vt&a.TextRenderingMode.ADD_TO_PATH_FLAG),cn=Ot.patternFill&&!Gt.missingFile;let dn;(Gt.disableFontFace||ln||cn)&&(dn=Gt.getPathGenerator(this.commonObjs,yt)),Gt.disableFontFace||cn?(kt.save(),kt.translate(Et,St),kt.beginPath(),dn(kt,rn),Ft&&kt.setTransform(...Ft),(an===a.TextRenderingMode.FILL||an===a.TextRenderingMode.FILL_STROKE)&&kt.fill(),(an===a.TextRenderingMode.STROKE||an===a.TextRenderingMode.FILL_STROKE)&&kt.stroke(),kt.restore()):((an===a.TextRenderingMode.FILL||an===a.TextRenderingMode.FILL_STROKE)&&kt.fillText(yt,Et,St),(an===a.TextRenderingMode.STROKE||an===a.TextRenderingMode.FILL_STROKE)&&kt.strokeText(yt,Et,St)),ln&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(kt),x:Et,y:St,fontSize:rn,addToPath:dn})}get isFontSubpixelAAEnabled(){const{context:yt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);yt.scale(1.5,1),yt.fillText("I",0,10);const Et=yt.getImageData(0,0,10,10).data;let St=!1;for(let Ft=3;Ft<Et.length;Ft+=4)if(Et[Ft]>0&&Et[Ft]<255){St=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",St)}showText(yt){const Et=this.current,St=Et.font;if(St.isType3Font)return this.showType3Text(yt);const Ft=Et.fontSize;if(Ft===0)return;const kt=this.ctx,Ot=Et.fontSizeScale,Gt=Et.charSpacing,Vt=Et.wordSpacing,rn=Et.fontDirection,an=Et.textHScale*rn,ln=yt.length,cn=St.vertical,dn=cn?1:-1,qt=St.defaultVMetrics,sn=Ft*Et.fontMatrix[0],It=Et.textRenderingMode===a.TextRenderingMode.FILL&&!St.disableFontFace&&!Et.patternFill;kt.save(),kt.transform(...Et.textMatrix),kt.translate(Et.x,Et.y+Et.textRise),rn>0?kt.scale(an,-1):kt.scale(an,1);let Ht;if(Et.patternFill){kt.save();const vn=Et.fillColor.getPattern(kt,this,(0,o.getCurrentTransformInverse)(kt),j.PathType.FILL);Ht=(0,o.getCurrentTransform)(kt),kt.restore(),kt.fillStyle=vn}let Qt=Et.lineWidth;const tn=Et.textMatrixScale;if(tn===0||Qt===0){const vn=Et.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(vn===a.TextRenderingMode.STROKE||vn===a.TextRenderingMode.FILL_STROKE)&&(Qt=this.getSinglePixelWidth())}else Qt/=tn;if(Ot!==1&&(kt.scale(Ot,Ot),Qt/=Ot),kt.lineWidth=Qt,St.isInvalidPDFjsFont){const vn=[];let Zt=0;for(const An of yt)vn.push(An.unicode),Zt+=An.width;kt.fillText(vn.join(""),0,0),Et.x+=Zt*sn*an,kt.restore(),this.compose();return}let un=0,mn;for(mn=0;mn<ln;++mn){const vn=yt[mn];if(typeof vn=="number"){un+=dn*vn*Ft/1e3;continue}let Zt=!1;const An=(vn.isSpace?Vt:0)+Gt,En=vn.fontChar,Fn=vn.accent;let Mn,Bn,wn=vn.width;if(cn){const Un=vn.vmetric||qt,Wn=-(vn.vmetric?Un[1]:wn*.5)*sn,Tn=Un[2]*sn;wn=Un?-Un[0]:wn,Mn=Wn/Ot,Bn=(un+Tn)/Ot}else Mn=un/Ot,Bn=0;if(St.remeasure&&wn>0){const Un=kt.measureText(En).width*1e3/Ft*Ot;if(wn<Un&&this.isFontSubpixelAAEnabled){const Wn=wn/Un;Zt=!0,kt.save(),kt.scale(Wn,1),Mn/=Wn}else wn!==Un&&(Mn+=(wn-Un)/2e3*Ft/Ot)}if(this.contentVisible&&(vn.isInFont||St.missingFile)){if(It&&!Fn)kt.fillText(En,Mn,Bn);else if(this.paintChar(En,Mn,Bn,Ht),Fn){const Un=Mn+Ft*Fn.offset.x/Ot,Wn=Bn-Ft*Fn.offset.y/Ot;this.paintChar(Fn.fontChar,Un,Wn,Ht)}}const Dn=cn?wn*sn-An*rn:wn*sn+An*rn;un+=Dn,Zt&&kt.restore()}cn?Et.y-=un:Et.x+=un*an,kt.restore(),this.compose()}showType3Text(yt){const Et=this.ctx,St=this.current,Ft=St.font,kt=St.fontSize,Ot=St.fontDirection,Gt=Ft.vertical?1:-1,Vt=St.charSpacing,rn=St.wordSpacing,an=St.textHScale*Ot,ln=St.fontMatrix||a.FONT_IDENTITY_MATRIX,cn=yt.length,dn=St.textRenderingMode===a.TextRenderingMode.INVISIBLE;let qt,sn,It,Ht;if(!(dn||kt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Et.save(),Et.transform(...St.textMatrix),Et.translate(St.x,St.y),Et.scale(an,Ot),qt=0;qt<cn;++qt){if(sn=yt[qt],typeof sn=="number"){Ht=Gt*sn*kt/1e3,this.ctx.translate(Ht,0),St.x+=Ht*an;continue}const Qt=(sn.isSpace?rn:0)+Vt,tn=Ft.charProcOperatorList[sn.operatorListId];if(!tn){(0,a.warn)(`Type3 character "${sn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=sn,this.save(),Et.scale(kt,kt),Et.transform(...ln),this.executeOperatorList(tn),this.restore()),It=a.Util.applyTransform([sn.width,0],ln)[0]*kt+Qt,Et.translate(It,0),St.x+=It*an}Et.restore(),this.processingType3=null}}setCharWidth(yt,Et){}setCharWidthAndBounds(yt,Et,St,Ft,kt,Ot){this.ctx.rect(St,Ft,kt-St,Ot-Ft),this.ctx.clip(),this.endPath()}getColorN_Pattern(yt){let Et;if(yt[0]==="TilingPattern"){const St=yt[1],Ft=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),kt={createCanvasGraphics:Ot=>new Xt(Ot,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Et=new j.TilingPattern(yt,St,this.ctx,kt,Ft)}else Et=this._getPattern(yt[1],yt[2]);return Et}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(yt,Et,St){const Ft=a.Util.makeHexColor(yt,Et,St);this.ctx.strokeStyle=Ft,this.current.strokeColor=Ft}setFillRGBColor(yt,Et,St){const Ft=a.Util.makeHexColor(yt,Et,St);this.ctx.fillStyle=Ft,this.current.fillColor=Ft,this.current.patternFill=!1}_getPattern(yt,Et=null){let St;return this.cachedPatterns.has(yt)?St=this.cachedPatterns.get(yt):(St=(0,j.getShadingPattern)(this.getObject(yt)),this.cachedPatterns.set(yt,St)),Et&&(St.matrix=Et),St}shadingFill(yt){if(!this.contentVisible)return;const Et=this.ctx;this.save();const St=this._getPattern(yt);Et.fillStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.SHADING);const Ft=(0,o.getCurrentTransformInverse)(Et);if(Ft){const{width:kt,height:Ot}=Et.canvas,[Gt,Vt,rn,an]=a.Util.getAxialAlignedBoundingBox([0,0,kt,Ot],Ft);this.ctx.fillRect(Gt,Vt,rn-Gt,an-Vt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(yt,Et){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(yt)&&yt.length===6&&this.transform(...yt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),Et)){const St=Et[2]-Et[0],Ft=Et[3]-Et[1];this.ctx.rect(Et[0],Et[1],St,Ft),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),Et),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(yt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Et=this.ctx;yt.isolated||(0,a.info)("TODO: Support non-isolated groups."),yt.knockout&&(0,a.warn)("Knockout groups not supported.");const St=(0,o.getCurrentTransform)(Et);if(yt.matrix&&Et.transform(...yt.matrix),!yt.bbox)throw new Error("Bounding box is required.");let Ft=a.Util.getAxialAlignedBoundingBox(yt.bbox,(0,o.getCurrentTransform)(Et));const kt=[0,0,Et.canvas.width,Et.canvas.height];Ft=a.Util.intersect(Ft,kt)||[0,0,0,0];const Ot=Math.floor(Ft[0]),Gt=Math.floor(Ft[1]);let Vt=Math.max(Math.ceil(Ft[2])-Ot,1),rn=Math.max(Math.ceil(Ft[3])-Gt,1),an=1,ln=1;Vt>st&&(an=Vt/st,Vt=st),rn>st&&(ln=rn/st,rn=st),this.current.startNewPathAndClipBox([0,0,Vt,rn]);let cn="groupAt"+this.groupLevel;yt.smask&&(cn+="_smask_"+this.smaskCounter++%2);const dn=this.cachedCanvases.getCanvas(cn,Vt,rn),qt=dn.context;qt.scale(1/an,1/ln),qt.translate(-Ot,-Gt),qt.transform(...St),yt.smask?this.smaskStack.push({canvas:dn.canvas,context:qt,offsetX:Ot,offsetY:Gt,scaleX:an,scaleY:ln,subtype:yt.smask.subtype,backdrop:yt.smask.backdrop,transferMap:yt.smask.transferMap||null,startTransformInverse:null}):(Et.setTransform(1,0,0,1,0,0),Et.translate(Ot,Gt),Et.scale(an,ln),Et.save()),ft(Et,qt),this.ctx=qt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Et),this.groupLevel++}endGroup(yt){if(!this.contentVisible)return;this.groupLevel--;const Et=this.ctx,St=this.groupStack.pop();if(this.ctx=St,this.ctx.imageSmoothingEnabled=!1,yt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Ft=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Ft);const kt=a.Util.getAxialAlignedBoundingBox([0,0,Et.canvas.width,Et.canvas.height],Ft);this.ctx.drawImage(Et.canvas,0,0),this.ctx.restore(),this.compose(kt)}}beginAnnotation(yt,Et,St,Ft,kt){if(wt(this,Ut,Q0).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Et)&&Et.length===4){const Ot=Et[2]-Et[0],Gt=Et[3]-Et[1];if(kt&&this.annotationCanvasMap){St=St.slice(),St[4]-=Et[0],St[5]-=Et[1],Et=Et.slice(),Et[0]=Et[1]=0,Et[2]=Ot,Et[3]=Gt;const[Vt,rn]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:an}=this,ln=Math.ceil(Ot*this.outputScaleX*an),cn=Math.ceil(Gt*this.outputScaleY*an);this.annotationCanvas=this.canvasFactory.create(ln,cn);const{canvas:dn,context:qt}=this.annotationCanvas;this.annotationCanvasMap.set(yt,dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=qt,this.ctx.save(),this.ctx.setTransform(Vt,0,0,-rn,0,Gt*rn),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(Et[0],Et[1],Ot,Gt),this.ctx.clip(),this.endPath()}this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...St),this.transform(...Ft)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),wt(this,Ut,J0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(yt){if(!this.contentVisible)return;const Et=yt.count;yt=this.getObject(yt.data,yt),yt.count=Et;const St=this.ctx,Ft=this.processingType3;if(Ft&&(Ft.compiled===void 0&&(Ft.compiled=lt(yt)),Ft.compiled)){Ft.compiled(St);return}const kt=this._createMaskCanvas(yt),Ot=kt.canvas;St.save(),St.setTransform(1,0,0,1,0,0),St.drawImage(Ot,kt.offsetX,kt.offsetY),St.restore(),this.compose()}paintImageMaskXObjectRepeat(yt,Et,St=0,Ft=0,kt,Ot){if(!this.contentVisible)return;yt=this.getObject(yt.data,yt);const Gt=this.ctx;Gt.save();const Vt=(0,o.getCurrentTransform)(Gt);Gt.transform(Et,St,Ft,kt,0,0);const rn=this._createMaskCanvas(yt);Gt.setTransform(1,0,0,1,rn.offsetX-Vt[4],rn.offsetY-Vt[5]);for(let an=0,ln=Ot.length;an<ln;an+=2){const cn=a.Util.transform(Vt,[Et,St,Ft,kt,Ot[an],Ot[an+1]]),[dn,qt]=a.Util.applyTransform([0,0],cn);Gt.drawImage(rn.canvas,dn,qt)}Gt.restore(),this.compose()}paintImageMaskXObjectGroup(yt){if(!this.contentVisible)return;const Et=this.ctx,St=this.current.fillColor,Ft=this.current.patternFill;for(const kt of yt){const{data:Ot,width:Gt,height:Vt,transform:rn}=kt,an=this.cachedCanvases.getCanvas("maskCanvas",Gt,Vt),ln=an.context;ln.save();const cn=this.getObject(Ot,kt);mt(ln,cn),ln.globalCompositeOperation="source-in",ln.fillStyle=Ft?St.getPattern(ln,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.FILL):St,ln.fillRect(0,0,Gt,Vt),ln.restore(),Et.save(),Et.transform(...rn),Et.scale(1,-1),dt(Et,an.canvas,0,0,Gt,Vt,0,-1,1,1),Et.restore()}this.compose()}paintImageXObject(yt){if(!this.contentVisible)return;const Et=this.getObject(yt);if(!Et){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Et)}paintImageXObjectRepeat(yt,Et,St,Ft){if(!this.contentVisible)return;const kt=this.getObject(yt);if(!kt){(0,a.warn)("Dependent image isn't ready yet");return}const Ot=kt.width,Gt=kt.height,Vt=[];for(let rn=0,an=Ft.length;rn<an;rn+=2)Vt.push({transform:[Et,0,0,St,Ft[rn],Ft[rn+1]],x:0,y:0,w:Ot,h:Gt});this.paintInlineImageXObjectGroup(kt,Vt)}applyTransferMapsToCanvas(yt){return this.current.transferMaps!=="none"&&(yt.filter=this.current.transferMaps,yt.drawImage(yt.canvas,0,0),yt.filter="none"),yt.canvas}applyTransferMapsToBitmap(yt){if(this.current.transferMaps==="none")return yt.bitmap;const{bitmap:Et,width:St,height:Ft}=yt,kt=this.cachedCanvases.getCanvas("inlineImage",St,Ft),Ot=kt.context;return Ot.filter=this.current.transferMaps,Ot.drawImage(Et,0,0),Ot.filter="none",kt.canvas}paintInlineImageXObject(yt){if(!this.contentVisible)return;const Et=yt.width,St=yt.height,Ft=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Gt}=Ft;Gt!=="none"&&Gt!==""&&(Ft.filter="none")}Ft.scale(1/Et,-1/St);let kt;if(yt.bitmap)kt=this.applyTransferMapsToBitmap(yt);else if(typeof HTMLElement=="function"&&yt instanceof HTMLElement||!yt.data)kt=yt;else{const Vt=this.cachedCanvases.getCanvas("inlineImage",Et,St).context;xt(Vt,yt),kt=this.applyTransferMapsToCanvas(Vt)}const Ot=this._scaleImage(kt,(0,o.getCurrentTransformInverse)(Ft));Ft.imageSmoothingEnabled=Tt((0,o.getCurrentTransform)(Ft),yt.interpolate),dt(Ft,Ot.img,0,0,Ot.paintWidth,Ot.paintHeight,0,-St,Et,St),this.compose(),this.restore()}paintInlineImageXObjectGroup(yt,Et){if(!this.contentVisible)return;const St=this.ctx;let Ft;if(yt.bitmap)Ft=yt.bitmap;else{const kt=yt.width,Ot=yt.height,Vt=this.cachedCanvases.getCanvas("inlineImage",kt,Ot).context;xt(Vt,yt),Ft=this.applyTransferMapsToCanvas(Vt)}for(const kt of Et)St.save(),St.transform(...kt.transform),St.scale(1,-1),dt(St,Ft,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),St.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(yt){}markPointProps(yt,Et){}beginMarkedContent(yt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(yt,Et){yt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Et)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(yt){const Et=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(yt);const St=this.ctx;this.pendingClip&&(Et||(this.pendingClip===Wt?St.clip("evenodd"):St.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),St.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const yt=(0,o.getCurrentTransform)(this.ctx);if(yt[1]===0&&yt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(yt[0]),Math.abs(yt[3]));else{const Et=Math.abs(yt[0]*yt[3]-yt[2]*yt[1]),St=Math.hypot(yt[0],yt[2]),Ft=Math.hypot(yt[1],yt[3]);this._cachedGetSinglePixelWidth=Math.max(St,Ft)/Et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:yt}=this.current,{a:Et,b:St,c:Ft,d:kt}=this.ctx.getTransform();let Ot,Gt;if(St===0&&Ft===0){const Vt=Math.abs(Et),rn=Math.abs(kt);if(Vt===rn)if(yt===0)Ot=Gt=1/Vt;else{const an=Vt*yt;Ot=Gt=an<1?1/an:1}else if(yt===0)Ot=1/Vt,Gt=1/rn;else{const an=Vt*yt,ln=rn*yt;Ot=an<1?1/an:1,Gt=ln<1?1/ln:1}}else{const Vt=Math.abs(Et*kt-St*Ft),rn=Math.hypot(Et,St),an=Math.hypot(Ft,kt);if(yt===0)Ot=an/Vt,Gt=rn/Vt;else{const ln=yt*Vt;Ot=an>ln?an/ln:1,Gt=rn>ln?rn/ln:1}}this._cachedScaleForStroking[0]=Ot,this._cachedScaleForStroking[1]=Gt}return this._cachedScaleForStroking}rescaleAndStroke(yt){const{ctx:Et}=this,{lineWidth:St}=this.current,[Ft,kt]=this.getScaleForStroking();if(Et.lineWidth=St||1,Ft===1&&kt===1){Et.stroke();return}const Ot=Et.getLineDash();if(yt&&Et.save(),Et.scale(Ft,kt),Ot.length>0){const Gt=Math.max(Ft,kt);Et.setLineDash(Ot.map(Vt=>Vt/Gt)),Et.lineDashOffset/=Gt}Et.stroke(),yt&&Et.restore()}isContentVisible(){for(let yt=this.markedContentStack.length-1;yt>=0;yt--)if(!this.markedContentStack[yt].visible)return!1;return!0}};Ut=new WeakSet,Q0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},J0=function(){if(this.pageColors){const yt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(yt!=="none"){const Et=this.ctx.filter;this.ctx.filter=yt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Et}}};let Bt=Xt;e.CanvasGraphics=Bt;for(const Ct in a.OPS)Bt.prototype[Ct]!==void 0&&(Bt.prototype[a.OPS[Ct]]=Bt.prototype[Ct])},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=ct;var a=s(1),o=s(6);const j={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=j;function _e(lt,ht){if(!ht)return;const xt=ht[2]-ht[0],mt=ht[3]-ht[1],ft=new Path2D;ft.rect(ht[0],ht[1],xt,mt),lt.clip(ft)}class nt{constructor(){this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class tt extends nt{constructor(ht){super(),this._type=ht[1],this._bbox=ht[2],this._colorStops=ht[3],this._p0=ht[4],this._p1=ht[5],this._r0=ht[6],this._r1=ht[7],this.matrix=null}_createGradient(ht){let xt;this._type==="axial"?xt=ht.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(xt=ht.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const mt of this._colorStops)xt.addColorStop(mt[0],mt[1]);return xt}getPattern(ht,xt,mt,ft){let gt;if(ft===j.STROKE||ft===j.FILL){const pt=xt.current.getClippedPathBoundingBox(ft,(0,o.getCurrentTransform)(ht))||[0,0,0,0],vt=Math.ceil(pt[2]-pt[0])||1,At=Math.ceil(pt[3]-pt[1])||1,Rt=xt.cachedCanvases.getCanvas("pattern",vt,At,!0),bt=Rt.context;bt.clearRect(0,0,bt.canvas.width,bt.canvas.height),bt.beginPath(),bt.rect(0,0,bt.canvas.width,bt.canvas.height),bt.translate(-pt[0],-pt[1]),mt=a.Util.transform(mt,[1,0,0,1,pt[0],pt[1]]),bt.transform(...xt.baseTransform),this.matrix&&bt.transform(...this.matrix),_e(bt,this._bbox),bt.fillStyle=this._createGradient(bt),bt.fill(),gt=ht.createPattern(Rt.canvas,"no-repeat");const Tt=new DOMMatrix(mt);gt.setTransform(Tt)}else _e(ht,this._bbox),gt=this._createGradient(ht);return gt}}function st(lt,ht,xt,mt,ft,gt,pt,vt){const At=ht.coords,Rt=ht.colors,bt=lt.data,Tt=lt.width*4;let Lt;At[xt+1]>At[mt+1]&&(Lt=xt,xt=mt,mt=Lt,Lt=gt,gt=pt,pt=Lt),At[mt+1]>At[ft+1]&&(Lt=mt,mt=ft,ft=Lt,Lt=pt,pt=vt,vt=Lt),At[xt+1]>At[mt+1]&&(Lt=xt,xt=mt,mt=Lt,Lt=gt,gt=pt,pt=Lt);const Yt=(At[xt]+ht.offsetX)*ht.scaleX,zt=(At[xt+1]+ht.offsetY)*ht.scaleY,Wt=(At[mt]+ht.offsetX)*ht.scaleX,Bt=(At[mt+1]+ht.offsetY)*ht.scaleY,Ut=(At[ft]+ht.offsetX)*ht.scaleX,_t=(At[ft+1]+ht.offsetY)*ht.scaleY;if(zt>=_t)return;const $t=Rt[gt],Xt=Rt[gt+1],Ct=Rt[gt+2],yt=Rt[pt],Et=Rt[pt+1],St=Rt[pt+2],Ft=Rt[vt],kt=Rt[vt+1],Ot=Rt[vt+2],Gt=Math.round(zt),Vt=Math.round(_t);let rn,an,ln,cn,dn,qt,sn,It;for(let Ht=Gt;Ht<=Vt;Ht++){if(Ht<Bt){const vn=Ht<zt?0:(zt-Ht)/(zt-Bt);rn=Yt-(Yt-Wt)*vn,an=$t-($t-yt)*vn,ln=Xt-(Xt-Et)*vn,cn=Ct-(Ct-St)*vn}else{let vn;Ht>_t?vn=1:Bt===_t?vn=0:vn=(Bt-Ht)/(Bt-_t),rn=Wt-(Wt-Ut)*vn,an=yt-(yt-Ft)*vn,ln=Et-(Et-kt)*vn,cn=St-(St-Ot)*vn}let Qt;Ht<zt?Qt=0:Ht>_t?Qt=1:Qt=(zt-Ht)/(zt-_t),dn=Yt-(Yt-Ut)*Qt,qt=$t-($t-Ft)*Qt,sn=Xt-(Xt-kt)*Qt,It=Ct-(Ct-Ot)*Qt;const tn=Math.round(Math.min(rn,dn)),un=Math.round(Math.max(rn,dn));let mn=Tt*Ht+tn*4;for(let vn=tn;vn<=un;vn++)Qt=(rn-vn)/(rn-dn),Qt<0?Qt=0:Qt>1&&(Qt=1),bt[mn++]=an-(an-qt)*Qt|0,bt[mn++]=ln-(ln-sn)*Qt|0,bt[mn++]=cn-(cn-It)*Qt|0,bt[mn++]=255}}function rt(lt,ht,xt){const mt=ht.coords,ft=ht.colors;let gt,pt;switch(ht.type){case"lattice":const vt=ht.verticesPerRow,At=Math.floor(mt.length/vt)-1,Rt=vt-1;for(gt=0;gt<At;gt++){let bt=gt*vt;for(let Tt=0;Tt<Rt;Tt++,bt++)st(lt,xt,mt[bt],mt[bt+1],mt[bt+vt],ft[bt],ft[bt+1],ft[bt+vt]),st(lt,xt,mt[bt+vt+1],mt[bt+1],mt[bt+vt],ft[bt+vt+1],ft[bt+1],ft[bt+vt])}break;case"triangles":for(gt=0,pt=mt.length;gt<pt;gt+=3)st(lt,xt,mt[gt],mt[gt+1],mt[gt+2],ft[gt],ft[gt+1],ft[gt+2]);break;default:throw new Error("illegal figure")}}class at extends nt{constructor(ht){super(),this._coords=ht[2],this._colors=ht[3],this._figures=ht[4],this._bounds=ht[5],this._bbox=ht[7],this._background=ht[8],this.matrix=null}_createMeshCanvas(ht,xt,mt){const vt=Math.floor(this._bounds[0]),At=Math.floor(this._bounds[1]),Rt=Math.ceil(this._bounds[2])-vt,bt=Math.ceil(this._bounds[3])-At,Tt=Math.min(Math.ceil(Math.abs(Rt*ht[0]*1.1)),3e3),Lt=Math.min(Math.ceil(Math.abs(bt*ht[1]*1.1)),3e3),Yt=Rt/Tt,zt=bt/Lt,Wt={coords:this._coords,colors:this._colors,offsetX:-vt,offsetY:-At,scaleX:1/Yt,scaleY:1/zt},Bt=Tt+2*2,Ut=Lt+2*2,_t=mt.getCanvas("mesh",Bt,Ut,!1),$t=_t.context,Xt=$t.createImageData(Tt,Lt);if(xt){const yt=Xt.data;for(let Et=0,St=yt.length;Et<St;Et+=4)yt[Et]=xt[0],yt[Et+1]=xt[1],yt[Et+2]=xt[2],yt[Et+3]=255}for(const yt of this._figures)rt(Xt,yt,Wt);return $t.putImageData(Xt,2,2),{canvas:_t.canvas,offsetX:vt-2*Yt,offsetY:At-2*zt,scaleX:Yt,scaleY:zt}}getPattern(ht,xt,mt,ft){_e(ht,this._bbox);let gt;if(ft===j.SHADING)gt=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(ht));else if(gt=a.Util.singularValueDecompose2dScale(xt.baseTransform),this.matrix){const vt=a.Util.singularValueDecompose2dScale(this.matrix);gt=[gt[0]*vt[0],gt[1]*vt[1]]}const pt=this._createMeshCanvas(gt,ft===j.SHADING?null:this._background,xt.cachedCanvases);return ft!==j.SHADING&&(ht.setTransform(...xt.baseTransform),this.matrix&&ht.transform(...this.matrix)),ht.translate(pt.offsetX,pt.offsetY),ht.scale(pt.scaleX,pt.scaleY),ht.createPattern(pt.canvas,"no-repeat")}}class it extends nt{getPattern(){return"hotpink"}}function ct(lt){switch(lt[0]){case"RadialAxial":return new tt(lt);case"Mesh":return new at(lt);case"Dummy":return new it}throw new Error(`Unknown IR type: ${lt[0]}`)}const ot={COLORED:1,UNCOLORED:2},dt=class dt{constructor(ht,xt,mt,ft,gt){this.operatorList=ht[2],this.matrix=ht[3]||[1,0,0,1,0,0],this.bbox=ht[4],this.xstep=ht[5],this.ystep=ht[6],this.paintType=ht[7],this.tilingType=ht[8],this.color=xt,this.ctx=mt,this.canvasGraphicsFactory=ft,this.baseTransform=gt}createPatternCanvas(ht){const xt=this.operatorList,mt=this.bbox,ft=this.xstep,gt=this.ystep,pt=this.paintType,vt=this.tilingType,At=this.color,Rt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+vt);const bt=mt[0],Tt=mt[1],Lt=mt[2],Yt=mt[3],zt=a.Util.singularValueDecompose2dScale(this.matrix),Wt=a.Util.singularValueDecompose2dScale(this.baseTransform),Bt=[zt[0]*Wt[0],zt[1]*Wt[1]],Ut=this.getSizeAndScale(ft,this.ctx.canvas.width,Bt[0]),_t=this.getSizeAndScale(gt,this.ctx.canvas.height,Bt[1]),$t=ht.cachedCanvases.getCanvas("pattern",Ut.size,_t.size,!0),Xt=$t.context,Ct=Rt.createCanvasGraphics(Xt);Ct.groupLevel=ht.groupLevel,this.setFillAndStrokeStyleToContext(Ct,pt,At);let yt=bt,Et=Tt,St=Lt,Ft=Yt;return bt<0&&(yt=0,St+=Math.abs(bt)),Tt<0&&(Et=0,Ft+=Math.abs(Tt)),Xt.translate(-(Ut.scale*yt),-(_t.scale*Et)),Ct.transform(Ut.scale,0,0,_t.scale,0,0),Xt.save(),this.clipBbox(Ct,yt,Et,St,Ft),Ct.baseTransform=(0,o.getCurrentTransform)(Ct.ctx),Ct.executeOperatorList(xt),Ct.endDrawing(),{canvas:$t.canvas,scaleX:Ut.scale,scaleY:_t.scale,offsetX:yt,offsetY:Et}}getSizeAndScale(ht,xt,mt){ht=Math.abs(ht);const ft=Math.max(dt.MAX_PATTERN_SIZE,xt);let gt=Math.ceil(ht*mt);return gt>=ft?gt=ft:mt=gt/ht,{scale:mt,size:gt}}clipBbox(ht,xt,mt,ft,gt){const pt=ft-xt,vt=gt-mt;ht.ctx.rect(xt,mt,pt,vt),ht.current.updateRectMinMax((0,o.getCurrentTransform)(ht.ctx),[xt,mt,ft,gt]),ht.clip(),ht.endPath()}setFillAndStrokeStyleToContext(ht,xt,mt){const ft=ht.ctx,gt=ht.current;switch(xt){case ot.COLORED:const pt=this.ctx;ft.fillStyle=pt.fillStyle,ft.strokeStyle=pt.strokeStyle,gt.fillColor=pt.fillStyle,gt.strokeColor=pt.strokeStyle;break;case ot.UNCOLORED:const vt=a.Util.makeHexColor(mt[0],mt[1],mt[2]);ft.fillStyle=vt,ft.strokeStyle=vt,gt.fillColor=vt,gt.strokeColor=vt;break;default:throw new a.FormatError(`Unsupported paint type: ${xt}`)}}getPattern(ht,xt,mt,ft){let gt=mt;ft!==j.SHADING&&(gt=a.Util.transform(gt,xt.baseTransform),this.matrix&&(gt=a.Util.transform(gt,this.matrix)));const pt=this.createPatternCanvas(xt);let vt=new DOMMatrix(gt);vt=vt.translate(pt.offsetX,pt.offsetY),vt=vt.scale(1/pt.scaleX,1/pt.scaleY);const At=ht.createPattern(pt.canvas,"repeat");return At.setTransform(vt),At}};Hn(dt,"MAX_PATTERN_SIZE",3e3);let ut=dt;e.TilingPattern=ut},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=j,e.convertToRGBA=o,e.grayToRGBA=nt;var a=s(1);function o(tt){switch(tt.kind){case a.ImageKind.GRAYSCALE_1BPP:return j(tt);case a.ImageKind.RGB_24BPP:return _e(tt)}return null}function j({src:tt,srcPos:st=0,dest:rt,width:at,height:it,nonBlackColor:ct=4294967295,inverseDecode:ot=!1}){const ut=a.FeatureTest.isLittleEndian?4278190080:255,[dt,lt]=ot?[ct,ut]:[ut,ct],ht=at>>3,xt=at&7,mt=tt.length;rt=new Uint32Array(rt.buffer);let ft=0;for(let gt=0;gt<it;gt++){for(const vt=st+ht;st<vt;st++){const At=st<mt?tt[st]:255;rt[ft++]=At&128?lt:dt,rt[ft++]=At&64?lt:dt,rt[ft++]=At&32?lt:dt,rt[ft++]=At&16?lt:dt,rt[ft++]=At&8?lt:dt,rt[ft++]=At&4?lt:dt,rt[ft++]=At&2?lt:dt,rt[ft++]=At&1?lt:dt}if(xt===0)continue;const pt=st<mt?tt[st++]:255;for(let vt=0;vt<xt;vt++)rt[ft++]=pt&1<<7-vt?lt:dt}return{srcPos:st,destPos:ft}}function _e({src:tt,srcPos:st=0,dest:rt,destPos:at=0,width:it,height:ct}){let ot=0;const ut=tt.length>>2,dt=new Uint32Array(tt.buffer,st,ut);if(a.FeatureTest.isLittleEndian){for(;ot<ut-2;ot+=3,at+=4){const lt=dt[ot],ht=dt[ot+1],xt=dt[ot+2];rt[at]=lt|4278190080,rt[at+1]=lt>>>24|ht<<8|4278190080,rt[at+2]=ht>>>16|xt<<16|4278190080,rt[at+3]=xt>>>8|4278190080}for(let lt=ot*4,ht=tt.length;lt<ht;lt+=3)rt[at++]=tt[lt]|tt[lt+1]<<8|tt[lt+2]<<16|4278190080}else{for(;ot<ut-2;ot+=3,at+=4){const lt=dt[ot],ht=dt[ot+1],xt=dt[ot+2];rt[at]=lt|255,rt[at+1]=lt<<24|ht>>>8|255,rt[at+2]=ht<<16|xt>>>16|255,rt[at+3]=xt<<8|255}for(let lt=ot*4,ht=tt.length;lt<ht;lt+=3)rt[at++]=tt[lt]<<24|tt[lt+1]<<16|tt[lt+2]<<8|255}return{srcPos:st,destPos:at}}function nt(tt,st){if(a.FeatureTest.isLittleEndian)for(let rt=0,at=tt.length;rt<at;rt++)st[rt]=tt[rt]*65793|4278190080;else for(let rt=0,at=tt.length;rt<at;rt++)st[rt]=tt[rt]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(i,e,s)=>{var tt,FA,LA,Zv;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var a=s(1);const o={UNKNOWN:0,DATA:1,ERROR:2},j={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _e(it){switch(it instanceof Error||typeof it=="object"&&it!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new a.AbortException(it.message);case"MissingPDFException":return new a.MissingPDFException(it.message);case"PasswordException":return new a.PasswordException(it.message,it.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(it.message,it.status);case"UnknownErrorException":return new a.UnknownErrorException(it.message,it.details);default:return new a.UnknownErrorException(it.message,it.toString())}}class nt{constructor(ct,ot,ut){Dt(this,tt);this.sourceName=ct,this.targetName=ot,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=dt=>{const lt=dt.data;if(lt.targetName!==this.sourceName)return;if(lt.stream){wt(this,tt,LA).call(this,lt);return}if(lt.callback){const xt=lt.callbackId,mt=this.callbackCapabilities[xt];if(!mt)throw new Error(`Cannot resolve callback ${xt}`);if(delete this.callbackCapabilities[xt],lt.callback===o.DATA)mt.resolve(lt.data);else if(lt.callback===o.ERROR)mt.reject(_e(lt.reason));else throw new Error("Unexpected callback case");return}const ht=this.actionHandler[lt.action];if(!ht)throw new Error(`Unknown action from worker: ${lt.action}`);if(lt.callbackId){const xt=this.sourceName,mt=lt.sourceName;new Promise(function(ft){ft(ht(lt.data))}).then(function(ft){ut.postMessage({sourceName:xt,targetName:mt,callback:o.DATA,callbackId:lt.callbackId,data:ft})},function(ft){ut.postMessage({sourceName:xt,targetName:mt,callback:o.ERROR,callbackId:lt.callbackId,reason:_e(ft)})});return}if(lt.streamId){wt(this,tt,FA).call(this,lt);return}ht(lt.data)},ut.addEventListener("message",this._onComObjOnMessage)}on(ct,ot){const ut=this.actionHandler;if(ut[ct])throw new Error(`There is already an actionName called "${ct}"`);ut[ct]=ot}send(ct,ot,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,data:ot},ut)}sendWithPromise(ct,ot,ut){const dt=this.callbackId++,lt=new a.PromiseCapability;this.callbackCapabilities[dt]=lt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,callbackId:dt,data:ot},ut)}catch(ht){lt.reject(ht)}return lt.promise}sendWithStream(ct,ot,ut,dt){const lt=this.streamId++,ht=this.sourceName,xt=this.targetName,mt=this.comObj;return new ReadableStream({start:ft=>{const gt=new a.PromiseCapability;return this.streamControllers[lt]={controller:ft,startCall:gt,pullCall:null,cancelCall:null,isClosed:!1},mt.postMessage({sourceName:ht,targetName:xt,action:ct,streamId:lt,data:ot,desiredSize:ft.desiredSize},dt),gt.promise},pull:ft=>{const gt=new a.PromiseCapability;return this.streamControllers[lt].pullCall=gt,mt.postMessage({sourceName:ht,targetName:xt,stream:j.PULL,streamId:lt,desiredSize:ft.desiredSize}),gt.promise},cancel:ft=>{(0,a.assert)(ft instanceof Error,"cancel must have a valid reason");const gt=new a.PromiseCapability;return this.streamControllers[lt].cancelCall=gt,this.streamControllers[lt].isClosed=!0,mt.postMessage({sourceName:ht,targetName:xt,stream:j.CANCEL,streamId:lt,reason:_e(ft)}),gt.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}tt=new WeakSet,FA=function(ct){const ot=ct.streamId,ut=this.sourceName,dt=ct.sourceName,lt=this.comObj,ht=this,xt=this.actionHandler[ct.action],mt={enqueue(ft,gt=1,pt){if(this.isCancelled)return;const vt=this.desiredSize;this.desiredSize-=gt,vt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),lt.postMessage({sourceName:ut,targetName:dt,stream:j.ENQUEUE,streamId:ot,chunk:ft},pt)},close(){this.isCancelled||(this.isCancelled=!0,lt.postMessage({sourceName:ut,targetName:dt,stream:j.CLOSE,streamId:ot}),delete ht.streamSinks[ot])},error(ft){(0,a.assert)(ft instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,lt.postMessage({sourceName:ut,targetName:dt,stream:j.ERROR,streamId:ot,reason:_e(ft)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ct.desiredSize,ready:null};mt.sinkCapability.resolve(),mt.ready=mt.sinkCapability.promise,this.streamSinks[ot]=mt,new Promise(function(ft){ft(xt(ct.data,mt))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.START_COMPLETE,streamId:ot,success:!0})},function(ft){lt.postMessage({sourceName:ut,targetName:dt,stream:j.START_COMPLETE,streamId:ot,reason:_e(ft)})})},LA=function(ct){const ot=ct.streamId,ut=this.sourceName,dt=ct.sourceName,lt=this.comObj,ht=this.streamControllers[ot],xt=this.streamSinks[ot];switch(ct.stream){case j.START_COMPLETE:ct.success?ht.startCall.resolve():ht.startCall.reject(_e(ct.reason));break;case j.PULL_COMPLETE:ct.success?ht.pullCall.resolve():ht.pullCall.reject(_e(ct.reason));break;case j.PULL:if(!xt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,success:!0});break}xt.desiredSize<=0&&ct.desiredSize>0&&xt.sinkCapability.resolve(),xt.desiredSize=ct.desiredSize,new Promise(function(mt){var ft;mt((ft=xt.onPull)==null?void 0:ft.call(xt))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,success:!0})},function(mt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,reason:_e(mt)})});break;case j.ENQUEUE:if((0,a.assert)(ht,"enqueue should have stream controller"),ht.isClosed)break;ht.controller.enqueue(ct.chunk);break;case j.CLOSE:if((0,a.assert)(ht,"close should have stream controller"),ht.isClosed)break;ht.isClosed=!0,ht.controller.close(),wt(this,tt,Zv).call(this,ht,ot);break;case j.ERROR:(0,a.assert)(ht,"error should have stream controller"),ht.controller.error(_e(ct.reason)),wt(this,tt,Zv).call(this,ht,ot);break;case j.CANCEL_COMPLETE:ct.success?ht.cancelCall.resolve():ht.cancelCall.reject(_e(ct.reason)),wt(this,tt,Zv).call(this,ht,ot);break;case j.CANCEL:if(!xt)break;new Promise(function(mt){var ft;mt((ft=xt.onCancel)==null?void 0:ft.call(xt,_e(ct.reason)))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.CANCEL_COMPLETE,streamId:ot,success:!0})},function(mt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.CANCEL_COMPLETE,streamId:ot,reason:_e(mt)})}),xt.sinkCapability.reject(_e(ct.reason)),xt.isCancelled=!0,delete this.streamSinks[ot];break;default:throw new Error("Unexpected stream case")}},Zv=async function(ct,ot){var ut,dt,lt;await Promise.allSettled([(ut=ct.startCall)==null?void 0:ut.promise,(dt=ct.pullCall)==null?void 0:dt.promise,(lt=ct.cancelCall)==null?void 0:lt.promise]),delete this.streamControllers[ot]},e.MessageHandler=nt},(i,e,s)=>{var j,_e;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var a=s(1);class o{constructor({parsedData:tt,rawData:st}){Dt(this,j);Dt(this,_e);Pt(this,j,tt),Pt(this,_e,st)}getRaw(){return et(this,_e)}get(tt){return et(this,j).get(tt)??null}getAll(){return(0,a.objectFromMap)(et(this,j))}has(tt){return et(this,j).has(tt)}}j=new WeakMap,_e=new WeakMap,e.Metadata=o},(i,e,s)=>{var tt,st,rt,at,it,ct,Z0;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var a=s(1),o=s(8);const j=Symbol("INTERNAL");class _e{constructor(dt,lt){Dt(this,tt,!0);this.name=dt,this.intent=lt}get visible(){return et(this,tt)}_setVisible(dt,lt){dt!==j&&(0,a.unreachable)("Internal method `_setVisible` called."),Pt(this,tt,lt)}}tt=new WeakMap;class nt{constructor(dt){Dt(this,ct);Dt(this,st,null);Dt(this,rt,new Map);Dt(this,at,null);Dt(this,it,null);if(this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,Pt(this,it,dt.order);for(const lt of dt.groups)et(this,rt).set(lt.id,new _e(lt.name,lt.intent));if(dt.baseState==="OFF")for(const lt of et(this,rt).values())lt._setVisible(j,!1);for(const lt of dt.on)et(this,rt).get(lt)._setVisible(j,!0);for(const lt of dt.off)et(this,rt).get(lt)._setVisible(j,!1);Pt(this,at,this.getHash())}}isVisible(dt){if(et(this,rt).size===0)return!0;if(!dt)return(0,a.warn)("Optional content group not defined."),!0;if(dt.type==="OCG")return et(this,rt).has(dt.id)?et(this,rt).get(dt.id).visible:((0,a.warn)(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return wt(this,ct,Z0).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(et(this,rt).get(lt).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(!et(this,rt).get(lt).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(!et(this,rt).get(lt).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(et(this,rt).get(lt).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${dt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${dt.type}.`),!0}setVisibility(dt,lt=!0){if(!et(this,rt).has(dt)){(0,a.warn)(`Optional content group not found: ${dt}`);return}et(this,rt).get(dt)._setVisible(j,!!lt),Pt(this,st,null)}get hasInitialVisibility(){return et(this,at)===null||this.getHash()===et(this,at)}getOrder(){return et(this,rt).size?et(this,it)?et(this,it).slice():[...et(this,rt).keys()]:null}getGroups(){return et(this,rt).size>0?(0,a.objectFromMap)(et(this,rt)):null}getGroup(dt){return et(this,rt).get(dt)||null}getHash(){if(et(this,st)!==null)return et(this,st);const dt=new o.MurmurHash3_64;for(const[lt,ht]of et(this,rt))dt.update(`${lt}:${ht.visible}`);return Pt(this,st,dt.hexdigest())}}st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakSet,Z0=function(dt){const lt=dt.length;if(lt<2)return!0;const ht=dt[0];for(let xt=1;xt<lt;xt++){const mt=dt[xt];let ft;if(Array.isArray(mt))ft=wt(this,ct,Z0).call(this,mt);else if(et(this,rt).has(mt))ft=et(this,rt).get(mt).visible;else return(0,a.warn)(`Optional content group not found: ${mt}`),!0;switch(ht){case"And":if(!ft)return!1;break;case"Or":if(ft)return!0;break;case"Not":return!ft;default:return!0}}return ht==="And"},e.OptionalContentConfig=nt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=s(1),o=s(6);class j{constructor({length:st,initialData:rt,progressiveDone:at=!1,contentDispositionFilename:it=null,disableRange:ct=!1,disableStream:ot=!1},ut){if((0,a.assert)(ut,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=at,this._contentDispositionFilename=it,(rt==null?void 0:rt.length)>0){const dt=rt instanceof Uint8Array&&rt.byteLength===rt.buffer.byteLength?rt.buffer:new Uint8Array(rt).buffer;this._queuedChunks.push(dt)}this._pdfDataRangeTransport=ut,this._isStreamingSupported=!ot,this._isRangeSupported=!ct,this._contentLength=st,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((dt,lt)=>{this._onReceiveData({begin:dt,chunk:lt})}),this._pdfDataRangeTransport.addProgressListener((dt,lt)=>{this._onProgress({loaded:dt,total:lt})}),this._pdfDataRangeTransport.addProgressiveReadListener(dt=>{this._onReceiveData({chunk:dt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:st,chunk:rt}){const at=rt instanceof Uint8Array&&rt.byteLength===rt.buffer.byteLength?rt.buffer:new Uint8Array(rt).buffer;if(st===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(at):this._queuedChunks.push(at);else{const it=this._rangeReaders.some(function(ct){return ct._begin!==st?!1:(ct._enqueue(at),!0)});(0,a.assert)(it,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}_onProgress(st){var rt,at,it,ct;st.total===void 0?(at=(rt=this._rangeReaders[0])==null?void 0:rt.onProgress)==null||at.call(rt,{loaded:st.loaded}):(ct=(it=this._fullRequestReader)==null?void 0:it.onProgress)==null||ct.call(it,{loaded:st.loaded,total:st.total})}_onProgressiveDone(){var st;(st=this._fullRequestReader)==null||st.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(st){const rt=this._rangeReaders.indexOf(st);rt>=0&&this._rangeReaders.splice(rt,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const st=this._queuedChunks;return this._queuedChunks=null,new _e(this,st,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(st,rt){if(rt<=this._progressiveDataLength)return null;const at=new nt(this,st,rt);return this._pdfDataRangeTransport.requestDataRange(st,rt),this._rangeReaders.push(at),at}cancelAllRequests(st){var rt;(rt=this._fullRequestReader)==null||rt.cancel(st);for(const at of this._rangeReaders.slice(0))at.cancel(st);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=j;class _e{constructor(st,rt,at=!1,it=null){this._stream=st,this._done=at||!1,this._filename=(0,o.isPdfFile)(it)?it:null,this._queuedChunks=rt||[],this._loaded=0;for(const ct of this._queuedChunks)this._loaded+=ct.byteLength;this._requests=[],this._headersReady=Promise.resolve(),st._fullRequestReader=this,this.onProgress=null}_enqueue(st){this._done||(this._requests.length>0?this._requests.shift().resolve({value:st,done:!1}):this._queuedChunks.push(st),this._loaded+=st.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nt{constructor(st,rt,at){this._stream=st,this._begin=rt,this._end=at,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(st){if(!this._done){if(this._requests.length===0)this._queuedChunk=st;else{this._requests.shift().resolve({value:st,done:!1});for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const rt=this._queuedChunk;return this._queuedChunk=null,{value:rt,done:!1}}if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=s(1),o=s(20);function j(at,it,ct){return{method:"GET",headers:at,signal:ct.signal,mode:"cors",credentials:it?"include":"same-origin",redirect:"follow"}}function _e(at){const it=new Headers;for(const ct in at){const ot=at[ct];ot!==void 0&&it.append(ct,ot)}return it}function nt(at){return at instanceof Uint8Array?at.buffer:at instanceof ArrayBuffer?at:((0,a.warn)(`getArrayBuffer - unexpected data format: ${at}`),new Uint8Array(at).buffer)}class tt{constructor(it){this.source=it,this.isHttp=/^https?:/i.test(it.url),this.httpHeaders=this.isHttp&&it.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var it;return((it=this._fullRequestReader)==null?void 0:it._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new st(this),this._fullRequestReader}getRangeReader(it,ct){if(ct<=this._progressiveDataLength)return null;const ot=new rt(this,it,ct);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(it){var ct;(ct=this._fullRequestReader)==null||ct.cancel(it);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(it)}}e.PDFFetchStream=tt;class st{constructor(it){this._stream=it,this._reader=null,this._loaded=0,this._filename=null;const ct=it.source;this._withCredentials=ct.withCredentials||!1,this._contentLength=ct.length,this._headersCapability=new a.PromiseCapability,this._disableRange=ct.disableRange||!1,this._rangeChunkSize=ct.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ct.disableStream,this._isRangeSupported=!ct.disableRange,this._headers=_e(this._stream.httpHeaders);const ot=ct.url;fetch(ot,j(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,o.validateResponseStatus)(ut.status))throw(0,o.createResponseStatusError)(ut.status,ot);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=xt=>ut.headers.get(xt),{allowRangeRequests:lt,suggestedLength:ht}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=lt,this._contentLength=ht||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:it,done:ct}=await this._reader.read();return ct?{value:it,done:ct}:(this._loaded+=it.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nt(it),done:!1})}cancel(it){var ct;(ct=this._reader)==null||ct.cancel(it),this._abortController.abort()}}class rt{constructor(it,ct,ot){this._stream=it,this._reader=null,this._loaded=0;const ut=it.source;this._withCredentials=ut.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ut.disableStream,this._abortController=new AbortController,this._headers=_e(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ct}-${ot-1}`);const dt=ut.url;fetch(dt,j(this._headers,this._withCredentials,this._abortController)).then(lt=>{if(!(0,o.validateResponseStatus)(lt.status))throw(0,o.createResponseStatusError)(lt.status,dt);this._readCapability.resolve(),this._reader=lt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:it,done:ct}=await this._reader.read();return ct?{value:it,done:ct}:(this._loaded+=it.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:nt(it),done:!1})}cancel(it){var ct;(ct=this._reader)==null||ct.cancel(it),this._abortController.abort()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=tt,e.extractFilenameFromHeader=nt,e.validateRangeRequestCapabilities=_e,e.validateResponseStatus=st;var a=s(1),o=s(21),j=s(6);function _e({getResponseHeader:rt,isHttp:at,rangeChunkSize:it,disableRange:ct}){const ot={allowRangeRequests:!1,suggestedLength:void 0},ut=parseInt(rt("Content-Length"),10);return!Number.isInteger(ut)||(ot.suggestedLength=ut,ut<=2*it)||ct||!at||rt("Accept-Ranges")!=="bytes"||(rt("Content-Encoding")||"identity")!=="identity"||(ot.allowRangeRequests=!0),ot}function nt(rt){const at=rt("Content-Disposition");if(at){let it=(0,o.getFilenameFromContentDispositionHeader)(at);if(it.includes("%"))try{it=decodeURIComponent(it)}catch{}if((0,j.isPdfFile)(it))return it}return null}function tt(rt,at){return rt===404||rt===0&&at.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+at+'".'):new a.UnexpectedResponseException(`Unexpected server response (${rt}) while retrieving PDF "${at}".`,rt)}function st(rt){return rt===200||rt===206}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var a=s(1);function o(j){let _e=!0,nt=tt("filename\\*","i").exec(j);if(nt){nt=nt[1];let ut=it(nt);return ut=unescape(ut),ut=ct(ut),ut=ot(ut),rt(ut)}if(nt=at(j),nt){const ut=ot(nt);return rt(ut)}if(nt=tt("filename","i").exec(j),nt){nt=nt[1];let ut=it(nt);return ut=ot(ut),rt(ut)}function tt(ut,dt){return new RegExp("(?:^|;)\\s*"+ut+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',dt)}function st(ut,dt){if(ut){if(!/^[\x00-\xFF]+$/.test(dt))return dt;try{const lt=new TextDecoder(ut,{fatal:!0}),ht=(0,a.stringToBytes)(dt);dt=lt.decode(ht),_e=!1}catch{}}return dt}function rt(ut){return _e&&/[\x80-\xff]/.test(ut)&&(ut=st("utf-8",ut),_e&&(ut=st("iso-8859-1",ut))),ut}function at(ut){const dt=[];let lt;const ht=tt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(lt=ht.exec(ut))!==null;){let[,mt,ft,gt]=lt;if(mt=parseInt(mt,10),mt in dt){if(mt===0)break;continue}dt[mt]=[ft,gt]}const xt=[];for(let mt=0;mt<dt.length&&mt in dt;++mt){let[ft,gt]=dt[mt];gt=it(gt),ft&&(gt=unescape(gt),mt===0&&(gt=ct(gt))),xt.push(gt)}return xt.join("")}function it(ut){if(ut.startsWith('"')){const dt=ut.slice(1).split('\\"');for(let lt=0;lt<dt.length;++lt){const ht=dt[lt].indexOf('"');ht!==-1&&(dt[lt]=dt[lt].slice(0,ht),dt.length=lt+1),dt[lt]=dt[lt].replaceAll(/\\(.)/g,"$1")}ut=dt.join('"')}return ut}function ct(ut){const dt=ut.indexOf("'");if(dt===-1)return ut;const lt=ut.slice(0,dt),xt=ut.slice(dt+1).replace(/^[^']*'/,"");return st(lt,xt)}function ot(ut){return!ut.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ut)?ut:ut.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(dt,lt,ht,xt){if(ht==="q"||ht==="Q")return xt=xt.replaceAll("_"," "),xt=xt.replaceAll(/=([0-9a-fA-F]{2})/g,function(mt,ft){return String.fromCharCode(parseInt(ft,16))}),st(lt,xt);try{xt=atob(xt)}catch{}return st(lt,xt)})}return""}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var a=s(1),o=s(20);const j=200,_e=206;function nt(it){const ct=it.response;return typeof ct!="string"?ct:(0,a.stringToBytes)(ct).buffer}class tt{constructor(ct,ot={}){this.url=ct,this.isHttp=/^https?:/i.test(ct),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ct,ot,ut){const dt={begin:ct,end:ot};for(const lt in ut)dt[lt]=ut[lt];return this.request(dt)}requestFull(ct){return this.request(ct)}request(ct){const ot=new XMLHttpRequest,ut=this.currXhrId++,dt=this.pendingRequests[ut]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const lt in this.httpHeaders){const ht=this.httpHeaders[lt];ht!==void 0&&ot.setRequestHeader(lt,ht)}return this.isHttp&&"begin"in ct&&"end"in ct?(ot.setRequestHeader("Range",`bytes=${ct.begin}-${ct.end-1}`),dt.expectedStatus=_e):dt.expectedStatus=j,ot.responseType="arraybuffer",ct.onError&&(ot.onerror=function(lt){ct.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,ut),ot.onprogress=this.onProgress.bind(this,ut),dt.onHeadersReceived=ct.onHeadersReceived,dt.onDone=ct.onDone,dt.onError=ct.onError,dt.onProgress=ct.onProgress,ot.send(null),ut}onProgress(ct,ot){var dt;const ut=this.pendingRequests[ct];ut&&((dt=ut.onProgress)==null||dt.call(ut,ot))}onStateChange(ct,ot){var mt,ft,gt;const ut=this.pendingRequests[ct];if(!ut)return;const dt=ut.xhr;if(dt.readyState>=2&&ut.onHeadersReceived&&(ut.onHeadersReceived(),delete ut.onHeadersReceived),dt.readyState!==4||!(ct in this.pendingRequests))return;if(delete this.pendingRequests[ct],dt.status===0&&this.isHttp){(mt=ut.onError)==null||mt.call(ut,dt.status);return}const lt=dt.status||j;if(!(lt===j&&ut.expectedStatus===_e)&&lt!==ut.expectedStatus){(ft=ut.onError)==null||ft.call(ut,dt.status);return}const xt=nt(dt);if(lt===_e){const pt=dt.getResponseHeader("Content-Range"),vt=/bytes (\d+)-(\d+)\/(\d+)/.exec(pt);ut.onDone({begin:parseInt(vt[1],10),chunk:xt})}else xt?ut.onDone({begin:0,chunk:xt}):(gt=ut.onError)==null||gt.call(ut,dt.status)}getRequestXhr(ct){return this.pendingRequests[ct].xhr}isPendingRequest(ct){return ct in this.pendingRequests}abortRequest(ct){const ot=this.pendingRequests[ct].xhr;delete this.pendingRequests[ct],ot.abort()}}class st{constructor(ct){this._source=ct,this._manager=new tt(ct.url,{httpHeaders:ct.httpHeaders,withCredentials:ct.withCredentials}),this._rangeChunkSize=ct.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ct){const ot=this._rangeRequestReaders.indexOf(ct);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rt(this._manager,this._source),this._fullRequestReader}getRangeReader(ct,ot){const ut=new at(this._manager,ct,ot);return ut.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ut),ut}cancelAllRequests(ct){var ot;(ot=this._fullRequestReader)==null||ot.cancel(ct);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(ct)}}e.PDFNetworkStream=st;class rt{constructor(ct,ot){this._manager=ct;const ut={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=ct.requestFull(ut),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ct=this._fullRequestId,ot=this._manager.getRequestXhr(ct),ut=ht=>ot.getResponseHeader(ht),{allowRangeRequests:dt,suggestedLength:lt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ut,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});dt&&(this._isRangeSupported=!0),this._contentLength=lt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ut),this._isRangeSupported&&this._manager.abortRequest(ct),this._headersReceivedCapability.resolve()}_onDone(ct){if(ct&&(this._requests.length>0?this._requests.shift().resolve({value:ct.chunk,done:!1}):this._cachedChunks.push(ct.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ct){this._storedError=(0,o.createResponseStatusError)(ct,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ct){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:ct.loaded,total:ct.lengthComputable?ct.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ct=new a.PromiseCapability;return this._requests.push(ct),ct.promise}cancel(ct){this._done=!0,this._headersReceivedCapability.reject(ct);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class at{constructor(ct,ot,ut){this._manager=ct;const dt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ct.url,this._requestId=ct.requestRange(ot,ut,dt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ct;(ct=this.onClosed)==null||ct.call(this,this)}_onDone(ct){const ot=ct.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ct){this._storedError=(0,o.createResponseStatusError)(ct,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ct){var ot;this.isStreamingSupported||(ot=this.onProgress)==null||ot.call(this,{loaded:ct.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const ct=new a.PromiseCapability;return this._requests.push(ct),ct.promise}cancel(ct){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var a=s(1),o=s(20);const j=/^file:\/\/\/[a-zA-Z]:\//;function _e(ut){const dt=require$$6,lt=dt.parse(ut);return lt.protocol==="file:"||lt.host?lt:/^[a-z]:[/\\]/i.test(ut)?dt.parse(`file:///${ut}`):(lt.host||(lt.protocol="file:"),lt)}class nt{constructor(dt){this.source=dt,this.url=_e(dt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ct(this):new at(this),this._fullRequestReader}getRangeReader(dt,lt){if(lt<=this._progressiveDataLength)return null;const ht=this.isFsUrl?new ot(this,dt,lt):new it(this,dt,lt);return this._rangeRequestReaders.push(ht),ht}cancelAllRequests(dt){var lt;(lt=this._fullRequestReader)==null||lt.cancel(dt);for(const ht of this._rangeRequestReaders.slice(0))ht.cancel(dt)}}e.PDFNodeStream=nt;class tt{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const lt=dt.source;this._contentLength=lt.length,this._loaded=0,this._filename=null,this._disableRange=lt.disableRange||!1,this._rangeChunkSize=lt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!lt.disableStream,this._isRangeSupported=!lt.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",lt=>{this._error(lt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class st{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const lt=dt.source;this._isStreamingSupported=!lt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",lt=>{this._error(lt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function rt(ut,dt){return{protocol:ut.protocol,auth:ut.auth,host:ut.hostname,port:ut.port,path:ut.path,method:"GET",headers:dt}}class at extends tt{constructor(dt){super(dt);const lt=ht=>{if(ht.statusCode===404){const gt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gt,this._headersCapability.reject(gt);return}this._headersCapability.resolve(),this._setReadableStream(ht);const xt=gt=>this._readableStream.headers[gt.toLowerCase()],{allowRangeRequests:mt,suggestedLength:ft}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:xt,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=mt,this._contentLength=ft||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(xt)};if(this._request=null,this._url.protocol==="http:"){const ht=require$$6;this._request=ht.request(rt(this._url,dt.httpHeaders),lt)}else{const ht=require$$6;this._request=ht.request(rt(this._url,dt.httpHeaders),lt)}this._request.on("error",ht=>{this._storedError=ht,this._headersCapability.reject(ht)}),this._request.end()}}class it extends st{constructor(dt,lt,ht){super(dt),this._httpHeaders={};for(const mt in dt.httpHeaders){const ft=dt.httpHeaders[mt];ft!==void 0&&(this._httpHeaders[mt]=ft)}this._httpHeaders.Range=`bytes=${lt}-${ht-1}`;const xt=mt=>{if(mt.statusCode===404){const ft=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ft;return}this._setReadableStream(mt)};if(this._request=null,this._url.protocol==="http:"){const mt=require$$6;this._request=mt.request(rt(this._url,this._httpHeaders),xt)}else{const mt=require$$6;this._request=mt.request(rt(this._url,this._httpHeaders),xt)}this._request.on("error",mt=>{this._storedError=mt}),this._request.end()}}class ct extends tt{constructor(dt){super(dt);let lt=decodeURIComponent(this._url.path);j.test(this._url.href)&&(lt=lt.replace(/^\//,""));const ht=require$$6;ht.lstat(lt,(xt,mt)=>{if(xt){xt.code==="ENOENT"&&(xt=new a.MissingPDFException(`Missing PDF "${lt}".`)),this._storedError=xt,this._headersCapability.reject(xt);return}this._contentLength=mt.size,this._setReadableStream(ht.createReadStream(lt)),this._headersCapability.resolve()})}}class ot extends st{constructor(dt,lt,ht){super(dt);let xt=decodeURIComponent(this._url.path);j.test(this._url.href)&&(xt=xt.replace(/^\//,""));const mt=require$$6;this._setReadableStream(mt.createReadStream(xt,{start:lt,end:ht-1}))}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var a=s(6),o=s(1);const j={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_e="http://www.w3.org/XML/1998/namespace",nt="http://www.w3.org/1999/xlink",tt=["butt","round","square"],st=["miter","round","bevel"],rt=function(mt,ft="",gt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!gt)return URL.createObjectURL(new Blob([mt],{type:ft}));const pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vt=`data:${ft};base64,`;for(let At=0,Rt=mt.length;At<Rt;At+=3){const bt=mt[At]&255,Tt=mt[At+1]&255,Lt=mt[At+2]&255,Yt=bt>>2,zt=(bt&3)<<4|Tt>>4,Wt=At+1<Rt?(Tt&15)<<2|Lt>>6:64,Bt=At+2<Rt?Lt&63:64;vt+=pt[Yt]+pt[zt]+pt[Wt]+pt[Bt]}return vt},at=function(){const mt=new Uint8Array([137,80,78,71,13,10,26,10]),ft=12,gt=new Int32Array(256);for(let Lt=0;Lt<256;Lt++){let Yt=Lt;for(let zt=0;zt<8;zt++)Yt=Yt&1?3988292384^Yt>>1&2147483647:Yt>>1&2147483647;gt[Lt]=Yt}function pt(Lt,Yt,zt){let Wt=-1;for(let Bt=Yt;Bt<zt;Bt++){const Ut=(Wt^Lt[Bt])&255,_t=gt[Ut];Wt=Wt>>>8^_t}return Wt^-1}function vt(Lt,Yt,zt,Wt){let Bt=Wt;const Ut=Yt.length;zt[Bt]=Ut>>24&255,zt[Bt+1]=Ut>>16&255,zt[Bt+2]=Ut>>8&255,zt[Bt+3]=Ut&255,Bt+=4,zt[Bt]=Lt.charCodeAt(0)&255,zt[Bt+1]=Lt.charCodeAt(1)&255,zt[Bt+2]=Lt.charCodeAt(2)&255,zt[Bt+3]=Lt.charCodeAt(3)&255,Bt+=4,zt.set(Yt,Bt),Bt+=Yt.length;const _t=pt(zt,Wt+4,Bt);zt[Bt]=_t>>24&255,zt[Bt+1]=_t>>16&255,zt[Bt+2]=_t>>8&255,zt[Bt+3]=_t&255}function At(Lt,Yt,zt){let Wt=1,Bt=0;for(let Ut=Yt;Ut<zt;++Ut)Wt=(Wt+(Lt[Ut]&255))%65521,Bt=(Bt+Wt)%65521;return Bt<<16|Wt}function Rt(Lt){if(!o.isNodeJS)return bt(Lt);try{const Yt=parseInt(process.versions.node)>=8?Lt:Buffer.from(Lt),zt=require$$6.deflateSync(Yt,{level:9});return zt instanceof Uint8Array?zt:new Uint8Array(zt)}catch(Yt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Yt)}return bt(Lt)}function bt(Lt){let Yt=Lt.length;const zt=65535,Wt=Math.ceil(Yt/zt),Bt=new Uint8Array(2+Yt+Wt*5+4);let Ut=0;Bt[Ut++]=120,Bt[Ut++]=156;let _t=0;for(;Yt>zt;)Bt[Ut++]=0,Bt[Ut++]=255,Bt[Ut++]=255,Bt[Ut++]=0,Bt[Ut++]=0,Bt.set(Lt.subarray(_t,_t+zt),Ut),Ut+=zt,_t+=zt,Yt-=zt;Bt[Ut++]=1,Bt[Ut++]=Yt&255,Bt[Ut++]=Yt>>8&255,Bt[Ut++]=~Yt&65535&255,Bt[Ut++]=(~Yt&65535)>>8&255,Bt.set(Lt.subarray(_t),Ut),Ut+=Lt.length-_t;const $t=At(Lt,0,Lt.length);return Bt[Ut++]=$t>>24&255,Bt[Ut++]=$t>>16&255,Bt[Ut++]=$t>>8&255,Bt[Ut++]=$t&255,Bt}function Tt(Lt,Yt,zt,Wt){const Bt=Lt.width,Ut=Lt.height;let _t,$t,Xt;const Ct=Lt.data;switch(Yt){case o.ImageKind.GRAYSCALE_1BPP:$t=0,_t=1,Xt=Bt+7>>3;break;case o.ImageKind.RGB_24BPP:$t=2,_t=8,Xt=Bt*3;break;case o.ImageKind.RGBA_32BPP:$t=6,_t=8,Xt=Bt*4;break;default:throw new Error("invalid format")}const yt=new Uint8Array((1+Xt)*Ut);let Et=0,St=0;for(let rn=0;rn<Ut;++rn)yt[Et++]=0,yt.set(Ct.subarray(St,St+Xt),Et),St+=Xt,Et+=Xt;if(Yt===o.ImageKind.GRAYSCALE_1BPP&&Wt){Et=0;for(let rn=0;rn<Ut;rn++){Et++;for(let an=0;an<Xt;an++)yt[Et++]^=255}}const Ft=new Uint8Array([Bt>>24&255,Bt>>16&255,Bt>>8&255,Bt&255,Ut>>24&255,Ut>>16&255,Ut>>8&255,Ut&255,_t,$t,0,0,0]),kt=Rt(yt),Ot=mt.length+ft*3+Ft.length+kt.length,Gt=new Uint8Array(Ot);let Vt=0;return Gt.set(mt,Vt),Vt+=mt.length,vt("IHDR",Ft,Gt,Vt),Vt+=ft+Ft.length,vt("IDATA",kt,Gt,Vt),Vt+=ft+kt.length,vt("IEND",new Uint8Array(0),Gt,Vt),rt(Gt,"image/png",zt)}return function(Yt,zt,Wt){const Bt=Yt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:Yt.kind;return Tt(Yt,Bt,zt,Wt)}}();class it{constructor(){this.fontSizeScale=1,this.fontWeight=j.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=j.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ft,gt){this.x=ft,this.y=gt}}function ct(mt){let ft=[];const gt=[];for(const pt of mt){if(pt.fn==="save"){ft.push({fnId:92,fn:"group",items:[]}),gt.push(ft),ft=ft.at(-1).items;continue}pt.fn==="restore"?ft=gt.pop():ft.push(pt)}return ft}function ot(mt){if(Number.isInteger(mt))return mt.toString();const ft=mt.toFixed(10);let gt=ft.length-1;if(ft[gt]!=="0")return ft;do gt--;while(ft[gt]==="0");return ft.substring(0,ft[gt]==="."?gt:gt+1)}function ut(mt){if(mt[4]===0&&mt[5]===0){if(mt[1]===0&&mt[2]===0)return mt[0]===1&&mt[3]===1?"":`scale(${ot(mt[0])} ${ot(mt[3])})`;if(mt[0]===mt[3]&&mt[1]===-mt[2]){const ft=Math.acos(mt[0])*180/Math.PI;return`rotate(${ot(ft)})`}}else if(mt[0]===1&&mt[1]===0&&mt[2]===0&&mt[3]===1)return`translate(${ot(mt[4])} ${ot(mt[5])})`;return`matrix(${ot(mt[0])} ${ot(mt[1])} ${ot(mt[2])} ${ot(mt[3])} ${ot(mt[4])} ${ot(mt[5])})`}let dt=0,lt=0,ht=0;class xt{constructor(ft,gt,pt=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new it,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ft,this.objs=gt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!pt,this._operatorIdMapping=[];for(const vt in o.OPS)this._operatorIdMapping[o.OPS[vt]]=vt}getObject(ft,gt=null){return typeof ft=="string"?ft.startsWith("g_")?this.commonObjs.get(ft):this.objs.get(ft):gt}save(){this.transformStack.push(this.transformMatrix);const ft=this.current;this.extraStack.push(ft),this.current=ft.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ft){this.save(),this.executeOpTree(ft),this.restore()}loadDependencies(ft){const gt=ft.fnArray,pt=ft.argsArray;for(let vt=0,At=gt.length;vt<At;vt++)if(gt[vt]===o.OPS.dependency)for(const Rt of pt[vt]){const bt=Rt.startsWith("g_")?this.commonObjs:this.objs,Tt=new Promise(Lt=>{bt.get(Rt,Lt)});this.current.dependencies.push(Tt)}return Promise.all(this.current.dependencies)}transform(ft,gt,pt,vt,At,Rt){const bt=[ft,gt,pt,vt,At,Rt];this.transformMatrix=o.Util.transform(this.transformMatrix,bt),this.tgrp=null}getSVG(ft,gt){this.viewport=gt;const pt=this._initialize(gt);return this.loadDependencies(ft).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ft)),pt))}convertOpList(ft){const gt=this._operatorIdMapping,pt=ft.argsArray,vt=ft.fnArray,At=[];for(let Rt=0,bt=vt.length;Rt<bt;Rt++){const Tt=vt[Rt];At.push({fnId:Tt,fn:gt[Tt],args:pt[Rt]})}return ct(At)}executeOpTree(ft){for(const gt of ft){const pt=gt.fn,vt=gt.fnId,At=gt.args;switch(vt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(At);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(At[0],At[1]);break;case o.OPS.setFont:this.setFont(At);break;case o.OPS.showText:this.showText(At[0]);break;case o.OPS.showSpacedText:this.showText(At[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(At[0],At[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(At[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(At[0]);break;case o.OPS.setHScale:this.setHScale(At[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(At[0],At[1],At[2],At[3],At[4],At[5]);break;case o.OPS.setTextRise:this.setTextRise(At[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(At[0]);break;case o.OPS.setLineWidth:this.setLineWidth(At[0]);break;case o.OPS.setLineJoin:this.setLineJoin(At[0]);break;case o.OPS.setLineCap:this.setLineCap(At[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(At[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(At[0],At[1],At[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(At[0],At[1],At[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(At);break;case o.OPS.setFillColorN:this.setFillColorN(At);break;case o.OPS.shadingFill:this.shadingFill(At[0]);break;case o.OPS.setDash:this.setDash(At[0],At[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(At[0]);break;case o.OPS.setFlatness:this.setFlatness(At[0]);break;case o.OPS.setGState:this.setGState(At[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(At[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(At[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(At[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(At[0],At[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(At[0],At[1],At[2],At[3],At[4],At[5]);break;case o.OPS.constructPath:this.constructPath(At[0],At[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(gt.items);break;default:(0,o.warn)(`Unimplemented operator ${pt}`);break}}}setWordSpacing(ft){this.current.wordSpacing=ft}setCharSpacing(ft){this.current.charSpacing=ft}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ft,gt,pt,vt,At,Rt){const bt=this.current;bt.textMatrix=bt.lineMatrix=[ft,gt,pt,vt,At,Rt],bt.textMatrixScale=Math.hypot(ft,gt),bt.x=bt.lineX=0,bt.y=bt.lineY=0,bt.xcoords=[],bt.ycoords=[],bt.tspan=this.svgFactory.createElement("svg:tspan"),bt.tspan.setAttributeNS(null,"font-family",bt.fontFamily),bt.tspan.setAttributeNS(null,"font-size",`${ot(bt.fontSize)}px`),bt.tspan.setAttributeNS(null,"y",ot(-bt.y)),bt.txtElement=this.svgFactory.createElement("svg:text"),bt.txtElement.append(bt.tspan)}beginText(){const ft=this.current;ft.x=ft.lineX=0,ft.y=ft.lineY=0,ft.textMatrix=o.IDENTITY_MATRIX,ft.lineMatrix=o.IDENTITY_MATRIX,ft.textMatrixScale=1,ft.tspan=this.svgFactory.createElement("svg:tspan"),ft.txtElement=this.svgFactory.createElement("svg:text"),ft.txtgrp=this.svgFactory.createElement("svg:g"),ft.xcoords=[],ft.ycoords=[]}moveText(ft,gt){const pt=this.current;pt.x=pt.lineX+=ft,pt.y=pt.lineY+=gt,pt.xcoords=[],pt.ycoords=[],pt.tspan=this.svgFactory.createElement("svg:tspan"),pt.tspan.setAttributeNS(null,"font-family",pt.fontFamily),pt.tspan.setAttributeNS(null,"font-size",`${ot(pt.fontSize)}px`),pt.tspan.setAttributeNS(null,"y",ot(-pt.y))}showText(ft){const gt=this.current,pt=gt.font,vt=gt.fontSize;if(vt===0)return;const At=gt.fontSizeScale,Rt=gt.charSpacing,bt=gt.wordSpacing,Tt=gt.fontDirection,Lt=gt.textHScale*Tt,Yt=pt.vertical,zt=Yt?1:-1,Wt=pt.defaultVMetrics,Bt=vt*gt.fontMatrix[0];let Ut=0;for(const Xt of ft){if(Xt===null){Ut+=Tt*bt;continue}else if(typeof Xt=="number"){Ut+=zt*Xt*vt/1e3;continue}const Ct=(Xt.isSpace?bt:0)+Rt,yt=Xt.fontChar;let Et,St,Ft=Xt.width;if(Yt){let Ot;const Gt=Xt.vmetric||Wt;Ot=Xt.vmetric?Gt[1]:Ft*.5,Ot=-Ot*Bt;const Vt=Gt[2]*Bt;Ft=Gt?-Gt[0]:Ft,Et=Ot/At,St=(Ut+Vt)/At}else Et=Ut/At,St=0;(Xt.isInFont||pt.missingFile)&&(gt.xcoords.push(gt.x+Et),Yt&&gt.ycoords.push(-gt.y+St),gt.tspan.textContent+=yt);const kt=Yt?Ft*Bt-Ct*Tt:Ft*Bt+Ct*Tt;Ut+=kt}gt.tspan.setAttributeNS(null,"x",gt.xcoords.map(ot).join(" ")),Yt?gt.tspan.setAttributeNS(null,"y",gt.ycoords.map(ot).join(" ")):gt.tspan.setAttributeNS(null,"y",ot(-gt.y)),Yt?gt.y-=Ut:gt.x+=Ut*Lt,gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${ot(gt.fontSize)}px`),gt.fontStyle!==j.fontStyle&&gt.tspan.setAttributeNS(null,"font-style",gt.fontStyle),gt.fontWeight!==j.fontWeight&&gt.tspan.setAttributeNS(null,"font-weight",gt.fontWeight);const _t=gt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(_t===o.TextRenderingMode.FILL||_t===o.TextRenderingMode.FILL_STROKE?(gt.fillColor!==j.fillColor&&gt.tspan.setAttributeNS(null,"fill",gt.fillColor),gt.fillAlpha<1&&gt.tspan.setAttributeNS(null,"fill-opacity",gt.fillAlpha)):gt.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?gt.tspan.setAttributeNS(null,"fill","transparent"):gt.tspan.setAttributeNS(null,"fill","none"),_t===o.TextRenderingMode.STROKE||_t===o.TextRenderingMode.FILL_STROKE){const Xt=1/(gt.textMatrixScale||1);this._setStrokeAttributes(gt.tspan,Xt)}let $t=gt.textMatrix;gt.textRise!==0&&($t=$t.slice(),$t[5]+=gt.textRise),gt.txtElement.setAttributeNS(null,"transform",`${ut($t)} scale(${ot(Lt)}, -1)`),gt.txtElement.setAttributeNS(_e,"xml:space","preserve"),gt.txtElement.append(gt.tspan),gt.txtgrp.append(gt.txtElement),this._ensureTransformGroup().append(gt.txtElement)}setLeadingMoveText(ft,gt){this.setLeading(-gt),this.moveText(ft,gt)}addFontStyle(ft){if(!ft.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const gt=rt(ft.data,ft.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ft.loadedName}"; src: url(${gt}); }
`}setFont(ft){const gt=this.current,pt=this.commonObjs.get(ft[0]);let vt=ft[1];gt.font=pt,this.embedFonts&&!pt.missingFile&&!this.embeddedFonts[pt.loadedName]&&(this.addFontStyle(pt),this.embeddedFonts[pt.loadedName]=pt),gt.fontMatrix=pt.fontMatrix||o.FONT_IDENTITY_MATRIX;let At="normal";pt.black?At="900":pt.bold&&(At="bold");const Rt=pt.italic?"italic":"normal";vt<0?(vt=-vt,gt.fontDirection=-1):gt.fontDirection=1,gt.fontSize=vt,gt.fontFamily=pt.loadedName,gt.fontWeight=At,gt.fontStyle=Rt,gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"y",ot(-gt.y)),gt.xcoords=[],gt.ycoords=[]}endText(){var gt;const ft=this.current;ft.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((gt=ft.txtElement)!=null&&gt.hasChildNodes())&&(ft.element=ft.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ft){ft>0&&(this.current.lineWidth=ft)}setLineCap(ft){this.current.lineCap=tt[ft]}setLineJoin(ft){this.current.lineJoin=st[ft]}setMiterLimit(ft){this.current.miterLimit=ft}setStrokeAlpha(ft){this.current.strokeAlpha=ft}setStrokeRGBColor(ft,gt,pt){this.current.strokeColor=o.Util.makeHexColor(ft,gt,pt)}setFillAlpha(ft){this.current.fillAlpha=ft}setFillRGBColor(ft,gt,pt){this.current.fillColor=o.Util.makeHexColor(ft,gt,pt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ft){this.current.strokeColor=this._makeColorN_Pattern(ft)}setFillColorN(ft){this.current.fillColor=this._makeColorN_Pattern(ft)}shadingFill(ft){const{width:gt,height:pt}=this.viewport,vt=o.Util.inverseTransform(this.transformMatrix),[At,Rt,bt,Tt]=o.Util.getAxialAlignedBoundingBox([0,0,gt,pt],vt),Lt=this.svgFactory.createElement("svg:rect");Lt.setAttributeNS(null,"x",At),Lt.setAttributeNS(null,"y",Rt),Lt.setAttributeNS(null,"width",bt-At),Lt.setAttributeNS(null,"height",Tt-Rt),Lt.setAttributeNS(null,"fill",this._makeShadingPattern(ft)),this.current.fillAlpha<1&&Lt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Lt)}_makeColorN_Pattern(ft){return ft[0]==="TilingPattern"?this._makeTilingPattern(ft):this._makeShadingPattern(ft)}_makeTilingPattern(ft){const gt=ft[1],pt=ft[2],vt=ft[3]||o.IDENTITY_MATRIX,[At,Rt,bt,Tt]=ft[4],Lt=ft[5],Yt=ft[6],zt=ft[7],Wt=`shading${ht++}`,[Bt,Ut,_t,$t]=o.Util.normalizeRect([...o.Util.applyTransform([At,Rt],vt),...o.Util.applyTransform([bt,Tt],vt)]),[Xt,Ct]=o.Util.singularValueDecompose2dScale(vt),yt=Lt*Xt,Et=Yt*Ct,St=this.svgFactory.createElement("svg:pattern");St.setAttributeNS(null,"id",Wt),St.setAttributeNS(null,"patternUnits","userSpaceOnUse"),St.setAttributeNS(null,"width",yt),St.setAttributeNS(null,"height",Et),St.setAttributeNS(null,"x",`${Bt}`),St.setAttributeNS(null,"y",`${Ut}`);const Ft=this.svg,kt=this.transformMatrix,Ot=this.current.fillColor,Gt=this.current.strokeColor,Vt=this.svgFactory.create(_t-Bt,$t-Ut);if(this.svg=Vt,this.transformMatrix=vt,zt===2){const rn=o.Util.makeHexColor(...gt);this.current.fillColor=rn,this.current.strokeColor=rn}return this.executeOpTree(this.convertOpList(pt)),this.svg=Ft,this.transformMatrix=kt,this.current.fillColor=Ot,this.current.strokeColor=Gt,St.append(Vt.childNodes[0]),this.defs.append(St),`url(#${Wt})`}_makeShadingPattern(ft){switch(typeof ft=="string"&&(ft=this.objs.get(ft)),ft[0]){case"RadialAxial":const gt=`shading${ht++}`,pt=ft[3];let vt;switch(ft[1]){case"axial":const At=ft[4],Rt=ft[5];vt=this.svgFactory.createElement("svg:linearGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"x1",At[0]),vt.setAttributeNS(null,"y1",At[1]),vt.setAttributeNS(null,"x2",Rt[0]),vt.setAttributeNS(null,"y2",Rt[1]);break;case"radial":const bt=ft[4],Tt=ft[5],Lt=ft[6],Yt=ft[7];vt=this.svgFactory.createElement("svg:radialGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"cx",Tt[0]),vt.setAttributeNS(null,"cy",Tt[1]),vt.setAttributeNS(null,"r",Yt),vt.setAttributeNS(null,"fx",bt[0]),vt.setAttributeNS(null,"fy",bt[1]),vt.setAttributeNS(null,"fr",Lt);break;default:throw new Error(`Unknown RadialAxial type: ${ft[1]}`)}for(const At of pt){const Rt=this.svgFactory.createElement("svg:stop");Rt.setAttributeNS(null,"offset",At[0]),Rt.setAttributeNS(null,"stop-color",At[1]),vt.append(Rt)}return this.defs.append(vt),`url(#${gt})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ft[0]}`)}}setDash(ft,gt){this.current.dashArray=ft,this.current.dashPhase=gt}constructPath(ft,gt){const pt=this.current;let vt=pt.x,At=pt.y,Rt=[],bt=0;for(const Tt of ft)switch(Tt|0){case o.OPS.rectangle:vt=gt[bt++],At=gt[bt++];const Lt=gt[bt++],Yt=gt[bt++],zt=vt+Lt,Wt=At+Yt;Rt.push("M",ot(vt),ot(At),"L",ot(zt),ot(At),"L",ot(zt),ot(Wt),"L",ot(vt),ot(Wt),"Z");break;case o.OPS.moveTo:vt=gt[bt++],At=gt[bt++],Rt.push("M",ot(vt),ot(At));break;case o.OPS.lineTo:vt=gt[bt++],At=gt[bt++],Rt.push("L",ot(vt),ot(At));break;case o.OPS.curveTo:vt=gt[bt+4],At=gt[bt+5],Rt.push("C",ot(gt[bt]),ot(gt[bt+1]),ot(gt[bt+2]),ot(gt[bt+3]),ot(vt),ot(At)),bt+=6;break;case o.OPS.curveTo2:Rt.push("C",ot(vt),ot(At),ot(gt[bt]),ot(gt[bt+1]),ot(gt[bt+2]),ot(gt[bt+3])),vt=gt[bt+2],At=gt[bt+3],bt+=4;break;case o.OPS.curveTo3:vt=gt[bt+2],At=gt[bt+3],Rt.push("C",ot(gt[bt]),ot(gt[bt+1]),ot(vt),ot(At),ot(vt),ot(At)),bt+=4;break;case o.OPS.closePath:Rt.push("Z");break}Rt=Rt.join(" "),pt.path&&ft.length>0&&ft[0]!==o.OPS.rectangle&&ft[0]!==o.OPS.moveTo?Rt=pt.path.getAttributeNS(null,"d")+Rt:(pt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(pt.path)),pt.path.setAttributeNS(null,"d",Rt),pt.path.setAttributeNS(null,"fill","none"),pt.element=pt.path,pt.setCurrentPoint(vt,At)}endPath(){const ft=this.current;if(ft.path=null,!this.pendingClip)return;if(!ft.element){this.pendingClip=null;return}const gt=`clippath${dt++}`,pt=this.svgFactory.createElement("svg:clipPath");pt.setAttributeNS(null,"id",gt),pt.setAttributeNS(null,"transform",ut(this.transformMatrix));const vt=ft.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vt.setAttributeNS(null,"clip-rule","evenodd"):vt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,pt.append(vt),this.defs.append(pt),ft.activeClipUrl){ft.clipGroup=null;for(const At of this.extraStack)At.clipGroup=null;pt.setAttributeNS(null,"clip-path",ft.activeClipUrl)}ft.activeClipUrl=`url(#${gt})`,this.tgrp=null}clip(ft){this.pendingClip=ft}closePath(){const ft=this.current;if(ft.path){const gt=`${ft.path.getAttributeNS(null,"d")}Z`;ft.path.setAttributeNS(null,"d",gt)}}setLeading(ft){this.current.leading=-ft}setTextRise(ft){this.current.textRise=ft}setTextRenderingMode(ft){this.current.textRenderingMode=ft}setHScale(ft){this.current.textHScale=ft/100}setRenderingIntent(ft){}setFlatness(ft){}setGState(ft){for(const[gt,pt]of ft)switch(gt){case"LW":this.setLineWidth(pt);break;case"LC":this.setLineCap(pt);break;case"LJ":this.setLineJoin(pt);break;case"ML":this.setMiterLimit(pt);break;case"D":this.setDash(pt[0],pt[1]);break;case"RI":this.setRenderingIntent(pt);break;case"FL":this.setFlatness(pt);break;case"Font":this.setFont(pt);break;case"CA":this.setStrokeAlpha(pt);break;case"ca":this.setFillAlpha(pt);break;default:(0,o.warn)(`Unimplemented graphic state operator ${gt}`);break}}fill(){const ft=this.current;ft.element&&(ft.element.setAttributeNS(null,"fill",ft.fillColor),ft.element.setAttributeNS(null,"fill-opacity",ft.fillAlpha),this.endPath())}stroke(){const ft=this.current;ft.element&&(this._setStrokeAttributes(ft.element),ft.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ft,gt=1){const pt=this.current;let vt=pt.dashArray;gt!==1&&vt.length>0&&(vt=vt.map(function(At){return gt*At})),ft.setAttributeNS(null,"stroke",pt.strokeColor),ft.setAttributeNS(null,"stroke-opacity",pt.strokeAlpha),ft.setAttributeNS(null,"stroke-miterlimit",ot(pt.miterLimit)),ft.setAttributeNS(null,"stroke-linecap",pt.lineCap),ft.setAttributeNS(null,"stroke-linejoin",pt.lineJoin),ft.setAttributeNS(null,"stroke-width",ot(gt*pt.lineWidth)+"px"),ft.setAttributeNS(null,"stroke-dasharray",vt.map(ot).join(" ")),ft.setAttributeNS(null,"stroke-dashoffset",ot(gt*pt.dashPhase)+"px")}eoFill(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width","1px"),ft.setAttributeNS(null,"height","1px"),ft.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ft)}paintImageXObject(ft){const gt=this.getObject(ft);if(!gt){(0,o.warn)(`Dependent image with object ID ${ft} is not ready yet`);return}this.paintInlineImageXObject(gt)}paintInlineImageXObject(ft,gt){const pt=ft.width,vt=ft.height,At=at(ft,this.forceDataSchema,!!gt),Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x","0"),Rt.setAttributeNS(null,"y","0"),Rt.setAttributeNS(null,"width",ot(pt)),Rt.setAttributeNS(null,"height",ot(vt)),this.current.element=Rt,this.clip("nonzero");const bt=this.svgFactory.createElement("svg:image");bt.setAttributeNS(nt,"xlink:href",At),bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y",ot(-vt)),bt.setAttributeNS(null,"width",ot(pt)+"px"),bt.setAttributeNS(null,"height",ot(vt)+"px"),bt.setAttributeNS(null,"transform",`scale(${ot(1/pt)} ${ot(-1/vt)})`),gt?gt.append(bt):this._ensureTransformGroup().append(bt)}paintImageMaskXObject(ft){const gt=this.getObject(ft.data,ft);if(gt.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const pt=this.current,vt=gt.width,At=gt.height,Rt=pt.fillColor;pt.maskId=`mask${lt++}`;const bt=this.svgFactory.createElement("svg:mask");bt.setAttributeNS(null,"id",pt.maskId);const Tt=this.svgFactory.createElement("svg:rect");Tt.setAttributeNS(null,"x","0"),Tt.setAttributeNS(null,"y","0"),Tt.setAttributeNS(null,"width",ot(vt)),Tt.setAttributeNS(null,"height",ot(At)),Tt.setAttributeNS(null,"fill",Rt),Tt.setAttributeNS(null,"mask",`url(#${pt.maskId})`),this.defs.append(bt),this._ensureTransformGroup().append(Tt),this.paintInlineImageXObject(gt,bt)}paintFormXObjectBegin(ft,gt){if(Array.isArray(ft)&&ft.length===6&&this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]),gt){const pt=gt[2]-gt[0],vt=gt[3]-gt[1],At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x",gt[0]),At.setAttributeNS(null,"y",gt[1]),At.setAttributeNS(null,"width",ot(pt)),At.setAttributeNS(null,"height",ot(vt)),this.current.element=At,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ft){const gt=this.svgFactory.create(ft.width,ft.height),pt=this.svgFactory.createElement("svg:defs");gt.append(pt),this.defs=pt;const vt=this.svgFactory.createElement("svg:g");return vt.setAttributeNS(null,"transform",ut(ft.transform)),gt.append(vt),this.svg=vt,gt}_ensureClipGroup(){if(!this.current.clipGroup){const ft=this.svgFactory.createElement("svg:g");ft.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ft),this.current.clipGroup=ft}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ut(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=xt},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(o){const j=[],_e={items:j,styles:Object.create(null)};function nt(tt){var at;if(!tt)return;let st=null;const rt=tt.name;if(rt==="#text")st=tt.value;else if(s.shouldBuildText(rt))(at=tt==null?void 0:tt.attributes)!=null&&at.textContent?st=tt.attributes.textContent:tt.value&&(st=tt.value);else return;if(st!==null&&j.push({str:st}),!!tt.children)for(const it of tt.children)nt(it)}return nt(o),_e}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=s},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=ut,e.updateTextLayer=dt;var a=s(1),o=s(6);const j=1e5,_e=30,nt=.8,tt=new Map;function st(lt,ht){let xt;if(ht&&a.FeatureTest.isOffscreenCanvasSupported)xt=new OffscreenCanvas(lt,lt).getContext("2d",{alpha:!1});else{const mt=document.createElement("canvas");mt.width=mt.height=lt,xt=mt.getContext("2d",{alpha:!1})}return xt}function rt(lt,ht){const xt=tt.get(lt);if(xt)return xt;const mt=st(_e,ht);mt.font=`${_e}px ${lt}`;const ft=mt.measureText("");let gt=ft.fontBoundingBoxAscent,pt=Math.abs(ft.fontBoundingBoxDescent);if(gt){const At=gt/(gt+pt);return tt.set(lt,At),mt.canvas.width=mt.canvas.height=0,At}mt.strokeStyle="red",mt.clearRect(0,0,_e,_e),mt.strokeText("g",0,0);let vt=mt.getImageData(0,0,_e,_e).data;pt=0;for(let At=vt.length-1-3;At>=0;At-=4)if(vt[At]>0){pt=Math.ceil(At/4/_e);break}mt.clearRect(0,0,_e,_e),mt.strokeText("A",0,_e),vt=mt.getImageData(0,0,_e,_e).data,gt=0;for(let At=0,Rt=vt.length;At<Rt;At+=4)if(vt[At]>0){gt=_e-Math.floor(At/4/_e);break}if(mt.canvas.width=mt.canvas.height=0,gt){const At=gt/(gt+pt);return tt.set(lt,At),At}return tt.set(lt,nt),nt}function at(lt,ht,xt){const mt=document.createElement("span"),ft={angle:0,canvasWidth:0,hasText:ht.str!=="",hasEOL:ht.hasEOL,fontSize:0};lt._textDivs.push(mt);const gt=a.Util.transform(lt._transform,ht.transform);let pt=Math.atan2(gt[1],gt[0]);const vt=xt[ht.fontName];vt.vertical&&(pt+=Math.PI/2);const At=Math.hypot(gt[2],gt[3]),Rt=At*rt(vt.fontFamily,lt._isOffscreenCanvasSupported);let bt,Tt;pt===0?(bt=gt[4],Tt=gt[5]-Rt):(bt=gt[4]+Rt*Math.sin(pt),Tt=gt[5]-Rt*Math.cos(pt));const Lt="calc(var(--scale-factor)*",Yt=mt.style;lt._container===lt._rootContainer?(Yt.left=`${(100*bt/lt._pageWidth).toFixed(2)}%`,Yt.top=`${(100*Tt/lt._pageHeight).toFixed(2)}%`):(Yt.left=`${Lt}${bt.toFixed(2)}px)`,Yt.top=`${Lt}${Tt.toFixed(2)}px)`),Yt.fontSize=`${Lt}${At.toFixed(2)}px)`,Yt.fontFamily=vt.fontFamily,ft.fontSize=At,mt.setAttribute("role","presentation"),mt.textContent=ht.str,mt.dir=ht.dir,lt._fontInspectorEnabled&&(mt.dataset.fontName=ht.fontName),pt!==0&&(ft.angle=pt*(180/Math.PI));let zt=!1;if(ht.str.length>1)zt=!0;else if(ht.str!==" "&&ht.transform[0]!==ht.transform[3]){const Wt=Math.abs(ht.transform[0]),Bt=Math.abs(ht.transform[3]);Wt!==Bt&&Math.max(Wt,Bt)/Math.min(Wt,Bt)>1.5&&(zt=!0)}zt&&(ft.canvasWidth=vt.vertical?ht.height:ht.width),lt._textDivProperties.set(mt,ft),lt._isReadableStream&&lt._layoutText(mt)}function it(lt){const{div:ht,scale:xt,properties:mt,ctx:ft,prevFontSize:gt,prevFontFamily:pt}=lt,{style:vt}=ht;let At="";if(mt.canvasWidth!==0&&mt.hasText){const{fontFamily:Rt}=vt,{canvasWidth:bt,fontSize:Tt}=mt;(gt!==Tt||pt!==Rt)&&(ft.font=`${Tt*xt}px ${Rt}`,lt.prevFontSize=Tt,lt.prevFontFamily=Rt);const{width:Lt}=ft.measureText(ht.textContent);Lt>0&&(At=`scaleX(${bt*xt/Lt})`)}mt.angle!==0&&(At=`rotate(${mt.angle}deg) ${At}`),At.length>0&&(vt.transform=At)}function ct(lt){if(lt._canceled)return;const ht=lt._textDivs,xt=lt._capability;if(ht.length>j){xt.resolve();return}if(!lt._isReadableStream)for(const ft of ht)lt._layoutText(ft);xt.resolve()}class ot{constructor({textContentSource:ht,container:xt,viewport:mt,textDivs:ft,textDivProperties:gt,textContentItemsStr:pt,isOffscreenCanvasSupported:vt}){var Lt;this._textContentSource=ht,this._isReadableStream=ht instanceof ReadableStream,this._container=this._rootContainer=xt,this._textDivs=ft||[],this._textContentItemsStr=pt||[],this._isOffscreenCanvasSupported=vt,this._fontInspectorEnabled=!!((Lt=globalThis.FontInspector)!=null&&Lt.enabled),this._reader=null,this._textDivProperties=gt||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:mt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:st(0,vt)};const{pageWidth:At,pageHeight:Rt,pageX:bt,pageY:Tt}=mt.rawDims;this._transform=[1,0,0,-1,-bt,Tt+Rt],this._pageWidth=At,this._pageHeight=Rt,(0,o.setLayerDimensions)(xt,mt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(ht,xt){for(const mt of ht){if(mt.str===void 0){if(mt.type==="beginMarkedContentProps"||mt.type==="beginMarkedContent"){const ft=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),mt.id!==null&&this._container.setAttribute("id",`${mt.id}`),ft.append(this._container)}else mt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(mt.str),at(this,mt,xt)}}_layoutText(ht){const xt=this._layoutTextParams.properties=this._textDivProperties.get(ht);if(this._layoutTextParams.div=ht,it(this._layoutTextParams),xt.hasText&&this._container.append(ht),xt.hasEOL){const mt=document.createElement("br");mt.setAttribute("role","presentation"),this._container.append(mt)}}_render(){const ht=new a.PromiseCapability;let xt=Object.create(null);if(this._isReadableStream){const mt=()=>{this._reader.read().then(({value:ft,done:gt})=>{if(gt){ht.resolve();return}Object.assign(xt,ft.styles),this._processItems(ft.items,xt),mt()},ht.reject)};this._reader=this._textContentSource.getReader(),mt()}else if(this._textContentSource){const{items:mt,styles:ft}=this._textContentSource;this._processItems(mt,ft),ht.resolve()}else throw new Error('No "textContentSource" parameter specified.');ht.promise.then(()=>{xt=null,ct(this)},this._capability.reject)}}e.TextLayerRenderTask=ot;function ut(lt){!lt.textContentSource&&(lt.textContent||lt.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),lt.textContentSource=lt.textContent||lt.textContentStream);const{container:ht,viewport:xt}=lt,mt=getComputedStyle(ht),ft=mt.getPropertyValue("visibility"),gt=parseFloat(mt.getPropertyValue("--scale-factor"));ft==="visible"&&(!gt||Math.abs(gt-xt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const pt=new ot(lt);return pt._render(),pt}function dt({container:lt,viewport:ht,textDivs:xt,textDivProperties:mt,isOffscreenCanvasSupported:ft,mustRotate:gt=!0,mustRescale:pt=!0}){if(gt&&(0,o.setLayerDimensions)(lt,{rotation:ht.rotation}),pt){const vt=st(0,ft),Rt={prevFontSize:null,prevFontFamily:null,div:null,scale:ht.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vt};for(const bt of xt)Rt.properties=mt.get(bt),Rt.div=bt,it(Rt)}}},(i,e,s)=>{var rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,ex,ey,tx,nx;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var a=s(1),o=s(4),j=s(28),_e=s(33),nt=s(6),tt=s(34);const At=class At{constructor({uiManager:bt,pageIndex:Tt,div:Lt,accessibilityManager:Yt,annotationLayer:zt,viewport:Wt,l10n:Bt}){Dt(this,mt);Dt(this,rt);Dt(this,at,!1);Dt(this,it,null);Dt(this,ct,this.pointerup.bind(this));Dt(this,ot,this.pointerdown.bind(this));Dt(this,ut,new Map);Dt(this,dt,!1);Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt);const Ut=[j.FreeTextEditor,_e.InkEditor,tt.StampEditor];if(!At._initialized){At._initialized=!0;for(const _t of Ut)_t.initialize(Bt)}bt.registerEditorTypes(Ut),Pt(this,xt,bt),this.pageIndex=Tt,this.div=Lt,Pt(this,rt,Yt),Pt(this,it,zt),this.viewport=Wt,et(this,xt).addLayer(this)}get isEmpty(){return et(this,ut).size===0}updateToolbar(bt){et(this,xt).updateToolbar(bt)}updateMode(bt=et(this,xt).getMode()){wt(this,mt,nx).call(this),bt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),bt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",bt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",bt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",bt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(bt){if(!bt&&et(this,xt).getMode()!==a.AnnotationEditorType.INK)return;if(!bt){for(const Lt of et(this,ut).values())if(Lt.isEmpty()){Lt.setInBackground();return}}wt(this,mt,ey).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(bt){et(this,xt).setEditingState(bt)}addCommands(bt){et(this,xt).addCommands(bt)}enable(){this.div.style.pointerEvents="auto";const bt=new Set;for(const Lt of et(this,ut).values())Lt.enableEditing(),Lt.annotationElementId&&bt.add(Lt.annotationElementId);if(!et(this,it))return;const Tt=et(this,it).getEditableAnnotations();for(const Lt of Tt){if(Lt.hide(),et(this,xt).isDeletedAnnotationElement(Lt.data.id)||bt.has(Lt.data.id))continue;const Yt=this.deserialize(Lt);Yt&&(this.addOrRebuild(Yt),Yt.enableEditing())}}disable(){var Tt;Pt(this,ht,!0),this.div.style.pointerEvents="none";const bt=new Set;for(const Lt of et(this,ut).values()){if(Lt.disableEditing(),!Lt.annotationElementId||Lt.serialize()!==null){bt.add(Lt.annotationElementId);continue}(Tt=this.getEditableAnnotation(Lt.annotationElementId))==null||Tt.show(),Lt.remove()}if(et(this,it)){const Lt=et(this,it).getEditableAnnotations();for(const Yt of Lt){const{id:zt}=Yt.data;bt.has(zt)||et(this,xt).isDeletedAnnotationElement(zt)||Yt.show()}}wt(this,mt,nx).call(this),this.isEmpty&&(this.div.hidden=!0),Pt(this,ht,!1)}getEditableAnnotation(bt){var Tt;return((Tt=et(this,it))==null?void 0:Tt.getEditableAnnotation(bt))||null}setActiveEditor(bt){et(this,xt).getActive()!==bt&&et(this,xt).setActiveEditor(bt)}enableClick(){this.div.addEventListener("pointerdown",et(this,ot)),this.div.addEventListener("pointerup",et(this,ct))}disableClick(){this.div.removeEventListener("pointerdown",et(this,ot)),this.div.removeEventListener("pointerup",et(this,ct))}attach(bt){et(this,ut).set(bt.id,bt);const{annotationElementId:Tt}=bt;Tt&&et(this,xt).isDeletedAnnotationElement(Tt)&&et(this,xt).removeDeletedAnnotationElement(bt)}detach(bt){var Tt;et(this,ut).delete(bt.id),(Tt=et(this,rt))==null||Tt.removePointerInTextLayer(bt.contentDiv),!et(this,ht)&&bt.annotationElementId&&et(this,xt).addDeletedAnnotationElement(bt)}remove(bt){this.detach(bt),et(this,xt).removeEditor(bt),bt.div.contains(document.activeElement)&&setTimeout(()=>{et(this,xt).focusMainContainer()},0),bt.div.remove(),bt.isAttachedToDOM=!1,et(this,lt)||this.addInkEditorIfNeeded(!1)}changeParent(bt){var Tt;bt.parent!==this&&(bt.annotationElementId&&(et(this,xt).addDeletedAnnotationElement(bt.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(bt),bt.annotationElementId=null),this.attach(bt),(Tt=bt.parent)==null||Tt.detach(bt),bt.setParent(this),bt.div&&bt.isAttachedToDOM&&(bt.div.remove(),this.div.append(bt.div)))}add(bt){if(this.changeParent(bt),et(this,xt).addEditor(bt),this.attach(bt),!bt.isAttachedToDOM){const Tt=bt.render();this.div.append(Tt),bt.isAttachedToDOM=!0}bt.fixAndSetPosition(),bt.onceAdded(),et(this,xt).addToAnnotationStorage(bt)}moveEditorInDOM(bt){var Lt;if(!bt.isAttachedToDOM)return;const{activeElement:Tt}=document;bt.div.contains(Tt)&&(bt._focusEventsAllowed=!1,setTimeout(()=>{bt.div.contains(document.activeElement)?bt._focusEventsAllowed=!0:(bt.div.addEventListener("focusin",()=>{bt._focusEventsAllowed=!0},{once:!0}),Tt.focus())},0)),bt._structTreeParentId=(Lt=et(this,rt))==null?void 0:Lt.moveElementInDOM(this.div,bt.div,bt.contentDiv,!0)}addOrRebuild(bt){bt.needsToBeRebuilt()?bt.rebuild():this.add(bt)}addUndoableEditor(bt){const Tt=()=>bt._uiManager.rebuild(bt),Lt=()=>{bt.remove()};this.addCommands({cmd:Tt,undo:Lt,mustExec:!1})}getNextId(){return et(this,xt).getId()}pasteEditor(bt,Tt){et(this,xt).updateToolbar(bt),et(this,xt).updateMode(bt);const{offsetX:Lt,offsetY:Yt}=wt(this,mt,tx).call(this),zt=this.getNextId(),Wt=wt(this,mt,ex).call(this,{parent:this,id:zt,x:Lt,y:Yt,uiManager:et(this,xt),isCentered:!0,...Tt});Wt&&this.add(Wt)}deserialize(bt){switch(bt.annotationType??bt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return j.FreeTextEditor.deserialize(bt,this,et(this,xt));case a.AnnotationEditorType.INK:return _e.InkEditor.deserialize(bt,this,et(this,xt));case a.AnnotationEditorType.STAMP:return tt.StampEditor.deserialize(bt,this,et(this,xt))}return null}addNewEditor(){wt(this,mt,ey).call(this,wt(this,mt,tx).call(this),!0)}setSelected(bt){et(this,xt).setSelected(bt)}toggleSelected(bt){et(this,xt).toggleSelected(bt)}isSelected(bt){return et(this,xt).isSelected(bt)}unselect(bt){et(this,xt).unselect(bt)}pointerup(bt){const{isMac:Tt}=a.FeatureTest.platform;if(!(bt.button!==0||bt.ctrlKey&&Tt)&&bt.target===this.div&&et(this,dt)){if(Pt(this,dt,!1),!et(this,at)){Pt(this,at,!0);return}if(et(this,xt).getMode()===a.AnnotationEditorType.STAMP){et(this,xt).unselectAll();return}wt(this,mt,ey).call(this,bt,!1)}}pointerdown(bt){if(et(this,dt)){Pt(this,dt,!1);return}const{isMac:Tt}=a.FeatureTest.platform;if(bt.button!==0||bt.ctrlKey&&Tt||bt.target!==this.div)return;Pt(this,dt,!0);const Lt=et(this,xt).getActive();Pt(this,at,!Lt||Lt.isEmpty())}findNewParent(bt,Tt,Lt){const Yt=et(this,xt).findParent(Tt,Lt);return Yt===null||Yt===this?!1:(Yt.changeParent(bt),!0)}destroy(){var bt,Tt;((bt=et(this,xt).getActive())==null?void 0:bt.parent)===this&&(et(this,xt).commitOrRemove(),et(this,xt).setActiveEditor(null));for(const Lt of et(this,ut).values())(Tt=et(this,rt))==null||Tt.removePointerInTextLayer(Lt.contentDiv),Lt.setParent(null),Lt.isAttachedToDOM=!1,Lt.div.remove();this.div=null,et(this,ut).clear(),et(this,xt).removeLayer(this)}render({viewport:bt}){this.viewport=bt,(0,nt.setLayerDimensions)(this.div,bt);for(const Tt of et(this,xt).getEditors(this.pageIndex))this.add(Tt);this.updateMode()}update({viewport:bt}){et(this,xt).commitOrRemove(),this.viewport=bt,(0,nt.setLayerDimensions)(this.div,{rotation:bt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:bt,pageHeight:Tt}=this.viewport.rawDims;return[bt,Tt]}};rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakSet,ex=function(bt){switch(et(this,xt).getMode()){case a.AnnotationEditorType.FREETEXT:return new j.FreeTextEditor(bt);case a.AnnotationEditorType.INK:return new _e.InkEditor(bt);case a.AnnotationEditorType.STAMP:return new tt.StampEditor(bt)}return null},ey=function(bt,Tt){const Lt=this.getNextId(),Yt=wt(this,mt,ex).call(this,{parent:this,id:Lt,x:bt.offsetX,y:bt.offsetY,uiManager:et(this,xt),isCentered:Tt});return Yt&&this.add(Yt),Yt},tx=function(){const{x:bt,y:Tt,width:Lt,height:Yt}=this.div.getBoundingClientRect(),zt=Math.max(0,bt),Wt=Math.max(0,Tt),Bt=Math.min(window.innerWidth,bt+Lt),Ut=Math.min(window.innerHeight,Tt+Yt),_t=(zt+Bt)/2-bt,$t=(Wt+Ut)/2-Tt,[Xt,Ct]=this.viewport.rotation%180===0?[_t,$t]:[$t,_t];return{offsetX:Xt,offsetY:Ct}},nx=function(){Pt(this,lt,!0);for(const bt of et(this,ut).values())bt.isEmpty()&&bt.remove();Pt(this,lt,!1)},Hn(At,"_initialized",!1);let st=At;e.AnnotationEditorLayer=st},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,OA,NA,jA,Lp,sx,$A,rx;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var a=s(1),o=s(5),j=s(4),_e=s(29);const At=class At extends j.AnnotationEditor{constructor(Tt){super({...Tt,name:"freeTextEditor"});Dt(this,lt);Dt(this,tt,this.editorDivBlur.bind(this));Dt(this,st,this.editorDivFocus.bind(this));Dt(this,rt,this.editorDivInput.bind(this));Dt(this,at,this.editorDivKeydown.bind(this));Dt(this,it);Dt(this,ct,"");Dt(this,ot,`${this.id}-editor`);Dt(this,ut);Dt(this,dt,null);Pt(this,it,Tt.color||At._defaultColor||j.AnnotationEditor._defaultLineColor),Pt(this,ut,Tt.fontSize||At._defaultFontSize)}static get _keyboardManager(){const Tt=At.prototype,Lt=Wt=>Wt.isEmpty(),Yt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,zt=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Tt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Tt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Tt._translateEmpty,{args:[-Yt,0],checker:Lt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Tt._translateEmpty,{args:[-zt,0],checker:Lt}],[["ArrowRight","mac+ArrowRight"],Tt._translateEmpty,{args:[Yt,0],checker:Lt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Tt._translateEmpty,{args:[zt,0],checker:Lt}],[["ArrowUp","mac+ArrowUp"],Tt._translateEmpty,{args:[0,-Yt],checker:Lt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Tt._translateEmpty,{args:[0,-zt],checker:Lt}],[["ArrowDown","mac+ArrowDown"],Tt._translateEmpty,{args:[0,Yt],checker:Lt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Tt._translateEmpty,{args:[0,zt],checker:Lt}]]))}static initialize(Tt){j.AnnotationEditor.initialize(Tt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Lt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Lt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Tt,Lt){switch(Tt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:At._defaultFontSize=Lt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:At._defaultColor=Lt;break}}updateParams(Tt,Lt){switch(Tt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:wt(this,lt,OA).call(this,Lt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:wt(this,lt,NA).call(this,Lt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,At._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,At._defaultColor||j.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,et(this,ut)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,et(this,it)]]}_translateEmpty(Tt,Lt){this._uiManager.translateSelectedEditors(Tt,Lt,!0)}getInitialTranslation(){const Tt=this.parentScale;return[-At._internalPadding*Tt,-(At._internalPadding+et(this,ut))*Tt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",et(this,at)),this.editorDiv.addEventListener("focus",et(this,st)),this.editorDiv.addEventListener("blur",et(this,tt)),this.editorDiv.addEventListener("input",et(this,rt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",et(this,ot)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",et(this,at)),this.editorDiv.removeEventListener("focus",et(this,st)),this.editorDiv.removeEventListener("blur",et(this,tt)),this.editorDiv.removeEventListener("input",et(this,rt)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Tt){this._focusEventsAllowed&&(super.focusin(Tt),Tt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Tt;if(this.width){wt(this,lt,rx).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Tt=this._initialOptions)!=null&&Tt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Tt=et(this,ct),Lt=Pt(this,ct,wt(this,lt,jA).call(this).trimEnd());if(Tt===Lt)return;const Yt=zt=>{if(Pt(this,ct,zt),!zt){this.remove();return}wt(this,lt,sx).call(this),this._uiManager.rebuild(this),wt(this,lt,Lp).call(this)};this.addCommands({cmd:()=>{Yt(Lt)},undo:()=>{Yt(Tt)},mustExec:!1}),wt(this,lt,Lp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Tt){this.enterInEditMode()}keydown(Tt){Tt.target===this.div&&Tt.key==="Enter"&&(this.enterInEditMode(),Tt.preventDefault())}editorDivKeydown(Tt){At._keyboardManager.exec(this,Tt)}editorDivFocus(Tt){this.isEditing=!0}editorDivBlur(Tt){this.isEditing=!1}editorDivInput(Tt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Tt,Lt;this.width&&(Tt=this.x,Lt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",et(this,ot)),this.enableEditing(),j.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(zt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("aria-label",zt)}),j.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(zt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("default-content",zt)}),this.editorDiv.contentEditable=!0;const{style:Yt}=this.editorDiv;if(Yt.fontSize=`calc(${et(this,ut)}px * var(--scale-factor))`,Yt.color=et(this,it),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[zt,Wt]=this.parentDimensions;if(this.annotationElementId){const{position:Bt}=et(this,dt);let[Ut,_t]=this.getInitialTranslation();[Ut,_t]=this.pageTranslationToScreen(Ut,_t);const[$t,Xt]=this.pageDimensions,[Ct,yt]=this.pageTranslation;let Et,St;switch(this.rotation){case 0:Et=Tt+(Bt[0]-Ct)/$t,St=Lt+this.height-(Bt[1]-yt)/Xt;break;case 90:Et=Tt+(Bt[0]-Ct)/$t,St=Lt-(Bt[1]-yt)/Xt,[Ut,_t]=[_t,-Ut];break;case 180:Et=Tt-this.width+(Bt[0]-Ct)/$t,St=Lt-(Bt[1]-yt)/Xt,[Ut,_t]=[-Ut,-_t];break;case 270:Et=Tt+(Bt[0]-Ct-this.height*Xt)/$t,St=Lt+(Bt[1]-yt-this.width*$t)/Xt,[Ut,_t]=[-_t,Ut];break}this.setAt(Et*zt,St*Wt,Ut,_t)}else this.setAt(Tt*zt,Lt*Wt,this.width*zt,this.height*Wt);wt(this,lt,sx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Tt,Lt,Yt){let zt=null;if(Tt instanceof _e.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Bt,fontColor:Ut},rect:_t,rotation:$t,id:Xt},textContent:Ct,textPosition:yt,parent:{page:{pageNumber:Et}}}=Tt;if(!Ct||Ct.length===0)return null;zt=Tt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(Ut),fontSize:Bt,value:Ct.join(`
`),position:yt,pageIndex:Et-1,rect:_t,rotation:$t,id:Xt,deleted:!1}}const Wt=super.deserialize(Tt,Lt,Yt);return Pt(Wt,ut,Tt.fontSize),Pt(Wt,it,a.Util.makeHexColor(...Tt.color)),Pt(Wt,ct,Tt.value),Wt.annotationElementId=Tt.id||null,Pt(Wt,dt,zt),Wt}serialize(Tt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Lt=At._internalPadding*this.parentScale,Yt=this.getRect(Lt,Lt),zt=j.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:et(this,it)),Wt={annotationType:a.AnnotationEditorType.FREETEXT,color:zt,fontSize:et(this,ut),value:et(this,ct),pageIndex:this.pageIndex,rect:Yt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Tt?Wt:this.annotationElementId&&!wt(this,lt,$A).call(this,Wt)?null:(Wt.id=this.annotationElementId,Wt)}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakSet,OA=function(Tt){const Lt=zt=>{this.editorDiv.style.fontSize=`calc(${zt}px * var(--scale-factor))`,this.translate(0,-(zt-et(this,ut))*this.parentScale),Pt(this,ut,zt),wt(this,lt,Lp).call(this)},Yt=et(this,ut);this.addCommands({cmd:()=>{Lt(Tt)},undo:()=>{Lt(Yt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NA=function(Tt){const Lt=et(this,it);this.addCommands({cmd:()=>{Pt(this,it,this.editorDiv.style.color=Tt)},undo:()=>{Pt(this,it,this.editorDiv.style.color=Lt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jA=function(){const Tt=this.editorDiv.getElementsByTagName("div");if(Tt.length===0)return this.editorDiv.innerText;const Lt=[];for(const Yt of Tt)Lt.push(Yt.innerText.replace(/\r\n?|\n/,""));return Lt.join(`
`)},Lp=function(){const[Tt,Lt]=this.parentDimensions;let Yt;if(this.isAttachedToDOM)Yt=this.div.getBoundingClientRect();else{const{currentLayer:zt,div:Wt}=this,Bt=Wt.style.display;Wt.style.display="hidden",zt.div.append(this.div),Yt=Wt.getBoundingClientRect(),Wt.remove(),Wt.style.display=Bt}this.rotation%180===this.parentRotation%180?(this.width=Yt.width/Tt,this.height=Yt.height/Lt):(this.width=Yt.height/Tt,this.height=Yt.width/Lt),this.fixAndSetPosition()},sx=function(){if(this.editorDiv.replaceChildren(),!!et(this,ct))for(const Tt of et(this,ct).split(`
`)){const Lt=document.createElement("div");Lt.append(Tt?document.createTextNode(Tt):document.createElement("br")),this.editorDiv.append(Lt)}},$A=function(Tt){const{value:Lt,fontSize:Yt,color:zt,rect:Wt,pageIndex:Bt}=et(this,dt);return Tt.value!==Lt||Tt.fontSize!==Yt||Tt.rect.some((Ut,_t)=>Math.abs(Ut-Wt[_t])>=1)||Tt.color.some((Ut,_t)=>Ut!==zt[_t])||Tt.pageIndex!==Bt},rx=function(Tt=!1){if(!this.annotationElementId)return;if(wt(this,lt,Lp).call(this),!Tt&&(this.width===0||this.height===0)){setTimeout(()=>wt(this,lt,rx).call(this,!0),0);return}const Lt=At._internalPadding*this.parentScale;et(this,dt).rect=this.getRect(Lt,Lt)},Hn(At,"_freeTextDefaultContent",""),Hn(At,"_internalPadding",0),Hn(At,"_defaultColor",null),Hn(At,"_defaultFontSize",10),Hn(At,"_type","freetext");let nt=At;e.FreeTextEditor=nt},(i,e,s)=>{var St,kt,Uo,BA,Vt,rn,an,ln,cn,dn,qt,sn,It,Ht,Qt,tn,un,mn,vn,Zt,An,En,UA,ty,ix,ax,Dn,Un,Wn,Tn,hn,nn,gn,ox,Ln,Mt,Jt,pn,HA,lx;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var a=s(1),o=s(6),j=s(3),_e=s(30),nt=s(31),tt=s(32);const st=1e3,rt=9,at=new WeakSet;function it(xn){return{width:xn[2]-xn[0],height:xn[3]-xn[1]}}class ct{static create(Nt){switch(Nt.data.annotationType){case a.AnnotationType.LINK:return new ut(Nt);case a.AnnotationType.TEXT:return new dt(Nt);case a.AnnotationType.WIDGET:switch(Nt.data.fieldType){case"Tx":return new ht(Nt);case"Btn":return Nt.data.radioButton?new ft(Nt):Nt.data.checkBox?new mt(Nt):new gt(Nt);case"Ch":return new pt(Nt);case"Sig":return new xt(Nt)}return new lt(Nt);case a.AnnotationType.POPUP:return new vt(Nt);case a.AnnotationType.FREETEXT:return new Rt(Nt);case a.AnnotationType.LINE:return new bt(Nt);case a.AnnotationType.SQUARE:return new Tt(Nt);case a.AnnotationType.CIRCLE:return new Lt(Nt);case a.AnnotationType.POLYLINE:return new Yt(Nt);case a.AnnotationType.CARET:return new Wt(Nt);case a.AnnotationType.INK:return new Bt(Nt);case a.AnnotationType.POLYGON:return new zt(Nt);case a.AnnotationType.HIGHLIGHT:return new Ut(Nt);case a.AnnotationType.UNDERLINE:return new _t(Nt);case a.AnnotationType.SQUIGGLY:return new $t(Nt);case a.AnnotationType.STRIKEOUT:return new Xt(Nt);case a.AnnotationType.STAMP:return new Ct(Nt);case a.AnnotationType.FILEATTACHMENT:return new yt(Nt);default:return new ot(Nt)}}}const Ft=class Ft{constructor(Nt,{isRenderable:jt=!1,ignoreBorder:Kt=!1,createQuadrilaterals:en=!1}={}){Dt(this,St,!1);this.isRenderable=jt,this.data=Nt.data,this.layer=Nt.layer,this.linkService=Nt.linkService,this.downloadManager=Nt.downloadManager,this.imageResourcesPath=Nt.imageResourcesPath,this.renderForms=Nt.renderForms,this.svgFactory=Nt.svgFactory,this.annotationStorage=Nt.annotationStorage,this.enableScripting=Nt.enableScripting,this.hasJSActions=Nt.hasJSActions,this._fieldObjects=Nt.fieldObjects,this.parent=Nt.parent,jt&&(this.container=this._createContainer(Kt)),en&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Nt,contentsObj:jt,richText:Kt}){return!!(Nt!=null&&Nt.str||jt!=null&&jt.str||Kt!=null&&Kt.str)}get hasPopupData(){return Ft._hasPopupData(this.data)}_createContainer(Nt){const{data:jt,parent:{page:Kt,viewport:en}}=this,on=document.createElement("section");on.setAttribute("data-annotation-id",jt.id),this instanceof lt||(on.tabIndex=st),on.style.zIndex=this.parent.zIndex++,this.data.popupRef&&on.setAttribute("aria-haspopup","dialog"),jt.noRotate&&on.classList.add("norotate");const{pageWidth:fn,pageHeight:yn,pageX:Rn,pageY:kn}=en.rawDims;if(!jt.rect||this instanceof vt){const{rotation:On}=jt;return!jt.hasOwnCanvas&&On!==0&&this.setRotation(On,on),on}const{width:Sn,height:jn}=it(jt.rect),Cn=a.Util.normalizeRect([jt.rect[0],Kt.view[3]-jt.rect[1]+Kt.view[1],jt.rect[2],Kt.view[3]-jt.rect[3]+Kt.view[1]]);if(!Nt&&jt.borderStyle.width>0){on.style.borderWidth=`${jt.borderStyle.width}px`;const On=jt.borderStyle.horizontalCornerRadius,$n=jt.borderStyle.verticalCornerRadius;if(On>0||$n>0){const zn=`calc(${On}px * var(--scale-factor)) / calc(${$n}px * var(--scale-factor))`;on.style.borderRadius=zn}else if(this instanceof ft){const zn=`calc(${Sn}px * var(--scale-factor)) / calc(${jn}px * var(--scale-factor))`;on.style.borderRadius=zn}switch(jt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:on.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:on.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:on.style.borderBottomStyle="solid";break}const Nn=jt.borderColor||null;Nn?(Pt(this,St,!0),on.style.borderColor=a.Util.makeHexColor(Nn[0]|0,Nn[1]|0,Nn[2]|0)):on.style.borderWidth=0}on.style.left=`${100*(Cn[0]-Rn)/fn}%`,on.style.top=`${100*(Cn[1]-kn)/yn}%`;const{rotation:Pn}=jt;return jt.hasOwnCanvas||Pn===0?(on.style.width=`${100*Sn/fn}%`,on.style.height=`${100*jn/yn}%`):this.setRotation(Pn,on),on}setRotation(Nt,jt=this.container){if(!this.data.rect)return;const{pageWidth:Kt,pageHeight:en}=this.parent.viewport.rawDims,{width:on,height:fn}=it(this.data.rect);let yn,Rn;Nt%180===0?(yn=100*on/Kt,Rn=100*fn/en):(yn=100*fn/Kt,Rn=100*on/en),jt.style.width=`${yn}%`,jt.style.height=`${Rn}%`,jt.setAttribute("data-main-rotation",(360-Nt)%360)}get _commonActions(){const Nt=(jt,Kt,en)=>{const on=en.detail[jt],fn=on[0],yn=on.slice(1);en.target.style[Kt]=_e.ColorConverters[`${fn}_HTML`](yn),this.annotationStorage.setValue(this.data.id,{[Kt]:_e.ColorConverters[`${fn}_rgb`](yn)})};return(0,a.shadow)(this,"_commonActions",{display:jt=>{const{display:Kt}=jt.detail,en=Kt%2===1;this.container.style.visibility=en?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:en,noPrint:Kt===1||Kt===2})},print:jt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!jt.detail.print})},hidden:jt=>{const{hidden:Kt}=jt.detail;this.container.style.visibility=Kt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Kt,noView:Kt})},focus:jt=>{setTimeout(()=>jt.target.focus({preventScroll:!1}),0)},userName:jt=>{jt.target.title=jt.detail.userName},readonly:jt=>{jt.target.disabled=jt.detail.readonly},required:jt=>{this._setRequired(jt.target,jt.detail.required)},bgColor:jt=>{Nt("bgColor","backgroundColor",jt)},fillColor:jt=>{Nt("fillColor","backgroundColor",jt)},fgColor:jt=>{Nt("fgColor","color",jt)},textColor:jt=>{Nt("textColor","color",jt)},borderColor:jt=>{Nt("borderColor","borderColor",jt)},strokeColor:jt=>{Nt("strokeColor","borderColor",jt)},rotation:jt=>{const Kt=jt.detail.rotation;this.setRotation(Kt),this.annotationStorage.setValue(this.data.id,{rotation:Kt})}})}_dispatchEventFromSandbox(Nt,jt){const Kt=this._commonActions;for(const en of Object.keys(jt.detail)){const on=Nt[en]||Kt[en];on==null||on(jt)}}_setDefaultPropertiesFromJS(Nt){if(!this.enableScripting)return;const jt=this.annotationStorage.getRawValue(this.data.id);if(!jt)return;const Kt=this._commonActions;for(const[en,on]of Object.entries(jt)){const fn=Kt[en];if(fn){const yn={detail:{[en]:on},target:Nt};fn(yn),delete jt[en]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Nt}=this.data;if(!Nt)return;const[jt,Kt,en,on]=this.data.rect;if(Nt.length===1){const[,{x:$n,y:Nn},{x:zn,y:Kn}]=Nt[0];if(en===$n&&on===Nn&&jt===zn&&Kt===Kn)return}const{style:fn}=this.container;let yn;if(et(this,St)){const{borderColor:$n,borderWidth:Nn}=fn;fn.borderWidth=0,yn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$n}" stroke-width="${Nn}">`],this.container.classList.add("hasBorder")}const Rn=en-jt,kn=on-Kt,{svgFactory:Sn}=this,jn=Sn.createElement("svg");jn.classList.add("quadrilateralsContainer"),jn.setAttribute("width",0),jn.setAttribute("height",0);const Cn=Sn.createElement("defs");jn.append(Cn);const Pn=Sn.createElement("clipPath"),On=`clippath_${this.data.id}`;Pn.setAttribute("id",On),Pn.setAttribute("clipPathUnits","objectBoundingBox"),Cn.append(Pn);for(const[,{x:$n,y:Nn},{x:zn,y:Kn}]of Nt){const Yn=Sn.createElement("rect"),ts=(zn-jt)/Rn,hs=(on-Nn)/kn,gs=($n-zn)/Rn,No=(Nn-Kn)/kn;Yn.setAttribute("x",ts),Yn.setAttribute("y",hs),Yn.setAttribute("width",gs),Yn.setAttribute("height",No),Pn.append(Yn),yn==null||yn.push(`<rect vector-effect="non-scaling-stroke" x="${ts}" y="${hs}" width="${gs}" height="${No}"/>`)}et(this,St)&&(yn.push("</g></svg>')"),fn.backgroundImage=yn.join("")),this.container.append(jn),this.container.style.clipPath=`url(#${On})`}_createPopup(){const{container:Nt,data:jt}=this;Nt.setAttribute("aria-haspopup","dialog");const Kt=new vt({data:{color:jt.color,titleObj:jt.titleObj,modificationDate:jt.modificationDate,contentsObj:jt.contentsObj,richText:jt.richText,parentRect:jt.rect,borderStyle:0,id:`popup_${jt.id}`,rotation:jt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Kt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Nt,jt=null){const Kt=[];if(this._fieldObjects){const en=this._fieldObjects[Nt];if(en)for(const{page:on,id:fn,exportValues:yn}of en){if(on===-1||fn===jt)continue;const Rn=typeof yn=="string"?yn:null,kn=document.querySelector(`[data-element-id="${fn}"]`);if(kn&&!at.has(kn)){(0,a.warn)(`_getElementsByName - element not allowed: ${fn}`);continue}Kt.push({id:fn,exportValue:Rn,domElement:kn})}return Kt}for(const en of document.getElementsByName(Nt)){const{exportValue:on}=en,fn=en.getAttribute("data-element-id");fn!==jt&&at.has(en)&&Kt.push({id:fn,exportValue:on,domElement:en})}return Kt}show(){var Nt;this.container&&(this.container.hidden=!1),(Nt=this.popup)==null||Nt.maybeShow()}hide(){var Nt;this.container&&(this.container.hidden=!0),(Nt=this.popup)==null||Nt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Nt=this.getElementsToTriggerPopup();if(Array.isArray(Nt))for(const jt of Nt)jt.classList.add("highlightArea");else Nt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Nt,data:{id:jt}}=this;this.container.addEventListener("dblclick",()=>{var Kt;(Kt=this.linkService.eventBus)==null||Kt.dispatch("switchannotationeditormode",{source:this,mode:Nt,editId:jt})})}};St=new WeakMap;let ot=Ft;class ut extends ot{constructor(jt,Kt=null){super(jt,{isRenderable:!0,ignoreBorder:!!(Kt!=null&&Kt.ignoreBorder),createQuadrilaterals:!0});Dt(this,kt);this.isTooltipOnly=jt.data.isTooltipOnly}render(){const{data:jt,linkService:Kt}=this,en=document.createElement("a");en.setAttribute("data-element-id",jt.id);let on=!1;return jt.url?(Kt.addLinkAttributes(en,jt.url,jt.newWindow),on=!0):jt.action?(this._bindNamedAction(en,jt.action),on=!0):jt.attachment?(this._bindAttachment(en,jt.attachment),on=!0):jt.setOCGState?(wt(this,kt,BA).call(this,en,jt.setOCGState),on=!0):jt.dest?(this._bindLink(en,jt.dest),on=!0):(jt.actions&&(jt.actions.Action||jt.actions["Mouse Up"]||jt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(en,jt),on=!0),jt.resetForm?(this._bindResetFormAction(en,jt.resetForm),on=!0):this.isTooltipOnly&&!on&&(this._bindLink(en,""),on=!0)),this.container.classList.add("linkAnnotation"),on&&this.container.append(en),this.container}_bindLink(jt,Kt){jt.href=this.linkService.getDestinationHash(Kt),jt.onclick=()=>(Kt&&this.linkService.goToDestination(Kt),!1),(Kt||Kt==="")&&wt(this,kt,Uo).call(this)}_bindNamedAction(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>(this.linkService.executeNamedAction(Kt),!1),wt(this,kt,Uo).call(this)}_bindAttachment(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>{var en;return(en=this.downloadManager)==null||en.openOrDownloadData(this.container,Kt.content,Kt.filename),!1},wt(this,kt,Uo).call(this)}_bindJSAction(jt,Kt){jt.href=this.linkService.getAnchorUrl("");const en=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const on of Object.keys(Kt.actions)){const fn=en.get(on);fn&&(jt[fn]=()=>{var yn;return(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Kt.id,name:on}}),!1})}jt.onclick||(jt.onclick=()=>!1),wt(this,kt,Uo).call(this)}_bindResetFormAction(jt,Kt){const en=jt.onclick;if(en||(jt.href=this.linkService.getAnchorUrl("")),wt(this,kt,Uo).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),en||(jt.onclick=()=>!1);return}jt.onclick=()=>{var jn;en==null||en();const{fields:on,refs:fn,include:yn}=Kt,Rn=[];if(on.length!==0||fn.length!==0){const Cn=new Set(fn);for(const Pn of on){const On=this._fieldObjects[Pn]||[];for(const{id:$n}of On)Cn.add($n)}for(const Pn of Object.values(this._fieldObjects))for(const On of Pn)Cn.has(On.id)===yn&&Rn.push(On)}else for(const Cn of Object.values(this._fieldObjects))Rn.push(...Cn);const kn=this.annotationStorage,Sn=[];for(const Cn of Rn){const{id:Pn}=Cn;switch(Sn.push(Pn),Cn.type){case"text":{const $n=Cn.defaultValue||"";kn.setValue(Pn,{value:$n});break}case"checkbox":case"radiobutton":{const $n=Cn.defaultValue===Cn.exportValues;kn.setValue(Pn,{value:$n});break}case"combobox":case"listbox":{const $n=Cn.defaultValue||"";kn.setValue(Pn,{value:$n});break}default:continue}const On=document.querySelector(`[data-element-id="${Pn}"]`);if(On){if(!at.has(On)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Pn}`);continue}}else continue;On.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Sn,name:"ResetForm"}})),!1}}}kt=new WeakSet,Uo=function(){this.container.setAttribute("data-internal-link","")},BA=function(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>(this.linkService.executeSetOCGState(Kt),!1),wt(this,kt,Uo).call(this)};class dt extends ot{constructor(Nt){super(Nt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Nt=document.createElement("img");return Nt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Nt.alt="[{{type}} Annotation]",Nt.dataset.l10nId="text_annotation_type",Nt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Nt),this.container}}class lt extends ot{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Nt){var jt;this.data.hasOwnCanvas&&(((jt=Nt.previousSibling)==null?void 0:jt.nodeName)==="CANVAS"&&(Nt.previousSibling.hidden=!0),Nt.hidden=!1)}_getKeyModifier(Nt){const{isWin:jt,isMac:Kt}=a.FeatureTest.platform;return jt&&Nt.ctrlKey||Kt&&Nt.metaKey}_setEventListener(Nt,jt,Kt,en,on){Kt.includes("mouse")?Nt.addEventListener(Kt,fn=>{var yn;(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:on(fn),shift:fn.shiftKey,modifier:this._getKeyModifier(fn)}})}):Nt.addEventListener(Kt,fn=>{var yn;if(Kt==="blur"){if(!jt.focused||!fn.relatedTarget)return;jt.focused=!1}else if(Kt==="focus"){if(jt.focused)return;jt.focused=!0}on&&((yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:on(fn)}}))})}_setEventListeners(Nt,jt,Kt,en){var on,fn,yn;for(const[Rn,kn]of Kt)(kn==="Action"||(on=this.data.actions)!=null&&on[kn])&&((kn==="Focus"||kn==="Blur")&&(jt||(jt={focused:!1})),this._setEventListener(Nt,jt,Rn,kn,en),kn==="Focus"&&!((fn=this.data.actions)!=null&&fn.Blur)?this._setEventListener(Nt,jt,"blur","Blur",null):kn==="Blur"&&!((yn=this.data.actions)!=null&&yn.Focus)&&this._setEventListener(Nt,jt,"focus","Focus",null))}_setBackgroundColor(Nt){const jt=this.data.backgroundColor||null;Nt.style.backgroundColor=jt===null?"transparent":a.Util.makeHexColor(jt[0],jt[1],jt[2])}_setTextStyle(Nt){const jt=["left","center","right"],{fontColor:Kt}=this.data.defaultAppearanceData,en=this.data.defaultAppearanceData.fontSize||rt,on=Nt.style;let fn;const yn=2,Rn=kn=>Math.round(10*kn)/10;if(this.data.multiLine){const kn=Math.abs(this.data.rect[3]-this.data.rect[1]-yn),Sn=Math.round(kn/(a.LINE_FACTOR*en))||1,jn=kn/Sn;fn=Math.min(en,Rn(jn/a.LINE_FACTOR))}else{const kn=Math.abs(this.data.rect[3]-this.data.rect[1]-yn);fn=Math.min(en,Rn(kn/a.LINE_FACTOR))}on.fontSize=`calc(${fn}px * var(--scale-factor))`,on.color=a.Util.makeHexColor(Kt[0],Kt[1],Kt[2]),this.data.textAlignment!==null&&(on.textAlign=jt[this.data.textAlignment])}_setRequired(Nt,jt){jt?Nt.setAttribute("required",!0):Nt.removeAttribute("required"),Nt.setAttribute("aria-required",jt)}}class ht extends lt{constructor(Nt){const jt=Nt.renderForms||!Nt.data.hasAppearance&&!!Nt.data.fieldValue;super(Nt,{isRenderable:jt})}setPropertyOnSiblings(Nt,jt,Kt,en){const on=this.annotationStorage;for(const fn of this._getElementsByName(Nt.name,Nt.id))fn.domElement&&(fn.domElement[jt]=Kt),on.setValue(fn.id,{[en]:Kt})}render(){var en,on;const Nt=this.annotationStorage,jt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Kt=null;if(this.renderForms){const fn=Nt.getValue(jt,{value:this.data.fieldValue});let yn=fn.value||"";const Rn=Nt.getValue(jt,{charLimit:this.data.maxLen}).charLimit;Rn&&yn.length>Rn&&(yn=yn.slice(0,Rn));let kn=fn.formattedValue||((en=this.data.textContent)==null?void 0:en.join(`
`))||null;kn&&this.data.comb&&(kn=kn.replaceAll(/\s+/g,""));const Sn={userValue:yn,formattedValue:kn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Kt=document.createElement("textarea"),Kt.textContent=kn??yn,this.data.doNotScroll&&(Kt.style.overflowY="hidden")):(Kt=document.createElement("input"),Kt.type="text",Kt.setAttribute("value",kn??yn),this.data.doNotScroll&&(Kt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Kt.hidden=!0),at.add(Kt),Kt.setAttribute("data-element-id",jt),Kt.disabled=this.data.readOnly,Kt.name=this.data.fieldName,Kt.tabIndex=st,this._setRequired(Kt,this.data.required),Rn&&(Kt.maxLength=Rn),Kt.addEventListener("input",Cn=>{Nt.setValue(jt,{value:Cn.target.value}),this.setPropertyOnSiblings(Kt,"value",Cn.target.value,"value"),Sn.formattedValue=null}),Kt.addEventListener("resetform",Cn=>{const Pn=this.data.defaultFieldValue??"";Kt.value=Sn.userValue=Pn,Sn.formattedValue=null});let jn=Cn=>{const{formattedValue:Pn}=Sn;Pn!=null&&(Cn.target.value=Pn),Cn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Kt.addEventListener("focus",Pn=>{if(Sn.focused)return;const{target:On}=Pn;Sn.userValue&&(On.value=Sn.userValue),Sn.lastCommittedValue=On.value,Sn.commitKey=1,Sn.focused=!0}),Kt.addEventListener("updatefromsandbox",Pn=>{this.showElementAndHideCanvas(Pn.target);const On={value($n){Sn.userValue=$n.detail.value??"",Nt.setValue(jt,{value:Sn.userValue.toString()}),$n.target.value=Sn.userValue},formattedValue($n){const{formattedValue:Nn}=$n.detail;Sn.formattedValue=Nn,Nn!=null&&$n.target!==document.activeElement&&($n.target.value=Nn),Nt.setValue(jt,{formattedValue:Nn})},selRange($n){$n.target.setSelectionRange(...$n.detail.selRange)},charLimit:$n=>{var Yn;const{charLimit:Nn}=$n.detail,{target:zn}=$n;if(Nn===0){zn.removeAttribute("maxLength");return}zn.setAttribute("maxLength",Nn);let Kn=Sn.userValue;!Kn||Kn.length<=Nn||(Kn=Kn.slice(0,Nn),zn.value=Sn.userValue=Kn,Nt.setValue(jt,{value:Kn}),(Yn=this.linkService.eventBus)==null||Yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Kn,willCommit:!0,commitKey:1,selStart:zn.selectionStart,selEnd:zn.selectionEnd}}))}};this._dispatchEventFromSandbox(On,Pn)}),Kt.addEventListener("keydown",Pn=>{var Nn;Sn.commitKey=1;let On=-1;if(Pn.key==="Escape"?On=0:Pn.key==="Enter"&&!this.data.multiLine?On=2:Pn.key==="Tab"&&(Sn.commitKey=3),On===-1)return;const{value:$n}=Pn.target;Sn.lastCommittedValue!==$n&&(Sn.lastCommittedValue=$n,Sn.userValue=$n,(Nn=this.linkService.eventBus)==null||Nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:$n,willCommit:!0,commitKey:On,selStart:Pn.target.selectionStart,selEnd:Pn.target.selectionEnd}}))});const Cn=jn;jn=null,Kt.addEventListener("blur",Pn=>{var $n;if(!Sn.focused||!Pn.relatedTarget)return;Sn.focused=!1;const{value:On}=Pn.target;Sn.userValue=On,Sn.lastCommittedValue!==On&&(($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:On,willCommit:!0,commitKey:Sn.commitKey,selStart:Pn.target.selectionStart,selEnd:Pn.target.selectionEnd}})),Cn(Pn)}),(on=this.data.actions)!=null&&on.Keystroke&&Kt.addEventListener("beforeinput",Pn=>{var hs;Sn.lastCommittedValue=null;const{data:On,target:$n}=Pn,{value:Nn,selectionStart:zn,selectionEnd:Kn}=$n;let Yn=zn,ts=Kn;switch(Pn.inputType){case"deleteWordBackward":{const gs=Nn.substring(0,zn).match(/\w*[^\w]*$/);gs&&(Yn-=gs[0].length);break}case"deleteWordForward":{const gs=Nn.substring(zn).match(/^[^\w]*\w*/);gs&&(ts+=gs[0].length);break}case"deleteContentBackward":zn===Kn&&(Yn-=1);break;case"deleteContentForward":zn===Kn&&(ts+=1);break}Pn.preventDefault(),(hs=this.linkService.eventBus)==null||hs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Nn,change:On||"",willCommit:!1,selStart:Yn,selEnd:ts}})}),this._setEventListeners(Kt,Sn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pn=>Pn.target.value)}if(jn&&Kt.addEventListener("blur",jn),this.data.comb){const Pn=(this.data.rect[2]-this.data.rect[0])/Rn;Kt.classList.add("comb"),Kt.style.letterSpacing=`calc(${Pn}px * var(--scale-factor) - 1ch)`}}else Kt=document.createElement("div"),Kt.textContent=this.data.fieldValue,Kt.style.verticalAlign="middle",Kt.style.display="table-cell";return this._setTextStyle(Kt),this._setBackgroundColor(Kt),this._setDefaultPropertiesFromJS(Kt),this.container.append(Kt),this.container}}class xt extends lt{constructor(Nt){super(Nt,{isRenderable:!!Nt.data.hasOwnCanvas})}}class mt extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){const Nt=this.annotationStorage,jt=this.data,Kt=jt.id;let en=Nt.getValue(Kt,{value:jt.exportValue===jt.fieldValue}).value;typeof en=="string"&&(en=en!=="Off",Nt.setValue(Kt,{value:en})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const on=document.createElement("input");return at.add(on),on.setAttribute("data-element-id",Kt),on.disabled=jt.readOnly,this._setRequired(on,this.data.required),on.type="checkbox",on.name=jt.fieldName,en&&on.setAttribute("checked",!0),on.setAttribute("exportValue",jt.exportValue),on.tabIndex=st,on.addEventListener("change",fn=>{const{name:yn,checked:Rn}=fn.target;for(const kn of this._getElementsByName(yn,Kt)){const Sn=Rn&&kn.exportValue===jt.exportValue;kn.domElement&&(kn.domElement.checked=Sn),Nt.setValue(kn.id,{value:Sn})}Nt.setValue(Kt,{value:Rn})}),on.addEventListener("resetform",fn=>{const yn=jt.defaultFieldValue||"Off";fn.target.checked=yn===jt.exportValue}),this.enableScripting&&this.hasJSActions&&(on.addEventListener("updatefromsandbox",fn=>{const yn={value(Rn){Rn.target.checked=Rn.detail.value!=="Off",Nt.setValue(Kt,{value:Rn.target.checked})}};this._dispatchEventFromSandbox(yn,fn)}),this._setEventListeners(on,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fn=>fn.target.checked)),this._setBackgroundColor(on),this._setDefaultPropertiesFromJS(on),this.container.append(on),this.container}}class ft extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Nt=this.annotationStorage,jt=this.data,Kt=jt.id;let en=Nt.getValue(Kt,{value:jt.fieldValue===jt.buttonValue}).value;typeof en=="string"&&(en=en!==jt.buttonValue,Nt.setValue(Kt,{value:en}));const on=document.createElement("input");if(at.add(on),on.setAttribute("data-element-id",Kt),on.disabled=jt.readOnly,this._setRequired(on,this.data.required),on.type="radio",on.name=jt.fieldName,en&&on.setAttribute("checked",!0),on.tabIndex=st,on.addEventListener("change",fn=>{const{name:yn,checked:Rn}=fn.target;for(const kn of this._getElementsByName(yn,Kt))Nt.setValue(kn.id,{value:!1});Nt.setValue(Kt,{value:Rn})}),on.addEventListener("resetform",fn=>{const yn=jt.defaultFieldValue;fn.target.checked=yn!=null&&yn===jt.buttonValue}),this.enableScripting&&this.hasJSActions){const fn=jt.buttonValue;on.addEventListener("updatefromsandbox",yn=>{const Rn={value:kn=>{const Sn=fn===kn.detail.value;for(const jn of this._getElementsByName(kn.target.name)){const Cn=Sn&&jn.id===Kt;jn.domElement&&(jn.domElement.checked=Cn),Nt.setValue(jn.id,{value:Cn})}}};this._dispatchEventFromSandbox(Rn,yn)}),this._setEventListeners(on,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yn=>yn.target.checked)}return this._setBackgroundColor(on),this._setDefaultPropertiesFromJS(on),this.container.append(on),this.container}}class gt extends ut{constructor(Nt){super(Nt,{ignoreBorder:Nt.data.hasAppearance})}render(){const Nt=super.render();Nt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Nt.title=this.data.alternativeText);const jt=Nt.lastChild;return this.enableScripting&&this.hasJSActions&&jt&&(this._setDefaultPropertiesFromJS(jt),jt.addEventListener("updatefromsandbox",Kt=>{this._dispatchEventFromSandbox({},Kt)})),Nt}}class pt extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Nt=this.annotationStorage,jt=this.data.id,Kt=Nt.getValue(jt,{value:this.data.fieldValue}),en=document.createElement("select");at.add(en),en.setAttribute("data-element-id",jt),en.disabled=this.data.readOnly,this._setRequired(en,this.data.required),en.name=this.data.fieldName,en.tabIndex=st;let on=this.data.combo&&this.data.options.length>0;this.data.combo||(en.size=this.data.options.length,this.data.multiSelect&&(en.multiple=!0)),en.addEventListener("resetform",Sn=>{const jn=this.data.defaultFieldValue;for(const Cn of en.options)Cn.selected=Cn.value===jn});for(const Sn of this.data.options){const jn=document.createElement("option");jn.textContent=Sn.displayValue,jn.value=Sn.exportValue,Kt.value.includes(Sn.exportValue)&&(jn.setAttribute("selected",!0),on=!1),en.append(jn)}let fn=null;if(on){const Sn=document.createElement("option");Sn.value=" ",Sn.setAttribute("hidden",!0),Sn.setAttribute("selected",!0),en.prepend(Sn),fn=()=>{Sn.remove(),en.removeEventListener("input",fn),fn=null},en.addEventListener("input",fn)}const yn=Sn=>{const jn=Sn?"value":"textContent",{options:Cn,multiple:Pn}=en;return Pn?Array.prototype.filter.call(Cn,On=>On.selected).map(On=>On[jn]):Cn.selectedIndex===-1?null:Cn[Cn.selectedIndex][jn]};let Rn=yn(!1);const kn=Sn=>{const jn=Sn.target.options;return Array.prototype.map.call(jn,Cn=>({displayValue:Cn.textContent,exportValue:Cn.value}))};return this.enableScripting&&this.hasJSActions?(en.addEventListener("updatefromsandbox",Sn=>{const jn={value(Cn){fn==null||fn();const Pn=Cn.detail.value,On=new Set(Array.isArray(Pn)?Pn:[Pn]);for(const $n of en.options)$n.selected=On.has($n.value);Nt.setValue(jt,{value:yn(!0)}),Rn=yn(!1)},multipleSelection(Cn){en.multiple=!0},remove(Cn){const Pn=en.options,On=Cn.detail.remove;Pn[On].selected=!1,en.remove(On),Pn.length>0&&Array.prototype.findIndex.call(Pn,Nn=>Nn.selected)===-1&&(Pn[0].selected=!0),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},clear(Cn){for(;en.length!==0;)en.remove(0);Nt.setValue(jt,{value:null,items:[]}),Rn=yn(!1)},insert(Cn){const{index:Pn,displayValue:On,exportValue:$n}=Cn.detail.insert,Nn=en.children[Pn],zn=document.createElement("option");zn.textContent=On,zn.value=$n,Nn?Nn.before(zn):en.append(zn),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},items(Cn){const{items:Pn}=Cn.detail;for(;en.length!==0;)en.remove(0);for(const On of Pn){const{displayValue:$n,exportValue:Nn}=On,zn=document.createElement("option");zn.textContent=$n,zn.value=Nn,en.append(zn)}en.options.length>0&&(en.options[0].selected=!0),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},indices(Cn){const Pn=new Set(Cn.detail.indices);for(const On of Cn.target.options)On.selected=Pn.has(On.index);Nt.setValue(jt,{value:yn(!0)}),Rn=yn(!1)},editable(Cn){Cn.target.disabled=!Cn.detail.editable}};this._dispatchEventFromSandbox(jn,Sn)}),en.addEventListener("input",Sn=>{var Cn;const jn=yn(!0);Nt.setValue(jt,{value:jn}),Sn.preventDefault(),(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Rn,changeEx:jn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(en,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Sn=>Sn.target.value)):en.addEventListener("input",function(Sn){Nt.setValue(jt,{value:yn(!0)})}),this.data.combo&&this._setTextStyle(en),this._setBackgroundColor(en),this._setDefaultPropertiesFromJS(en),this.container.append(en),this.container}}class vt extends ot{constructor(Nt){const{data:jt,elements:Kt}=Nt;super(Nt,{isRenderable:ot._hasPopupData(jt)}),this.elements=Kt}render(){this.container.classList.add("popupAnnotation");const Nt=new At({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),jt=[];for(const Kt of this.elements)Kt.popup=Nt,jt.push(Kt.data.id),Kt.addHighlightArea();return this.container.setAttribute("aria-controls",jt.map(Kt=>`${a.AnnotationPrefix}${Kt}`).join(",")),this.container}}class At{constructor({container:Nt,color:jt,elements:Kt,titleObj:en,modificationDate:on,contentsObj:fn,richText:yn,parent:Rn,rect:kn,parentRect:Sn,open:jn}){Dt(this,En);Dt(this,Vt,null);Dt(this,rn,wt(this,En,UA).bind(this));Dt(this,an,wt(this,En,ax).bind(this));Dt(this,ln,wt(this,En,ix).bind(this));Dt(this,cn,wt(this,En,ty).bind(this));Dt(this,dn,null);Dt(this,qt,null);Dt(this,sn,null);Dt(this,It,null);Dt(this,Ht,null);Dt(this,Qt,null);Dt(this,tn,!1);Dt(this,un,null);Dt(this,mn,null);Dt(this,vn,null);Dt(this,Zt,null);Dt(this,An,!1);var Pn;Pt(this,qt,Nt),Pt(this,Zt,en),Pt(this,sn,fn),Pt(this,vn,yn),Pt(this,Ht,Rn),Pt(this,dn,jt),Pt(this,mn,kn),Pt(this,Qt,Sn),Pt(this,It,Kt);const Cn=o.PDFDateString.toDateObject(on);Cn&&Pt(this,Vt,Rn.l10n.get("annotation_date_string",{date:Cn.toLocaleDateString(),time:Cn.toLocaleTimeString()})),this.trigger=Kt.flatMap(On=>On.getElementsToTriggerPopup());for(const On of this.trigger)On.addEventListener("click",et(this,cn)),On.addEventListener("mouseenter",et(this,ln)),On.addEventListener("mouseleave",et(this,an)),On.classList.add("popupTriggerArea");for(const On of Kt)(Pn=On.container)==null||Pn.addEventListener("keydown",et(this,rn));et(this,qt).hidden=!0,jn&&wt(this,En,ty).call(this)}render(){if(et(this,un))return;const{page:{view:Nt},viewport:{rawDims:{pageWidth:jt,pageHeight:Kt,pageX:en,pageY:on}}}=et(this,Ht),fn=Pt(this,un,document.createElement("div"));if(fn.className="popup",et(this,dn)){const Yn=fn.style.outlineColor=a.Util.makeHexColor(...et(this,dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?fn.style.backgroundColor=`color-mix(in srgb, ${Yn} 30%, white)`:fn.style.backgroundColor=a.Util.makeHexColor(...et(this,dn).map(hs=>Math.floor(.7*(255-hs)+hs)))}const yn=document.createElement("span");yn.className="header";const Rn=document.createElement("h1");if(yn.append(Rn),{dir:Rn.dir,str:Rn.textContent}=et(this,Zt),fn.append(yn),et(this,Vt)){const Yn=document.createElement("span");Yn.classList.add("popupDate"),et(this,Vt).then(ts=>{Yn.textContent=ts}),yn.append(Yn)}const kn=et(this,sn),Sn=et(this,vn);if(Sn!=null&&Sn.str&&(!(kn!=null&&kn.str)||kn.str===Sn.str))tt.XfaLayer.render({xfaHtml:Sn.html,intent:"richText",div:fn}),fn.lastChild.classList.add("richText","popupContent");else{const Yn=this._formatContents(kn);fn.append(Yn)}let jn=!!et(this,Qt),Cn=jn?et(this,Qt):et(this,mn);for(const Yn of et(this,It))if(!Cn||a.Util.intersect(Yn.data.rect,Cn)!==null){Cn=Yn.data.rect,jn=!0;break}const Pn=a.Util.normalizeRect([Cn[0],Nt[3]-Cn[1]+Nt[1],Cn[2],Nt[3]-Cn[3]+Nt[1]]),$n=jn?Cn[2]-Cn[0]+5:0,Nn=Pn[0]+$n,zn=Pn[1],{style:Kn}=et(this,qt);Kn.left=`${100*(Nn-en)/jt}%`,Kn.top=`${100*(zn-on)/Kt}%`,et(this,qt).append(fn)}_formatContents({str:Nt,dir:jt}){const Kt=document.createElement("p");Kt.classList.add("popupContent"),Kt.dir=jt;const en=Nt.split(/(?:\r\n?|\n)/);for(let on=0,fn=en.length;on<fn;++on){const yn=en[on];Kt.append(document.createTextNode(yn)),on<fn-1&&Kt.append(document.createElement("br"))}return Kt}forceHide(){Pt(this,An,this.isVisible),et(this,An)&&(et(this,qt).hidden=!0)}maybeShow(){et(this,An)&&(Pt(this,An,!1),et(this,qt).hidden=!1)}get isVisible(){return et(this,qt).hidden===!1}}Vt=new WeakMap,rn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,qt=new WeakMap,sn=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,un=new WeakMap,mn=new WeakMap,vn=new WeakMap,Zt=new WeakMap,An=new WeakMap,En=new WeakSet,UA=function(Nt){Nt.altKey||Nt.shiftKey||Nt.ctrlKey||Nt.metaKey||(Nt.key==="Enter"||Nt.key==="Escape"&&et(this,tn))&&wt(this,En,ty).call(this)},ty=function(){Pt(this,tn,!et(this,tn)),et(this,tn)?(wt(this,En,ix).call(this),et(this,qt).addEventListener("click",et(this,cn)),et(this,qt).addEventListener("keydown",et(this,rn))):(wt(this,En,ax).call(this),et(this,qt).removeEventListener("click",et(this,cn)),et(this,qt).removeEventListener("keydown",et(this,rn)))},ix=function(){et(this,un)||this.render(),this.isVisible?et(this,tn)&&et(this,qt).classList.add("focused"):(et(this,qt).hidden=!1,et(this,qt).style.zIndex=parseInt(et(this,qt).style.zIndex)+1e3)},ax=function(){et(this,qt).classList.remove("focused"),!(et(this,tn)||!this.isVisible)&&(et(this,qt).hidden=!0,et(this,qt).style.zIndex=parseInt(et(this,qt).style.zIndex)-1e3)};class Rt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Nt.data.textContent,this.textPosition=Nt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Nt=document.createElement("div");Nt.classList.add("annotationTextContent"),Nt.setAttribute("role","comment");for(const jt of this.textContent){const Kt=document.createElement("span");Kt.textContent=jt,Nt.append(Kt)}this.container.append(Nt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=Rt;class bt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Dn,null)}render(){this.container.classList.add("lineAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=Pt(this,Dn,this.svgFactory.createElement("svg:line"));return fn.setAttribute("x1",jt.rect[2]-jt.lineCoordinates[0]),fn.setAttribute("y1",jt.rect[3]-jt.lineCoordinates[1]),fn.setAttribute("x2",jt.rect[2]-jt.lineCoordinates[2]),fn.setAttribute("y2",jt.rect[3]-jt.lineCoordinates[3]),fn.setAttribute("stroke-width",jt.borderStyle.width||1),fn.setAttribute("stroke","transparent"),fn.setAttribute("fill","transparent"),on.append(fn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Dn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dn=new WeakMap;class Tt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Un,null)}render(){this.container.classList.add("squareAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=jt.borderStyle.width,yn=Pt(this,Un,this.svgFactory.createElement("svg:rect"));return yn.setAttribute("x",fn/2),yn.setAttribute("y",fn/2),yn.setAttribute("width",Kt-fn),yn.setAttribute("height",en-fn),yn.setAttribute("stroke-width",fn||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Un)}addHighlightArea(){this.container.classList.add("highlightArea")}}Un=new WeakMap;class Lt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Wn,null)}render(){this.container.classList.add("circleAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=jt.borderStyle.width,yn=Pt(this,Wn,this.svgFactory.createElement("svg:ellipse"));return yn.setAttribute("cx",Kt/2),yn.setAttribute("cy",en/2),yn.setAttribute("rx",Kt/2-fn/2),yn.setAttribute("ry",en/2-fn/2),yn.setAttribute("stroke-width",fn||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Wn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wn=new WeakMap;class Yt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Tn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0);let fn=[];for(const Rn of jt.vertices){const kn=Rn.x-jt.rect[0],Sn=jt.rect[3]-Rn.y;fn.push(kn+","+Sn)}fn=fn.join(" ");const yn=Pt(this,Tn,this.svgFactory.createElement(this.svgElementName));return yn.setAttribute("points",fn),yn.setAttribute("stroke-width",jt.borderStyle.width||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Tn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tn=new WeakMap;class zt extends Yt{constructor(Nt){super(Nt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,hn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0);for(const fn of jt.inkLists){let yn=[];for(const kn of fn){const Sn=kn.x-jt.rect[0],jn=jt.rect[3]-kn.y;yn.push(`${Sn},${jn}`)}yn=yn.join(" ");const Rn=this.svgFactory.createElement(this.svgElementName);et(this,hn).push(Rn),Rn.setAttribute("points",yn),Rn.setAttribute("stroke-width",jt.borderStyle.width||1),Rn.setAttribute("stroke","transparent"),Rn.setAttribute("fill","transparent"),!jt.popupRef&&this.hasPopupData&&this._createPopup(),on.append(Rn)}return this.container.append(on),this.container}getElementsToTriggerPopup(){return et(this,hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}hn=new WeakMap,e.InkAnnotationElement=Bt;class Ut extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _t extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $t extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Xt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ct extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Ct;class yt extends ot{constructor(jt){var on;super(jt,{isRenderable:!0});Dt(this,gn);Dt(this,nn,null);const{filename:Kt,content:en}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(Kt,!0),this.content=en,(on=this.linkService.eventBus)==null||on.dispatch("fileattachmentannotation",{source:this,filename:Kt,content:en})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:jt,data:Kt}=this;let en;Kt.hasAppearance||Kt.fillAlpha===0?en=document.createElement("div"):(en=document.createElement("img"),en.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Kt.name)?"paperclip":"pushpin"}.svg`,Kt.fillAlpha&&Kt.fillAlpha<1&&(en.style=`filter: opacity(${Math.round(Kt.fillAlpha*100)}%);`)),en.addEventListener("dblclick",wt(this,gn,ox).bind(this)),Pt(this,nn,en);const{isMac:on}=a.FeatureTest.platform;return jt.addEventListener("keydown",fn=>{fn.key==="Enter"&&(on?fn.metaKey:fn.ctrlKey)&&wt(this,gn,ox).call(this)}),!Kt.popupRef&&this.hasPopupData?this._createPopup():en.classList.add("popupTriggerArea"),jt.append(en),jt}getElementsToTriggerPopup(){return et(this,nn)}addHighlightArea(){this.container.classList.add("highlightArea")}}nn=new WeakMap,gn=new WeakSet,ox=function(){var jt;(jt=this.downloadManager)==null||jt.openOrDownloadData(this.container,this.content,this.filename)};class Et{constructor({div:Nt,accessibilityManager:jt,annotationCanvasMap:Kt,l10n:en,page:on,viewport:fn}){Dt(this,pn);Dt(this,Ln,null);Dt(this,Mt,null);Dt(this,Jt,new Map);this.div=Nt,Pt(this,Ln,jt),Pt(this,Mt,Kt),this.l10n=en,this.page=on,this.viewport=fn,this.zIndex=0,this.l10n||(this.l10n=nt.NullL10n)}async render(Nt){const{annotations:jt}=Nt,Kt=this.div;(0,o.setLayerDimensions)(Kt,this.viewport);const en=new Map,on={data:null,layer:Kt,linkService:Nt.linkService,downloadManager:Nt.downloadManager,imageResourcesPath:Nt.imageResourcesPath||"",renderForms:Nt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Nt.annotationStorage||new j.AnnotationStorage,enableScripting:Nt.enableScripting===!0,hasJSActions:Nt.hasJSActions,fieldObjects:Nt.fieldObjects,parent:this,elements:null};for(const fn of jt){if(fn.noHTML)continue;const yn=fn.annotationType===a.AnnotationType.POPUP;if(yn){const Sn=en.get(fn.id);if(!Sn)continue;on.elements=Sn}else{const{width:Sn,height:jn}=it(fn.rect);if(Sn<=0||jn<=0)continue}on.data=fn;const Rn=ct.create(on);if(!Rn.isRenderable)continue;if(!yn&&fn.popupRef){const Sn=en.get(fn.popupRef);Sn?Sn.push(Rn):en.set(fn.popupRef,[Rn])}Rn.annotationEditorType>0&&et(this,Jt).set(Rn.data.id,Rn);const kn=Rn.render();fn.hidden&&(kn.style.visibility="hidden"),wt(this,pn,HA).call(this,kn,fn.id)}wt(this,pn,lx).call(this),await this.l10n.translate(Kt)}update({viewport:Nt}){const jt=this.div;this.viewport=Nt,(0,o.setLayerDimensions)(jt,{rotation:Nt.rotation}),wt(this,pn,lx).call(this),jt.hidden=!1}getEditableAnnotations(){return Array.from(et(this,Jt).values())}getEditableAnnotation(Nt){return et(this,Jt).get(Nt)}}Ln=new WeakMap,Mt=new WeakMap,Jt=new WeakMap,pn=new WeakSet,HA=function(Nt,jt){var en;const Kt=Nt.firstChild||Nt;Kt.id=`${a.AnnotationPrefix}${jt}`,this.div.append(Nt),(en=et(this,Ln))==null||en.moveElementInDOM(this.div,Nt,Kt,!1)},lx=function(){if(!et(this,Mt))return;const Nt=this.div;for(const[jt,Kt]of et(this,Mt)){const en=Nt.querySelector(`[data-annotation-id="${jt}"]`);if(!en)continue;const{firstChild:on}=en;on?on.nodeName==="CANVAS"?on.replaceWith(Kt):on.before(Kt):en.append(Kt)}et(this,Mt).clear()},e.AnnotationLayer=Et},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(j){return Math.floor(Math.max(0,Math.min(1,j))*255).toString(16).padStart(2,"0")}function a(j){return Math.max(0,Math.min(255,255*j))}class o{static CMYK_G([_e,nt,tt,st]){return["G",1-Math.min(1,.3*_e+.59*tt+.11*nt+st)]}static G_CMYK([_e]){return["CMYK",0,0,0,1-_e]}static G_RGB([_e]){return["RGB",_e,_e,_e]}static G_rgb([_e]){return _e=a(_e),[_e,_e,_e]}static G_HTML([_e]){const nt=s(_e);return`#${nt}${nt}${nt}`}static RGB_G([_e,nt,tt]){return["G",.3*_e+.59*nt+.11*tt]}static RGB_rgb(_e){return _e.map(a)}static RGB_HTML(_e){return`#${_e.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([_e,nt,tt,st]){return["RGB",1-Math.min(1,_e+st),1-Math.min(1,tt+st),1-Math.min(1,nt+st)]}static CMYK_rgb([_e,nt,tt,st]){return[a(1-Math.min(1,_e+st)),a(1-Math.min(1,tt+st)),a(1-Math.min(1,nt+st))]}static CMYK_HTML(_e){const nt=this.CMYK_RGB(_e).slice(1);return this.RGB_HTML(nt)}static RGB_CMYK([_e,nt,tt]){const st=1-_e,rt=1-nt,at=1-tt,it=Math.min(st,rt,at);return["CMYK",st,rt,at,it]}}e.ColorConverters=o},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=a;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function a(_e,nt){switch(_e){case"find_match_count":_e=`find_match_count[${nt.total===1?"one":"other"}]`;break;case"find_match_count_limit":_e=`find_match_count_limit[${nt.limit===1?"one":"other"}]`;break}return s[_e]||""}function o(_e,nt){return nt?_e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(tt,st)=>st in nt?nt[st]:"{{"+st+"}}"):_e}const j={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(_e,nt=null,tt=a(_e,nt)){return o(tt,nt)},async translate(_e){}};e.NullL10n=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var a=s(25);class o{static setupStorage(_e,nt,tt,st,rt){const at=st.getValue(nt,{value:null});switch(tt.name){case"textarea":if(at.value!==null&&(_e.textContent=at.value),rt==="print")break;_e.addEventListener("input",it=>{st.setValue(nt,{value:it.target.value})});break;case"input":if(tt.attributes.type==="radio"||tt.attributes.type==="checkbox"){if(at.value===tt.attributes.xfaOn?_e.setAttribute("checked",!0):at.value===tt.attributes.xfaOff&&_e.removeAttribute("checked"),rt==="print")break;_e.addEventListener("change",it=>{st.setValue(nt,{value:it.target.checked?it.target.getAttribute("xfaOn"):it.target.getAttribute("xfaOff")})})}else{if(at.value!==null&&_e.setAttribute("value",at.value),rt==="print")break;_e.addEventListener("input",it=>{st.setValue(nt,{value:it.target.value})})}break;case"select":if(at.value!==null){_e.setAttribute("value",at.value);for(const it of tt.children)it.attributes.value===at.value?it.attributes.selected=!0:it.attributes.hasOwnProperty("selected")&&delete it.attributes.selected}_e.addEventListener("input",it=>{const ct=it.target.options,ot=ct.selectedIndex===-1?"":ct[ct.selectedIndex].value;st.setValue(nt,{value:ot})});break}}static setAttributes({html:_e,element:nt,storage:tt=null,intent:st,linkService:rt}){const{attributes:at}=nt,it=_e instanceof HTMLAnchorElement;at.type==="radio"&&(at.name=`${at.name}-${st}`);for(const[ct,ot]of Object.entries(at))if(ot!=null)switch(ct){case"class":ot.length&&_e.setAttribute(ct,ot.join(" "));break;case"dataId":break;case"id":_e.setAttribute("data-element-id",ot);break;case"style":Object.assign(_e.style,ot);break;case"textContent":_e.textContent=ot;break;default:(!it||ct!=="href"&&ct!=="newWindow")&&_e.setAttribute(ct,ot)}it&&rt.addLinkAttributes(_e,at.href,at.newWindow),tt&&at.dataId&&this.setupStorage(_e,at.dataId,nt,tt)}static render(_e){var ut;const nt=_e.annotationStorage,tt=_e.linkService,st=_e.xfaHtml,rt=_e.intent||"display",at=document.createElement(st.name);st.attributes&&this.setAttributes({html:at,element:st,intent:rt,linkService:tt});const it=[[st,-1,at]],ct=_e.div;if(ct.append(at),_e.viewport){const dt=`matrix(${_e.viewport.transform.join(",")})`;ct.style.transform=dt}rt!=="richText"&&ct.setAttribute("class","xfaLayer xfaFont");const ot=[];for(;it.length>0;){const[dt,lt,ht]=it.at(-1);if(lt+1===dt.children.length){it.pop();continue}const xt=dt.children[++it.at(-1)[1]];if(xt===null)continue;const{name:mt}=xt;if(mt==="#text"){const gt=document.createTextNode(xt.value);ot.push(gt),ht.append(gt);continue}const ft=(ut=xt==null?void 0:xt.attributes)!=null&&ut.xmlns?document.createElementNS(xt.attributes.xmlns,mt):document.createElement(mt);if(ht.append(ft),xt.attributes&&this.setAttributes({html:ft,element:xt,storage:nt,intent:rt,linkService:tt}),xt.children&&xt.children.length>0)it.push([xt,-1,ft]);else if(xt.value){const gt=document.createTextNode(xt.value);a.XfaText.shouldBuildText(mt)&&ot.push(gt),ft.append(gt)}}for(const dt of ct.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))dt.setAttribute("readOnly",!0);return{textDivs:ot}}static update(_e){const nt=`matrix(${_e.viewport.transform.join(",")})`;_e.div.style.transform=nt,_e.div.hidden=!1}}e.XfaLayer=o},(i,e,s)=>{var st,rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,ft,gt,pt,zA,WA,VA,GA,cx,XA,ux,YA,KA,qA,QA,JA,jr,hx,ny,sy,yu,dx,ry,kt,ZA,fx,e1,t1,px,iy,xu;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var a=s(1),o=s(4),j=s(29),_e=s(6),nt=s(5);const dn=class dn extends o.AnnotationEditor{constructor(It){super({...It,name:"inkEditor"});Dt(this,pt);Dt(this,st,0);Dt(this,rt,0);Dt(this,at,this.canvasPointermove.bind(this));Dt(this,it,this.canvasPointerleave.bind(this));Dt(this,ct,this.canvasPointerup.bind(this));Dt(this,ot,this.canvasPointerdown.bind(this));Dt(this,ut,new Path2D);Dt(this,dt,!1);Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt,null);Dt(this,mt,0);Dt(this,ft,0);Dt(this,gt,null);this.color=It.color||null,this.thickness=It.thickness||null,this.opacity=It.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(It){o.AnnotationEditor.initialize(It,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(It,Ht){switch(It){case a.AnnotationEditorParamsType.INK_THICKNESS:dn._defaultThickness=Ht;break;case a.AnnotationEditorParamsType.INK_COLOR:dn._defaultColor=Ht;break;case a.AnnotationEditorParamsType.INK_OPACITY:dn._defaultOpacity=Ht/100;break}}updateParams(It,Ht){switch(It){case a.AnnotationEditorParamsType.INK_THICKNESS:wt(this,pt,zA).call(this,Ht);break;case a.AnnotationEditorParamsType.INK_COLOR:wt(this,pt,WA).call(this,Ht);break;case a.AnnotationEditorParamsType.INK_OPACITY:wt(this,pt,VA).call(this,Ht);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,dn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,dn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||dn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||dn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(wt(this,pt,ny).call(this),wt(this,pt,sy).call(this)),this.isAttachedToDOM||(this.parent.add(this),wt(this,pt,yu).call(this)),wt(this,pt,xu).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,et(this,xt).disconnect(),Pt(this,xt,null),super.remove())}setParent(It){!this.parent&&It?this._uiManager.removeShouldRescale(this):this.parent&&It===null&&this._uiManager.addShouldRescale(this),super.setParent(It)}onScaleChanging(){const[It,Ht]=this.parentDimensions,Qt=this.width*It,tn=this.height*Ht;this.setDimensions(Qt,tn)}enableEditMode(){et(this,dt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",et(this,ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",et(this,ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){et(this,dt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Pt(this,dt,!0),this.div.classList.add("disabled"),wt(this,pt,xu).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(It){this._focusEventsAllowed&&(super.focusin(It),this.enableEditMode())}canvasPointerdown(It){It.button!==0||!this.isInEditMode()||et(this,dt)||(this.setInForeground(),It.preventDefault(),It.type!=="mouse"&&this.div.focus(),wt(this,pt,XA).call(this,It.offsetX,It.offsetY))}canvasPointermove(It){It.preventDefault(),wt(this,pt,ux).call(this,It.offsetX,It.offsetY)}canvasPointerup(It){It.preventDefault(),wt(this,pt,hx).call(this,It)}canvasPointerleave(It){wt(this,pt,hx).call(this,It)}get isResizable(){return!this.isEmpty()&&et(this,dt)}render(){if(this.div)return this.div;let It,Ht;this.width&&(It=this.x,Ht=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(vn=>{var Zt;return(Zt=this.div)==null?void 0:Zt.setAttribute("aria-label",vn)});const[Qt,tn,un,mn]=wt(this,pt,GA).call(this);if(this.setAt(Qt,tn,0,0),this.setDims(un,mn),wt(this,pt,ny).call(this),this.width){const[vn,Zt]=this.parentDimensions;this.setAspectRatio(this.width*vn,this.height*Zt),this.setAt(It*vn,Ht*Zt,this.width*vn,this.height*Zt),Pt(this,ht,!0),wt(this,pt,yu).call(this),this.setDims(this.width*vn,this.height*Zt),wt(this,pt,jr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return wt(this,pt,sy).call(this),this.div}setDimensions(It,Ht){const Qt=Math.round(It),tn=Math.round(Ht);if(et(this,mt)===Qt&&et(this,ft)===tn)return;Pt(this,mt,Qt),Pt(this,ft,tn),this.canvas.style.visibility="hidden";const[un,mn]=this.parentDimensions;this.width=It/un,this.height=Ht/mn,this.fixAndSetPosition(),et(this,dt)&&wt(this,pt,dx).call(this,It,Ht),wt(this,pt,yu).call(this),wt(this,pt,jr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(It,Ht,Qt){var Dn,Un,Wn;if(It instanceof j.InkAnnotationElement)return null;const tn=super.deserialize(It,Ht,Qt);tn.thickness=It.thickness,tn.color=a.Util.makeHexColor(...It.color),tn.opacity=It.opacity;const[un,mn]=tn.pageDimensions,vn=tn.width*un,Zt=tn.height*mn,An=tn.parentScale,En=It.thickness/2;Pt(tn,dt,!0),Pt(tn,mt,Math.round(vn)),Pt(tn,ft,Math.round(Zt));const{paths:Fn,rect:Mn,rotation:Bn}=It;for(let{bezier:Tn}of Fn){Tn=wt(Dn=dn,kt,e1).call(Dn,Tn,Mn,Bn);const hn=[];tn.paths.push(hn);let nn=An*(Tn[0]-En),gn=An*(Tn[1]-En);for(let Ln=2,Mt=Tn.length;Ln<Mt;Ln+=6){const Jt=An*(Tn[Ln]-En),pn=An*(Tn[Ln+1]-En),bn=An*(Tn[Ln+2]-En),_n=An*(Tn[Ln+3]-En),xn=An*(Tn[Ln+4]-En),Nt=An*(Tn[Ln+5]-En);hn.push([[nn,gn],[Jt,pn],[bn,_n],[xn,Nt]]),nn=xn,gn=Nt}const In=wt(this,kt,ZA).call(this,hn);tn.bezierPath2D.push(In)}const wn=wt(Un=tn,pt,px).call(Un);return Pt(tn,rt,Math.max(o.AnnotationEditor.MIN_SIZE,wn[2]-wn[0])),Pt(tn,st,Math.max(o.AnnotationEditor.MIN_SIZE,wn[3]-wn[1])),wt(Wn=tn,pt,dx).call(Wn,vn,Zt),tn}serialize(){if(this.isEmpty())return null;const It=this.getRect(0,0),Ht=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Ht,thickness:this.thickness,opacity:this.opacity,paths:wt(this,pt,t1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,It),pageIndex:this.pageIndex,rect:It,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,pt=new WeakSet,zA=function(It){const Ht=this.thickness;this.addCommands({cmd:()=>{this.thickness=It,wt(this,pt,xu).call(this)},undo:()=>{this.thickness=Ht,wt(this,pt,xu).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},WA=function(It){const Ht=this.color;this.addCommands({cmd:()=>{this.color=It,wt(this,pt,jr).call(this)},undo:()=>{this.color=Ht,wt(this,pt,jr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},VA=function(It){It/=100;const Ht=this.opacity;this.addCommands({cmd:()=>{this.opacity=It,wt(this,pt,jr).call(this)},undo:()=>{this.opacity=Ht,wt(this,pt,jr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},GA=function(){const{parentRotation:It,parentDimensions:[Ht,Qt]}=this;switch(It){case 90:return[0,Qt,Qt,Ht];case 180:return[Ht,Qt,Ht,Qt];case 270:return[Ht,0,Qt,Ht];default:return[0,0,Ht,Qt]}},cx=function(){const{ctx:It,color:Ht,opacity:Qt,thickness:tn,parentScale:un,scaleFactor:mn}=this;It.lineWidth=tn*un/mn,It.lineCap="round",It.lineJoin="round",It.miterLimit=10,It.strokeStyle=`${Ht}${(0,nt.opacityToHex)(Qt)}`},XA=function(It,Ht){this.canvas.addEventListener("contextmenu",_e.noContextMenu),this.canvas.addEventListener("pointerleave",et(this,it)),this.canvas.addEventListener("pointermove",et(this,at)),this.canvas.addEventListener("pointerup",et(this,ct)),this.canvas.removeEventListener("pointerdown",et(this,ot)),this.isEditing=!0,et(this,ht)||(Pt(this,ht,!0),wt(this,pt,yu).call(this),this.thickness||(this.thickness=dn._defaultThickness),this.color||(this.color=dn._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=dn._defaultOpacity)),this.currentPath.push([It,Ht]),Pt(this,lt,!1),wt(this,pt,cx).call(this),Pt(this,gt,()=>{wt(this,pt,qA).call(this),et(this,gt)&&window.requestAnimationFrame(et(this,gt))}),window.requestAnimationFrame(et(this,gt))},ux=function(It,Ht){const[Qt,tn]=this.currentPath.at(-1);if(this.currentPath.length>1&&It===Qt&&Ht===tn)return;const un=this.currentPath;let mn=et(this,ut);if(un.push([It,Ht]),Pt(this,lt,!0),un.length<=2){mn.moveTo(...un[0]),mn.lineTo(It,Ht);return}un.length===3&&(Pt(this,ut,mn=new Path2D),mn.moveTo(...un[0])),wt(this,pt,QA).call(this,mn,...un.at(-3),...un.at(-2),It,Ht)},YA=function(){if(this.currentPath.length===0)return;const It=this.currentPath.at(-1);et(this,ut).lineTo(...It)},KA=function(It,Ht){Pt(this,gt,null),It=Math.min(Math.max(It,0),this.canvas.width),Ht=Math.min(Math.max(Ht,0),this.canvas.height),wt(this,pt,ux).call(this,It,Ht),wt(this,pt,YA).call(this);let Qt;if(this.currentPath.length!==1)Qt=wt(this,pt,JA).call(this);else{const Zt=[It,Ht];Qt=[[Zt,Zt.slice(),Zt.slice(),Zt]]}const tn=et(this,ut),un=this.currentPath;this.currentPath=[],Pt(this,ut,new Path2D);const mn=()=>{this.allRawPaths.push(un),this.paths.push(Qt),this.bezierPath2D.push(tn),this.rebuild()},vn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(wt(this,pt,ny).call(this),wt(this,pt,sy).call(this)),wt(this,pt,xu).call(this))};this.addCommands({cmd:mn,undo:vn,mustExec:!0})},qA=function(){if(!et(this,lt))return;Pt(this,lt,!1);const It=Math.ceil(this.thickness*this.parentScale),Ht=this.currentPath.slice(-3),Qt=Ht.map(mn=>mn[0]),tn=Ht.map(mn=>mn[1]);Math.min(...Qt)-It,Math.max(...Qt)+It,Math.min(...tn)-It,Math.max(...tn)+It;const{ctx:un}=this;un.save(),un.clearRect(0,0,this.canvas.width,this.canvas.height);for(const mn of this.bezierPath2D)un.stroke(mn);un.stroke(et(this,ut)),un.restore()},QA=function(It,Ht,Qt,tn,un,mn,vn){const Zt=(Ht+tn)/2,An=(Qt+un)/2,En=(tn+mn)/2,Fn=(un+vn)/2;It.bezierCurveTo(Zt+2*(tn-Zt)/3,An+2*(un-An)/3,En+2*(tn-En)/3,Fn+2*(un-Fn)/3,En,Fn)},JA=function(){const It=this.currentPath;if(It.length<=2)return[[It[0],It[0],It.at(-1),It.at(-1)]];const Ht=[];let Qt,[tn,un]=It[0];for(Qt=1;Qt<It.length-2;Qt++){const[Mn,Bn]=It[Qt],[wn,Dn]=It[Qt+1],Un=(Mn+wn)/2,Wn=(Bn+Dn)/2,Tn=[tn+2*(Mn-tn)/3,un+2*(Bn-un)/3],hn=[Un+2*(Mn-Un)/3,Wn+2*(Bn-Wn)/3];Ht.push([[tn,un],Tn,hn,[Un,Wn]]),[tn,un]=[Un,Wn]}const[mn,vn]=It[Qt],[Zt,An]=It[Qt+1],En=[tn+2*(mn-tn)/3,un+2*(vn-un)/3],Fn=[Zt+2*(mn-Zt)/3,An+2*(vn-An)/3];return Ht.push([[tn,un],En,Fn,[Zt,An]]),Ht},jr=function(){if(this.isEmpty()){wt(this,pt,ry).call(this);return}wt(this,pt,cx).call(this);const{canvas:It,ctx:Ht}=this;Ht.setTransform(1,0,0,1,0,0),Ht.clearRect(0,0,It.width,It.height),wt(this,pt,ry).call(this);for(const Qt of this.bezierPath2D)Ht.stroke(Qt)},hx=function(It){this.canvas.removeEventListener("pointerleave",et(this,it)),this.canvas.removeEventListener("pointermove",et(this,at)),this.canvas.removeEventListener("pointerup",et(this,ct)),this.canvas.addEventListener("pointerdown",et(this,ot)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",_e.noContextMenu)},10),wt(this,pt,KA).call(this,It.offsetX,It.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ny=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(It=>{var Ht;return(Ht=this.canvas)==null?void 0:Ht.setAttribute("aria-label",It)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},sy=function(){Pt(this,xt,new ResizeObserver(It=>{const Ht=It[0].contentRect;Ht.width&&Ht.height&&this.setDimensions(Ht.width,Ht.height)})),et(this,xt).observe(this.div)},yu=function(){if(!et(this,ht))return;const[It,Ht]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*It),this.canvas.height=Math.ceil(this.height*Ht),wt(this,pt,ry).call(this)},dx=function(It,Ht){const Qt=wt(this,pt,iy).call(this),tn=(It-Qt)/et(this,rt),un=(Ht-Qt)/et(this,st);this.scaleFactor=Math.min(tn,un)},ry=function(){const It=wt(this,pt,iy).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+It,this.translationY*this.scaleFactor+It)},kt=new WeakSet,ZA=function(It){const Ht=new Path2D;for(let Qt=0,tn=It.length;Qt<tn;Qt++){const[un,mn,vn,Zt]=It[Qt];Qt===0&&Ht.moveTo(...un),Ht.bezierCurveTo(mn[0],mn[1],vn[0],vn[1],Zt[0],Zt[1])}return Ht},fx=function(It,Ht,Qt){const[tn,un,mn,vn]=Ht;switch(Qt){case 0:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]+=tn,It[Zt+1]=vn-It[Zt+1];break;case 90:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=It[Zt+1]+tn,It[Zt+1]=En+un}break;case 180:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]=mn-It[Zt],It[Zt+1]+=un;break;case 270:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=mn-It[Zt+1],It[Zt+1]=vn-En}break;default:throw new Error("Invalid rotation")}return It},e1=function(It,Ht,Qt){const[tn,un,mn,vn]=Ht;switch(Qt){case 0:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]-=tn,It[Zt+1]=vn-It[Zt+1];break;case 90:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=It[Zt+1]-un,It[Zt+1]=En-tn}break;case 180:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]=mn-It[Zt],It[Zt+1]-=un;break;case 270:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=vn-It[Zt+1],It[Zt+1]=mn-En}break;default:throw new Error("Invalid rotation")}return It},t1=function(It,Ht,Qt,tn){var An,En;const un=[],mn=this.thickness/2,vn=It*Ht+mn,Zt=It*Qt+mn;for(const Fn of this.paths){const Mn=[],Bn=[];for(let wn=0,Dn=Fn.length;wn<Dn;wn++){const[Un,Wn,Tn,hn]=Fn[wn],nn=It*Un[0]+vn,gn=It*Un[1]+Zt,In=It*Wn[0]+vn,Ln=It*Wn[1]+Zt,Mt=It*Tn[0]+vn,Jt=It*Tn[1]+Zt,pn=It*hn[0]+vn,bn=It*hn[1]+Zt;wn===0&&(Mn.push(nn,gn),Bn.push(nn,gn)),Mn.push(In,Ln,Mt,Jt,pn,bn),Bn.push(In,Ln),wn===Dn-1&&Bn.push(pn,bn)}un.push({bezier:wt(An=dn,kt,fx).call(An,Mn,tn,this.rotation),points:wt(En=dn,kt,fx).call(En,Bn,tn,this.rotation)})}return un},px=function(){let It=1/0,Ht=-1/0,Qt=1/0,tn=-1/0;for(const un of this.paths)for(const[mn,vn,Zt,An]of un){const En=a.Util.bezierBoundingBox(...mn,...vn,...Zt,...An);It=Math.min(It,En[0]),Qt=Math.min(Qt,En[1]),Ht=Math.max(Ht,En[2]),tn=Math.max(tn,En[3])}return[It,Qt,Ht,tn]},iy=function(){return et(this,dt)?Math.ceil(this.thickness*this.parentScale):0},xu=function(It=!1){if(this.isEmpty())return;if(!et(this,dt)){wt(this,pt,jr).call(this);return}const Ht=wt(this,pt,px).call(this),Qt=wt(this,pt,iy).call(this);Pt(this,rt,Math.max(o.AnnotationEditor.MIN_SIZE,Ht[2]-Ht[0])),Pt(this,st,Math.max(o.AnnotationEditor.MIN_SIZE,Ht[3]-Ht[1]));const tn=Math.ceil(Qt+et(this,rt)*this.scaleFactor),un=Math.ceil(Qt+et(this,st)*this.scaleFactor),[mn,vn]=this.parentDimensions;this.width=tn/mn,this.height=un/vn,this.setAspectRatio(tn,un);const Zt=this.translationX,An=this.translationY;this.translationX=-Ht[0],this.translationY=-Ht[1],wt(this,pt,yu).call(this),wt(this,pt,jr).call(this),Pt(this,mt,tn),Pt(this,ft,un),this.setDims(tn,un);const En=It?Qt/this.scaleFactor/2:0;this.translate(Zt-this.translationX-En,An-this.translationY-En)},Dt(dn,kt),Hn(dn,"_defaultColor",null),Hn(dn,"_defaultOpacity",1),Hn(dn,"_defaultThickness",1),Hn(dn,"_type","ink");let tt=dn;e.InkEditor=tt},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,ht,Op,Np,ay,gx,n1,s1,mx,oy,r1;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var a=s(1),o=s(4),j=s(6),_e=s(29);const Tt=class Tt extends o.AnnotationEditor{constructor(zt){super({...zt,name:"stampEditor"});Dt(this,ht);Dt(this,tt,null);Dt(this,st,null);Dt(this,rt,null);Dt(this,at,null);Dt(this,it,null);Dt(this,ct,null);Dt(this,ot,null);Dt(this,ut,null);Dt(this,dt,!1);Dt(this,lt,!1);Pt(this,at,zt.bitmapUrl),Pt(this,it,zt.bitmapFile)}static initialize(zt){o.AnnotationEditor.initialize(zt)}static get supportedTypes(){const zt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",zt.map(Wt=>`image/${Wt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(zt){return this.supportedTypes.includes(zt)}static paste(zt,Wt){Wt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:zt.getAsFile()})}remove(){var zt,Wt;et(this,st)&&(Pt(this,tt,null),this._uiManager.imageManager.deleteId(et(this,st)),(zt=et(this,ct))==null||zt.remove(),Pt(this,ct,null),(Wt=et(this,ot))==null||Wt.disconnect(),Pt(this,ot,null)),super.remove()}rebuild(){if(!this.parent){et(this,st)&&wt(this,ht,ay).call(this);return}super.rebuild(),this.div!==null&&(et(this,st)&&wt(this,ht,ay).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(et(this,rt)||et(this,tt)||et(this,at)||et(this,it))}get isResizable(){return!0}render(){if(this.div)return this.div;let zt,Wt;if(this.width&&(zt=this.x,Wt=this.y),super.render(),this.div.hidden=!0,et(this,tt)?wt(this,ht,gx).call(this):wt(this,ht,ay).call(this),this.width){const[Bt,Ut]=this.parentDimensions;this.setAt(zt*Bt,Wt*Ut,this.width*Bt,this.height*Ut)}return this.div}static deserialize(zt,Wt,Bt){if(zt instanceof _e.StampAnnotationElement)return null;const Ut=super.deserialize(zt,Wt,Bt),{rect:_t,bitmapUrl:$t,bitmapId:Xt,isSvg:Ct,accessibilityData:yt}=zt;Xt&&Bt.imageManager.isValidId(Xt)?Pt(Ut,st,Xt):Pt(Ut,at,$t),Pt(Ut,dt,Ct);const[Et,St]=Ut.pageDimensions;return Ut.width=(_t[2]-_t[0])/Et,Ut.height=(_t[3]-_t[1])/St,yt&&(Ut.altTextData=yt),Ut}serialize(zt=!1,Wt=null){if(this.isEmpty())return null;const Bt={annotationType:a.AnnotationEditorType.STAMP,bitmapId:et(this,st),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:et(this,dt),structTreeParentId:this._structTreeParentId};if(zt)return Bt.bitmapUrl=wt(this,ht,oy).call(this,!0),Bt.accessibilityData=this.altTextData,Bt;const{decorative:Ut,altText:_t}=this.altTextData;if(!Ut&&_t&&(Bt.accessibilityData={type:"Figure",alt:_t}),Wt===null)return Bt;Wt.stamps||(Wt.stamps=new Map);const $t=et(this,dt)?(Bt.rect[2]-Bt.rect[0])*(Bt.rect[3]-Bt.rect[1]):null;if(!Wt.stamps.has(et(this,st)))Wt.stamps.set(et(this,st),{area:$t,serialized:Bt}),Bt.bitmap=wt(this,ht,oy).call(this,!1);else if(et(this,dt)){const Xt=Wt.stamps.get(et(this,st));$t>Xt.area&&(Xt.area=$t,Xt.serialized.bitmap.close(),Xt.serialized.bitmap=wt(this,ht,oy).call(this,!1))}return Bt}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakSet,Op=function(zt,Wt=!1){if(!zt){this.remove();return}Pt(this,tt,zt.bitmap),Wt||(Pt(this,st,zt.id),Pt(this,dt,zt.isSvg)),wt(this,ht,gx).call(this)},Np=function(){Pt(this,rt,null),this._uiManager.enableWaiting(!1),et(this,ct)&&this.div.focus()},ay=function(){if(et(this,st)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(et(this,st)).then(Wt=>wt(this,ht,Op).call(this,Wt,!0)).finally(()=>wt(this,ht,Np).call(this));return}if(et(this,at)){const Wt=et(this,at);Pt(this,at,null),this._uiManager.enableWaiting(!0),Pt(this,rt,this._uiManager.imageManager.getFromUrl(Wt).then(Bt=>wt(this,ht,Op).call(this,Bt)).finally(()=>wt(this,ht,Np).call(this)));return}if(et(this,it)){const Wt=et(this,it);Pt(this,it,null),this._uiManager.enableWaiting(!0),Pt(this,rt,this._uiManager.imageManager.getFromFile(Wt).then(Bt=>wt(this,ht,Op).call(this,Bt)).finally(()=>wt(this,ht,Np).call(this)));return}const zt=document.createElement("input");zt.type="file",zt.accept=Tt.supportedTypesStr,Pt(this,rt,new Promise(Wt=>{zt.addEventListener("change",async()=>{if(!zt.files||zt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Bt=await this._uiManager.imageManager.getFromFile(zt.files[0]);wt(this,ht,Op).call(this,Bt)}Wt()}),zt.addEventListener("cancel",()=>{this.remove(),Wt()})}).finally(()=>wt(this,ht,Np).call(this))),zt.click()},gx=function(){const{div:zt}=this;let{width:Wt,height:Bt}=et(this,tt);const[Ut,_t]=this.pageDimensions,$t=.75;if(this.width)Wt=this.width*Ut,Bt=this.height*_t;else if(Wt>$t*Ut||Bt>$t*_t){const Et=Math.min($t*Ut/Wt,$t*_t/Bt);Wt*=Et,Bt*=Et}const[Xt,Ct]=this.parentDimensions;this.setDims(Wt*Xt/Ut,Bt*Ct/_t),this._uiManager.enableWaiting(!1);const yt=Pt(this,ct,document.createElement("canvas"));zt.append(yt),zt.hidden=!1,wt(this,ht,mx).call(this,Wt,Bt),wt(this,ht,r1).call(this),et(this,lt)||(this.parent.addUndoableEditor(this),Pt(this,lt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},n1=function(zt,Wt){var $t;const[Bt,Ut]=this.parentDimensions;this.width=zt/Bt,this.height=Wt/Ut,this.setDims(zt,Wt),($t=this._initialOptions)!=null&&$t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,et(this,ut)!==null&&clearTimeout(et(this,ut)),Pt(this,ut,setTimeout(()=>{Pt(this,ut,null),wt(this,ht,mx).call(this,zt,Wt)},200))},s1=function(zt,Wt){const{width:Bt,height:Ut}=et(this,tt);let _t=Bt,$t=Ut,Xt=et(this,tt);for(;_t>2*zt||$t>2*Wt;){const Ct=_t,yt=$t;_t>2*zt&&(_t=_t>=16384?Math.floor(_t/2)-1:Math.ceil(_t/2)),$t>2*Wt&&($t=$t>=16384?Math.floor($t/2)-1:Math.ceil($t/2));const Et=new OffscreenCanvas(_t,$t);Et.getContext("2d").drawImage(Xt,0,0,Ct,yt,0,0,_t,$t),Xt=Et.transferToImageBitmap()}return Xt},mx=function(zt,Wt){zt=Math.ceil(zt),Wt=Math.ceil(Wt);const Bt=et(this,ct);if(!Bt||Bt.width===zt&&Bt.height===Wt)return;Bt.width=zt,Bt.height=Wt;const Ut=et(this,dt)?et(this,tt):wt(this,ht,s1).call(this,zt,Wt),_t=Bt.getContext("2d");_t.filter=this._uiManager.hcmFilter,_t.drawImage(Ut,0,0,Ut.width,Ut.height,0,0,zt,Wt)},oy=function(zt){if(zt){if(et(this,dt)){const Ut=this._uiManager.imageManager.getSvgUrl(et(this,st));if(Ut)return Ut}const Wt=document.createElement("canvas");return{width:Wt.width,height:Wt.height}=et(this,tt),Wt.getContext("2d").drawImage(et(this,tt),0,0),Wt.toDataURL()}if(et(this,dt)){const[Wt,Bt]=this.pageDimensions,Ut=Math.round(this.width*Wt*j.PixelsPerInch.PDF_TO_CSS_UNITS),_t=Math.round(this.height*Bt*j.PixelsPerInch.PDF_TO_CSS_UNITS),$t=new OffscreenCanvas(Ut,_t);return $t.getContext("2d").drawImage(et(this,tt),0,0,et(this,tt).width,et(this,tt).height,0,0,Ut,_t),$t.transferToImageBitmap()}return structuredClone(et(this,tt))},r1=function(){Pt(this,ot,new ResizeObserver(zt=>{const Wt=zt[0].contentRect;Wt.width&&Wt.height&&wt(this,ht,n1).call(this,Wt.width,Wt.height)})),et(this,ot).observe(this.div)},Hn(Tt,"_type","stamp");let nt=Tt;e.StampEditor=nt}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return j.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _e.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return nt.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return tt.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return st.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),j=__w_pdfjs_require__(27),_e=__w_pdfjs_require__(5),nt=__w_pdfjs_require__(29),tt=__w_pdfjs_require__(14),st=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports$1=pdf$1.exports,pdf={exports:{}},path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;hasRequiredPath2dPolyfill_esm=1;function i(ot,ut,dt){for(var lt=0,ht=ut.length,xt;lt<ht;lt++)(xt||!(lt in ut))&&(xt||(xt=Array.prototype.slice.call(ut,0,lt)),xt[lt]=ut[lt]);return ot.concat(xt||Array.prototype.slice.call(ut))}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(ot){var ut=ot.match(a);return ut?ut.map(Number):[]}function j(ot){var ut=[],dt=String(ot).trim();return dt[0]!=="M"&&dt[0]!=="m"||dt.replace(s,function(lt,ht,xt){var mt=o(xt),ft=ht.toLowerCase(),gt=ht;if(ft==="m"&&mt.length>2&&(ut.push(i([gt],mt.splice(0,2))),ft="l",gt=gt==="m"?"l":"L"),mt.length<e[ft])return"";for(ut.push(i([gt],mt.splice(0,e[ft])));mt.length>=e[ft]&&mt.length&&e[ft];)ut.push(i([gt],mt.splice(0,e[ft])));return""}),ut}function _e(ot,ut){var dt=ot.x*Math.cos(ut)-ot.y*Math.sin(ut),lt=ot.y*Math.cos(ut)+ot.x*Math.sin(ut);ot.x=dt,ot.y=lt}function nt(ot,ut,dt){ot.x+=ut,ot.y+=dt}function tt(ot,ut){ot.x*=ut,ot.y*=ut}var st=function(){function ot(ut){var dt;this.commands=[],ut&&ut instanceof ot?(dt=this.commands).push.apply(dt,ut.commands):ut&&(this.commands=j(ut))}return ot.prototype.addPath=function(ut){var dt;ut&&ut instanceof ot&&(dt=this.commands).push.apply(dt,ut.commands)},ot.prototype.moveTo=function(ut,dt){this.commands.push(["M",ut,dt])},ot.prototype.lineTo=function(ut,dt){this.commands.push(["L",ut,dt])},ot.prototype.arc=function(ut,dt,lt,ht,xt,mt){this.commands.push(["AC",ut,dt,lt,ht,xt,!!mt])},ot.prototype.arcTo=function(ut,dt,lt,ht,xt){this.commands.push(["AT",ut,dt,lt,ht,xt])},ot.prototype.ellipse=function(ut,dt,lt,ht,xt,mt,ft,gt){this.commands.push(["E",ut,dt,lt,ht,xt,mt,ft,!!gt])},ot.prototype.closePath=function(){this.commands.push(["Z"])},ot.prototype.bezierCurveTo=function(ut,dt,lt,ht,xt,mt){this.commands.push(["C",ut,dt,lt,ht,xt,mt])},ot.prototype.quadraticCurveTo=function(ut,dt,lt,ht){this.commands.push(["Q",ut,dt,lt,ht])},ot.prototype.rect=function(ut,dt,lt,ht){this.commands.push(["R",ut,dt,lt,ht])},ot.prototype.roundRect=function(ut,dt,lt,ht,xt){typeof xt>"u"?this.commands.push(["RR",ut,dt,lt,ht,0]):this.commands.push(["RR",ut,dt,lt,ht,xt])},ot}();function rt(ot,ut){var dt=0,lt=0,ht,xt,mt,ft,gt,pt,vt,At,Rt,bt,Tt,Lt,Yt,zt,Wt,Bt,Ut,_t,$t,Xt,Ct,yt=null,Et=null,St=null,Ft=null,kt=null,Ot=null;ot.beginPath();for(var Gt=0;Gt<ut.length;++Gt){_t=ut[Gt][0],_t!=="S"&&_t!=="s"&&_t!=="C"&&_t!=="c"&&(yt=null,Et=null),_t!=="T"&&_t!=="t"&&_t!=="Q"&&_t!=="q"&&(St=null,Ft=null);var Vt=void 0;switch(_t){case"m":case"M":Vt=ut[Gt],_t==="m"?(dt+=Vt[1],lt+=Vt[2]):(dt=Vt[1],lt=Vt[2]),(_t==="M"||!kt)&&(kt={x:dt,y:lt}),ot.moveTo(dt,lt);break;case"l":Vt=ut[Gt],dt+=Vt[1],lt+=Vt[2],ot.lineTo(dt,lt);break;case"L":Vt=ut[Gt],dt=Vt[1],lt=Vt[2],ot.lineTo(dt,lt);break;case"H":Vt=ut[Gt],dt=Vt[1],ot.lineTo(dt,lt);break;case"h":Vt=ut[Gt],dt+=Vt[1],ot.lineTo(dt,lt);break;case"V":Vt=ut[Gt],lt=Vt[1],ot.lineTo(dt,lt);break;case"v":Vt=ut[Gt],lt+=Vt[1],ot.lineTo(dt,lt);break;case"a":case"A":if(Vt=ut[Gt],Ot===null)throw new Error("This should never happen");_t==="a"?(dt+=Vt[6],lt+=Vt[7]):(dt=Vt[6],lt=Vt[7]),zt=Vt[1],Wt=Vt[2],vt=Vt[3]*Math.PI/180,mt=!!Vt[4],ft=!!Vt[5],gt={x:dt,y:lt},pt={x:(Ot.x-gt.x)/2,y:(Ot.y-gt.y)/2},_e(pt,-vt),At=pt.x*pt.x/(zt*zt)+pt.y*pt.y/(Wt*Wt),At>1&&(At=Math.sqrt(At),zt*=At,Wt*=At),$t={x:zt*pt.y/Wt,y:-(Wt*pt.x)/zt},Rt=zt*zt*Wt*Wt,bt=zt*zt*pt.y*pt.y+Wt*Wt*pt.x*pt.x,ft!==mt?tt($t,Math.sqrt((Rt-bt)/bt)||0):tt($t,-Math.sqrt((Rt-bt)/bt)||0),xt=Math.atan2((pt.y-$t.y)/Wt,(pt.x-$t.x)/zt),ht=Math.atan2(-(pt.y+$t.y)/Wt,-(pt.x+$t.x)/zt),_e($t,vt),nt($t,(gt.x+Ot.x)/2,(gt.y+Ot.y)/2),ot.save(),ot.translate($t.x,$t.y),ot.rotate(vt),ot.scale(zt,Wt),ot.arc(0,0,1,xt,ht,!ft),ot.restore();break;case"C":Vt=ut[Gt],yt=Vt[3],Et=Vt[4],dt=Vt[5],lt=Vt[6],ot.bezierCurveTo(Vt[1],Vt[2],yt,Et,dt,lt);break;case"c":Vt=ut[Gt],ot.bezierCurveTo(Vt[1]+dt,Vt[2]+lt,Vt[3]+dt,Vt[4]+lt,Vt[5]+dt,Vt[6]+lt),yt=Vt[3]+dt,Et=Vt[4]+lt,dt+=Vt[5],lt+=Vt[6];break;case"S":Vt=ut[Gt],(yt===null||Et===null)&&(yt=dt,Et=lt),ot.bezierCurveTo(2*dt-yt,2*lt-Et,Vt[1],Vt[2],Vt[3],Vt[4]),yt=Vt[1],Et=Vt[2],dt=Vt[3],lt=Vt[4];break;case"s":Vt=ut[Gt],(yt===null||Et===null)&&(yt=dt,Et=lt),ot.bezierCurveTo(2*dt-yt,2*lt-Et,Vt[1]+dt,Vt[2]+lt,Vt[3]+dt,Vt[4]+lt),yt=Vt[1]+dt,Et=Vt[2]+lt,dt+=Vt[3],lt+=Vt[4];break;case"Q":Vt=ut[Gt],St=Vt[1],Ft=Vt[2],dt=Vt[3],lt=Vt[4],ot.quadraticCurveTo(St,Ft,dt,lt);break;case"q":Vt=ut[Gt],St=Vt[1]+dt,Ft=Vt[2]+lt,dt+=Vt[3],lt+=Vt[4],ot.quadraticCurveTo(St,Ft,dt,lt);break;case"T":Vt=ut[Gt],(St===null||Ft===null)&&(St=dt,Ft=lt),St=2*dt-St,Ft=2*lt-Ft,dt=Vt[1],lt=Vt[2],ot.quadraticCurveTo(St,Ft,dt,lt);break;case"t":Vt=ut[Gt],(St===null||Ft===null)&&(St=dt,Ft=lt),St=2*dt-St,Ft=2*lt-Ft,dt+=Vt[1],lt+=Vt[2],ot.quadraticCurveTo(St,Ft,dt,lt);break;case"z":case"Z":kt&&(dt=kt.x,lt=kt.y),kt=null,ot.closePath();break;case"AC":Vt=ut[Gt],dt=Vt[1],lt=Vt[2],Yt=Vt[3],xt=Vt[4],ht=Vt[5],Xt=Vt[6],ot.arc(dt,lt,Yt,xt,ht,Xt);break;case"AT":Vt=ut[Gt],Tt=Vt[1],Lt=Vt[2],dt=Vt[3],lt=Vt[4],Yt=Vt[5],ot.arcTo(Tt,Lt,dt,lt,Yt);break;case"E":Vt=ut[Gt],dt=Vt[1],lt=Vt[2],zt=Vt[3],Wt=Vt[4],vt=Vt[5],xt=Vt[6],ht=Vt[7],Xt=Vt[8],ot.save(),ot.translate(dt,lt),ot.rotate(vt),ot.scale(zt,Wt),ot.arc(0,0,1,xt,ht,Xt),ot.restore();break;case"R":Vt=ut[Gt],dt=Vt[1],lt=Vt[2],Bt=Vt[3],Ut=Vt[4],kt={x:dt,y:lt},ot.rect(dt,lt,Bt,Ut);break;case"RR":Vt=ut[Gt],dt=Vt[1],lt=Vt[2],Bt=Vt[3],Ut=Vt[4],Ct=Vt[5],kt={x:dt,y:lt},ot.roundRect(dt,lt,Bt,Ut,Ct);break}Ot?(Ot.x=dt,Ot.y=lt):Ot={x:dt,y:lt}}}function at(ot){if(!(!ot||!ot.CanvasRenderingContext2D||ot.Path2D)){var ut=ot.CanvasRenderingContext2D,dt=ut.prototype.fill,lt=ut.prototype.stroke,ht=ut.prototype.isPointInPath;ut.prototype.fill=function(){for(var mt=[],ft=0;ft<arguments.length;ft++)mt[ft]=arguments[ft];if(mt[0]instanceof st){var gt=mt[0],pt=mt[1]||"nonzero";rt(this,gt.commands),dt.apply(this,[pt])}else{var pt=mt[0]||"nonzero";return dt.apply(this,[pt])}},ut.prototype.stroke=function(mt){mt&&rt(this,mt.commands),lt.apply(this)},ut.prototype.isPointInPath=function(){for(var mt=[],ft=0;ft<arguments.length;ft++)mt[ft]=arguments[ft];if(mt[0]instanceof st){var gt=mt[0],pt=mt[1],vt=mt[2],At=mt[3]||"nonzero";return rt(this,gt.commands),ht.apply(this,[pt,vt,At])}else return ht.apply(this,mt)},ot.Path2D=st}}function it(ot,ut,dt,lt,ht){var xt=this;if(ht===void 0&&(ht=0),typeof ht=="number"&&(ht=[ht]),Array.isArray(ht)){if(ht.length===0||ht.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(ht.length," radii provided. Between one and four radii are necessary."));ht.forEach(function(At){if(At<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(xt.constructor.name,"': Radius value ").concat(At," is negative."))})}else return;if(ht.length===1&&ht[0]===0)return this.rect(ot,ut,dt,lt);var mt=Math.min(dt,lt)/2,ft,gt,pt,vt=ft=gt=pt=Math.min(mt,ht[0]);ht.length===2&&(ft=pt=Math.min(mt,ht[1])),ht.length===3&&(ft=pt=Math.min(mt,ht[1]),gt=Math.min(mt,ht[2])),ht.length===4&&(ft=Math.min(mt,ht[1]),gt=Math.min(mt,ht[2]),pt=Math.min(mt,ht[3])),this.moveTo(ot,ut+lt-pt),this.arcTo(ot,ut,ot+vt,ut,vt),this.arcTo(ot+dt,ut,ot+dt,ut+ft,ft),this.arcTo(ot+dt,ut+lt,ot+dt-gt,ut+lt,gt),this.arcTo(ot,ut+lt,ot,ut+lt-pt,pt),this.moveTo(ot,ut)}function ct(ot){if(!(!ot||!ot.CanvasRenderingContext2D)){var ut=ot.CanvasRenderingContext2D,dt=ot.Path2D;ut&&!ut.prototype.roundRect&&(ut.prototype.roundRect=it),dt&&!dt.prototype.roundRect&&(dt.prototype.roundRect=it)}}return at(window),ct(window),path2dPolyfill_esm}(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e,s)=>{var Tn;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=$t,e.bytesToString=an,e.createValidAbsoluteUrl=Ct,e.getModificationDate=Fn,e.getUuid=Un,e.getVerbosityLevel=Wt,e.info=Bt,e.isArrayBuffer=An,e.isArrayEqual=En,e.isNodeJS=void 0,e.normalizeUnicode=Dn,e.objectFromMap=qt,e.objectSize=dn,e.setVerbosityLevel=zt,e.shadow=yt,e.string32=cn,e.stringToBytes=ln,e.stringToPDFString=mn,e.stringToUTF8String=vn,e.unreachable=_t,e.utf8StringToString=Zt,e.warn=Ut,s(2),s(84),s(86),s(87),s(89),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123);const a=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=a;const o=[1,0,0,1,0,0];e.IDENTITY_MATRIX=o;const j=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=j;const _e=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=_e;const nt=1.35;e.LINE_FACTOR=nt;const tt=.35;e.LINE_DESCENT_FACTOR=tt;const st=tt/nt;e.BASELINE_FACTOR=st;const rt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=rt;const at={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=at;const it="pdfjs_internal_editor_";e.AnnotationEditorPrefix=it;const ct={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=ct;const ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=ot;const ut={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=ut;const dt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=dt;const lt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=lt;const ht={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=ht;const xt={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=xt;const mt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=mt;const ft={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=ft;const gt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=gt;const pt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=pt;const vt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=vt;const At={O:"PageOpen",C:"PageClose"};e.PageActionEventType=At;const Rt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=Rt;const bt={NONE:0,BINARY:1};e.CMapCompressionType=bt;const Tt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Tt;const Lt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Lt;let Yt=Rt.WARNINGS;function zt(hn){Number.isInteger(hn)&&(Yt=hn)}function Wt(){return Yt}function Bt(hn){Yt>=Rt.INFOS&&console.log(`Info: ${hn}`)}function Ut(hn){Yt>=Rt.WARNINGS&&console.log(`Warning: ${hn}`)}function _t(hn){throw new Error(hn)}function $t(hn,nn){hn||_t(nn)}function Xt(hn){switch(hn==null?void 0:hn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ct(hn){let nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,gn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!hn)return null;try{if(gn&&typeof hn=="string"){if(gn.addDefaultProtocol&&hn.startsWith("www.")){const Ln=hn.match(/\./g);(Ln==null?void 0:Ln.length)>=2&&(hn=`http://${hn}`)}if(gn.tryConvertEncoding)try{hn=vn(hn)}catch{}}const In=nn?new URL(hn,nn):new URL(hn);if(Xt(In))return In}catch{}return null}function yt(hn,nn,gn){let In=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(hn,nn,{value:gn,enumerable:!In,configurable:!0,writable:!1}),gn}const Et=function(){function nn(gn,In){this.constructor===nn&&_t("Cannot initialize BaseException."),this.message=gn,this.name=In}return nn.prototype=new Error,nn.constructor=nn,nn}();e.BaseException=Et;class St extends Et{constructor(nn,gn){super(nn,"PasswordException"),this.code=gn}}e.PasswordException=St;class Ft extends Et{constructor(nn,gn){super(nn,"UnknownErrorException"),this.details=gn}}e.UnknownErrorException=Ft;class kt extends Et{constructor(nn){super(nn,"InvalidPDFException")}}e.InvalidPDFException=kt;class Ot extends Et{constructor(nn){super(nn,"MissingPDFException")}}e.MissingPDFException=Ot;class Gt extends Et{constructor(nn,gn){super(nn,"UnexpectedResponseException"),this.status=gn}}e.UnexpectedResponseException=Gt;class Vt extends Et{constructor(nn){super(nn,"FormatError")}}e.FormatError=Vt;class rn extends Et{constructor(nn){super(nn,"AbortException")}}e.AbortException=rn;function an(hn){(typeof hn!="object"||(hn==null?void 0:hn.length)===void 0)&&_t("Invalid argument for bytesToString");const nn=hn.length,gn=8192;if(nn<gn)return String.fromCharCode.apply(null,hn);const In=[];for(let Ln=0;Ln<nn;Ln+=gn){const Mt=Math.min(Ln+gn,nn),Jt=hn.subarray(Ln,Mt);In.push(String.fromCharCode.apply(null,Jt))}return In.join("")}function ln(hn){typeof hn!="string"&&_t("Invalid argument for stringToBytes");const nn=hn.length,gn=new Uint8Array(nn);for(let In=0;In<nn;++In)gn[In]=hn.charCodeAt(In)&255;return gn}function cn(hn){return String.fromCharCode(hn>>24&255,hn>>16&255,hn>>8&255,hn&255)}function dn(hn){return Object.keys(hn).length}function qt(hn){const nn=Object.create(null);for(const[gn,In]of hn)nn[gn]=In;return nn}function sn(){const hn=new Uint8Array(4);return hn[0]=1,new Uint32Array(hn.buffer,0,1)[0]===1}function It(){try{return new Function(""),!0}catch{return!1}}class Ht{static get isLittleEndian(){return yt(this,"isLittleEndian",sn())}static get isEvalSupported(){return yt(this,"isEvalSupported",It())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?yt(this,"platform",{isWin:!1,isMac:!1}):yt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var nn,gn;return yt(this,"isCSSRoundSupported",(gn=(nn=globalThis.CSS)==null?void 0:nn.supports)==null?void 0:gn.call(nn,"width: round(1.5px, 1px)"))}}e.FeatureTest=Ht;const Qt=[...Array(256).keys()].map(hn=>hn.toString(16).padStart(2,"0"));class tn{static makeHexColor(nn,gn,In){return`#${Qt[nn]}${Qt[gn]}${Qt[In]}`}static scaleMinMax(nn,gn){let In;nn[0]?(nn[0]<0&&(In=gn[0],gn[0]=gn[1],gn[1]=In),gn[0]*=nn[0],gn[1]*=nn[0],nn[3]<0&&(In=gn[2],gn[2]=gn[3],gn[3]=In),gn[2]*=nn[3],gn[3]*=nn[3]):(In=gn[0],gn[0]=gn[2],gn[2]=In,In=gn[1],gn[1]=gn[3],gn[3]=In,nn[1]<0&&(In=gn[2],gn[2]=gn[3],gn[3]=In),gn[2]*=nn[1],gn[3]*=nn[1],nn[2]<0&&(In=gn[0],gn[0]=gn[1],gn[1]=In),gn[0]*=nn[2],gn[1]*=nn[2]),gn[0]+=nn[4],gn[1]+=nn[4],gn[2]+=nn[5],gn[3]+=nn[5]}static transform(nn,gn){return[nn[0]*gn[0]+nn[2]*gn[1],nn[1]*gn[0]+nn[3]*gn[1],nn[0]*gn[2]+nn[2]*gn[3],nn[1]*gn[2]+nn[3]*gn[3],nn[0]*gn[4]+nn[2]*gn[5]+nn[4],nn[1]*gn[4]+nn[3]*gn[5]+nn[5]]}static applyTransform(nn,gn){const In=nn[0]*gn[0]+nn[1]*gn[2]+gn[4],Ln=nn[0]*gn[1]+nn[1]*gn[3]+gn[5];return[In,Ln]}static applyInverseTransform(nn,gn){const In=gn[0]*gn[3]-gn[1]*gn[2],Ln=(nn[0]*gn[3]-nn[1]*gn[2]+gn[2]*gn[5]-gn[4]*gn[3])/In,Mt=(-nn[0]*gn[1]+nn[1]*gn[0]+gn[4]*gn[1]-gn[5]*gn[0])/In;return[Ln,Mt]}static getAxialAlignedBoundingBox(nn,gn){const In=this.applyTransform(nn,gn),Ln=this.applyTransform(nn.slice(2,4),gn),Mt=this.applyTransform([nn[0],nn[3]],gn),Jt=this.applyTransform([nn[2],nn[1]],gn);return[Math.min(In[0],Ln[0],Mt[0],Jt[0]),Math.min(In[1],Ln[1],Mt[1],Jt[1]),Math.max(In[0],Ln[0],Mt[0],Jt[0]),Math.max(In[1],Ln[1],Mt[1],Jt[1])]}static inverseTransform(nn){const gn=nn[0]*nn[3]-nn[1]*nn[2];return[nn[3]/gn,-nn[1]/gn,-nn[2]/gn,nn[0]/gn,(nn[2]*nn[5]-nn[4]*nn[3])/gn,(nn[4]*nn[1]-nn[5]*nn[0])/gn]}static singularValueDecompose2dScale(nn){const gn=[nn[0],nn[2],nn[1],nn[3]],In=nn[0]*gn[0]+nn[1]*gn[2],Ln=nn[0]*gn[1]+nn[1]*gn[3],Mt=nn[2]*gn[0]+nn[3]*gn[2],Jt=nn[2]*gn[1]+nn[3]*gn[3],pn=(In+Jt)/2,bn=Math.sqrt((In+Jt)**2-4*(In*Jt-Mt*Ln))/2,_n=pn+bn||1,xn=pn-bn||1;return[Math.sqrt(_n),Math.sqrt(xn)]}static normalizeRect(nn){const gn=nn.slice(0);return nn[0]>nn[2]&&(gn[0]=nn[2],gn[2]=nn[0]),nn[1]>nn[3]&&(gn[1]=nn[3],gn[3]=nn[1]),gn}static intersect(nn,gn){const In=Math.max(Math.min(nn[0],nn[2]),Math.min(gn[0],gn[2])),Ln=Math.min(Math.max(nn[0],nn[2]),Math.max(gn[0],gn[2]));if(In>Ln)return null;const Mt=Math.max(Math.min(nn[1],nn[3]),Math.min(gn[1],gn[3])),Jt=Math.min(Math.max(nn[1],nn[3]),Math.max(gn[1],gn[3]));return Mt>Jt?null:[In,Mt,Ln,Jt]}static bezierBoundingBox(nn,gn,In,Ln,Mt,Jt,pn,bn){const _n=[],xn=[[],[]];let Nt,jt,Kt,en,on,fn,yn,Rn;for(let Cn=0;Cn<2;++Cn){if(Cn===0?(jt=6*nn-12*In+6*Mt,Nt=-3*nn+9*In-9*Mt+3*pn,Kt=3*In-3*nn):(jt=6*gn-12*Ln+6*Jt,Nt=-3*gn+9*Ln-9*Jt+3*bn,Kt=3*Ln-3*gn),Math.abs(Nt)<1e-12){if(Math.abs(jt)<1e-12)continue;en=-Kt/jt,0<en&&en<1&&_n.push(en);continue}yn=jt*jt-4*Kt*Nt,Rn=Math.sqrt(yn),!(yn<0)&&(on=(-jt+Rn)/(2*Nt),0<on&&on<1&&_n.push(on),fn=(-jt-Rn)/(2*Nt),0<fn&&fn<1&&_n.push(fn))}let kn=_n.length,Sn;const jn=kn;for(;kn--;)en=_n[kn],Sn=1-en,xn[0][kn]=Sn*Sn*Sn*nn+3*Sn*Sn*en*In+3*Sn*en*en*Mt+en*en*en*pn,xn[1][kn]=Sn*Sn*Sn*gn+3*Sn*Sn*en*Ln+3*Sn*en*en*Jt+en*en*en*bn;return xn[0][jn]=nn,xn[1][jn]=gn,xn[0][jn+1]=pn,xn[1][jn+1]=bn,xn[0].length=xn[1].length=jn+2,[Math.min(...xn[0]),Math.min(...xn[1]),Math.max(...xn[0]),Math.max(...xn[1])]}}e.Util=tn;const un=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mn(hn){if(hn[0]>=""){let gn;if(hn[0]===""&&hn[1]===""?gn="utf-16be":hn[0]===""&&hn[1]===""?gn="utf-16le":hn[0]===""&&hn[1]===""&&hn[2]===""&&(gn="utf-8"),gn)try{const In=new TextDecoder(gn,{fatal:!0}),Ln=ln(hn);return In.decode(Ln)}catch(In){Ut(`stringToPDFString: "${In}".`)}}const nn=[];for(let gn=0,In=hn.length;gn<In;gn++){const Ln=un[hn.charCodeAt(gn)];nn.push(Ln?String.fromCharCode(Ln):hn.charAt(gn))}return nn.join("")}function vn(hn){return decodeURIComponent(escape(hn))}function Zt(hn){return unescape(encodeURIComponent(hn))}function An(hn){return typeof hn=="object"&&(hn==null?void 0:hn.byteLength)!==void 0}function En(hn,nn){if(hn.length!==nn.length)return!1;for(let gn=0,In=hn.length;gn<In;gn++)if(hn[gn]!==nn[gn])return!1;return!0}function Fn(){let hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[hn.getUTCFullYear().toString(),(hn.getUTCMonth()+1).toString().padStart(2,"0"),hn.getUTCDate().toString().padStart(2,"0"),hn.getUTCHours().toString().padStart(2,"0"),hn.getUTCMinutes().toString().padStart(2,"0"),hn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Mn{constructor(){Dt(this,Tn,!1);this.promise=new Promise((nn,gn)=>{this.resolve=In=>{Pt(this,Tn,!0),nn(In)},this.reject=In=>{Pt(this,Tn,!0),gn(In)}})}get settled(){return et(this,Tn)}}Tn=new WeakMap,e.PromiseCapability=Mn;let Bn=null,wn=null;function Dn(hn){return Bn||(Bn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wn=new Map([["","t"]])),hn.replaceAll(Bn,(nn,gn,In)=>gn?gn.normalize("NFKC"):wn.get(In))}function Un(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const hn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(hn);else for(let nn=0;nn<32;nn++)hn[nn]=Math.floor(Math.random()*255);return an(hn)}const Wn="pdfjs_internal_id_";e.AnnotationPrefix=Wn},(i,e,s)=>{var a=s(3),o=s(4),j=s(69),_e=s(70),nt="WebAssembly",tt=o[nt],st=Error("e",{cause:7}).cause!==7,rt=function(it,ct){var ot={};ot[it]=_e(it,ct,st),a({global:!0,constructor:!0,arity:1,forced:st},ot)},at=function(it,ct){if(tt&&tt[it]){var ot={};ot[it]=_e(nt+"."+it,ct,st),a({target:nt,stat:!0,constructor:!0,arity:1,forced:st},ot)}};rt("Error",function(it){return function(ot){return j(it,this,arguments)}}),rt("EvalError",function(it){return function(ot){return j(it,this,arguments)}}),rt("RangeError",function(it){return function(ot){return j(it,this,arguments)}}),rt("ReferenceError",function(it){return function(ot){return j(it,this,arguments)}}),rt("SyntaxError",function(it){return function(ot){return j(it,this,arguments)}}),rt("TypeError",function(it){return function(ot){return j(it,this,arguments)}}),rt("URIError",function(it){return function(ot){return j(it,this,arguments)}}),at("CompileError",function(it){return function(ot){return j(it,this,arguments)}}),at("LinkError",function(it){return function(ot){return j(it,this,arguments)}}),at("RuntimeError",function(it){return function(ot){return j(it,this,arguments)}})},(i,e,s)=>{var a=s(4),o=s(5).f,j=s(44),_e=s(48),nt=s(38),tt=s(56),st=s(68);i.exports=function(rt,at){var it=rt.target,ct=rt.global,ot=rt.stat,ut,dt,lt,ht,xt,mt;if(ct?dt=a:ot?dt=a[it]||nt(it,{}):dt=(a[it]||{}).prototype,dt)for(lt in at){if(xt=at[lt],rt.dontCallGetSet?(mt=o(dt,lt),ht=mt&&mt.value):ht=dt[lt],ut=st(ct?lt:it+(ot?".":"#")+lt,rt.forced),!ut&&ht!==void 0){if(typeof xt==typeof ht)continue;tt(xt,ht)}(rt.sham||ht&&ht.sham)&&j(xt,"sham",!0),_e(dt,lt,xt,rt)}}},function(i){var e=function(s){return s&&s.Math===Math&&s};i.exports=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||this||Function("return this")()},(i,e,s)=>{var a=s(6),o=s(8),j=s(10),_e=s(11),nt=s(12),tt=s(18),st=s(39),rt=s(42),at=Object.getOwnPropertyDescriptor;e.f=a?at:function(ct,ot){if(ct=nt(ct),ot=tt(ot),rt)try{return at(ct,ot)}catch{}if(st(ct,ot))return _e(!o(j.f,ct,ot),ct[ot])}},(i,e,s)=>{var a=s(7);i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},i=>{i.exports=function(e){try{return!!e()}catch{return!0}}},(i,e,s)=>{var a=s(9),o=Function.prototype.call;i.exports=a?o.bind(o):function(){return o.apply(o,arguments)}},(i,e,s)=>{var a=s(7);i.exports=!a(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(i,e)=>{var s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!s.call({1:2},1);e.f=o?function(_e){var nt=a(this,_e);return!!nt&&nt.enumerable}:s},i=>{i.exports=function(e,s){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:s}}},(i,e,s)=>{var a=s(13),o=s(16);i.exports=function(j){return a(o(j))}},(i,e,s)=>{var a=s(14),o=s(7),j=s(15),_e=Object,nt=a("".split);i.exports=o(function(){return!_e("z").propertyIsEnumerable(0)})?function(tt){return j(tt)==="String"?nt(tt,""):_e(tt)}:_e},(i,e,s)=>{var a=s(9),o=Function.prototype,j=o.call,_e=a&&o.bind.bind(j,j);i.exports=a?_e:function(nt){return function(){return j.apply(nt,arguments)}}},(i,e,s)=>{var a=s(14),o=a({}.toString),j=a("".slice);i.exports=function(_e){return j(o(_e),8,-1)}},(i,e,s)=>{var a=s(17),o=TypeError;i.exports=function(j){if(a(j))throw o("Can't call method on "+j);return j}},i=>{i.exports=function(e){return e==null}},(i,e,s)=>{var a=s(19),o=s(23);i.exports=function(j){var _e=a(j,"string");return o(_e)?_e:_e+""}},(i,e,s)=>{var a=s(8),o=s(20),j=s(23),_e=s(30),nt=s(33),tt=s(34),st=TypeError,rt=tt("toPrimitive");i.exports=function(at,it){if(!o(at)||j(at))return at;var ct=_e(at,rt),ot;if(ct){if(it===void 0&&(it="default"),ot=a(ct,at,it),!o(ot)||j(ot))return ot;throw st("Can't convert object to primitive value")}return it===void 0&&(it="number"),nt(at,it)}},(i,e,s)=>{var a=s(21),o=s(22),j=o.all;i.exports=o.IS_HTMLDDA?function(_e){return typeof _e=="object"?_e!==null:a(_e)||_e===j}:function(_e){return typeof _e=="object"?_e!==null:a(_e)}},(i,e,s)=>{var a=s(22),o=a.all;i.exports=a.IS_HTMLDDA?function(j){return typeof j=="function"||j===o}:function(j){return typeof j=="function"}},i=>{var e=typeof document=="object"&&document.all,s=typeof e>"u"&&e!==void 0;i.exports={all:e,IS_HTMLDDA:s}},(i,e,s)=>{var a=s(24),o=s(21),j=s(25),_e=s(26),nt=Object;i.exports=_e?function(tt){return typeof tt=="symbol"}:function(tt){var st=a("Symbol");return o(st)&&j(st.prototype,nt(tt))}},(i,e,s)=>{var a=s(4),o=s(21),j=function(_e){return o(_e)?_e:void 0};i.exports=function(_e,nt){return arguments.length<2?j(a[_e]):a[_e]&&a[_e][nt]}},(i,e,s)=>{var a=s(14);i.exports=a({}.isPrototypeOf)},(i,e,s)=>{var a=s(27);i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(i,e,s)=>{var a=s(28),o=s(7),j=s(4),_e=j.String;i.exports=!!Object.getOwnPropertySymbols&&!o(function(){var nt=Symbol("symbol detection");return!_e(nt)||!(Object(nt)instanceof Symbol)||!Symbol.sham&&a&&a<41})},(i,e,s)=>{var a=s(4),o=s(29),j=a.process,_e=a.Deno,nt=j&&j.versions||_e&&_e.version,tt=nt&&nt.v8,st,rt;tt&&(st=tt.split("."),rt=st[0]>0&&st[0]<4?1:+(st[0]+st[1])),!rt&&o&&(st=o.match(/Edge\/(\d+)/),(!st||st[1]>=74)&&(st=o.match(/Chrome\/(\d+)/),st&&(rt=+st[1]))),i.exports=rt},i=>{i.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},(i,e,s)=>{var a=s(31),o=s(17);i.exports=function(j,_e){var nt=j[_e];return o(nt)?void 0:a(nt)}},(i,e,s)=>{var a=s(21),o=s(32),j=TypeError;i.exports=function(_e){if(a(_e))return _e;throw j(o(_e)+" is not a function")}},i=>{var e=String;i.exports=function(s){try{return e(s)}catch{return"Object"}}},(i,e,s)=>{var a=s(8),o=s(21),j=s(20),_e=TypeError;i.exports=function(nt,tt){var st,rt;if(tt==="string"&&o(st=nt.toString)&&!j(rt=a(st,nt))||o(st=nt.valueOf)&&!j(rt=a(st,nt))||tt!=="string"&&o(st=nt.toString)&&!j(rt=a(st,nt)))return rt;throw _e("Can't convert object to primitive value")}},(i,e,s)=>{var a=s(4),o=s(35),j=s(39),_e=s(41),nt=s(27),tt=s(26),st=a.Symbol,rt=o("wks"),at=tt?st.for||st:st&&st.withoutSetter||_e;i.exports=function(it){return j(rt,it)||(rt[it]=nt&&j(st,it)?st[it]:at("Symbol."+it)),rt[it]}},(i,e,s)=>{var a=s(36),o=s(37);(i.exports=function(j,_e){return o[j]||(o[j]=_e!==void 0?_e:{})})("versions",[]).push({version:"3.32.2",mode:a?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},i=>{i.exports=!1},(i,e,s)=>{var a=s(4),o=s(38),j="__core-js_shared__",_e=a[j]||o(j,{});i.exports=_e},(i,e,s)=>{var a=s(4),o=Object.defineProperty;i.exports=function(j,_e){try{o(a,j,{value:_e,configurable:!0,writable:!0})}catch{a[j]=_e}return _e}},(i,e,s)=>{var a=s(14),o=s(40),j=a({}.hasOwnProperty);i.exports=Object.hasOwn||function(nt,tt){return j(o(nt),tt)}},(i,e,s)=>{var a=s(16),o=Object;i.exports=function(j){return o(a(j))}},(i,e,s)=>{var a=s(14),o=0,j=Math.random(),_e=a(1 .toString);i.exports=function(nt){return"Symbol("+(nt===void 0?"":nt)+")_"+_e(++o+j,36)}},(i,e,s)=>{var a=s(6),o=s(7),j=s(43);i.exports=!a&&!o(function(){return Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a!==7})},(i,e,s)=>{var a=s(4),o=s(20),j=a.document,_e=o(j)&&o(j.createElement);i.exports=function(nt){return _e?j.createElement(nt):{}}},(i,e,s)=>{var a=s(6),o=s(45),j=s(11);i.exports=a?function(_e,nt,tt){return o.f(_e,nt,j(1,tt))}:function(_e,nt,tt){return _e[nt]=tt,_e}},(i,e,s)=>{var a=s(6),o=s(42),j=s(46),_e=s(47),nt=s(18),tt=TypeError,st=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,at="enumerable",it="configurable",ct="writable";e.f=a?j?function(ut,dt,lt){if(_e(ut),dt=nt(dt),_e(lt),typeof ut=="function"&&dt==="prototype"&&"value"in lt&&ct in lt&&!lt[ct]){var ht=rt(ut,dt);ht&&ht[ct]&&(ut[dt]=lt.value,lt={configurable:it in lt?lt[it]:ht[it],enumerable:at in lt?lt[at]:ht[at],writable:!1})}return st(ut,dt,lt)}:st:function(ut,dt,lt){if(_e(ut),dt=nt(dt),_e(lt),o)try{return st(ut,dt,lt)}catch{}if("get"in lt||"set"in lt)throw tt("Accessors not supported");return"value"in lt&&(ut[dt]=lt.value),ut}},(i,e,s)=>{var a=s(6),o=s(7);i.exports=a&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},(i,e,s)=>{var a=s(20),o=String,j=TypeError;i.exports=function(_e){if(a(_e))return _e;throw j(o(_e)+" is not an object")}},(i,e,s)=>{var a=s(21),o=s(45),j=s(49),_e=s(38);i.exports=function(nt,tt,st,rt){rt||(rt={});var at=rt.enumerable,it=rt.name!==void 0?rt.name:tt;if(a(st)&&j(st,it,rt),rt.global)at?nt[tt]=st:_e(tt,st);else{try{rt.unsafe?nt[tt]&&(at=!0):delete nt[tt]}catch{}at?nt[tt]=st:o.f(nt,tt,{value:st,enumerable:!1,configurable:!rt.nonConfigurable,writable:!rt.nonWritable})}return nt}},(i,e,s)=>{var a=s(14),o=s(7),j=s(21),_e=s(39),nt=s(6),tt=s(50).CONFIGURABLE,st=s(51),rt=s(52),at=rt.enforce,it=rt.get,ct=String,ot=Object.defineProperty,ut=a("".slice),dt=a("".replace),lt=a([].join),ht=nt&&!o(function(){return ot(function(){},"length",{value:8}).length!==8}),xt=String(String).split("String"),mt=i.exports=function(ft,gt,pt){ut(ct(gt),0,7)==="Symbol("&&(gt="["+dt(ct(gt),/^Symbol\(([^)]*)\)/,"$1")+"]"),pt&&pt.getter&&(gt="get "+gt),pt&&pt.setter&&(gt="set "+gt),(!_e(ft,"name")||tt&&ft.name!==gt)&&(nt?ot(ft,"name",{value:gt,configurable:!0}):ft.name=gt),ht&&pt&&_e(pt,"arity")&&ft.length!==pt.arity&&ot(ft,"length",{value:pt.arity});try{pt&&_e(pt,"constructor")&&pt.constructor?nt&&ot(ft,"prototype",{writable:!1}):ft.prototype&&(ft.prototype=void 0)}catch{}var vt=at(ft);return _e(vt,"source")||(vt.source=lt(xt,typeof gt=="string"?gt:"")),ft};Function.prototype.toString=mt(function(){return j(this)&&it(this).source||st(this)},"toString")},(i,e,s)=>{var a=s(6),o=s(39),j=Function.prototype,_e=a&&Object.getOwnPropertyDescriptor,nt=o(j,"name"),tt=nt&&(function(){}).name==="something",st=nt&&(!a||a&&_e(j,"name").configurable);i.exports={EXISTS:nt,PROPER:tt,CONFIGURABLE:st}},(i,e,s)=>{var a=s(14),o=s(21),j=s(37),_e=a(Function.toString);o(j.inspectSource)||(j.inspectSource=function(nt){return _e(nt)}),i.exports=j.inspectSource},(i,e,s)=>{var a=s(53),o=s(4),j=s(20),_e=s(44),nt=s(39),tt=s(37),st=s(54),rt=s(55),at="Object already initialized",it=o.TypeError,ct=o.WeakMap,ot,ut,dt,lt=function(ft){return dt(ft)?ut(ft):ot(ft,{})},ht=function(ft){return function(gt){var pt;if(!j(gt)||(pt=ut(gt)).type!==ft)throw it("Incompatible receiver, "+ft+" required");return pt}};if(a||tt.state){var xt=tt.state||(tt.state=new ct);xt.get=xt.get,xt.has=xt.has,xt.set=xt.set,ot=function(ft,gt){if(xt.has(ft))throw it(at);return gt.facade=ft,xt.set(ft,gt),gt},ut=function(ft){return xt.get(ft)||{}},dt=function(ft){return xt.has(ft)}}else{var mt=st("state");rt[mt]=!0,ot=function(ft,gt){if(nt(ft,mt))throw it(at);return gt.facade=ft,_e(ft,mt,gt),gt},ut=function(ft){return nt(ft,mt)?ft[mt]:{}},dt=function(ft){return nt(ft,mt)}}i.exports={set:ot,get:ut,has:dt,enforce:lt,getterFor:ht}},(i,e,s)=>{var a=s(4),o=s(21),j=a.WeakMap;i.exports=o(j)&&/native code/.test(String(j))},(i,e,s)=>{var a=s(35),o=s(41),j=a("keys");i.exports=function(_e){return j[_e]||(j[_e]=o(_e))}},i=>{i.exports={}},(i,e,s)=>{var a=s(39),o=s(57),j=s(5),_e=s(45);i.exports=function(nt,tt,st){for(var rt=o(tt),at=_e.f,it=j.f,ct=0;ct<rt.length;ct++){var ot=rt[ct];!a(nt,ot)&&!(st&&a(st,ot))&&at(nt,ot,it(tt,ot))}}},(i,e,s)=>{var a=s(24),o=s(14),j=s(58),_e=s(67),nt=s(47),tt=o([].concat);i.exports=a("Reflect","ownKeys")||function(rt){var at=j.f(nt(rt)),it=_e.f;return it?tt(at,it(rt)):at}},(i,e,s)=>{var a=s(59),o=s(66),j=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(nt){return a(nt,j)}},(i,e,s)=>{var a=s(14),o=s(39),j=s(12),_e=s(60).indexOf,nt=s(55),tt=a([].push);i.exports=function(st,rt){var at=j(st),it=0,ct=[],ot;for(ot in at)!o(nt,ot)&&o(at,ot)&&tt(ct,ot);for(;rt.length>it;)o(at,ot=rt[it++])&&(~_e(ct,ot)||tt(ct,ot));return ct}},(i,e,s)=>{var a=s(12),o=s(61),j=s(64),_e=function(nt){return function(tt,st,rt){var at=a(tt),it=j(at),ct=o(rt,it),ot;if(nt&&st!==st){for(;it>ct;)if(ot=at[ct++],ot!==ot)return!0}else for(;it>ct;ct++)if((nt||ct in at)&&at[ct]===st)return nt||ct||0;return!nt&&-1}};i.exports={includes:_e(!0),indexOf:_e(!1)}},(i,e,s)=>{var a=s(62),o=Math.max,j=Math.min;i.exports=function(_e,nt){var tt=a(_e);return tt<0?o(tt+nt,0):j(tt,nt)}},(i,e,s)=>{var a=s(63);i.exports=function(o){var j=+o;return j!==j||j===0?0:a(j)}},i=>{var e=Math.ceil,s=Math.floor;i.exports=Math.trunc||function(o){var j=+o;return(j>0?s:e)(j)}},(i,e,s)=>{var a=s(65);i.exports=function(o){return a(o.length)}},(i,e,s)=>{var a=s(62),o=Math.min;i.exports=function(j){return j>0?o(a(j),9007199254740991):0}},i=>{i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(i,e)=>{e.f=Object.getOwnPropertySymbols},(i,e,s)=>{var a=s(7),o=s(21),j=/#|\.prototype\./,_e=function(at,it){var ct=tt[nt(at)];return ct===rt?!0:ct===st?!1:o(it)?a(it):!!it},nt=_e.normalize=function(at){return String(at).replace(j,".").toLowerCase()},tt=_e.data={},st=_e.NATIVE="N",rt=_e.POLYFILL="P";i.exports=_e},(i,e,s)=>{var a=s(9),o=Function.prototype,j=o.apply,_e=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(a?_e.bind(j):function(){return _e.apply(j,arguments)})},(i,e,s)=>{var a=s(24),o=s(39),j=s(44),_e=s(25),nt=s(71),tt=s(56),st=s(74),rt=s(75),at=s(76),it=s(80),ct=s(81),ot=s(6),ut=s(36);i.exports=function(dt,lt,ht,xt){var mt="stackTraceLimit",ft=xt?2:1,gt=dt.split("."),pt=gt[gt.length-1],vt=a.apply(null,gt);if(vt){var At=vt.prototype;if(!ut&&o(At,"cause")&&delete At.cause,!ht)return vt;var Rt=a("Error"),bt=lt(function(Tt,Lt){var Yt=at(xt?Lt:Tt,void 0),zt=xt?new vt(Tt):new vt;return Yt!==void 0&&j(zt,"message",Yt),ct(zt,bt,zt.stack,2),this&&_e(At,this)&&rt(zt,this,bt),arguments.length>ft&&it(zt,arguments[ft]),zt});if(bt.prototype=At,pt!=="Error"?nt?nt(bt,Rt):tt(bt,Rt,{name:!0}):ot&&mt in vt&&(st(bt,vt,mt),st(bt,vt,"prepareStackTrace")),tt(bt,vt),!ut)try{At.name!==pt&&j(At,"name",pt),At.constructor=bt}catch{}return bt}}},(i,e,s)=>{var a=s(72),o=s(47),j=s(73);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var _e=!1,nt={},tt;try{tt=a(Object.prototype,"__proto__","set"),tt(nt,[]),_e=nt instanceof Array}catch{}return function(rt,at){return o(rt),j(at),_e?tt(rt,at):rt.__proto__=at,rt}}():void 0)},(i,e,s)=>{var a=s(14),o=s(31);i.exports=function(j,_e,nt){try{return a(o(Object.getOwnPropertyDescriptor(j,_e)[nt]))}catch{}}},(i,e,s)=>{var a=s(21),o=String,j=TypeError;i.exports=function(_e){if(typeof _e=="object"||a(_e))return _e;throw j("Can't set "+o(_e)+" as a prototype")}},(i,e,s)=>{var a=s(45).f;i.exports=function(o,j,_e){_e in o||a(o,_e,{configurable:!0,get:function(){return j[_e]},set:function(nt){j[_e]=nt}})}},(i,e,s)=>{var a=s(21),o=s(20),j=s(71);i.exports=function(_e,nt,tt){var st,rt;return j&&a(st=nt.constructor)&&st!==tt&&o(rt=st.prototype)&&rt!==tt.prototype&&j(_e,rt),_e}},(i,e,s)=>{var a=s(77);i.exports=function(o,j){return o===void 0?arguments.length<2?"":j:a(o)}},(i,e,s)=>{var a=s(78),o=String;i.exports=function(j){if(a(j)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(j)}},(i,e,s)=>{var a=s(79),o=s(21),j=s(15),_e=s(34),nt=_e("toStringTag"),tt=Object,st=j(function(){return arguments}())==="Arguments",rt=function(at,it){try{return at[it]}catch{}};i.exports=a?j:function(at){var it,ct,ot;return at===void 0?"Undefined":at===null?"Null":typeof(ct=rt(it=tt(at),nt))=="string"?ct:st?j(it):(ot=j(it))==="Object"&&o(it.callee)?"Arguments":ot}},(i,e,s)=>{var a=s(34),o=a("toStringTag"),j={};j[o]="z",i.exports=String(j)==="[object z]"},(i,e,s)=>{var a=s(20),o=s(44);i.exports=function(j,_e){a(_e)&&"cause"in _e&&o(j,"cause",_e.cause)}},(i,e,s)=>{var a=s(44),o=s(82),j=s(83),_e=Error.captureStackTrace;i.exports=function(nt,tt,st,rt){j&&(_e?_e(nt,tt):a(nt,"stack",o(st,rt)))}},(i,e,s)=>{var a=s(14),o=Error,j=a("".replace),_e=function(st){return String(o(st).stack)}("zxcasd"),nt=/\n\s*at [^:]*:[^\n]*/,tt=nt.test(_e);i.exports=function(st,rt){if(tt&&typeof st=="string"&&!o.prepareStackTrace)for(;rt--;)st=j(st,nt,"");return st}},(i,e,s)=>{var a=s(7),o=s(11);i.exports=!a(function(){var j=Error("a");return"stack"in j?(Object.defineProperty(j,"stack",o(1,7)),j.stack!==7):!0})},(i,e,s)=>{var a=s(48),o=s(14),j=s(77),_e=s(85),nt=URLSearchParams,tt=nt.prototype,st=o(tt.append),rt=o(tt.delete),at=o(tt.forEach),it=o([].push),ct=new nt("a=1&a=2&b=3");ct.delete("a",1),ct.delete("b",void 0),ct+""!="a=2"&&a(tt,"delete",function(ot){var ut=arguments.length,dt=ut<2?void 0:arguments[1];if(ut&&dt===void 0)return rt(this,ot);var lt=[];at(this,function(At,Rt){it(lt,{key:Rt,value:At})}),_e(ut,1);for(var ht=j(ot),xt=j(dt),mt=0,ft=0,gt=!1,pt=lt.length,vt;mt<pt;)vt=lt[mt++],gt||vt.key===ht?(gt=!0,rt(this,vt.key)):ft++;for(;ft<pt;)vt=lt[ft++],vt.key===ht&&vt.value===xt||st(this,vt.key,vt.value)},{enumerable:!0,unsafe:!0})},i=>{var e=TypeError;i.exports=function(s,a){if(s<a)throw e("Not enough arguments");return s}},(i,e,s)=>{var a=s(48),o=s(14),j=s(77),_e=s(85),nt=URLSearchParams,tt=nt.prototype,st=o(tt.getAll),rt=o(tt.has),at=new nt("a=1");(at.has("a",2)||!at.has("a",void 0))&&a(tt,"has",function(ct){var ot=arguments.length,ut=ot<2?void 0:arguments[1];if(ot&&ut===void 0)return rt(this,ct);var dt=st(this,ct);_e(ot,1);for(var lt=j(ut),ht=0;ht<dt.length;)if(dt[ht++]===lt)return!0;return!1},{enumerable:!0,unsafe:!0})},(i,e,s)=>{var a=s(6),o=s(14),j=s(88),_e=URLSearchParams.prototype,nt=o(_e.forEach);a&&!("size"in _e)&&j(_e,"size",{get:function(){var st=0;return nt(this,function(){st++}),st},configurable:!0,enumerable:!0})},(i,e,s)=>{var a=s(49),o=s(45);i.exports=function(j,_e,nt){return nt.get&&a(nt.get,_e,{getter:!0}),nt.set&&a(nt.set,_e,{setter:!0}),o.f(j,_e,nt)}},(i,e,s)=>{var a=s(3),o=s(40),j=s(64),_e=s(90),nt=s(92),tt=s(7),st=tt(function(){return[].push.call({length:4294967296},1)!==4294967297}),rt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(it){return it instanceof TypeError}},at=st||!rt();a({target:"Array",proto:!0,arity:1,forced:at},{push:function(ct){var ot=o(this),ut=j(ot),dt=arguments.length;nt(ut+dt);for(var lt=0;lt<dt;lt++)ot[ut]=arguments[lt],ut++;return _e(ot,ut),ut}})},(i,e,s)=>{var a=s(6),o=s(91),j=TypeError,_e=Object.getOwnPropertyDescriptor,nt=a&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(tt){return tt instanceof TypeError}}();i.exports=nt?function(tt,st){if(o(tt)&&!_e(tt,"length").writable)throw j("Cannot set read only .length");return tt.length=st}:function(tt,st){return tt.length=st}},(i,e,s)=>{var a=s(15);i.exports=Array.isArray||function(j){return a(j)==="Array"}},i=>{var e=TypeError,s=9007199254740991;i.exports=function(a){if(a>s)throw e("Maximum allowed index exceeded");return a}},(i,e,s)=>{var a=s(94),o=s(98).findLast,j=a.aTypedArray,_e=a.exportTypedArrayMethod;_e("findLast",function(tt){return o(j(this),tt,arguments.length>1?arguments[1]:void 0)})},(i,e,s)=>{var a=s(95),o=s(6),j=s(4),_e=s(21),nt=s(20),tt=s(39),st=s(78),rt=s(32),at=s(44),it=s(48),ct=s(88),ot=s(25),ut=s(96),dt=s(71),lt=s(34),ht=s(41),xt=s(52),mt=xt.enforce,ft=xt.get,gt=j.Int8Array,pt=gt&&gt.prototype,vt=j.Uint8ClampedArray,At=vt&&vt.prototype,Rt=gt&&ut(gt),bt=pt&&ut(pt),Tt=Object.prototype,Lt=j.TypeError,Yt=lt("toStringTag"),zt=ht("TYPED_ARRAY_TAG"),Wt="TypedArrayConstructor",Bt=a&&!!dt&&st(j.opera)!=="Opera",Ut=!1,_t,$t,Xt,Ct={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},yt={BigInt64Array:8,BigUint64Array:8},Et=function(an){if(!nt(an))return!1;var ln=st(an);return ln==="DataView"||tt(Ct,ln)||tt(yt,ln)},St=function(rn){var an=ut(rn);if(nt(an)){var ln=ft(an);return ln&&tt(ln,Wt)?ln[Wt]:St(an)}},Ft=function(rn){if(!nt(rn))return!1;var an=st(rn);return tt(Ct,an)||tt(yt,an)},kt=function(rn){if(Ft(rn))return rn;throw Lt("Target is not a typed array")},Ot=function(rn){if(_e(rn)&&(!dt||ot(Rt,rn)))return rn;throw Lt(rt(rn)+" is not a typed array constructor")},Gt=function(rn,an,ln,cn){if(o){if(ln)for(var dn in Ct){var qt=j[dn];if(qt&&tt(qt.prototype,rn))try{delete qt.prototype[rn]}catch{try{qt.prototype[rn]=an}catch{}}}(!bt[rn]||ln)&&it(bt,rn,ln?an:Bt&&pt[rn]||an,cn)}},Vt=function(rn,an,ln){var cn,dn;if(o){if(dt){if(ln){for(cn in Ct)if(dn=j[cn],dn&&tt(dn,rn))try{delete dn[rn]}catch{}}if(!Rt[rn]||ln)try{return it(Rt,rn,ln?an:Bt&&Rt[rn]||an)}catch{}else return}for(cn in Ct)dn=j[cn],dn&&(!dn[rn]||ln)&&it(dn,rn,an)}};for(_t in Ct)$t=j[_t],Xt=$t&&$t.prototype,Xt?mt(Xt)[Wt]=$t:Bt=!1;for(_t in yt)$t=j[_t],Xt=$t&&$t.prototype,Xt&&(mt(Xt)[Wt]=$t);if((!Bt||!_e(Rt)||Rt===Function.prototype)&&(Rt=function(){throw Lt("Incorrect invocation")},Bt))for(_t in Ct)j[_t]&&dt(j[_t],Rt);if((!Bt||!bt||bt===Tt)&&(bt=Rt.prototype,Bt))for(_t in Ct)j[_t]&&dt(j[_t].prototype,bt);if(Bt&&ut(At)!==bt&&dt(At,bt),o&&!tt(bt,Yt)){Ut=!0,ct(bt,Yt,{configurable:!0,get:function(){return nt(this)?this[zt]:void 0}});for(_t in Ct)j[_t]&&at(j[_t],zt,_t)}i.exports={NATIVE_ARRAY_BUFFER_VIEWS:Bt,TYPED_ARRAY_TAG:Ut&&zt,aTypedArray:kt,aTypedArrayConstructor:Ot,exportTypedArrayMethod:Gt,exportTypedArrayStaticMethod:Vt,getTypedArrayConstructor:St,isView:Et,isTypedArray:Ft,TypedArray:Rt,TypedArrayPrototype:bt}},i=>{i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(i,e,s)=>{var a=s(39),o=s(21),j=s(40),_e=s(54),nt=s(97),tt=_e("IE_PROTO"),st=Object,rt=st.prototype;i.exports=nt?st.getPrototypeOf:function(at){var it=j(at);if(a(it,tt))return it[tt];var ct=it.constructor;return o(ct)&&it instanceof ct?ct.prototype:it instanceof st?rt:null}},(i,e,s)=>{var a=s(7);i.exports=!a(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(i,e,s)=>{var a=s(99),o=s(13),j=s(40),_e=s(64),nt=function(tt){var st=tt===1;return function(rt,at,it){for(var ct=j(rt),ot=o(ct),ut=a(at,it),dt=_e(ot),lt,ht;dt-- >0;)if(lt=ot[dt],ht=ut(lt,dt,ct),ht)switch(tt){case 0:return lt;case 1:return dt}return st?-1:void 0}};i.exports={findLast:nt(0),findLastIndex:nt(1)}},(i,e,s)=>{var a=s(100),o=s(31),j=s(9),_e=a(a.bind);i.exports=function(nt,tt){return o(nt),tt===void 0?nt:j?_e(nt,tt):function(){return nt.apply(tt,arguments)}}},(i,e,s)=>{var a=s(15),o=s(14);i.exports=function(j){if(a(j)==="Function")return o(j)}},(i,e,s)=>{var a=s(94),o=s(98).findLastIndex,j=a.aTypedArray,_e=a.exportTypedArrayMethod;_e("findLastIndex",function(tt){return o(j(this),tt,arguments.length>1?arguments[1]:void 0)})},(i,e,s)=>{var a=s(4),o=s(8),j=s(94),_e=s(64),nt=s(103),tt=s(40),st=s(7),rt=a.RangeError,at=a.Int8Array,it=at&&at.prototype,ct=it&&it.set,ot=j.aTypedArray,ut=j.exportTypedArrayMethod,dt=!st(function(){var ht=new Uint8ClampedArray(2);return o(ct,ht,{length:1,0:3},1),ht[1]!==3}),lt=dt&&j.NATIVE_ARRAY_BUFFER_VIEWS&&st(function(){var ht=new at(2);return ht.set(1),ht.set("2",1),ht[0]!==0||ht[1]!==2});ut("set",function(xt){ot(this);var mt=nt(arguments.length>1?arguments[1]:void 0,1),ft=tt(xt);if(dt)return o(ct,this,ft,mt);var gt=this.length,pt=_e(ft),vt=0;if(pt+mt>gt)throw rt("Wrong length");for(;vt<pt;)this[mt+vt]=ft[vt++]},!dt||lt)},(i,e,s)=>{var a=s(104),o=RangeError;i.exports=function(j,_e){var nt=a(j);if(nt%_e)throw o("Wrong offset");return nt}},(i,e,s)=>{var a=s(62),o=RangeError;i.exports=function(j){var _e=a(j);if(_e<0)throw o("The argument can't be less than 0");return _e}},(i,e,s)=>{var a=s(106),o=s(94),j=o.aTypedArray,_e=o.exportTypedArrayMethod,nt=o.getTypedArrayConstructor;_e("toReversed",function(){return a(j(this),nt(this))})},(i,e,s)=>{var a=s(64);i.exports=function(o,j){for(var _e=a(o),nt=new j(_e),tt=0;tt<_e;tt++)nt[tt]=o[_e-tt-1];return nt}},(i,e,s)=>{var a=s(94),o=s(14),j=s(31),_e=s(108),nt=a.aTypedArray,tt=a.getTypedArrayConstructor,st=a.exportTypedArrayMethod,rt=o(a.TypedArrayPrototype.sort);st("toSorted",function(it){it!==void 0&&j(it);var ct=nt(this),ot=_e(tt(ct),ct);return rt(ot,it)})},(i,e,s)=>{var a=s(64);i.exports=function(o,j){for(var _e=0,nt=a(j),tt=new o(nt);nt>_e;)tt[_e]=j[_e++];return tt}},(i,e,s)=>{var a=s(110),o=s(94),j=s(111),_e=s(62),nt=s(112),tt=o.aTypedArray,st=o.getTypedArrayConstructor,rt=o.exportTypedArrayMethod,at=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(it){return it===8}}();rt("with",function(it,ct){var ot=tt(this),ut=_e(it),dt=j(ot)?nt(ct):+ct;return a(ot,st(ot),ut,dt)},!at)},(i,e,s)=>{var a=s(64),o=s(62),j=RangeError;i.exports=function(_e,nt,tt,st){var rt=a(_e),at=o(tt),it=at<0?rt+at:at;if(it>=rt||it<0)throw j("Incorrect index");for(var ct=new nt(rt),ot=0;ot<rt;ot++)ct[ot]=ot===it?st:_e[ot];return ct}},(i,e,s)=>{var a=s(78);i.exports=function(o){var j=a(o);return j==="BigInt64Array"||j==="BigUint64Array"}},(i,e,s)=>{var a=s(19),o=TypeError;i.exports=function(j){var _e=a(j,"number");if(typeof _e=="number")throw o("Can't convert number to bigint");return BigInt(_e)}},(i,e,s)=>{var a=s(6),o=s(88),j=s(114),_e=ArrayBuffer.prototype;a&&!("detached"in _e)&&o(_e,"detached",{configurable:!0,get:function(){return j(this)}})},(i,e,s)=>{var a=s(14),o=s(115),j=a(ArrayBuffer.prototype.slice);i.exports=function(_e){if(o(_e)!==0)return!1;try{return j(_e,0,0),!1}catch{return!0}}},(i,e,s)=>{var a=s(72),o=s(15),j=TypeError;i.exports=a(ArrayBuffer.prototype,"byteLength","get")||function(_e){if(o(_e)!=="ArrayBuffer")throw j("ArrayBuffer expected");return _e.byteLength}},(i,e,s)=>{var a=s(3),o=s(117);o&&a({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},(i,e,s)=>{var a=s(4),o=s(14),j=s(72),_e=s(118),nt=s(114),tt=s(115),st=s(119),rt=a.TypeError,at=a.structuredClone,it=a.ArrayBuffer,ct=a.DataView,ot=Math.min,ut=it.prototype,dt=ct.prototype,lt=o(ut.slice),ht=j(ut,"resizable","get"),xt=j(ut,"maxByteLength","get"),mt=o(dt.getInt8),ft=o(dt.setInt8);i.exports=st&&function(gt,pt,vt){var At=tt(gt),Rt=pt===void 0?At:_e(pt),bt=!ht||!ht(gt);if(nt(gt))throw rt("ArrayBuffer is detached");var Tt=at(gt,{transfer:[gt]});if(At===Rt&&(vt||bt))return Tt;if(At>=Rt&&(!vt||bt))return lt(Tt,0,Rt);for(var Lt=vt&&!bt&&xt?{maxByteLength:xt(Tt)}:void 0,Yt=new it(Rt,Lt),zt=new ct(Tt),Wt=new ct(Yt),Bt=ot(Rt,At),Ut=0;Ut<Bt;Ut++)ft(Wt,Ut,mt(zt,Ut));return Yt}},(i,e,s)=>{var a=s(62),o=s(65),j=RangeError;i.exports=function(_e){if(_e===void 0)return 0;var nt=a(_e),tt=o(nt);if(nt!==tt)throw j("Wrong length or index");return tt}},(i,e,s)=>{var a=s(4),o=s(7),j=s(28),_e=s(120),nt=s(121),tt=s(122),st=a.structuredClone;i.exports=!!st&&!o(function(){if(nt&&j>92||tt&&j>94||_e&&j>97)return!1;var rt=new ArrayBuffer(8),at=st(rt,{transfer:[rt]});return rt.byteLength!==0||at.byteLength!==8})},(i,e,s)=>{var a=s(121),o=s(122);i.exports=!a&&!o&&typeof window=="object"&&typeof document=="object"},i=>{i.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(i,e,s)=>{var a=s(4),o=s(15);i.exports=o(a.process)==="process"},(i,e,s)=>{var a=s(3),o=s(117);o&&a({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var i,s,a,o,bu,ly,nt,tt,st,rt,at,it,ct,ot,ut,cy,lt,ht,vx,mt,ft;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0,__w_pdfjs_require__(84),__w_pdfjs_require__(86),__w_pdfjs_require__(87),__w_pdfjs_require__(2),__w_pdfjs_require__(93),__w_pdfjs_require__(101),__w_pdfjs_require__(102),__w_pdfjs_require__(105),__w_pdfjs_require__(107),__w_pdfjs_require__(109),__w_pdfjs_require__(113),__w_pdfjs_require__(116),__w_pdfjs_require__(123),__w_pdfjs_require__(89),__w_pdfjs_require__(125),__w_pdfjs_require__(136),__w_pdfjs_require__(138),__w_pdfjs_require__(141),__w_pdfjs_require__(143),__w_pdfjs_require__(145),__w_pdfjs_require__(147),__w_pdfjs_require__(149),__w_pdfjs_require__(152);var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(163),_display_utils=__w_pdfjs_require__(168),_font_loader=__w_pdfjs_require__(171),_displayNode_utils=__w_pdfjs_require__(172),_canvas=__w_pdfjs_require__(173),_worker_options=__w_pdfjs_require__(176),_message_handler=__w_pdfjs_require__(177),_metadata=__w_pdfjs_require__(178),_optional_content_config=__w_pdfjs_require__(179),_transport_stream=__w_pdfjs_require__(180),_displayFetch_stream=__w_pdfjs_require__(181),_displayNetwork=__w_pdfjs_require__(184),_displayNode_stream=__w_pdfjs_require__(185),_displaySvg=__w_pdfjs_require__(186),_xfa_text=__w_pdfjs_require__(194);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(pt){if(typeof pt=="string"||pt instanceof URL?pt={url:pt}:(0,_util.isArrayBuffer)(pt)&&(pt={data:pt}),typeof pt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!pt.url&&!pt.data&&!pt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const vt=new PDFDocumentLoadingTask,{docId:At}=vt,Rt=pt.url?getUrlProp(pt.url):null,bt=pt.data?getDataProp(pt.data):null,Tt=pt.httpHeaders||null,Lt=pt.withCredentials===!0,Yt=pt.password??null,zt=pt.range instanceof PDFDataRangeTransport?pt.range:null,Wt=Number.isInteger(pt.rangeChunkSize)&&pt.rangeChunkSize>0?pt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Bt=pt.worker instanceof PDFWorker?pt.worker:null;const Ut=pt.verbosity,_t=typeof pt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(pt.docBaseUrl)?pt.docBaseUrl:null,$t=typeof pt.cMapUrl=="string"?pt.cMapUrl:null,Xt=pt.cMapPacked!==!1,Ct=pt.CMapReaderFactory||DefaultCMapReaderFactory,yt=typeof pt.standardFontDataUrl=="string"?pt.standardFontDataUrl:null,Et=pt.StandardFontDataFactory||DefaultStandardFontDataFactory,St=pt.stopAtErrors!==!0,Ft=Number.isInteger(pt.maxImageSize)&&pt.maxImageSize>-1?pt.maxImageSize:-1,kt=pt.isEvalSupported!==!1,Ot=typeof pt.isOffscreenCanvasSupported=="boolean"?pt.isOffscreenCanvasSupported:!_util.isNodeJS,Gt=Number.isInteger(pt.canvasMaxAreaInBytes)?pt.canvasMaxAreaInBytes:-1,Vt=typeof pt.disableFontFace=="boolean"?pt.disableFontFace:_util.isNodeJS,rn=pt.fontExtraProperties===!0,an=pt.enableXfa===!0,ln=pt.ownerDocument||globalThis.document,cn=pt.disableRange===!0,dn=pt.disableStream===!0,qt=pt.disableAutoFetch===!0,sn=pt.pdfBug===!0,It=zt?zt.length:pt.length??NaN,Ht=typeof pt.useSystemFonts=="boolean"?pt.useSystemFonts:!_util.isNodeJS&&!Vt,Qt=typeof pt.useWorkerFetch=="boolean"?pt.useWorkerFetch:Ct===_display_utils.DOMCMapReaderFactory&&Et===_display_utils.DOMStandardFontDataFactory&&$t&&yt&&(0,_display_utils.isValidFetchUrl)($t,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(yt,document.baseURI),tn=pt.canvasFactory||new DefaultCanvasFactory({ownerDocument:ln}),un=pt.filterFactory||new DefaultFilterFactory({docId:At,ownerDocument:ln}),mn=null;(0,_util.setVerbosityLevel)(Ut);const vn={canvasFactory:tn,filterFactory:un};if(Qt||(vn.cMapReaderFactory=new Ct({baseUrl:$t,isCompressed:Xt}),vn.standardFontDataFactory=new Et({baseUrl:yt})),!Bt){const En={verbosity:Ut,port:_worker_options.GlobalWorkerOptions.workerPort};Bt=En.port?PDFWorker.fromPort(En):new PDFWorker(En),vt._worker=Bt}const Zt={docId:At,apiVersion:"3.11.174",data:bt,password:Yt,disableAutoFetch:qt,rangeChunkSize:Wt,length:It,docBaseUrl:_t,enableXfa:an,evaluatorOptions:{maxImageSize:Ft,disableFontFace:Vt,ignoreErrors:St,isEvalSupported:kt,isOffscreenCanvasSupported:Ot,canvasMaxAreaInBytes:Gt,fontExtraProperties:rn,useSystemFonts:Ht,cMapUrl:Qt?$t:null,standardFontDataUrl:Qt?yt:null}},An={ignoreErrors:St,isEvalSupported:kt,disableFontFace:Vt,fontExtraProperties:rn,enableXfa:an,ownerDocument:ln,disableAutoFetch:qt,pdfBug:sn,styleElement:mn};return Bt.promise.then(function(){if(vt.destroyed)throw new Error("Loading aborted");const En=_fetchDocument(Bt,Zt),Fn=new Promise(function(Mn){let Bn;zt?Bn=new _transport_stream.PDFDataTransportStream({length:It,initialData:zt.initialData,progressiveDone:zt.progressiveDone,contentDispositionFilename:zt.contentDispositionFilename,disableRange:cn,disableStream:dn},zt):bt||(Bn=(Dn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Dn):(0,_display_utils.isValidFetchUrl)(Dn.url)?new _displayFetch_stream.PDFFetchStream(Dn):new _displayNetwork.PDFNetworkStream(Dn))({url:Rt,length:It,httpHeaders:Tt,withCredentials:Lt,rangeChunkSize:Wt,disableRange:cn,disableStream:dn})),Mn(Bn)});return Promise.all([En,Fn]).then(function(Mn){let[Bn,wn]=Mn;if(vt.destroyed)throw new Error("Loading aborted");const Dn=new _message_handler.MessageHandler(At,Bn,Bt.port),Un=new WorkerTransport(Dn,vt,wn,An,vn);vt._transport=Un,Dn.send("Ready",null)})}).catch(vt._capability.reject),vt}async function _fetchDocument(pt,vt){if(pt.destroyed)throw new Error("Worker was destroyed");const At=await pt.messageHandler.sendWithPromise("GetDocRequest",vt,vt.data?[vt.data.buffer]:null);if(pt.destroyed)throw new Error("Worker was destroyed");return At}function getUrlProp(pt){if(pt instanceof URL)return pt.href;try{return new URL(pt,window.location).href}catch{if(_util.isNodeJS&&typeof pt=="string")return pt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(pt){if(_util.isNodeJS&&typeof Buffer<"u"&&pt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(pt instanceof Uint8Array&&pt.byteLength===pt.buffer.byteLength)return pt;if(typeof pt=="string")return(0,_util.stringToBytes)(pt);if(typeof pt=="object"&&!isNaN(pt==null?void 0:pt.length)||(0,_util.isArrayBuffer)(pt))return new Uint8Array(pt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ds(e,i)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var vt,At,Rt;this.destroyed=!0;try{(vt=this._worker)!=null&&vt.port&&(this._worker._pendingDestroy=!0),await((At=this._transport)==null?void 0:At.destroy())}catch(bt){throw(Rt=this._worker)!=null&&Rt.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};i=new WeakMap,Dt(e,i,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(vt,At){let Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=vt,this.initialData=At,this.progressiveDone=Rt,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(vt){this._rangeListeners.push(vt)}addProgressListener(vt){this._progressListeners.push(vt)}addProgressiveReadListener(vt){this._progressiveReadListeners.push(vt)}addProgressiveDoneListener(vt){this._progressiveDoneListeners.push(vt)}onDataRange(vt,At){for(const Rt of this._rangeListeners)Rt(vt,At)}onDataProgress(vt,At){this._readyCapability.promise.then(()=>{for(const Rt of this._progressListeners)Rt(vt,At)})}onDataProgressiveRead(vt){this._readyCapability.promise.then(()=>{for(const At of this._progressiveReadListeners)At(vt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const vt of this._progressiveDoneListeners)vt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(vt,At){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(vt,At){this._pdfInfo=vt,this._transport=At,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Rt=>{if(!Rt)return Rt;const bt=[];for(const Tt in Rt)bt.push(...Rt[Tt]);return bt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(vt){return this._transport.getPage(vt)}getPageIndex(vt){return this._transport.getPageIndex(vt)}getDestinations(){return this._transport.getDestinations()}getDestination(vt){return this._transport.getDestination(vt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(vt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(vt,At,Rt){Dt(this,o);Dt(this,s,null);Dt(this,a,!1);let bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this._pageIndex=vt,this._pageInfo=At,this._transport=Rt,this._stats=bt?new _display_utils.StatTimer:null,this._pdfBug=bt,this.commonObjs=Rt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:vt,rotation:At=this.rotate,offsetX:Rt=0,offsetY:bt=0,dontFlip:Tt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:vt,rotation:At,offsetX:Rt,offsetY:bt,dontFlip:Tt})}getAnnotations(){let{intent:vt="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const At=this._transport.getRenderingIntent(vt);return this._transport.getAnnotations(this._pageIndex,At.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var vt;return((vt=this._transport._htmlForXfa)==null?void 0:vt.children[this._pageIndex])||null}render(vt){var St,Ft;let{canvasContext:At,viewport:Rt,intent:bt="display",annotationMode:Tt=_util.AnnotationMode.ENABLE,transform:Lt=null,background:Yt=null,optionalContentConfigPromise:zt=null,annotationCanvasMap:Wt=null,pageColors:Bt=null,printAnnotationStorage:Ut=null}=vt;(St=this._stats)==null||St.time("Overall");const _t=this._transport.getRenderingIntent(bt,Tt,Ut);Pt(this,a,!1),wt(this,o,ly).call(this),zt||(zt=this._transport.getOptionalContentConfig());let $t=this._intentStates.get(_t.cacheKey);$t||($t=Object.create(null),this._intentStates.set(_t.cacheKey,$t)),$t.streamReaderCancelTimeout&&(clearTimeout($t.streamReaderCancelTimeout),$t.streamReaderCancelTimeout=null);const Xt=!!(_t.renderingIntent&_util.RenderingIntentFlag.PRINT);$t.displayReadyCapability||($t.displayReadyCapability=new _util.PromiseCapability,$t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ft=this._stats)==null||Ft.time("Page Request"),this._pumpOperatorList(_t));const Ct=kt=>{var Ot,Gt;$t.renderTasks.delete(yt),(this._maybeCleanupAfterRender||Xt)&&Pt(this,a,!0),wt(this,o,bu).call(this,!Xt),kt?(yt.capability.reject(kt),this._abortOperatorList({intentState:$t,reason:kt instanceof Error?kt:new Error(kt)})):yt.capability.resolve(),(Ot=this._stats)==null||Ot.timeEnd("Rendering"),(Gt=this._stats)==null||Gt.timeEnd("Overall")},yt=new InternalRenderTask({callback:Ct,params:{canvasContext:At,viewport:Rt,transform:Lt,background:Yt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Wt,operatorList:$t.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Xt,pdfBug:this._pdfBug,pageColors:Bt});($t.renderTasks||($t.renderTasks=new Set)).add(yt);const Et=yt.task;return Promise.all([$t.displayReadyCapability.promise,zt]).then(kt=>{var Vt;let[Ot,Gt]=kt;if(this.destroyed){Ct();return}(Vt=this._stats)==null||Vt.time("Rendering"),yt.initializeGraphics({transparency:Ot,optionalContentConfig:Gt}),yt.operatorListChanged()}).catch(Ct),Et}getOperatorList(){var zt;let{intent:vt="display",annotationMode:At=_util.AnnotationMode.ENABLE,printAnnotationStorage:Rt=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function bt(){Lt.operatorList.lastChunk&&(Lt.opListReadCapability.resolve(Lt.operatorList),Lt.renderTasks.delete(Yt))}const Tt=this._transport.getRenderingIntent(vt,At,Rt,!0);let Lt=this._intentStates.get(Tt.cacheKey);Lt||(Lt=Object.create(null),this._intentStates.set(Tt.cacheKey,Lt));let Yt;return Lt.opListReadCapability||(Yt=Object.create(null),Yt.operatorListChanged=bt,Lt.opListReadCapability=new _util.PromiseCapability,(Lt.renderTasks||(Lt.renderTasks=new Set)).add(Yt),Lt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(zt=this._stats)==null||zt.time("Page Request"),this._pumpOperatorList(Tt)),Lt.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:vt=!1,disableNormalization:At=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:vt===!0,disableNormalization:At===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(Rt=>_xfa_text.XfaText.textContent(Rt));const At=this.streamTextContent(vt);return new Promise(function(Rt,bt){function Tt(){Lt.read().then(function(zt){let{value:Wt,done:Bt}=zt;if(Bt){Rt(Yt);return}Object.assign(Yt.styles,Wt.styles),Yt.items.push(...Wt.items),Tt()},bt)}const Lt=At.getReader(),Yt={items:[],styles:Object.create(null)};Tt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const vt=[];for(const At of this._intentStates.values())if(this._abortOperatorList({intentState:At,reason:new Error("Page was destroyed."),force:!0}),!At.opListReadCapability)for(const Rt of At.renderTasks)vt.push(Rt.completed),Rt.cancel();return this.objs.clear(),Pt(this,a,!1),wt(this,o,ly).call(this),Promise.all(vt)}cleanup(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Pt(this,a,!0);const At=wt(this,o,bu).call(this,!1);return vt&&At&&this._stats&&(this._stats=new _display_utils.StatTimer),At}_startRenderPage(vt,At){var bt,Tt;const Rt=this._intentStates.get(At);Rt&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(Tt=Rt.displayReadyCapability)==null||Tt.resolve(vt))}_renderPageChunk(vt,At){for(let Rt=0,bt=vt.length;Rt<bt;Rt++)At.operatorList.fnArray.push(vt.fnArray[Rt]),At.operatorList.argsArray.push(vt.argsArray[Rt]);At.operatorList.lastChunk=vt.lastChunk,At.operatorList.separateAnnots=vt.separateAnnots;for(const Rt of At.renderTasks)Rt.operatorListChanged();vt.lastChunk&&wt(this,o,bu).call(this,!0)}_pumpOperatorList(vt){let{renderingIntent:At,cacheKey:Rt,annotationStorageSerializable:bt}=vt;const{map:Tt,transfers:Lt}=bt,zt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:At,cacheKey:Rt,annotationStorage:Tt},Lt).getReader(),Wt=this._intentStates.get(Rt);Wt.streamReader=zt;const Bt=()=>{zt.read().then(Ut=>{let{value:_t,done:$t}=Ut;if($t){Wt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_t,Wt),Bt())},Ut=>{if(Wt.streamReader=null,!this._transport.destroyed){if(Wt.operatorList){Wt.operatorList.lastChunk=!0;for(const _t of Wt.renderTasks)_t.operatorListChanged();wt(this,o,bu).call(this,!0)}if(Wt.displayReadyCapability)Wt.displayReadyCapability.reject(Ut);else if(Wt.opListReadCapability)Wt.opListReadCapability.reject(Ut);else throw Ut}})};Bt()}_abortOperatorList(vt){let{intentState:At,reason:Rt,force:bt=!1}=vt;if(At.streamReader){if(At.streamReaderCancelTimeout&&(clearTimeout(At.streamReaderCancelTimeout),At.streamReaderCancelTimeout=null),!bt){if(At.renderTasks.size>0)return;if(Rt instanceof _display_utils.RenderingCancelledException){let Tt=RENDERING_CANCELLED_TIMEOUT;Rt.extraDelay>0&&Rt.extraDelay<1e3&&(Tt+=Rt.extraDelay),At.streamReaderCancelTimeout=setTimeout(()=>{At.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:At,reason:Rt,force:!0})},Tt);return}}if(At.streamReader.cancel(new _util.AbortException(Rt.message)).catch(()=>{}),At.streamReader=null,!this._transport.destroyed){for(const[Tt,Lt]of this._intentStates)if(Lt===At){this._intentStates.delete(Tt);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,a=new WeakMap,o=new WeakSet,bu=function(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(wt(this,o,ly).call(this),!et(this,a)||this.destroyed)return!1;if(vt)return Pt(this,s,setTimeout(()=>{Pt(this,s,null),wt(this,o,bu).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:At,operatorList:Rt}of this._intentStates.values())if(At.size>0||!Rt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Pt(this,a,!1),!0},ly=function(){et(this,s)&&(clearTimeout(et(this,s)),Pt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Dt(this,nt,new Set);Dt(this,tt,Promise.resolve())}postMessage(vt,At){const Rt={data:structuredClone(vt,null)};et(this,tt).then(()=>{for(const bt of et(this,nt))bt.call(this,Rt)})}addEventListener(vt,At){et(this,nt).add(At)}removeEventListener(vt,At){et(this,nt).delete(At)}terminate(){et(this,nt).clear()}}nt=new WeakMap,tt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const pt=(st=document==null?void 0:document.currentScript)==null?void 0:st.src;pt&&(PDFWorkerUtil.fallbackWorkerSrc=pt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(pt,vt){let At;try{if(At=new URL(pt),!At.origin||At.origin==="null")return!1}catch{return!1}const Rt=new URL(vt,At);return At.origin===Rt.origin},PDFWorkerUtil.createCDNWrapper=function(pt){const vt=`importScripts("${pt}");`;return URL.createObjectURL(new Blob([vt]))}}const _PDFWorker=class _PDFWorker{constructor(){var Rt;let{name:pt=null,port:vt=null,verbosity:At=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=pt,this.destroyed=!1,this.verbosity=At,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,vt){if((Rt=et(_PDFWorker,rt))!=null&&Rt.has(vt))throw new Error("Cannot use more than one PDFWorker per port.");(et(_PDFWorker,rt)||Pt(_PDFWorker,rt,new WeakMap)).set(vt,this),this._initializeFromPort(vt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(pt){this._port=pt,this._messageHandler=new _message_handler.MessageHandler("main","worker",pt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:pt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,pt)||(pt=PDFWorkerUtil.createCDNWrapper(new URL(pt,window.location).href));const vt=new Worker(pt),At=new _message_handler.MessageHandler("main","worker",vt),Rt=()=>{vt.removeEventListener("error",bt),At.destroy(),vt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||Rt()};vt.addEventListener("error",bt),At.on("test",Lt=>{if(vt.removeEventListener("error",bt),this.destroyed){Rt();return}Lt?(this._messageHandler=At,this._port=vt,this._webWorker=vt,this._readyCapability.resolve(),At.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),At.destroy(),vt.terminate())}),At.on("ready",Lt=>{if(vt.removeEventListener("error",bt),this.destroyed){Rt();return}try{Tt()}catch{this._setupFakeWorker()}});const Tt=()=>{const Lt=new Uint8Array;At.send("test",Lt,[Lt.buffer])};Tt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(pt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const vt=new LoopbackPort;this._port=vt;const At=`fake${PDFWorkerUtil.fakeWorkerId++}`,Rt=new _message_handler.MessageHandler(At+"_worker",At,vt);pt.setup(Rt,vt);const bt=new _message_handler.MessageHandler(At,At+"_worker",vt);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(pt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${pt.message}".`))})}destroy(){var pt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(pt=et(_PDFWorker,rt))==null||pt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(pt){var At;if(!(pt!=null&&pt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const vt=(At=et(this,rt))==null?void 0:At.get(pt.port);if(vt){if(vt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return vt}return new _PDFWorker(pt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var pt;try{return((pt=globalThis.pdfjsWorker)==null?void 0:pt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};rt=new WeakMap,Dt(_PDFWorker,rt);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(vt,At,Rt,bt,Tt){Dt(this,ut);Dt(this,at,new Map);Dt(this,it,new Map);Dt(this,ct,new Map);Dt(this,ot,null);this.messageHandler=vt,this.loadingTask=At,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this._params=bt,this.canvasFactory=Tt.canvasFactory,this.filterFactory=Tt.filterFactory,this.cMapReaderFactory=Tt.cMapReaderFactory,this.standardFontDataFactory=Tt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Rt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(vt){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Tt=_util.RenderingIntentFlag.DISPLAY,Lt=_annotation_storage.SerializableEmpty;switch(vt){case"any":Tt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Tt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${vt}`)}switch(At){case _util.AnnotationMode.DISABLE:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Tt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Lt=(Tt&_util.RenderingIntentFlag.PRINT&&Rt instanceof _annotation_storage.PrintAnnotationStorage?Rt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${At}`)}return bt&&(Tt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Tt,cacheKey:`${Tt}_${Lt.hash}`,annotationStorageSerializable:Lt}}destroy(){var Rt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Rt=et(this,ot))==null||Rt.reject(new Error("Worker was destroyed during onPassword callback"));const vt=[];for(const bt of et(this,it).values())vt.push(bt._destroy());et(this,it).clear(),et(this,ct).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const At=this.messageHandler.sendWithPromise("Terminate",null);return vt.push(At),Promise.all(vt).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),et(this,at).clear(),this.filterFactory.destroy(),(bt=this._networkStream)==null||bt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:vt,loadingTask:At}=this;vt.on("GetReader",(Rt,bt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Tt=>{this._lastProgress={loaded:Tt.loaded,total:Tt.total}},bt.onPull=()=>{this._fullReader.read().then(function(Tt){let{value:Lt,done:Yt}=Tt;if(Yt){bt.close();return}(0,_util.assert)(Lt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Lt),1,[Lt])}).catch(Tt=>{bt.error(Tt)})},bt.onCancel=Tt=>{this._fullReader.cancel(Tt),bt.ready.catch(Lt=>{if(!this.destroyed)throw Lt})}}),vt.on("ReaderHeadersReady",Rt=>{const bt=new _util.PromiseCapability,Tt=this._fullReader;return Tt.headersReady.then(()=>{var Lt;(!Tt.isStreamingSupported||!Tt.isRangeSupported)&&(this._lastProgress&&((Lt=At.onProgress)==null||Lt.call(At,this._lastProgress)),Tt.onProgress=Yt=>{var zt;(zt=At.onProgress)==null||zt.call(At,{loaded:Yt.loaded,total:Yt.total})}),bt.resolve({isStreamingSupported:Tt.isStreamingSupported,isRangeSupported:Tt.isRangeSupported,contentLength:Tt.contentLength})},bt.reject),bt.promise}),vt.on("GetRangeReader",(Rt,bt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Tt=this._networkStream.getRangeReader(Rt.begin,Rt.end);if(!Tt){bt.close();return}bt.onPull=()=>{Tt.read().then(function(Lt){let{value:Yt,done:zt}=Lt;if(zt){bt.close();return}(0,_util.assert)(Yt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Yt),1,[Yt])}).catch(Lt=>{bt.error(Lt)})},bt.onCancel=Lt=>{Tt.cancel(Lt),bt.ready.catch(Yt=>{if(!this.destroyed)throw Yt})}}),vt.on("GetDoc",Rt=>{let{pdfInfo:bt}=Rt;this._numPages=bt.numPages,this._htmlForXfa=bt.htmlForXfa,delete bt.htmlForXfa,At._capability.resolve(new PDFDocumentProxy(bt,this))}),vt.on("DocException",function(Rt){let bt;switch(Rt.name){case"PasswordException":bt=new _util.PasswordException(Rt.message,Rt.code);break;case"InvalidPDFException":bt=new _util.InvalidPDFException(Rt.message);break;case"MissingPDFException":bt=new _util.MissingPDFException(Rt.message);break;case"UnexpectedResponseException":bt=new _util.UnexpectedResponseException(Rt.message,Rt.status);break;case"UnknownErrorException":bt=new _util.UnknownErrorException(Rt.message,Rt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}At._capability.reject(bt)}),vt.on("PasswordRequest",Rt=>{if(Pt(this,ot,new _util.PromiseCapability),At.onPassword){const bt=Tt=>{Tt instanceof Error?et(this,ot).reject(Tt):et(this,ot).resolve({password:Tt})};try{At.onPassword(bt,Rt.code)}catch(Tt){et(this,ot).reject(Tt)}}else et(this,ot).reject(new _util.PasswordException(Rt.message,Rt.code));return et(this,ot).promise}),vt.on("DataLoaded",Rt=>{var bt;(bt=At.onProgress)==null||bt.call(At,{loaded:Rt.length,total:Rt.length}),this.downloadInfoCapability.resolve(Rt)}),vt.on("StartRenderPage",Rt=>{if(this.destroyed)return;et(this,it).get(Rt.pageIndex)._startRenderPage(Rt.transparency,Rt.cacheKey)}),vt.on("commonobj",Rt=>{var Yt;let[bt,Tt,Lt]=Rt;if(!this.destroyed&&!this.commonObjs.has(bt))switch(Tt){case"Font":const zt=this._params;if("error"in Lt){const Ut=Lt.error;(0,_util.warn)(`Error during font loading: ${Ut}`),this.commonObjs.resolve(bt,Ut);break}const Wt=zt.pdfBug&&((Yt=globalThis.FontInspector)!=null&&Yt.enabled)?(Ut,_t)=>globalThis.FontInspector.fontAdded(Ut,_t):null,Bt=new _font_loader.FontFaceObject(Lt,{isEvalSupported:zt.isEvalSupported,disableFontFace:zt.disableFontFace,ignoreErrors:zt.ignoreErrors,inspectFont:Wt});this.fontLoader.bind(Bt).catch(Ut=>vt.sendWithPromise("FontFallback",{id:bt})).finally(()=>{!zt.fontExtraProperties&&Bt.data&&(Bt.data=null),this.commonObjs.resolve(bt,Bt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(bt,Lt);break;default:throw new Error(`Got unknown common object type ${Tt}`)}}),vt.on("obj",Rt=>{var Wt;let[bt,Tt,Lt,Yt]=Rt;if(this.destroyed)return;const zt=et(this,it).get(Tt);if(!zt.objs.has(bt))switch(Lt){case"Image":if(zt.objs.resolve(bt,Yt),Yt){let Bt;if(Yt.bitmap){const{width:Ut,height:_t}=Yt;Bt=Ut*_t*4}else Bt=((Wt=Yt.data)==null?void 0:Wt.length)||0;Bt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(zt._maybeCleanupAfterRender=!0)}break;case"Pattern":zt.objs.resolve(bt,Yt);break;default:throw new Error(`Got unknown object type ${Lt}`)}}),vt.on("DocProgress",Rt=>{var bt;this.destroyed||(bt=At.onProgress)==null||bt.call(At,{loaded:Rt.loaded,total:Rt.total})}),vt.on("FetchBuiltInCMap",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Rt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),vt.on("FetchStandardFontData",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Rt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Rt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:vt,transfers:At}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:vt,filename:((Rt=this._fullReader)==null?void 0:Rt.filename)??null},At).finally(()=>{this.annotationStorage.resetModified()})}getPage(vt){if(!Number.isInteger(vt)||vt<=0||vt>this._numPages)return Promise.reject(new Error("Invalid page request."));const At=vt-1,Rt=et(this,ct).get(At);if(Rt)return Rt;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:At}).then(Tt=>{if(this.destroyed)throw new Error("Transport destroyed");const Lt=new PDFPageProxy(At,Tt,this,this._params.pdfBug);return et(this,it).set(At,Lt),Lt});return et(this,ct).set(At,bt),bt}getPageIndex(vt){return typeof vt!="object"||vt===null||!Number.isInteger(vt.num)||vt.num<0||!Number.isInteger(vt.gen)||vt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:vt.num,gen:vt.gen})}getAnnotations(vt,At){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:vt,intent:At})}getFieldObjects(){return wt(this,ut,cy).call(this,"GetFieldObjects")}hasJSActions(){return wt(this,ut,cy).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(vt){return typeof vt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:vt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return wt(this,ut,cy).call(this,"GetDocJSActions")}getPageJSActions(vt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:vt})}getStructTree(vt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:vt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(vt=>new _optional_content_config.OptionalContentConfig(vt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const vt="GetMetadata",At=et(this,at).get(vt);if(At)return At;const Rt=this.messageHandler.sendWithPromise(vt,null).then(bt=>{var Tt,Lt;return{info:bt[0],metadata:bt[1]?new _metadata.Metadata(bt[1]):null,contentDispositionFilename:((Tt=this._fullReader)==null?void 0:Tt.filename)??null,contentLength:((Lt=this._fullReader)==null?void 0:Lt.contentLength)??null}});return et(this,at).set(vt,Rt),Rt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const At of et(this,it).values())if(!At.cleanup())throw new Error(`startCleanup: Page ${At.pageNumber} is currently rendering.`);this.commonObjs.clear(),vt||this.fontLoader.clear(),et(this,at).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:vt,enableXfa:At}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:vt,enableXfa:At})}}at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakSet,cy=function(vt){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const Rt=et(this,at).get(vt);if(Rt)return Rt;const bt=this.messageHandler.sendWithPromise(vt,At);return et(this,at).set(vt,bt),bt};class PDFObjects{constructor(){Dt(this,ht);Dt(this,lt,Object.create(null))}get(vt){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(At){const bt=wt(this,ht,vx).call(this,vt);return bt.capability.promise.then(()=>At(bt.data)),null}const Rt=et(this,lt)[vt];if(!(Rt!=null&&Rt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${vt}.`);return Rt.data}has(vt){const At=et(this,lt)[vt];return(At==null?void 0:At.capability.settled)||!1}resolve(vt){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const Rt=wt(this,ht,vx).call(this,vt);Rt.data=At,Rt.capability.resolve()}clear(){var vt;for(const At in et(this,lt)){const{data:Rt}=et(this,lt)[At];(vt=Rt==null?void 0:Rt.bitmap)==null||vt.close()}Pt(this,lt,Object.create(null))}}lt=new WeakMap,ht=new WeakSet,vx=function(vt){var At;return(At=et(this,lt))[vt]||(At[vt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(vt){Dt(this,mt,null);Pt(this,mt,vt),this.onContinue=null}get promise(){return et(this,mt).capability.promise}cancel(){let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;et(this,mt).cancel(null,vt)}get separateAnnots(){const{separateAnnots:vt}=et(this,mt).operatorList;if(!vt)return!1;const{annotationCanvasMap:At}=et(this,mt);return vt.form||vt.canvas&&(At==null?void 0:At.size)>0}}mt=new WeakMap,exports.RenderTask=RenderTask;const gt=class gt{constructor(vt){let{callback:At,params:Rt,objs:bt,commonObjs:Tt,annotationCanvasMap:Lt,operatorList:Yt,pageIndex:zt,canvasFactory:Wt,filterFactory:Bt,useRequestAnimationFrame:Ut=!1,pdfBug:_t=!1,pageColors:$t=null}=vt;this.callback=At,this.params=Rt,this.objs=bt,this.commonObjs=Tt,this.annotationCanvasMap=Lt,this.operatorListIdx=null,this.operatorList=Yt,this._pageIndex=zt,this.canvasFactory=Wt,this.filterFactory=Bt,this._pdfBug=_t,this.pageColors=$t,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ut===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Rt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(vt){var zt,Wt;let{transparency:At=!1,optionalContentConfig:Rt}=vt;if(this.cancelled)return;if(this._canvas){if(et(gt,ft).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");et(gt,ft).add(this._canvas)}this._pdfBug&&((zt=globalThis.StepperManager)!=null&&zt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:bt,viewport:Tt,transform:Lt,background:Yt}=this.params;this.gfx=new _canvas.CanvasGraphics(bt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Rt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Lt,viewport:Tt,transparency:At,background:Yt}),this.operatorListIdx=0,this.graphicsReady=!0,(Wt=this.graphicsReadyCallback)==null||Wt.call(this)}cancel(){var Rt;let vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(Rt=this.gfx)==null||Rt.endDrawing(),et(gt,ft).delete(this._canvas),this.callback(vt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,At))}operatorListChanged(){var vt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(vt=this.stepper)==null||vt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),et(gt,ft).delete(this._canvas),this.callback())))}};ft=new WeakMap,Dt(gt,ft,new WeakSet);let InternalRenderTask=gt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,s)=>{var a=s(3),o=s(126),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("difference")},{difference:o})},(i,e,s)=>{var a=s(127),o=s(128),j=s(129),_e=s(132),nt=s(133),tt=s(130),st=s(131),rt=o.has,at=o.remove;i.exports=function(ct){var ot=a(this),ut=nt(ct),dt=j(ot);return _e(ot)<=ut.size?tt(ot,function(lt){ut.includes(lt)&&at(dt,lt)}):st(ut.getIterator(),function(lt){rt(ot,lt)&&at(dt,lt)}),dt}},(i,e,s)=>{var a=s(128).has;i.exports=function(o){return a(o),o}},(i,e,s)=>{var a=s(14),o=Set.prototype;i.exports={Set,add:a(o.add),has:a(o.has),remove:a(o.delete),proto:o}},(i,e,s)=>{var a=s(128),o=s(130),j=a.Set,_e=a.add;i.exports=function(nt){var tt=new j;return o(nt,function(st){_e(tt,st)}),tt}},(i,e,s)=>{var a=s(14),o=s(131),j=s(128),_e=j.Set,nt=j.proto,tt=a(nt.forEach),st=a(nt.keys),rt=st(new _e).next;i.exports=function(at,it,ct){return ct?o({iterator:st(at),next:rt},it):tt(at,it)}},(i,e,s)=>{var a=s(8);i.exports=function(o,j,_e){for(var nt=_e?o:o.iterator,tt=o.next,st,rt;!(st=a(tt,nt)).done;)if(rt=j(st.value),rt!==void 0)return rt}},(i,e,s)=>{var a=s(72),o=s(128);i.exports=a(o.proto,"size","get")||function(j){return j.size}},(i,e,s)=>{var a=s(31),o=s(47),j=s(8),_e=s(62),nt=s(134),tt="Invalid size",st=RangeError,rt=TypeError,at=Math.max,it=function(ct,ot,ut,dt){this.set=ct,this.size=ot,this.has=ut,this.keys=dt};it.prototype={getIterator:function(){return nt(o(j(this.keys,this.set)))},includes:function(ct){return j(this.has,this.set,ct)}},i.exports=function(ct){o(ct);var ot=+ct.size;if(ot!==ot)throw rt(tt);var ut=_e(ot);if(ut<0)throw st(tt);return new it(ct,at(ut,0),a(ct.has),a(ct.keys))}},i=>{i.exports=function(e){return{iterator:e,next:e.next,done:!1}}},(i,e,s)=>{var a=s(24),o=function(j){return{size:j,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};i.exports=function(j){var _e=a("Set");try{new _e()[j](o(0));try{return new _e()[j](o(-1)),!1}catch{return!0}}catch{return!1}}},(i,e,s)=>{var a=s(3),o=s(7),j=s(137),_e=s(135),nt=!_e("intersection")||o(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});a({target:"Set",proto:!0,real:!0,forced:nt},{intersection:j})},(i,e,s)=>{var a=s(127),o=s(128),j=s(132),_e=s(133),nt=s(130),tt=s(131),st=o.Set,rt=o.add,at=o.has;i.exports=function(ct){var ot=a(this),ut=_e(ct),dt=new st;return j(ot)>ut.size?tt(ut.getIterator(),function(lt){at(ot,lt)&&rt(dt,lt)}):nt(ot,function(lt){ut.includes(lt)&&rt(dt,lt)}),dt}},(i,e,s)=>{var a=s(3),o=s(139),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("isDisjointFrom")},{isDisjointFrom:o})},(i,e,s)=>{var a=s(127),o=s(128).has,j=s(132),_e=s(133),nt=s(130),tt=s(131),st=s(140);i.exports=function(at){var it=a(this),ct=_e(at);if(j(it)<=ct.size)return nt(it,function(ut){if(ct.includes(ut))return!1},!0)!==!1;var ot=ct.getIterator();return tt(ot,function(ut){if(o(it,ut))return st(ot,"normal",!1)})!==!1}},(i,e,s)=>{var a=s(8),o=s(47),j=s(30);i.exports=function(_e,nt,tt){var st,rt;o(_e);try{if(st=j(_e,"return"),!st){if(nt==="throw")throw tt;return tt}st=a(st,_e)}catch(at){rt=!0,st=at}if(nt==="throw")throw tt;if(rt)throw st;return o(st),tt}},(i,e,s)=>{var a=s(3),o=s(142),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("isSubsetOf")},{isSubsetOf:o})},(i,e,s)=>{var a=s(127),o=s(132),j=s(130),_e=s(133);i.exports=function(tt){var st=a(this),rt=_e(tt);return o(st)>rt.size?!1:j(st,function(at){if(!rt.includes(at))return!1},!0)!==!1}},(i,e,s)=>{var a=s(3),o=s(144),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("isSupersetOf")},{isSupersetOf:o})},(i,e,s)=>{var a=s(127),o=s(128).has,j=s(132),_e=s(133),nt=s(131),tt=s(140);i.exports=function(rt){var at=a(this),it=_e(rt);if(j(at)<it.size)return!1;var ct=it.getIterator();return nt(ct,function(ot){if(!o(at,ot))return tt(ct,"normal",!1)})!==!1}},(i,e,s)=>{var a=s(3),o=s(146),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("symmetricDifference")},{symmetricDifference:o})},(i,e,s)=>{var a=s(127),o=s(128),j=s(129),_e=s(133),nt=s(131),tt=o.add,st=o.has,rt=o.remove;i.exports=function(it){var ct=a(this),ot=_e(it).getIterator(),ut=j(ct);return nt(ot,function(dt){st(ct,dt)?rt(ut,dt):tt(ut,dt)}),ut}},(i,e,s)=>{var a=s(3),o=s(148),j=s(135);a({target:"Set",proto:!0,real:!0,forced:!j("union")},{union:o})},(i,e,s)=>{var a=s(127),o=s(128).add,j=s(129),_e=s(133),nt=s(131);i.exports=function(st){var rt=a(this),at=_e(st).getIterator(),it=j(rt);return nt(at,function(ct){o(it,ct)}),it}},(i,e,s)=>{var a=s(3),o=s(4),j=s(24),_e=s(11),nt=s(45).f,tt=s(39),st=s(150),rt=s(75),at=s(76),it=s(151),ct=s(82),ot=s(6),ut=s(36),dt="DOMException",lt=j("Error"),ht=j(dt),xt=function(){st(this,mt);var Wt=arguments.length,Bt=at(Wt<1?void 0:arguments[0]),Ut=at(Wt<2?void 0:arguments[1],"Error"),_t=new ht(Bt,Ut),$t=lt(Bt);return $t.name=dt,nt(_t,"stack",_e(1,ct($t.stack,1))),rt(_t,this,xt),_t},mt=xt.prototype=ht.prototype,ft="stack"in lt(dt),gt="stack"in new ht(1,2),pt=ht&&ot&&Object.getOwnPropertyDescriptor(o,dt),vt=!!pt&&!(pt.writable&&pt.configurable),At=ft&&!vt&&!gt;a({global:!0,constructor:!0,forced:ut||At},{DOMException:At?xt:ht});var Rt=j(dt),bt=Rt.prototype;if(bt.constructor!==Rt){ut||nt(bt,"constructor",_e(1,Rt));for(var Tt in it)if(tt(it,Tt)){var Lt=it[Tt],Yt=Lt.s;tt(Rt,Yt)||nt(Rt,Yt,_e(6,Lt.c))}}},(i,e,s)=>{var a=s(25),o=TypeError;i.exports=function(j,_e){if(a(_e,j))return j;throw o("Incorrect invocation")}},i=>{i.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},(i,e,s)=>{var a=s(36),o=s(3),j=s(4),_e=s(24),nt=s(14),tt=s(7),st=s(41),rt=s(21),at=s(153),it=s(17),ct=s(20),ot=s(23),ut=s(154),dt=s(47),lt=s(78),ht=s(39),xt=s(159),mt=s(44),ft=s(64),gt=s(85),pt=s(160),vt=s(162),At=s(128),Rt=s(83),bt=s(119),Tt=j.Object,Lt=j.Array,Yt=j.Date,zt=j.Error,Wt=j.EvalError,Bt=j.RangeError,Ut=j.ReferenceError,_t=j.SyntaxError,$t=j.TypeError,Xt=j.URIError,Ct=j.PerformanceMark,yt=j.WebAssembly,Et=yt&&yt.CompileError||zt,St=yt&&yt.LinkError||zt,Ft=yt&&yt.RuntimeError||zt,kt=_e("DOMException"),Ot=vt.Map,Gt=vt.has,Vt=vt.get,rn=vt.set,an=At.Set,ln=At.add,cn=_e("Object","keys"),dn=nt([].push),qt=nt((!0).valueOf),sn=nt(1 .valueOf),It=nt("".valueOf),Ht=nt(Yt.prototype.getTime),Qt=st("structuredClone"),tn="DataCloneError",un="Transferring",mn=function(Mt){return!tt(function(){var Jt=new j.Set([7]),pn=Mt(Jt),bn=Mt(Tt(7));return pn===Jt||!pn.has(7)||typeof bn!="object"||+bn!=7})&&Mt},vn=function(Mt,Jt){return!tt(function(){var pn=new Jt,bn=Mt({a:pn,b:pn});return!(bn&&bn.a===bn.b&&bn.a instanceof Jt&&bn.a.stack===pn.stack)})},Zt=function(Mt){return!tt(function(){var Jt=Mt(new j.AggregateError([1],Qt,{cause:3}));return Jt.name!=="AggregateError"||Jt.errors[0]!==1||Jt.message!==Qt||Jt.cause!==3})},An=j.structuredClone,En=a||!vn(An,zt)||!vn(An,kt)||!Zt(An),Fn=!An&&mn(function(Mt){return new Ct(Qt,{detail:Mt}).detail}),Mn=mn(An)||Fn,Bn=function(Mt){throw new kt("Uncloneable type: "+Mt,tn)},wn=function(Mt,Jt){throw new kt((Jt||"Cloning")+" of "+Mt+" cannot be properly polyfilled in this engine",tn)},Dn=function(Mt,Jt){return Mn||wn(Jt),Mn(Mt)},Un=function(){var Mt;try{Mt=new j.DataTransfer}catch{try{Mt=new j.ClipboardEvent("").clipboardData}catch{}}return Mt&&Mt.items&&Mt.files?Mt:null},Wn=function(Mt,Jt,pn){if(Gt(Jt,Mt))return Vt(Jt,Mt);var bn=pn||lt(Mt),_n,xn,Nt,jt,Kt,en;if(bn==="SharedArrayBuffer")Mn?_n=Mn(Mt):_n=Mt;else{var on=j.DataView;!on&&typeof Mt.slice!="function"&&wn("ArrayBuffer");try{if(typeof Mt.slice=="function"&&!Mt.resizable)_n=Mt.slice(0);else for(xn=Mt.byteLength,Nt=("maxByteLength"in Mt)?{maxByteLength:Mt.maxByteLength}:void 0,_n=new ArrayBuffer(xn,Nt),jt=new on(Mt),Kt=new on(_n),en=0;en<xn;en++)Kt.setUint8(en,jt.getUint8(en))}catch{throw new kt("ArrayBuffer is detached",tn)}}return rn(Jt,Mt,_n),_n},Tn=function(Mt,Jt,pn,bn,_n){var xn=j[Jt];return ct(xn)||wn(Jt),new xn(Wn(Mt.buffer,_n),pn,bn)},hn=function(Mt,Jt,pn){this.object=Mt,this.type=Jt,this.metadata=pn},nn=function(Mt,Jt,pn){if(ot(Mt)&&Bn("Symbol"),!ct(Mt))return Mt;if(Jt){if(Gt(Jt,Mt))return Vt(Jt,Mt)}else Jt=new Ot;var bn=lt(Mt),_n,xn,Nt,jt,Kt,en,on,fn;switch(bn){case"Array":Nt=Lt(ft(Mt));break;case"Object":Nt={};break;case"Map":Nt=new Ot;break;case"Set":Nt=new an;break;case"RegExp":Nt=new RegExp(Mt.source,pt(Mt));break;case"Error":switch(xn=Mt.name,xn){case"AggregateError":Nt=_e("AggregateError")([]);break;case"EvalError":Nt=Wt();break;case"RangeError":Nt=Bt();break;case"ReferenceError":Nt=Ut();break;case"SyntaxError":Nt=_t();break;case"TypeError":Nt=$t();break;case"URIError":Nt=Xt();break;case"CompileError":Nt=Et();break;case"LinkError":Nt=St();break;case"RuntimeError":Nt=Ft();break;default:Nt=zt()}break;case"DOMException":Nt=new kt(Mt.message,Mt.name);break;case"ArrayBuffer":case"SharedArrayBuffer":Nt=pn?new hn(Mt,bn):Wn(Mt,Jt,bn);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":en=bn==="DataView"?Mt.byteLength:Mt.length,Nt=pn?new hn(Mt,bn,{offset:Mt.byteOffset,length:en}):Tn(Mt,bn,Mt.byteOffset,en,Jt);break;case"DOMQuad":try{Nt=new DOMQuad(nn(Mt.p1,Jt,pn),nn(Mt.p2,Jt,pn),nn(Mt.p3,Jt,pn),nn(Mt.p4,Jt,pn))}catch{Nt=Dn(Mt,bn)}break;case"File":if(Mn)try{Nt=Mn(Mt),lt(Nt)!==bn&&(Nt=void 0)}catch{}if(!Nt)try{Nt=new File([Mt],Mt.name,Mt)}catch{}Nt||wn(bn);break;case"FileList":if(jt=Un(),jt){for(Kt=0,en=ft(Mt);Kt<en;Kt++)jt.items.add(nn(Mt[Kt],Jt,pn));Nt=jt.files}else Nt=Dn(Mt,bn);break;case"ImageData":try{Nt=new ImageData(nn(Mt.data,Jt,pn),Mt.width,Mt.height,{colorSpace:Mt.colorSpace})}catch{Nt=Dn(Mt,bn)}break;default:if(Mn)Nt=Mn(Mt);else switch(bn){case"BigInt":Nt=Tt(Mt.valueOf());break;case"Boolean":Nt=Tt(qt(Mt));break;case"Number":Nt=Tt(sn(Mt));break;case"String":Nt=Tt(It(Mt));break;case"Date":Nt=new Yt(Ht(Mt));break;case"Blob":try{Nt=Mt.slice(0,Mt.size,Mt.type)}catch{wn(bn)}break;case"DOMPoint":case"DOMPointReadOnly":_n=j[bn];try{Nt=_n.fromPoint?_n.fromPoint(Mt):new _n(Mt.x,Mt.y,Mt.z,Mt.w)}catch{wn(bn)}break;case"DOMRect":case"DOMRectReadOnly":_n=j[bn];try{Nt=_n.fromRect?_n.fromRect(Mt):new _n(Mt.x,Mt.y,Mt.width,Mt.height)}catch{wn(bn)}break;case"DOMMatrix":case"DOMMatrixReadOnly":_n=j[bn];try{Nt=_n.fromMatrix?_n.fromMatrix(Mt):new _n(Mt)}catch{wn(bn)}break;case"AudioData":case"VideoFrame":rt(Mt.clone)||wn(bn);try{Nt=Mt.clone()}catch{Bn(bn)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":wn(bn);default:Bn(bn)}}switch(rn(Jt,Mt,Nt),bn){case"Array":case"Object":for(on=cn(Mt),Kt=0,en=ft(on);Kt<en;Kt++)fn=on[Kt],xt(Nt,fn,nn(Mt[fn],Jt,pn));break;case"Map":Mt.forEach(function(yn,Rn){rn(Nt,nn(Rn,Jt,pn),nn(yn,Jt,pn))});break;case"Set":Mt.forEach(function(yn){ln(Nt,nn(yn,Jt,pn))});break;case"Error":mt(Nt,"message",nn(Mt.message,Jt,pn)),ht(Mt,"cause")&&mt(Nt,"cause",nn(Mt.cause,Jt,pn)),xn==="AggregateError"&&(Nt.errors=nn(Mt.errors,Jt,pn));case"DOMException":Rt&&mt(Nt,"stack",nn(Mt.stack,Jt,pn))}return Nt},gn=function(Mt,Jt){if(!ct(Mt))return Mt;if(Gt(Jt,Mt))return Vt(Jt,Mt);var pn,bn,_n,xn,Nt,jt,Kt,en;if(Mt instanceof hn)switch(pn=Mt.type,bn=Mt.object,pn){case"ArrayBuffer":case"SharedArrayBuffer":en=Wn(bn,Jt,pn);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":_n=Mt.metadata,en=Tn(bn,pn,_n.offset,_n.length,Jt)}else switch(lt(Mt)){case"Array":case"Object":for(jt=cn(Mt),xn=0,Nt=ft(jt);xn<Nt;xn++)Kt=jt[xn],Mt[Kt]=gn(Mt[Kt],Jt);break;case"Map":en=new Ot,Mt.forEach(function(on,fn){rn(en,gn(fn,Jt),gn(on,Jt))});break;case"Set":en=new an,Mt.forEach(function(on){ln(en,gn(on,Jt))});break;case"Error":Mt.message=gn(Mt.message,Jt),ht(Mt,"cause")&&(Mt.cause=gn(Mt.cause,Jt)),Mt.name==="AggregateError"&&(Mt.errors=gn(Mt.errors,Jt));case"DOMException":Rt&&(Mt.stack=gn(Mt.stack,Jt))}return rn(Jt,Mt,en||Mt),en||Mt},In=function(Mt,Jt){if(!ct(Mt))throw $t("Transfer option cannot be converted to a sequence");var pn=[];ut(Mt,function(yn){dn(pn,dt(yn))});for(var bn=0,_n=ft(pn),xn=[],Nt,jt,Kt,en,on,fn;bn<_n;){if(Nt=pn[bn++],jt=lt(Nt),jt==="ArrayBuffer"){dn(xn,Nt);continue}if(Gt(Jt,Nt))throw new kt("Duplicate transferable",tn);if(bt)en=An(Nt,{transfer:[Nt]});else switch(jt){case"ImageBitmap":Kt=j.OffscreenCanvas,at(Kt)||wn(jt,un);try{on=new Kt(Nt.width,Nt.height),fn=on.getContext("bitmaprenderer"),fn.transferFromImageBitmap(Nt),en=on.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!rt(Nt.clone)||!rt(Nt.close))&&wn(jt,un);try{en=Nt.clone(),Nt.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":wn(jt,un)}if(en===void 0)throw new kt("This object cannot be transferred: "+jt,tn);rn(Jt,Nt,en)}return xn},Ln=function(Mt,Jt){for(var pn=0,bn=ft(Mt),_n,xn;pn<bn;){if(_n=Mt[pn++],Gt(Jt,_n))throw new kt("Duplicate transferable",tn);bt?xn=An(_n,{transfer:[_n]}):(rt(_n.transfer)||wn("ArrayBuffer",un),xn=_n.transfer()),rn(Jt,_n,xn)}};o({global:!0,enumerable:!0,sham:!bt,forced:En},{structuredClone:function(Jt){var pn=gt(arguments.length,1)>1&&!it(arguments[1])?dt(arguments[1]):void 0,bn=pn?pn.transfer:void 0,_n=!1,xn,Nt;bn!==void 0&&(xn=new Ot,Nt=In(bn,xn),_n=!!ft(Nt));var jt=nn(Jt,xn,_n);return _n&&(xn=new Ot,Ln(bn,xn),jt=gn(jt,xn)),jt}})},(i,e,s)=>{var a=s(14),o=s(7),j=s(21),_e=s(78),nt=s(24),tt=s(51),st=function(){},rt=[],at=nt("Reflect","construct"),it=/^\s*(?:class|function)\b/,ct=a(it.exec),ot=!it.exec(st),ut=function(ht){if(!j(ht))return!1;try{return at(st,rt,ht),!0}catch{return!1}},dt=function(ht){if(!j(ht))return!1;switch(_e(ht)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ot||!!ct(it,tt(ht))}catch{return!0}};dt.sham=!0,i.exports=!at||o(function(){var lt;return ut(ut.call)||!ut(Object)||!ut(function(){lt=!0})||lt})?dt:ut},(i,e,s)=>{var a=s(99),o=s(8),j=s(47),_e=s(32),nt=s(155),tt=s(64),st=s(25),rt=s(157),at=s(158),it=s(140),ct=TypeError,ot=function(dt,lt){this.stopped=dt,this.result=lt},ut=ot.prototype;i.exports=function(dt,lt,ht){var xt=ht&&ht.that,mt=!!(ht&&ht.AS_ENTRIES),ft=!!(ht&&ht.IS_RECORD),gt=!!(ht&&ht.IS_ITERATOR),pt=!!(ht&&ht.INTERRUPTED),vt=a(lt,xt),At,Rt,bt,Tt,Lt,Yt,zt,Wt=function(Ut){return At&&it(At,"normal",Ut),new ot(!0,Ut)},Bt=function(Ut){return mt?(j(Ut),pt?vt(Ut[0],Ut[1],Wt):vt(Ut[0],Ut[1])):pt?vt(Ut,Wt):vt(Ut)};if(ft)At=dt.iterator;else if(gt)At=dt;else{if(Rt=at(dt),!Rt)throw ct(_e(dt)+" is not iterable");if(nt(Rt)){for(bt=0,Tt=tt(dt);Tt>bt;bt++)if(Lt=Bt(dt[bt]),Lt&&st(ut,Lt))return Lt;return new ot(!1)}At=rt(dt,Rt)}for(Yt=ft?dt.next:At.next;!(zt=o(Yt,At)).done;){try{Lt=Bt(zt.value)}catch(Ut){it(At,"throw",Ut)}if(typeof Lt=="object"&&Lt&&st(ut,Lt))return Lt}return new ot(!1)}},(i,e,s)=>{var a=s(34),o=s(156),j=a("iterator"),_e=Array.prototype;i.exports=function(nt){return nt!==void 0&&(o.Array===nt||_e[j]===nt)}},i=>{i.exports={}},(i,e,s)=>{var a=s(8),o=s(31),j=s(47),_e=s(32),nt=s(158),tt=TypeError;i.exports=function(st,rt){var at=arguments.length<2?nt(st):rt;if(o(at))return j(a(at,st));throw tt(_e(st)+" is not iterable")}},(i,e,s)=>{var a=s(78),o=s(30),j=s(17),_e=s(156),nt=s(34),tt=nt("iterator");i.exports=function(st){if(!j(st))return o(st,tt)||o(st,"@@iterator")||_e[a(st)]}},(i,e,s)=>{var a=s(18),o=s(45),j=s(11);i.exports=function(_e,nt,tt){var st=a(nt);st in _e?o.f(_e,st,j(0,tt)):_e[st]=tt}},(i,e,s)=>{var a=s(8),o=s(39),j=s(25),_e=s(161),nt=RegExp.prototype;i.exports=function(tt){var st=tt.flags;return st===void 0&&!("flags"in nt)&&!o(tt,"flags")&&j(nt,tt)?a(_e,tt):st}},(i,e,s)=>{var a=s(47);i.exports=function(){var o=a(this),j="";return o.hasIndices&&(j+="d"),o.global&&(j+="g"),o.ignoreCase&&(j+="i"),o.multiline&&(j+="m"),o.dotAll&&(j+="s"),o.unicode&&(j+="u"),o.unicodeSets&&(j+="v"),o.sticky&&(j+="y"),j}},(i,e,s)=>{var a=s(14),o=Map.prototype;i.exports={Map,set:a(o.set),get:a(o.get),has:a(o.has),remove:a(o.delete),proto:o}},(i,e,s)=>{var st,rt,at,i1,ct;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0,s(89),s(149),s(152);var a=s(1),o=s(164),j=s(170);const _e=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=_e;class nt{constructor(){Dt(this,at);Dt(this,st,!1);Dt(this,rt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ut,dt){const lt=et(this,rt).get(ut);return lt===void 0?dt:Object.assign(dt,lt)}getRawValue(ut){return et(this,rt).get(ut)}remove(ut){if(et(this,rt).delete(ut),et(this,rt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const dt of et(this,rt).values())if(dt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ut,dt){const lt=et(this,rt).get(ut);let ht=!1;if(lt!==void 0)for(const[xt,mt]of Object.entries(dt))lt[xt]!==mt&&(ht=!0,lt[xt]=mt);else ht=!0,et(this,rt).set(ut,dt);ht&&wt(this,at,i1).call(this),dt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(dt.constructor._type)}has(ut){return et(this,rt).has(ut)}getAll(){return et(this,rt).size>0?(0,a.objectFromMap)(et(this,rt)):null}setAll(ut){for(const[dt,lt]of Object.entries(ut))this.setValue(dt,lt)}get size(){return et(this,rt).size}resetModified(){et(this,st)&&(Pt(this,st,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tt(this)}get serializable(){if(et(this,rt).size===0)return _e;const ut=new Map,dt=new j.MurmurHash3_64,lt=[],ht=Object.create(null);let xt=!1;for(const[mt,ft]of et(this,rt)){const gt=ft instanceof o.AnnotationEditor?ft.serialize(!1,ht):ft;gt&&(ut.set(mt,gt),dt.update(`${mt}:${JSON.stringify(gt)}`),xt||(xt=!!gt.bitmap))}if(xt)for(const mt of ut.values())mt.bitmap&&lt.push(mt.bitmap);return ut.size>0?{map:ut,hash:dt.hexdigest(),transfers:lt}:_e}}st=new WeakMap,rt=new WeakMap,at=new WeakSet,i1=function(){et(this,st)||(Pt(this,st,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=nt;class tt extends nt{constructor(dt){super();Dt(this,ct);const{map:lt,hash:ht,transfers:xt}=dt.serializable,mt=structuredClone(lt,null);Pt(this,ct,{map:mt,hash:ht,transfers:xt})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return et(this,ct)}}ct=new WeakMap,e.PrintAnnotationStorage=tt},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,ft,gt,yx,xx,At,bx,Ex,a1,o1,l1,Ax,c1;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0,s(89),s(2);var a=s(165),o=s(1),j=s(168);const Bt=class Bt{constructor(_t){Dt(this,gt);Dt(this,tt,"");Dt(this,st,!1);Dt(this,rt,null);Dt(this,at,null);Dt(this,it,null);Dt(this,ct,!1);Dt(this,ot,null);Dt(this,ut,this.focusin.bind(this));Dt(this,dt,this.focusout.bind(this));Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt,!1);Hn(this,"_initialOptions",Object.create(null));Hn(this,"_uiManager",null);Hn(this,"_focusEventsAllowed",!0);Hn(this,"_l10nPromise",null);Dt(this,mt,!1);Dt(this,ft,Bt._zIndex++);this.constructor===Bt&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=_t.parent,this.id=_t.id,this.width=this.height=null,this.pageIndex=_t.parent.pageIndex,this.name=_t.name,this.div=null,this._uiManager=_t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=_t.isCentered,this._structTreeParentId=null;const{rotation:$t,rawDims:{pageWidth:Xt,pageHeight:Ct,pageX:yt,pageY:Et}}=this.parent.viewport;this.rotation=$t,this.pageRotation=(360+$t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Xt,Ct],this.pageTranslation=[yt,Et];const[St,Ft]=this.parentDimensions;this.x=_t.x/St,this.y=_t.y/Ft,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(_t){const $t=new nt({id:_t.parent.getNextId(),parent:_t.parent,uiManager:_t._uiManager});$t.annotationElementId=_t.annotationElementId,$t.deleted=!0,$t._uiManager.addToAnnotationStorage($t)}static initialize(_t){let $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Bt._l10nPromise||(Bt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ct=>[Ct,_t.get(Ct)]))),$t!=null&&$t.strings)for(const Ct of $t.strings)Bt._l10nPromise.set(Ct,_t.get(Ct));if(Bt._borderLineWidth!==-1)return;const Xt=getComputedStyle(document.documentElement);Bt._borderLineWidth=parseFloat(Xt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(_t,$t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(_t){return!1}static paste(_t,$t){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return et(this,mt)}set _isDraggable(_t){var $t;Pt(this,mt,_t),($t=this.div)==null||$t.classList.toggle("draggable",_t)}center(){const[_t,$t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*$t/(_t*2),this.y+=this.width*_t/($t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*$t/(_t*2),this.y-=this.width*_t/($t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(_t){this._uiManager.addCommands(_t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=et(this,ft)}setParent(_t){_t!==null&&(this.pageIndex=_t.pageIndex,this.pageDimensions=_t.pageDimensions),this.parent=_t}focusin(_t){this._focusEventsAllowed&&(et(this,lt)?Pt(this,lt,!1):this.parent.setSelected(this))}focusout(_t){var Xt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const $t=_t.relatedTarget;$t!=null&&$t.closest(`#${this.id}`)||(_t.preventDefault(),(Xt=this.parent)!=null&&Xt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(_t,$t,Xt,Ct){const[yt,Et]=this.parentDimensions;[Xt,Ct]=this.screenToPageTranslation(Xt,Ct),this.x=(_t+Xt)/yt,this.y=($t+Ct)/Et,this.fixAndSetPosition()}translate(_t,$t){wt(this,gt,yx).call(this,this.parentDimensions,_t,$t)}translateInPage(_t,$t){wt(this,gt,yx).call(this,this.pageDimensions,_t,$t),this.div.scrollIntoView({block:"nearest"})}drag(_t,$t){const[Xt,Ct]=this.parentDimensions;if(this.x+=_t/Xt,this.y+=$t/Ct,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:kt,y:Ot}=this.div.getBoundingClientRect();this.parent.findNewParent(this,kt,Ot)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:yt,y:Et}=this;const[St,Ft]=wt(this,gt,xx).call(this);yt+=St,Et+=Ft,this.div.style.left=`${(100*yt).toFixed(2)}%`,this.div.style.top=`${(100*Et).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[_t,$t]=this.pageDimensions;let{x:Xt,y:Ct,width:yt,height:Et}=this;switch(yt*=_t,Et*=$t,Xt*=_t,Ct*=$t,this.rotation){case 0:Xt=Math.max(0,Math.min(_t-yt,Xt)),Ct=Math.max(0,Math.min($t-Et,Ct));break;case 90:Xt=Math.max(0,Math.min(_t-Et,Xt)),Ct=Math.min($t,Math.max(yt,Ct));break;case 180:Xt=Math.min(_t,Math.max(yt,Xt)),Ct=Math.min($t,Math.max(Et,Ct));break;case 270:Xt=Math.min(_t,Math.max(Et,Xt)),Ct=Math.max(0,Math.min($t-yt,Ct));break}this.x=Xt/=_t,this.y=Ct/=$t;const[St,Ft]=wt(this,gt,xx).call(this);Xt+=St,Ct+=Ft;const{style:kt}=this.div;kt.left=`${(100*Xt).toFixed(2)}%`,kt.top=`${(100*Ct).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(_t,$t){var Xt;return wt(Xt=Bt,At,bx).call(Xt,_t,$t,this.parentRotation)}pageTranslationToScreen(_t,$t){var Xt;return wt(Xt=Bt,At,bx).call(Xt,_t,$t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:_t,pageDimensions:[$t,Xt]}=this,Ct=$t*_t,yt=Xt*_t;return o.FeatureTest.isCSSRoundSupported?[Math.round(Ct),Math.round(yt)]:[Ct,yt]}setDims(_t,$t){var yt;const[Xt,Ct]=this.parentDimensions;this.div.style.width=`${(100*_t/Xt).toFixed(2)}%`,et(this,ct)||(this.div.style.height=`${(100*$t/Ct).toFixed(2)}%`),(yt=et(this,rt))==null||yt.classList.toggle("small",_t<Bt.SMALL_EDITOR_SIZE||$t<Bt.SMALL_EDITOR_SIZE)}fixDims(){const{style:_t}=this.div,{height:$t,width:Xt}=_t,Ct=Xt.endsWith("%"),yt=!et(this,ct)&&$t.endsWith("%");if(Ct&&yt)return;const[Et,St]=this.parentDimensions;Ct||(_t.width=`${(100*parseFloat(Xt)/Et).toFixed(2)}%`),!et(this,ct)&&!yt&&(_t.height=`${(100*parseFloat($t)/St).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(et(this,rt))return;const _t=Pt(this,rt,document.createElement("button"));_t.className="altText";const $t=await Bt._l10nPromise.get("editor_alt_text_button_label");_t.textContent=$t,_t.setAttribute("aria-label",$t),_t.tabIndex="0",_t.addEventListener("contextmenu",j.noContextMenu),_t.addEventListener("pointerdown",Xt=>Xt.stopPropagation()),_t.addEventListener("click",Xt=>{Xt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),_t.addEventListener("keydown",Xt=>{Xt.target===_t&&Xt.key==="Enter"&&(Xt.preventDefault(),this._uiManager.editAltText(this))}),wt(this,gt,Ax).call(this),this.div.append(_t),Bt.SMALL_EDITOR_SIZE||(Bt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(_t.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:et(this,tt),decorative:et(this,st)}}set altTextData(_t){let{altText:$t,decorative:Xt}=_t;et(this,tt)===$t&&et(this,st)===Xt||(Pt(this,tt,$t),Pt(this,st,Xt),wt(this,gt,Ax).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",et(this,ut)),this.div.addEventListener("focusout",et(this,dt));const[_t,$t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*$t/_t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*_t/$t).toFixed(2)}%`);const[Xt,Ct]=this.getInitialTranslation();return this.translate(Xt,Ct),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(_t){const{isMac:$t}=o.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&$t){_t.preventDefault();return}Pt(this,lt,!0),wt(this,gt,c1).call(this,_t)}moveInDOM(){var _t;(_t=this.parent)==null||_t.moveEditorInDOM(this)}_setParentAndPosition(_t,$t,Xt){_t.changeParent(this),this.x=$t,this.y=Xt,this.fixAndSetPosition()}getRect(_t,$t){const Xt=this.parentScale,[Ct,yt]=this.pageDimensions,[Et,St]=this.pageTranslation,Ft=_t/Xt,kt=$t/Xt,Ot=this.x*Ct,Gt=this.y*yt,Vt=this.width*Ct,rn=this.height*yt;switch(this.rotation){case 0:return[Ot+Ft+Et,yt-Gt-kt-rn+St,Ot+Ft+Vt+Et,yt-Gt-kt+St];case 90:return[Ot+kt+Et,yt-Gt+Ft+St,Ot+kt+rn+Et,yt-Gt+Ft+Vt+St];case 180:return[Ot-Ft-Vt+Et,yt-Gt+kt+St,Ot-Ft+Et,yt-Gt+kt+rn+St];case 270:return[Ot-kt-rn+Et,yt-Gt-Ft-Vt+St,Ot-kt+Et,yt-Gt-Ft+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(_t,$t){const[Xt,Ct,yt,Et]=_t,St=yt-Xt,Ft=Et-Ct;switch(this.rotation){case 0:return[Xt,$t-Et,St,Ft];case 90:return[Xt,$t-Ct,Ft,St];case 180:return[yt,$t-Ct,St,Ft];case 270:return[yt,$t-Et,Ft,St];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Pt(this,xt,!0)}disableEditMode(){Pt(this,xt,!1)}isInEditMode(){return et(this,xt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _t,$t;(_t=this.div)==null||_t.addEventListener("focusin",et(this,ut)),($t=this.div)==null||$t.addEventListener("focusout",et(this,dt))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(_t,$t,Xt){const Ct=new this.prototype.constructor({parent:$t,id:$t.getNextId(),uiManager:Xt});Ct.rotation=_t.rotation;const[yt,Et]=Ct.pageDimensions,[St,Ft,kt,Ot]=Ct.getRectInCurrentCoords(_t.rect,Et);return Ct.x=St/yt,Ct.y=Ft/Et,Ct.width=kt/yt,Ct.height=Ot/Et,Ct}remove(){var _t;this.div.removeEventListener("focusin",et(this,ut)),this.div.removeEventListener("focusout",et(this,dt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(_t=et(this,rt))==null||_t.remove(),Pt(this,rt,null),Pt(this,at,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(wt(this,gt,a1).call(this),et(this,ot).classList.remove("hidden"))}select(){var _t;this.makeResizable(),(_t=this.div)==null||_t.classList.add("selectedEditor")}unselect(){var _t,$t,Xt;(_t=et(this,ot))==null||_t.classList.add("hidden"),($t=this.div)==null||$t.classList.remove("selectedEditor"),(Xt=this.div)!=null&&Xt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(_t,$t){}disableEditing(){et(this,rt)&&(et(this,rt).hidden=!0)}enableEditing(){et(this,rt)&&(et(this,rt).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return et(this,ht)}set isEditing(_t){Pt(this,ht,_t),this.parent&&(_t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(_t,$t){Pt(this,ct,!0);const Xt=_t/$t,{style:Ct}=this.div;Ct.aspectRatio=Xt,Ct.height="auto"}static get MIN_SIZE(){return 16}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakSet,yx=function(_t,$t,Xt){let[Ct,yt]=_t;[$t,Xt]=this.screenToPageTranslation($t,Xt),this.x+=$t/Ct,this.y+=Xt/yt,this.fixAndSetPosition()},xx=function(){const[_t,$t]=this.parentDimensions,{_borderLineWidth:Xt}=Bt,Ct=Xt/_t,yt=Xt/$t;switch(this.rotation){case 90:return[-Ct,yt];case 180:return[Ct,yt];case 270:return[Ct,-yt];default:return[-Ct,-yt]}},At=new WeakSet,bx=function(_t,$t,Xt){switch(Xt){case 90:return[$t,-_t];case 180:return[-_t,-$t];case 270:return[-$t,_t];default:return[_t,$t]}},Ex=function(_t){switch(_t){case 90:{const[$t,Xt]=this.pageDimensions;return[0,-$t/Xt,Xt/$t,0]}case 180:return[-1,0,0,-1];case 270:{const[$t,Xt]=this.pageDimensions;return[0,$t/Xt,-Xt/$t,0]}default:return[1,0,0,1]}},a1=function(){if(et(this,ot))return;Pt(this,ot,document.createElement("div")),et(this,ot).classList.add("resizers");const _t=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||_t.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const $t of _t){const Xt=document.createElement("div");et(this,ot).append(Xt),Xt.classList.add("resizer",$t),Xt.addEventListener("pointerdown",wt(this,gt,o1).bind(this,$t)),Xt.addEventListener("contextmenu",j.noContextMenu)}this.div.prepend(et(this,ot))},o1=function(_t,$t){$t.preventDefault();const{isMac:Xt}=o.FeatureTest.platform;if($t.button!==0||$t.ctrlKey&&Xt)return;const Ct=wt(this,gt,l1).bind(this,_t),yt=this._isDraggable;this._isDraggable=!1;const Et={passive:!0,capture:!0};window.addEventListener("pointermove",Ct,Et);const St=this.x,Ft=this.y,kt=this.width,Ot=this.height,Gt=this.parent.div.style.cursor,Vt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle($t.target).cursor;const rn=()=>{this._isDraggable=yt,window.removeEventListener("pointerup",rn),window.removeEventListener("blur",rn),window.removeEventListener("pointermove",Ct,Et),this.parent.div.style.cursor=Gt,this.div.style.cursor=Vt;const an=this.x,ln=this.y,cn=this.width,dn=this.height;an===St&&ln===Ft&&cn===kt&&dn===Ot||this.addCommands({cmd:()=>{this.width=cn,this.height=dn,this.x=an,this.y=ln;const[qt,sn]=this.parentDimensions;this.setDims(qt*cn,sn*dn),this.fixAndSetPosition()},undo:()=>{this.width=kt,this.height=Ot,this.x=St,this.y=Ft;const[qt,sn]=this.parentDimensions;this.setDims(qt*kt,sn*Ot),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",rn),window.addEventListener("blur",rn)},l1=function(_t,$t){const[Xt,Ct]=this.parentDimensions,yt=this.x,Et=this.y,St=this.width,Ft=this.height,kt=Bt.MIN_SIZE/Xt,Ot=Bt.MIN_SIZE/Ct,Gt=wn=>Math.round(wn*1e4)/1e4,Vt=wt(this,gt,Ex).call(this,this.rotation),rn=(wn,Dn)=>[Vt[0]*wn+Vt[2]*Dn,Vt[1]*wn+Vt[3]*Dn],an=wt(this,gt,Ex).call(this,360-this.rotation),ln=(wn,Dn)=>[an[0]*wn+an[2]*Dn,an[1]*wn+an[3]*Dn];let cn,dn,qt=!1,sn=!1;switch(_t){case"topLeft":qt=!0,cn=(wn,Dn)=>[0,0],dn=(wn,Dn)=>[wn,Dn];break;case"topMiddle":cn=(wn,Dn)=>[wn/2,0],dn=(wn,Dn)=>[wn/2,Dn];break;case"topRight":qt=!0,cn=(wn,Dn)=>[wn,0],dn=(wn,Dn)=>[0,Dn];break;case"middleRight":sn=!0,cn=(wn,Dn)=>[wn,Dn/2],dn=(wn,Dn)=>[0,Dn/2];break;case"bottomRight":qt=!0,cn=(wn,Dn)=>[wn,Dn],dn=(wn,Dn)=>[0,0];break;case"bottomMiddle":cn=(wn,Dn)=>[wn/2,Dn],dn=(wn,Dn)=>[wn/2,0];break;case"bottomLeft":qt=!0,cn=(wn,Dn)=>[0,Dn],dn=(wn,Dn)=>[wn,0];break;case"middleLeft":sn=!0,cn=(wn,Dn)=>[0,Dn/2],dn=(wn,Dn)=>[wn,Dn/2];break}const It=cn(St,Ft),Ht=dn(St,Ft);let Qt=rn(...Ht);const tn=Gt(yt+Qt[0]),un=Gt(Et+Qt[1]);let mn=1,vn=1,[Zt,An]=this.screenToPageTranslation($t.movementX,$t.movementY);if([Zt,An]=ln(Zt/Xt,An/Ct),qt){const wn=Math.hypot(St,Ft);mn=vn=Math.max(Math.min(Math.hypot(Ht[0]-It[0]-Zt,Ht[1]-It[1]-An)/wn,1/St,1/Ft),kt/St,Ot/Ft)}else sn?mn=Math.max(kt,Math.min(1,Math.abs(Ht[0]-It[0]-Zt)))/St:vn=Math.max(Ot,Math.min(1,Math.abs(Ht[1]-It[1]-An)))/Ft;const En=Gt(St*mn),Fn=Gt(Ft*vn);Qt=rn(...dn(En,Fn));const Mn=tn-Qt[0],Bn=un-Qt[1];this.width=En,this.height=Fn,this.x=Mn,this.y=Bn,this.setDims(Xt*En,Ct*Fn),this.fixAndSetPosition()},Ax=async function(){var Xt;const _t=et(this,rt);if(!_t)return;if(!et(this,tt)&&!et(this,st)){_t.classList.remove("done"),(Xt=et(this,at))==null||Xt.remove();return}Bt._l10nPromise.get("editor_alt_text_edit_button_label").then(Ct=>{_t.setAttribute("aria-label",Ct)});let $t=et(this,at);if(!$t){Pt(this,at,$t=document.createElement("span")),$t.className="tooltip",$t.setAttribute("role","tooltip");const Ct=$t.id=`alt-text-tooltip-${this.id}`;_t.setAttribute("aria-describedby",Ct);const yt=100;_t.addEventListener("mouseenter",()=>{Pt(this,it,setTimeout(()=>{Pt(this,it,null),et(this,at).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},yt))}),_t.addEventListener("mouseleave",()=>{var Et;clearTimeout(et(this,it)),Pt(this,it,null),(Et=et(this,at))==null||Et.classList.remove("show")})}_t.classList.add("done"),$t.innerText=et(this,st)?await Bt._l10nPromise.get("editor_alt_text_decorative_tooltip"):et(this,tt),$t.parentNode||_t.append($t)},c1=function(_t){if(!this._isDraggable)return;const $t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Xt,Ct;$t&&(Xt={passive:!0,capture:!0},Ct=Et=>{const[St,Ft]=this.screenToPageTranslation(Et.movementX,Et.movementY);this._uiManager.dragSelectedEditors(St,Ft)},window.addEventListener("pointermove",Ct,Xt));const yt=()=>{if(window.removeEventListener("pointerup",yt),window.removeEventListener("blur",yt),$t&&window.removeEventListener("pointermove",Ct,Xt),Pt(this,lt,!1),!this._uiManager.endDragSession()){const{isMac:Et}=o.FeatureTest.platform;_t.ctrlKey&&!Et||_t.shiftKey||_t.metaKey&&Et?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",yt),window.addEventListener("blur",yt)},Dt(Bt,At),Hn(Bt,"_borderLineWidth",-1),Hn(Bt,"_colorManager",new a.ColorManager),Hn(Bt,"_zIndex",1),Hn(Bt,"SMALL_EDITOR_SIZE",0);let _e=Bt;e.AnnotationEditor=_e;class nt extends _e{constructor(_t){super(_t),this.annotationElementId=_t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,s)=>{var ct,ot,ut,dt,lt,Sx,mt,ft,gt,pt,vt,u1,bt,Tt,Lt,Yt,zt,Wt,Bt,Ut,_t,$t,Xt,Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an,ln,cn,dn,qt,sn,It,Ht,Qt,tn,un,mn,vn,Zt,h1,_x,wx,uy,Tx,Cx,Zs,jp,d1,f1,Rx,$p,kx;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=j,e.opacityToHex=_e,s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(2),s(89),s(125),s(136),s(138),s(141),s(143),s(145),s(147),s(166);var a=s(1),o=s(168);function j(Ln,Mt,Jt){for(const pn of Jt)Mt.addEventListener(pn,Ln[pn].bind(Ln))}function _e(Ln){return Math.round(Math.min(255,Math.max(1,255*Ln))).toString(16).padStart(2,"0")}class nt{constructor(){Dt(this,ct,0)}getId(){return`${a.AnnotationEditorPrefix}${ds(this,ct)._++}`}}ct=new WeakMap;const xt=class xt{constructor(){Dt(this,lt);Dt(this,ot,(0,a.getUuid)());Dt(this,ut,0);Dt(this,dt,null)}static get _isSVGFittingCanvas(){const Mt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pn=new OffscreenCanvas(1,3).getContext("2d"),bn=new Image;bn.src=Mt;const _n=bn.decode().then(()=>(pn.drawImage(bn,0,0,1,1,0,0,1,3),new Uint32Array(pn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",_n)}async getFromFile(Mt){const{lastModified:Jt,name:pn,size:bn,type:_n}=Mt;return wt(this,lt,Sx).call(this,`${Jt}_${pn}_${bn}_${_n}`,Mt)}async getFromUrl(Mt){return wt(this,lt,Sx).call(this,Mt,Mt)}async getFromId(Mt){et(this,dt)||Pt(this,dt,new Map);const Jt=et(this,dt).get(Mt);return Jt?Jt.bitmap?(Jt.refCounter+=1,Jt):Jt.file?this.getFromFile(Jt.file):this.getFromUrl(Jt.url):null}getSvgUrl(Mt){const Jt=et(this,dt).get(Mt);return Jt!=null&&Jt.isSvg?Jt.svgUrl:null}deleteId(Mt){et(this,dt)||Pt(this,dt,new Map);const Jt=et(this,dt).get(Mt);Jt&&(Jt.refCounter-=1,Jt.refCounter===0&&(Jt.bitmap=null))}isValidId(Mt){return Mt.startsWith(`image_${et(this,ot)}_`)}};ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakSet,Sx=async function(Mt,Jt){et(this,dt)||Pt(this,dt,new Map);let pn=et(this,dt).get(Mt);if(pn===null)return null;if(pn!=null&&pn.bitmap)return pn.refCounter+=1,pn;try{pn||(pn={bitmap:null,id:`image_${et(this,ot)}_${ds(this,ut)._++}`,refCounter:0,isSvg:!1});let bn;if(typeof Jt=="string"){pn.url=Jt;const _n=await fetch(Jt);if(!_n.ok)throw new Error(_n.statusText);bn=await _n.blob()}else bn=pn.file=Jt;if(bn.type==="image/svg+xml"){const _n=xt._isSVGFittingCanvas,xn=new FileReader,Nt=new Image,jt=new Promise((Kt,en)=>{Nt.onload=()=>{pn.bitmap=Nt,pn.isSvg=!0,Kt()},xn.onload=async()=>{const on=pn.svgUrl=xn.result;Nt.src=await _n?`${on}#svgView(preserveAspectRatio(none))`:on},Nt.onerror=xn.onerror=en});xn.readAsDataURL(bn),await jt}else pn.bitmap=await createImageBitmap(bn);pn.refCounter=1}catch(bn){console.error(bn),pn=null}return et(this,dt).set(Mt,pn),pn&&et(this,dt).set(pn.id,pn),pn};let tt=xt;class st{constructor(){Dt(this,mt,[]);Dt(this,ft,!1);Dt(this,gt);Dt(this,pt,-1);let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;Pt(this,gt,Mt)}add(Mt){let{cmd:Jt,undo:pn,mustExec:bn,type:_n=NaN,overwriteIfSameType:xn=!1,keepUndo:Nt=!1}=Mt;if(bn&&Jt(),et(this,ft))return;const jt={cmd:Jt,undo:pn,type:_n};if(et(this,pt)===-1){et(this,mt).length>0&&(et(this,mt).length=0),Pt(this,pt,0),et(this,mt).push(jt);return}if(xn&&et(this,mt)[et(this,pt)].type===_n){Nt&&(jt.undo=et(this,mt)[et(this,pt)].undo),et(this,mt)[et(this,pt)]=jt;return}const Kt=et(this,pt)+1;Kt===et(this,gt)?et(this,mt).splice(0,1):(Pt(this,pt,Kt),Kt<et(this,mt).length&&et(this,mt).splice(Kt)),et(this,mt).push(jt)}undo(){et(this,pt)!==-1&&(Pt(this,ft,!0),et(this,mt)[et(this,pt)].undo(),Pt(this,ft,!1),Pt(this,pt,et(this,pt)-1))}redo(){et(this,pt)<et(this,mt).length-1&&(Pt(this,pt,et(this,pt)+1),Pt(this,ft,!0),et(this,mt)[et(this,pt)].cmd(),Pt(this,ft,!1))}hasSomethingToUndo(){return et(this,pt)!==-1}hasSomethingToRedo(){return et(this,pt)<et(this,mt).length-1}destroy(){Pt(this,mt,null)}}mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,pt=new WeakMap,e.CommandManager=st;class rt{constructor(Mt){Dt(this,vt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Jt}=a.FeatureTest.platform;for(const[pn,bn,_n={}]of Mt)for(const xn of pn){const Nt=xn.startsWith("mac+");Jt&&Nt?(this.callbacks.set(xn.slice(4),{callback:bn,options:_n}),this.allKeys.add(xn.split("+").at(-1))):!Jt&&!Nt&&(this.callbacks.set(xn,{callback:bn,options:_n}),this.allKeys.add(xn.split("+").at(-1)))}}exec(Mt,Jt){if(!this.allKeys.has(Jt.key))return;const pn=this.callbacks.get(wt(this,vt,u1).call(this,Jt));if(!pn)return;const{callback:bn,options:{bubbles:_n=!1,args:xn=[],checker:Nt=null}}=pn;Nt&&!Nt(Mt,Jt)||(bn.bind(Mt,...xn)(),_n||(Jt.stopPropagation(),Jt.preventDefault()))}}vt=new WeakSet,u1=function(Mt){Mt.altKey&&this.buffer.push("alt"),Mt.ctrlKey&&this.buffer.push("ctrl"),Mt.metaKey&&this.buffer.push("meta"),Mt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Mt.key);const Jt=this.buffer.join("+");return this.buffer.length=0,Jt},e.KeyboardManager=rt;const Rt=class Rt{get _colors(){const Mt=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Mt),(0,a.shadow)(this,"_colors",Mt)}convert(Mt){const Jt=(0,o.getRGB)(Mt);if(!window.matchMedia("(forced-colors: active)").matches)return Jt;for(const[pn,bn]of this._colors)if(bn.every((_n,xn)=>_n===Jt[xn]))return Rt._colorsMapping.get(pn);return Jt}getHexCode(Mt){const Jt=this._colors.get(Mt);return Jt?a.Util.makeHexColor(...Jt):Mt}};Hn(Rt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let at=Rt;e.ColorManager=at;const In=class In{constructor(Mt,Jt,pn,bn,_n,xn){Dt(this,Zt);Dt(this,bt,null);Dt(this,Tt,new Map);Dt(this,Lt,new Map);Dt(this,Yt,null);Dt(this,zt,null);Dt(this,Wt,new st);Dt(this,Bt,0);Dt(this,Ut,new Set);Dt(this,_t,null);Dt(this,$t,null);Dt(this,Xt,new Set);Dt(this,Ct,null);Dt(this,yt,new nt);Dt(this,Et,!1);Dt(this,St,!1);Dt(this,Ft,null);Dt(this,kt,a.AnnotationEditorType.NONE);Dt(this,Ot,new Set);Dt(this,Gt,null);Dt(this,Vt,this.blur.bind(this));Dt(this,rn,this.focus.bind(this));Dt(this,an,this.copy.bind(this));Dt(this,ln,this.cut.bind(this));Dt(this,cn,this.paste.bind(this));Dt(this,dn,this.keydown.bind(this));Dt(this,qt,this.onEditingAction.bind(this));Dt(this,sn,this.onPageChanging.bind(this));Dt(this,It,this.onScaleChanging.bind(this));Dt(this,Ht,this.onRotationChanging.bind(this));Dt(this,Qt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Dt(this,tn,[0,0]);Dt(this,un,null);Dt(this,mn,null);Dt(this,vn,null);Pt(this,mn,Mt),Pt(this,vn,Jt),Pt(this,Yt,pn),this._eventBus=bn,this._eventBus._on("editingaction",et(this,qt)),this._eventBus._on("pagechanging",et(this,sn)),this._eventBus._on("scalechanging",et(this,It)),this._eventBus._on("rotationchanging",et(this,Ht)),Pt(this,zt,_n.annotationStorage),Pt(this,Ct,_n.filterFactory),Pt(this,Gt,xn),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Mt=In.prototype,Jt=_n=>{const{activeElement:xn}=document;return xn&&et(_n,mn).contains(xn)&&_n.hasSomethingToControl()},pn=this.TRANSLATE_SMALL,bn=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new rt([[["ctrl+a","mac+meta+a"],Mt.selectAll],[["ctrl+z","mac+meta+z"],Mt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Mt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Mt.delete],[["Escape","mac+Escape"],Mt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Mt.translateSelectedEditors,{args:[-pn,0],checker:Jt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Mt.translateSelectedEditors,{args:[-bn,0],checker:Jt}],[["ArrowRight","mac+ArrowRight"],Mt.translateSelectedEditors,{args:[pn,0],checker:Jt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Mt.translateSelectedEditors,{args:[bn,0],checker:Jt}],[["ArrowUp","mac+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-pn],checker:Jt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-bn],checker:Jt}],[["ArrowDown","mac+ArrowDown"],Mt.translateSelectedEditors,{args:[0,pn],checker:Jt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Mt.translateSelectedEditors,{args:[0,bn],checker:Jt}]]))}destroy(){wt(this,Zt,uy).call(this),wt(this,Zt,_x).call(this),this._eventBus._off("editingaction",et(this,qt)),this._eventBus._off("pagechanging",et(this,sn)),this._eventBus._off("scalechanging",et(this,It)),this._eventBus._off("rotationchanging",et(this,Ht));for(const Mt of et(this,Lt).values())Mt.destroy();et(this,Lt).clear(),et(this,Tt).clear(),et(this,Xt).clear(),Pt(this,bt,null),et(this,Ot).clear(),et(this,Wt).destroy(),et(this,Yt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",et(this,Gt)?et(this,Ct).addHCMFilter(et(this,Gt).foreground,et(this,Gt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(et(this,mn)).direction)}editAltText(Mt){var Jt;(Jt=et(this,Yt))==null||Jt.editAltText(this,Mt)}onPageChanging(Mt){let{pageNumber:Jt}=Mt;Pt(this,Bt,Jt-1)}focusMainContainer(){et(this,mn).focus()}findParent(Mt,Jt){for(const pn of et(this,Lt).values()){const{x:bn,y:_n,width:xn,height:Nt}=pn.div.getBoundingClientRect();if(Mt>=bn&&Mt<=bn+xn&&Jt>=_n&&Jt<=_n+Nt)return pn}return null}disableUserSelect(){let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;et(this,vn).classList.toggle("noUserSelect",Mt)}addShouldRescale(Mt){et(this,Xt).add(Mt)}removeShouldRescale(Mt){et(this,Xt).delete(Mt)}onScaleChanging(Mt){let{scale:Jt}=Mt;this.commitOrRemove(),this.viewParameters.realScale=Jt*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const pn of et(this,Xt))pn.onScaleChanging()}onRotationChanging(Mt){let{pagesRotation:Jt}=Mt;this.commitOrRemove(),this.viewParameters.rotation=Jt}addToAnnotationStorage(Mt){!Mt.isEmpty()&&et(this,zt)&&!et(this,zt).has(Mt.id)&&et(this,zt).setValue(Mt.id,Mt)}blur(){if(!this.hasSelection)return;const{activeElement:Mt}=document;for(const Jt of et(this,Ot))if(Jt.div.contains(Mt)){Pt(this,Ft,[Jt,Mt]),Jt._focusEventsAllowed=!1;break}}focus(){if(!et(this,Ft))return;const[Mt,Jt]=et(this,Ft);Pt(this,Ft,null),Jt.addEventListener("focusin",()=>{Mt._focusEventsAllowed=!0},{once:!0}),Jt.focus()}addEditListeners(){wt(this,Zt,wx).call(this),wt(this,Zt,Tx).call(this)}removeEditListeners(){wt(this,Zt,uy).call(this),wt(this,Zt,Cx).call(this)}copy(Mt){var pn;if(Mt.preventDefault(),(pn=et(this,bt))==null||pn.commitOrRemove(),!this.hasSelection)return;const Jt=[];for(const bn of et(this,Ot)){const _n=bn.serialize(!0);_n&&Jt.push(_n)}Jt.length!==0&&Mt.clipboardData.setData("application/pdfjs",JSON.stringify(Jt))}cut(Mt){this.copy(Mt),this.delete()}paste(Mt){Mt.preventDefault();const{clipboardData:Jt}=Mt;for(const _n of Jt.items)for(const xn of et(this,$t))if(xn.isHandlingMimeForPasting(_n.type)){xn.paste(_n,this.currentLayer);return}let pn=Jt.getData("application/pdfjs");if(!pn)return;try{pn=JSON.parse(pn)}catch(_n){(0,a.warn)(`paste: "${_n.message}".`);return}if(!Array.isArray(pn))return;this.unselectAll();const bn=this.currentLayer;try{const _n=[];for(const jt of pn){const Kt=bn.deserialize(jt);if(!Kt)return;_n.push(Kt)}const xn=()=>{for(const jt of _n)wt(this,Zt,Rx).call(this,jt);wt(this,Zt,kx).call(this,_n)},Nt=()=>{for(const jt of _n)jt.remove()};this.addCommands({cmd:xn,undo:Nt,mustExec:!0})}catch(_n){(0,a.warn)(`paste: "${_n.message}".`)}}keydown(Mt){var Jt;(Jt=this.getActive())!=null&&Jt.shouldGetKeyboardEvents()||In._keyboardManager.exec(this,Mt)}onEditingAction(Mt){["undo","redo","delete","selectAll"].includes(Mt.name)&&this[Mt.name]()}setEditingState(Mt){Mt?(wt(this,Zt,h1).call(this),wt(this,Zt,wx).call(this),wt(this,Zt,Tx).call(this),wt(this,Zt,Zs).call(this,{isEditing:et(this,kt)!==a.AnnotationEditorType.NONE,isEmpty:wt(this,Zt,$p).call(this),hasSomethingToUndo:et(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:et(this,Wt).hasSomethingToRedo(),hasSelectedEditor:!1})):(wt(this,Zt,_x).call(this),wt(this,Zt,uy).call(this),wt(this,Zt,Cx).call(this),wt(this,Zt,Zs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Mt){if(!et(this,$t)){Pt(this,$t,Mt);for(const Jt of et(this,$t))wt(this,Zt,jp).call(this,Jt.defaultPropertiesToUpdate)}}getId(){return et(this,yt).getId()}get currentLayer(){return et(this,Lt).get(et(this,Bt))}getLayer(Mt){return et(this,Lt).get(Mt)}get currentPageIndex(){return et(this,Bt)}addLayer(Mt){et(this,Lt).set(Mt.pageIndex,Mt),et(this,Et)?Mt.enable():Mt.disable()}removeLayer(Mt){et(this,Lt).delete(Mt.pageIndex)}updateMode(Mt){let Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(et(this,kt)!==Mt){if(Pt(this,kt,Mt),Mt===a.AnnotationEditorType.NONE){this.setEditingState(!1),wt(this,Zt,f1).call(this);return}this.setEditingState(!0),wt(this,Zt,d1).call(this),this.unselectAll();for(const pn of et(this,Lt).values())pn.updateMode(Mt);if(Jt){for(const pn of et(this,Tt).values())if(pn.annotationElementId===Jt){this.setSelected(pn),pn.enterInEditMode();break}}}}updateToolbar(Mt){Mt!==et(this,kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Mt})}updateParams(Mt,Jt){if(et(this,$t)){if(Mt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Mt);return}for(const pn of et(this,Ot))pn.updateParams(Mt,Jt);for(const pn of et(this,$t))pn.updateDefaultParams(Mt,Jt)}}enableWaiting(){let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(et(this,St)!==Mt){Pt(this,St,Mt);for(const Jt of et(this,Lt).values())Mt?Jt.disableClick():Jt.enableClick(),Jt.div.classList.toggle("waiting",Mt)}}getEditors(Mt){const Jt=[];for(const pn of et(this,Tt).values())pn.pageIndex===Mt&&Jt.push(pn);return Jt}getEditor(Mt){return et(this,Tt).get(Mt)}addEditor(Mt){et(this,Tt).set(Mt.id,Mt)}removeEditor(Mt){var Jt;et(this,Tt).delete(Mt.id),this.unselect(Mt),(!Mt.annotationElementId||!et(this,Ut).has(Mt.annotationElementId))&&((Jt=et(this,zt))==null||Jt.remove(Mt.id))}addDeletedAnnotationElement(Mt){et(this,Ut).add(Mt.annotationElementId),Mt.deleted=!0}isDeletedAnnotationElement(Mt){return et(this,Ut).has(Mt)}removeDeletedAnnotationElement(Mt){et(this,Ut).delete(Mt.annotationElementId),Mt.deleted=!1}setActiveEditor(Mt){et(this,bt)!==Mt&&(Pt(this,bt,Mt),Mt&&wt(this,Zt,jp).call(this,Mt.propertiesToUpdate))}toggleSelected(Mt){if(et(this,Ot).has(Mt)){et(this,Ot).delete(Mt),Mt.unselect(),wt(this,Zt,Zs).call(this,{hasSelectedEditor:this.hasSelection});return}et(this,Ot).add(Mt),Mt.select(),wt(this,Zt,jp).call(this,Mt.propertiesToUpdate),wt(this,Zt,Zs).call(this,{hasSelectedEditor:!0})}setSelected(Mt){for(const Jt of et(this,Ot))Jt!==Mt&&Jt.unselect();et(this,Ot).clear(),et(this,Ot).add(Mt),Mt.select(),wt(this,Zt,jp).call(this,Mt.propertiesToUpdate),wt(this,Zt,Zs).call(this,{hasSelectedEditor:!0})}isSelected(Mt){return et(this,Ot).has(Mt)}unselect(Mt){Mt.unselect(),et(this,Ot).delete(Mt),wt(this,Zt,Zs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return et(this,Ot).size!==0}undo(){et(this,Wt).undo(),wt(this,Zt,Zs).call(this,{hasSomethingToUndo:et(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:wt(this,Zt,$p).call(this)})}redo(){et(this,Wt).redo(),wt(this,Zt,Zs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:et(this,Wt).hasSomethingToRedo(),isEmpty:wt(this,Zt,$p).call(this)})}addCommands(Mt){et(this,Wt).add(Mt),wt(this,Zt,Zs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:wt(this,Zt,$p).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Mt=[...et(this,Ot)],Jt=()=>{for(const bn of Mt)bn.remove()},pn=()=>{for(const bn of Mt)wt(this,Zt,Rx).call(this,bn)};this.addCommands({cmd:Jt,undo:pn,mustExec:!0})}commitOrRemove(){var Mt;(Mt=et(this,bt))==null||Mt.commitOrRemove()}hasSomethingToControl(){return et(this,bt)||this.hasSelection}selectAll(){for(const Mt of et(this,Ot))Mt.commit();wt(this,Zt,kx).call(this,et(this,Tt).values())}unselectAll(){if(et(this,bt)){et(this,bt).commitOrRemove();return}if(this.hasSelection){for(const Mt of et(this,Ot))Mt.unselect();et(this,Ot).clear(),wt(this,Zt,Zs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Mt,Jt){if((arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1)||this.commitOrRemove(),!this.hasSelection)return;et(this,tn)[0]+=Mt,et(this,tn)[1]+=Jt;const[bn,_n]=et(this,tn),xn=[...et(this,Ot)],Nt=1e3;et(this,un)&&clearTimeout(et(this,un)),Pt(this,un,setTimeout(()=>{Pt(this,un,null),et(this,tn)[0]=et(this,tn)[1]=0,this.addCommands({cmd:()=>{for(const jt of xn)et(this,Tt).has(jt.id)&&jt.translateInPage(bn,_n)},undo:()=>{for(const jt of xn)et(this,Tt).has(jt.id)&&jt.translateInPage(-bn,-_n)},mustExec:!1})},Nt));for(const jt of xn)jt.translateInPage(Mt,Jt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Pt(this,_t,new Map);for(const Mt of et(this,Ot))et(this,_t).set(Mt,{savedX:Mt.x,savedY:Mt.y,savedPageIndex:Mt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!et(this,_t))return!1;this.disableUserSelect(!1);const Mt=et(this,_t);Pt(this,_t,null);let Jt=!1;for(const[{x:bn,y:_n,pageIndex:xn},Nt]of Mt)Nt.newX=bn,Nt.newY=_n,Nt.newPageIndex=xn,Jt||(Jt=bn!==Nt.savedX||_n!==Nt.savedY||xn!==Nt.savedPageIndex);if(!Jt)return!1;const pn=(bn,_n,xn,Nt)=>{if(et(this,Tt).has(bn.id)){const jt=et(this,Lt).get(Nt);jt?bn._setParentAndPosition(jt,_n,xn):(bn.pageIndex=Nt,bn.x=_n,bn.y=xn)}};return this.addCommands({cmd:()=>{for(const[bn,{newX:_n,newY:xn,newPageIndex:Nt}]of Mt)pn(bn,_n,xn,Nt)},undo:()=>{for(const[bn,{savedX:_n,savedY:xn,savedPageIndex:Nt}]of Mt)pn(bn,_n,xn,Nt)},mustExec:!0}),!0}dragSelectedEditors(Mt,Jt){if(et(this,_t))for(const pn of et(this,_t).keys())pn.drag(Mt,Jt)}rebuild(Mt){if(Mt.parent===null){const Jt=this.getLayer(Mt.pageIndex);Jt?(Jt.changeParent(Mt),Jt.addOrRebuild(Mt)):(this.addEditor(Mt),this.addToAnnotationStorage(Mt),Mt.rebuild())}else Mt.parent.addOrRebuild(Mt)}isActive(Mt){return et(this,bt)===Mt}getActive(){return et(this,bt)}getMode(){return et(this,kt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new tt)}};bt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Yt=new WeakMap,zt=new WeakMap,Wt=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,_t=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Ct=new WeakMap,yt=new WeakMap,Et=new WeakMap,St=new WeakMap,Ft=new WeakMap,kt=new WeakMap,Ot=new WeakMap,Gt=new WeakMap,Vt=new WeakMap,rn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,qt=new WeakMap,sn=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,un=new WeakMap,mn=new WeakMap,vn=new WeakMap,Zt=new WeakSet,h1=function(){window.addEventListener("focus",et(this,rn)),window.addEventListener("blur",et(this,Vt))},_x=function(){window.removeEventListener("focus",et(this,rn)),window.removeEventListener("blur",et(this,Vt))},wx=function(){window.addEventListener("keydown",et(this,dn),{capture:!0})},uy=function(){window.removeEventListener("keydown",et(this,dn),{capture:!0})},Tx=function(){document.addEventListener("copy",et(this,an)),document.addEventListener("cut",et(this,ln)),document.addEventListener("paste",et(this,cn))},Cx=function(){document.removeEventListener("copy",et(this,an)),document.removeEventListener("cut",et(this,ln)),document.removeEventListener("paste",et(this,cn))},Zs=function(Mt){Object.entries(Mt).some(pn=>{let[bn,_n]=pn;return et(this,Qt)[bn]!==_n})&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(et(this,Qt),Mt)})},jp=function(Mt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Mt})},d1=function(){if(!et(this,Et)){Pt(this,Et,!0);for(const Mt of et(this,Lt).values())Mt.enable()}},f1=function(){if(this.unselectAll(),et(this,Et)){Pt(this,Et,!1);for(const Mt of et(this,Lt).values())Mt.disable()}},Rx=function(Mt){const Jt=et(this,Lt).get(Mt.pageIndex);Jt?Jt.addOrRebuild(Mt):this.addEditor(Mt)},$p=function(){if(et(this,Tt).size===0)return!0;if(et(this,Tt).size===1)for(const Mt of et(this,Tt).values())return Mt.isEmpty();return!1},kx=function(Mt){et(this,Ot).clear();for(const Jt of Mt)Jt.isEmpty()||(et(this,Ot).add(Jt),Jt.select());wt(this,Zt,Zs).call(this,{hasSelectedEditor:!0})},Hn(In,"TRANSLATE_SMALL",1),Hn(In,"TRANSLATE_BIG",10);let it=In;e.AnnotationEditorUIManager=it},(i,e,s)=>{var a=s(3),o=s(6),j=s(4),_e=s(24),nt=s(14),tt=s(8),st=s(21),rt=s(20),at=s(91),it=s(39),ct=s(77),ot=s(64),ut=s(159),dt=s(7),lt=s(167),ht=s(27),xt=j.JSON,mt=j.Number,ft=j.SyntaxError,gt=xt&&xt.parse,pt=_e("Object","keys"),vt=Object.getOwnPropertyDescriptor,At=nt("".charAt),Rt=nt("".slice),bt=nt(/./.exec),Tt=nt([].push),Lt=/^\d$/,Yt=/^[1-9]$/,zt=/^(?:-|\d)$/,Wt=/^[\t\n\r ]$/,Bt=0,Ut=1,_t=function(Ft,kt){Ft=ct(Ft);var Ot=new yt(Ft,0),Gt=Ot.parse(),Vt=Gt.value,rn=Ot.skip(Wt,Gt.end);if(rn<Ft.length)throw ft('Unexpected extra character: "'+At(Ft,rn)+'" after the parsed data at: '+rn);return st(kt)?$t({"":Vt},"",kt,Gt):Vt},$t=function(Ft,kt,Ot,Gt){var Vt=Ft[kt],rn=Gt&&Vt===Gt.value,an=rn&&typeof Gt.source=="string"?{source:Gt.source}:{},ln,cn,dn,qt,sn;if(rt(Vt)){var It=at(Vt),Ht=rn?Gt.nodes:It?[]:{};if(It)for(ln=Ht.length,dn=ot(Vt),qt=0;qt<dn;qt++)Xt(Vt,qt,$t(Vt,""+qt,Ot,qt<ln?Ht[qt]:void 0));else for(cn=pt(Vt),dn=ot(cn),qt=0;qt<dn;qt++)sn=cn[qt],Xt(Vt,sn,$t(Vt,sn,Ot,it(Ht,sn)?Ht[sn]:void 0))}return tt(Ot,Ft,kt,Vt,an)},Xt=function(Ft,kt,Ot){if(o){var Gt=vt(Ft,kt);if(Gt&&!Gt.configurable)return}Ot===void 0?delete Ft[kt]:ut(Ft,kt,Ot)},Ct=function(Ft,kt,Ot,Gt){this.value=Ft,this.end=kt,this.source=Ot,this.nodes=Gt},yt=function(Ft,kt){this.source=Ft,this.index=kt};yt.prototype={fork:function(Ft){return new yt(this.source,Ft)},parse:function(){var Ft=this.source,kt=this.skip(Wt,this.index),Ot=this.fork(kt),Gt=At(Ft,kt);if(bt(zt,Gt))return Ot.number();switch(Gt){case"{":return Ot.object();case"[":return Ot.array();case'"':return Ot.string();case"t":return Ot.keyword(!0);case"f":return Ot.keyword(!1);case"n":return Ot.keyword(null)}throw ft('Unexpected character: "'+Gt+'" at: '+kt)},node:function(Ft,kt,Ot,Gt,Vt){return new Ct(kt,Gt,Ft?null:Rt(this.source,Ot,Gt),Vt)},object:function(){for(var Ft=this.source,kt=this.index+1,Ot=!1,Gt={},Vt={};kt<Ft.length;){if(kt=this.until(['"',"}"],kt),At(Ft,kt)==="}"&&!Ot){kt++;break}var rn=this.fork(kt).string(),an=rn.value;kt=rn.end,kt=this.until([":"],kt)+1,kt=this.skip(Wt,kt),rn=this.fork(kt).parse(),ut(Vt,an,rn),ut(Gt,an,rn.value),kt=this.until([",","}"],rn.end);var ln=At(Ft,kt);if(ln===",")Ot=!0,kt++;else if(ln==="}"){kt++;break}}return this.node(Ut,Gt,this.index,kt,Vt)},array:function(){for(var Ft=this.source,kt=this.index+1,Ot=!1,Gt=[],Vt=[];kt<Ft.length;){if(kt=this.skip(Wt,kt),At(Ft,kt)==="]"&&!Ot){kt++;break}var rn=this.fork(kt).parse();if(Tt(Vt,rn),Tt(Gt,rn.value),kt=this.until([",","]"],rn.end),At(Ft,kt)===",")Ot=!0,kt++;else if(At(Ft,kt)==="]"){kt++;break}}return this.node(Ut,Gt,this.index,kt,Vt)},string:function(){var Ft=this.index,kt=lt(this.source,this.index+1);return this.node(Bt,kt.value,Ft,kt.end)},number:function(){var Ft=this.source,kt=this.index,Ot=kt;if(At(Ft,Ot)==="-"&&Ot++,At(Ft,Ot)==="0")Ot++;else if(bt(Yt,At(Ft,Ot)))Ot=this.skip(Lt,++Ot);else throw ft("Failed to parse number at: "+Ot);if(At(Ft,Ot)==="."&&(Ot=this.skip(Lt,++Ot)),At(Ft,Ot)==="e"||At(Ft,Ot)==="E"){Ot++,(At(Ft,Ot)==="+"||At(Ft,Ot)==="-")&&Ot++;var Gt=Ot;if(Ot=this.skip(Lt,Ot),Gt===Ot)throw ft("Failed to parse number's exponent value at: "+Ot)}return this.node(Bt,mt(Rt(Ft,kt,Ot)),kt,Ot)},keyword:function(Ft){var kt=""+Ft,Ot=this.index,Gt=Ot+kt.length;if(Rt(this.source,Ot,Gt)!==kt)throw ft("Failed to parse value at: "+Ot);return this.node(Bt,Ft,Ot,Gt)},skip:function(Ft,kt){for(var Ot=this.source;kt<Ot.length&&bt(Ft,At(Ot,kt));kt++);return kt},until:function(Ft,kt){kt=this.skip(Wt,kt);for(var Ot=At(this.source,kt),Gt=0;Gt<Ft.length;Gt++)if(Ft[Gt]===Ot)return kt;throw ft('Unexpected character: "'+Ot+'" at: '+kt)}};var Et=dt(function(){var Ft="9007199254740993",kt;return gt(Ft,function(Ot,Gt,Vt){kt=Vt.source}),kt!==Ft}),St=ht&&!dt(function(){return 1/gt("-0 	")!==-1/0});a({target:"JSON",stat:!0,forced:Et},{parse:function(kt,Ot){return St&&!st(Ot)?gt(kt):_t(kt,Ot)}})},(i,e,s)=>{var a=s(14),o=s(39),j=SyntaxError,_e=parseInt,nt=String.fromCharCode,tt=a("".charAt),st=a("".slice),rt=a(/./.exec),at={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},it=/^[\da-f]{4}$/i,ct=/^[\u0000-\u001F]$/;i.exports=function(ot,ut){for(var dt=!0,lt="";ut<ot.length;){var ht=tt(ot,ut);if(ht==="\\"){var xt=st(ot,ut,ut+2);if(o(at,xt))lt+=at[xt],ut+=2;else if(xt==="\\u"){ut+=2;var mt=st(ot,ut,ut+4);if(!rt(it,mt))throw j("Bad Unicode escape at: "+ut);lt+=nt(_e(mt,16)),ut+=4}else throw j('Unknown escape sequence: "'+xt+'"')}else if(ht==='"'){dt=!1,ut++;break}else{if(rt(ct,ht))throw j("Bad control character in string literal at: "+ut);lt+=ht,ut++}}if(dt)throw j("Unterminated string at: "+ut);return{value:lt,end:ut}}},(i,e,s)=>{var Bt,Ut,_t,$t,Xt,Ct,yt,Et,St,Ft,kt,Ot,Eu,Au,Px,hy,dy,Bp,Up;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=pt,e.getColorValues=Tt,e.getCurrentTransform=Lt,e.getCurrentTransformInverse=Yt,e.getFilenameFromUrl=lt,e.getPdfFilenameFromUrl=ht,e.getRGB=bt,e.getXfaPageViewport=Rt,e.isDataScheme=ut,e.isPdfFile=dt,e.isValidFetchUrl=mt,e.loadScript=gt,e.noContextMenu=ft,e.setLayerDimensions=zt,s(2),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(89),s(84),s(86),s(87);var a=s(169),o=s(1);const j="http://www.w3.org/2000/svg",Wt=class Wt{};Hn(Wt,"CSS",96),Hn(Wt,"PDF",72),Hn(Wt,"PDF_TO_CSS_UNITS",Wt.CSS/Wt.PDF);let _e=Wt;e.PixelsPerInch=_e;class nt extends a.BaseFilterFactory{constructor(){let{docId:It,ownerDocument:Ht=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();Dt(this,Ot);Dt(this,Bt);Dt(this,Ut);Dt(this,_t);Dt(this,$t);Dt(this,Xt);Dt(this,Ct);Dt(this,yt);Dt(this,Et);Dt(this,St);Dt(this,Ft);Dt(this,kt,0);Pt(this,_t,It),Pt(this,$t,Ht)}addFilter(It){if(!It)return"none";let Ht=et(this,Ot,Eu).get(It);if(Ht)return Ht;let Qt,tn,un,mn;if(It.length===1){const En=It[0],Fn=new Array(256);for(let Mn=0;Mn<256;Mn++)Fn[Mn]=En[Mn]/255;mn=Qt=tn=un=Fn.join(",")}else{const[En,Fn,Mn]=It,Bn=new Array(256),wn=new Array(256),Dn=new Array(256);for(let Un=0;Un<256;Un++)Bn[Un]=En[Un]/255,wn[Un]=Fn[Un]/255,Dn[Un]=Mn[Un]/255;Qt=Bn.join(","),tn=wn.join(","),un=Dn.join(","),mn=`${Qt}${tn}${un}`}if(Ht=et(this,Ot,Eu).get(mn),Ht)return et(this,Ot,Eu).set(It,Ht),Ht;const vn=`g_${et(this,_t)}_transfer_map_${ds(this,kt)._++}`,Zt=`url(#${vn})`;et(this,Ot,Eu).set(It,Zt),et(this,Ot,Eu).set(mn,Zt);const An=wt(this,Ot,hy).call(this,vn);return wt(this,Ot,Bp).call(this,Qt,tn,un,An),Zt}addHCMFilter(It,Ht){var Fn;const Qt=`${It}-${Ht}`;if(et(this,Ct)===Qt)return et(this,yt);if(Pt(this,Ct,Qt),Pt(this,yt,"none"),(Fn=et(this,Xt))==null||Fn.remove(),!It||!Ht)return et(this,yt);const tn=wt(this,Ot,Up).call(this,It);It=o.Util.makeHexColor(...tn);const un=wt(this,Ot,Up).call(this,Ht);if(Ht=o.Util.makeHexColor(...un),et(this,Ot,Au).style.color="",It==="#000000"&&Ht==="#ffffff"||It===Ht)return et(this,yt);const mn=new Array(256);for(let Mn=0;Mn<=255;Mn++){const Bn=Mn/255;mn[Mn]=Bn<=.03928?Bn/12.92:((Bn+.055)/1.055)**2.4}const vn=mn.join(","),Zt=`g_${et(this,_t)}_hcm_filter`,An=Pt(this,Et,wt(this,Ot,hy).call(this,Zt));wt(this,Ot,Bp).call(this,vn,vn,vn,An),wt(this,Ot,Px).call(this,An);const En=(Mn,Bn)=>{const wn=tn[Mn]/255,Dn=un[Mn]/255,Un=new Array(Bn+1);for(let Wn=0;Wn<=Bn;Wn++)Un[Wn]=wn+Wn/Bn*(Dn-wn);return Un.join(",")};return wt(this,Ot,Bp).call(this,En(0,5),En(1,5),En(2,5),An),Pt(this,yt,`url(#${Zt})`),et(this,yt)}addHighlightHCMFilter(It,Ht,Qt,tn){var Dn;const un=`${It}-${Ht}-${Qt}-${tn}`;if(et(this,St)===un)return et(this,Ft);if(Pt(this,St,un),Pt(this,Ft,"none"),(Dn=et(this,Et))==null||Dn.remove(),!It||!Ht)return et(this,Ft);const[mn,vn]=[It,Ht].map(wt(this,Ot,Up).bind(this));let Zt=Math.round(.2126*mn[0]+.7152*mn[1]+.0722*mn[2]),An=Math.round(.2126*vn[0]+.7152*vn[1]+.0722*vn[2]),[En,Fn]=[Qt,tn].map(wt(this,Ot,Up).bind(this));An<Zt&&([Zt,An,En,Fn]=[An,Zt,Fn,En]),et(this,Ot,Au).style.color="";const Mn=(Un,Wn,Tn)=>{const hn=new Array(256),nn=(An-Zt)/Tn,gn=Un/255,In=(Wn-Un)/(255*Tn);let Ln=0;for(let Mt=0;Mt<=Tn;Mt++){const Jt=Math.round(Zt+Mt*nn),pn=gn+Mt*In;for(let bn=Ln;bn<=Jt;bn++)hn[bn]=pn;Ln=Jt+1}for(let Mt=Ln;Mt<256;Mt++)hn[Mt]=hn[Ln-1];return hn.join(",")},Bn=`g_${et(this,_t)}_hcm_highlight_filter`,wn=Pt(this,Et,wt(this,Ot,hy).call(this,Bn));return wt(this,Ot,Px).call(this,wn),wt(this,Ot,Bp).call(this,Mn(En[0],Fn[0],5),Mn(En[1],Fn[1],5),Mn(En[2],Fn[2],5),wn),Pt(this,Ft,`url(#${Bn})`),et(this,Ft)}destroy(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(et(this,yt)||et(this,Ft))||(et(this,Ut)&&(et(this,Ut).parentNode.parentNode.remove(),Pt(this,Ut,null)),et(this,Bt)&&(et(this,Bt).clear(),Pt(this,Bt,null)),Pt(this,kt,0))}}Bt=new WeakMap,Ut=new WeakMap,_t=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Ct=new WeakMap,yt=new WeakMap,Et=new WeakMap,St=new WeakMap,Ft=new WeakMap,kt=new WeakMap,Ot=new WeakSet,Eu=function(){return et(this,Bt)||Pt(this,Bt,new Map)},Au=function(){if(!et(this,Ut)){const It=et(this,$t).createElement("div"),{style:Ht}=It;Ht.visibility="hidden",Ht.contain="strict",Ht.width=Ht.height=0,Ht.position="absolute",Ht.top=Ht.left=0,Ht.zIndex=-1;const Qt=et(this,$t).createElementNS(j,"svg");Qt.setAttribute("width",0),Qt.setAttribute("height",0),Pt(this,Ut,et(this,$t).createElementNS(j,"defs")),It.append(Qt),Qt.append(et(this,Ut)),et(this,$t).body.append(It)}return et(this,Ut)},Px=function(It){const Ht=et(this,$t).createElementNS(j,"feColorMatrix");Ht.setAttribute("type","matrix"),Ht.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),It.append(Ht)},hy=function(It){const Ht=et(this,$t).createElementNS(j,"filter");return Ht.setAttribute("color-interpolation-filters","sRGB"),Ht.setAttribute("id",It),et(this,Ot,Au).append(Ht),Ht},dy=function(It,Ht,Qt){const tn=et(this,$t).createElementNS(j,Ht);tn.setAttribute("type","discrete"),tn.setAttribute("tableValues",Qt),It.append(tn)},Bp=function(It,Ht,Qt,tn){const un=et(this,$t).createElementNS(j,"feComponentTransfer");tn.append(un),wt(this,Ot,dy).call(this,un,"feFuncR",It),wt(this,Ot,dy).call(this,un,"feFuncG",Ht),wt(this,Ot,dy).call(this,un,"feFuncB",Qt)},Up=function(It){return et(this,Ot,Au).style.color=It,bt(getComputedStyle(et(this,Ot,Au)).getPropertyValue("color"))},e.DOMFilterFactory=nt;class tt extends a.BaseCanvasFactory{constructor(){let{ownerDocument:sn=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=sn}_createCanvas(sn,It){const Ht=this._document.createElement("canvas");return Ht.width=sn,Ht.height=It,Ht}}e.DOMCanvasFactory=tt;async function st(qt){let sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(mt(qt,document.baseURI)){const It=await fetch(qt);if(!It.ok)throw new Error(It.statusText);return sn?new Uint8Array(await It.arrayBuffer()):(0,o.stringToBytes)(await It.text())}return new Promise((It,Ht)=>{const Qt=new XMLHttpRequest;Qt.open("GET",qt,!0),sn&&(Qt.responseType="arraybuffer"),Qt.onreadystatechange=()=>{if(Qt.readyState===XMLHttpRequest.DONE){if(Qt.status===200||Qt.status===0){let tn;if(sn&&Qt.response?tn=new Uint8Array(Qt.response):!sn&&Qt.responseText&&(tn=(0,o.stringToBytes)(Qt.responseText)),tn){It(tn);return}}Ht(new Error(Qt.statusText))}},Qt.send(null)})}class rt extends a.BaseCMapReaderFactory{_fetchData(sn,It){return st(sn,this.isCompressed).then(Ht=>({cMapData:Ht,compressionType:It}))}}e.DOMCMapReaderFactory=rt;class at extends a.BaseStandardFontDataFactory{_fetchData(sn){return st(sn,!0)}}e.DOMStandardFontDataFactory=at;class it extends a.BaseSVGFactory{_createSVG(sn){return document.createElementNS(j,sn)}}e.DOMSVGFactory=it;class ct{constructor(sn){let{viewBox:It,scale:Ht,rotation:Qt,offsetX:tn=0,offsetY:un=0,dontFlip:mn=!1}=sn;this.viewBox=It,this.scale=Ht,this.rotation=Qt,this.offsetX=tn,this.offsetY=un;const vn=(It[2]+It[0])/2,Zt=(It[3]+It[1])/2;let An,En,Fn,Mn;switch(Qt%=360,Qt<0&&(Qt+=360),Qt){case 180:An=-1,En=0,Fn=0,Mn=1;break;case 90:An=0,En=1,Fn=1,Mn=0;break;case 270:An=0,En=-1,Fn=-1,Mn=0;break;case 0:An=1,En=0,Fn=0,Mn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}mn&&(Fn=-Fn,Mn=-Mn);let Bn,wn,Dn,Un;An===0?(Bn=Math.abs(Zt-It[1])*Ht+tn,wn=Math.abs(vn-It[0])*Ht+un,Dn=(It[3]-It[1])*Ht,Un=(It[2]-It[0])*Ht):(Bn=Math.abs(vn-It[0])*Ht+tn,wn=Math.abs(Zt-It[1])*Ht+un,Dn=(It[2]-It[0])*Ht,Un=(It[3]-It[1])*Ht),this.transform=[An*Ht,En*Ht,Fn*Ht,Mn*Ht,Bn-An*Ht*vn-Fn*Ht*Zt,wn-En*Ht*vn-Mn*Ht*Zt],this.width=Dn,this.height=Un}get rawDims(){const{viewBox:sn}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:sn[2]-sn[0],pageHeight:sn[3]-sn[1],pageX:sn[0],pageY:sn[1]})}clone(){let{scale:sn=this.scale,rotation:It=this.rotation,offsetX:Ht=this.offsetX,offsetY:Qt=this.offsetY,dontFlip:tn=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new ct({viewBox:this.viewBox.slice(),scale:sn,rotation:It,offsetX:Ht,offsetY:Qt,dontFlip:tn})}convertToViewportPoint(sn,It){return o.Util.applyTransform([sn,It],this.transform)}convertToViewportRectangle(sn){const It=o.Util.applyTransform([sn[0],sn[1]],this.transform),Ht=o.Util.applyTransform([sn[2],sn[3]],this.transform);return[It[0],It[1],Ht[0],Ht[1]]}convertToPdfPoint(sn,It){return o.Util.applyInverseTransform([sn,It],this.transform)}}e.PageViewport=ct;class ot extends o.BaseException{constructor(sn){let It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(sn,"RenderingCancelledException"),this.extraDelay=It}}e.RenderingCancelledException=ot;function ut(qt){const sn=qt.length;let It=0;for(;It<sn&&qt[It].trim()==="";)It++;return qt.substring(It,It+5).toLowerCase()==="data:"}function dt(qt){return typeof qt=="string"&&/\.pdf$/i.test(qt)}function lt(qt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)||([qt]=qt.split(/[#?]/,1)),qt.substring(qt.lastIndexOf("/")+1)}function ht(qt){let sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof qt!="string")return sn;if(ut(qt))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),sn;const It=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ht=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Qt=It.exec(qt);let tn=Ht.exec(Qt[1])||Ht.exec(Qt[2])||Ht.exec(Qt[3]);if(tn&&(tn=tn[0],tn.includes("%")))try{tn=Ht.exec(decodeURIComponent(tn))[0]}catch{}return tn||sn}class xt{constructor(){Hn(this,"started",Object.create(null));Hn(this,"times",[])}time(sn){sn in this.started&&(0,o.warn)(`Timer is already running for ${sn}`),this.started[sn]=Date.now()}timeEnd(sn){sn in this.started||(0,o.warn)(`Timer has not been started for ${sn}`),this.times.push({name:sn,start:this.started[sn],end:Date.now()}),delete this.started[sn]}toString(){const sn=[];let It=0;for(const{name:Ht}of this.times)It=Math.max(Ht.length,It);for(const{name:Ht,start:Qt,end:tn}of this.times)sn.push(`${Ht.padEnd(It)} ${tn-Qt}ms
`);return sn.join("")}}e.StatTimer=xt;function mt(qt,sn){try{const{protocol:It}=sn?new URL(qt,sn):new URL(qt);return It==="http:"||It==="https:"}catch{return!1}}function ft(qt){qt.preventDefault()}function gt(qt){let sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((It,Ht)=>{const Qt=document.createElement("script");Qt.src=qt,Qt.onload=function(tn){sn&&Qt.remove(),It(tn)},Qt.onerror=function(){Ht(new Error(`Cannot load script at: ${Qt.src}`))},(document.head||document.documentElement).append(Qt)})}function pt(qt){console.log("Deprecated API usage: "+qt)}let vt;class At{static toDateObject(sn){if(!sn||typeof sn!="string")return null;vt||(vt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const It=vt.exec(sn);if(!It)return null;const Ht=parseInt(It[1],10);let Qt=parseInt(It[2],10);Qt=Qt>=1&&Qt<=12?Qt-1:0;let tn=parseInt(It[3],10);tn=tn>=1&&tn<=31?tn:1;let un=parseInt(It[4],10);un=un>=0&&un<=23?un:0;let mn=parseInt(It[5],10);mn=mn>=0&&mn<=59?mn:0;let vn=parseInt(It[6],10);vn=vn>=0&&vn<=59?vn:0;const Zt=It[7]||"Z";let An=parseInt(It[8],10);An=An>=0&&An<=23?An:0;let En=parseInt(It[9],10)||0;return En=En>=0&&En<=59?En:0,Zt==="-"?(un+=An,mn+=En):Zt==="+"&&(un-=An,mn-=En),new Date(Date.UTC(Ht,Qt,tn,un,mn,vn))}}e.PDFDateString=At;function Rt(qt,sn){let{scale:It=1,rotation:Ht=0}=sn;const{width:Qt,height:tn}=qt.attributes.style,un=[0,0,parseInt(Qt),parseInt(tn)];return new ct({viewBox:un,scale:It,rotation:Ht})}function bt(qt){if(qt.startsWith("#")){const sn=parseInt(qt.slice(1),16);return[(sn&16711680)>>16,(sn&65280)>>8,sn&255]}return qt.startsWith("rgb(")?qt.slice(4,-1).split(",").map(sn=>parseInt(sn)):qt.startsWith("rgba(")?qt.slice(5,-1).split(",").map(sn=>parseInt(sn)).slice(0,3):((0,o.warn)(`Not a valid color format: "${qt}"`),[0,0,0])}function Tt(qt){const sn=document.createElement("span");sn.style.visibility="hidden",document.body.append(sn);for(const It of qt.keys()){sn.style.color=It;const Ht=window.getComputedStyle(sn).color;qt.set(It,bt(Ht))}sn.remove()}function Lt(qt){const{a:sn,b:It,c:Ht,d:Qt,e:tn,f:un}=qt.getTransform();return[sn,It,Ht,Qt,tn,un]}function Yt(qt){const{a:sn,b:It,c:Ht,d:Qt,e:tn,f:un}=qt.getTransform().invertSelf();return[sn,It,Ht,Qt,tn,un]}function zt(qt,sn){let It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(sn instanceof ct){const{pageWidth:Qt,pageHeight:tn}=sn.rawDims,{style:un}=qt,mn=o.FeatureTest.isCSSRoundSupported,vn=`var(--scale-factor) * ${Qt}px`,Zt=`var(--scale-factor) * ${tn}px`,An=mn?`round(${vn}, 1px)`:`calc(${vn})`,En=mn?`round(${Zt}, 1px)`:`calc(${Zt})`;!It||sn.rotation%180===0?(un.width=An,un.height=En):(un.width=En,un.height=An)}Ht&&qt.setAttribute("data-main-rotation",sn.rotation)}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0,s(2);var a=s(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(rt){return"none"}addHCMFilter(rt,at){return"none"}addHighlightHCMFilter(rt,at,it,ct){return"none"}destroy(){}}e.BaseFilterFactory=o;class j{constructor(){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(rt,at){if(rt<=0||at<=0)throw new Error("Invalid canvas size");const it=this._createCanvas(rt,at);return{canvas:it,context:it.getContext("2d")}}reset(rt,at,it){if(!rt.canvas)throw new Error("Canvas is not specified");if(at<=0||it<=0)throw new Error("Invalid canvas size");rt.canvas.width=at,rt.canvas.height=it}destroy(rt){if(!rt.canvas)throw new Error("Canvas is not specified");rt.canvas.width=0,rt.canvas.height=0,rt.canvas=null,rt.context=null}_createCanvas(rt,at){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=j;class _e{constructor(rt){let{baseUrl:at=null,isCompressed:it=!0}=rt;this.constructor===_e&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=at,this.isCompressed=it}async fetch(rt){let{name:at}=rt;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!at)throw new Error("CMap name must be specified.");const it=this.baseUrl+at+(this.isCompressed?".bcmap":""),ct=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(it,ct).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${it}`)})}_fetchData(rt,at){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=_e;class nt{constructor(rt){let{baseUrl:at=null}=rt;this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=at}async fetch(rt){let{filename:at}=rt;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!at)throw new Error("Font filename must be specified.");const it=`${this.baseUrl}${at}`;return this._fetchData(it).catch(ct=>{throw new Error(`Unable to load font data at: ${it}`)})}_fetchData(rt){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=nt;class tt{constructor(){this.constructor===tt&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(rt,at){let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(rt<=0||at<=0)throw new Error("Invalid SVG dimensions");const ct=this._createSVG("svg:svg");return ct.setAttribute("version","1.1"),it||(ct.setAttribute("width",`${rt}px`),ct.setAttribute("height",`${at}px`)),ct.setAttribute("preserveAspectRatio","none"),ct.setAttribute("viewBox",`0 0 ${rt} ${at}`),ct}createElement(rt){if(typeof rt!="string")throw new Error("Invalid SVG element type");return this._createSVG(rt)}_createSVG(rt){(0,a.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=tt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0,s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(2);var a=s(1);const o=3285377520,j=4294901760,_e=65535;class nt{constructor(st){this.h1=st?st&4294967295:o,this.h2=st?st&4294967295:o}update(st){let rt,at;if(typeof st=="string"){rt=new Uint8Array(st.length*2),at=0;for(let pt=0,vt=st.length;pt<vt;pt++){const At=st.charCodeAt(pt);At<=255?rt[at++]=At:(rt[at++]=At>>>8,rt[at++]=At&255)}}else if((0,a.isArrayBuffer)(st))rt=st.slice(),at=rt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const it=at>>2,ct=at-it*4,ot=new Uint32Array(rt.buffer,0,it);let ut=0,dt=0,lt=this.h1,ht=this.h2;const xt=3432918353,mt=461845907,ft=xt&_e,gt=mt&_e;for(let pt=0;pt<it;pt++)pt&1?(ut=ot[pt],ut=ut*xt&j|ut*ft&_e,ut=ut<<15|ut>>>17,ut=ut*mt&j|ut*gt&_e,lt^=ut,lt=lt<<13|lt>>>19,lt=lt*5+3864292196):(dt=ot[pt],dt=dt*xt&j|dt*ft&_e,dt=dt<<15|dt>>>17,dt=dt*mt&j|dt*gt&_e,ht^=dt,ht=ht<<13|ht>>>19,ht=ht*5+3864292196);switch(ut=0,ct){case 3:ut^=rt[it*4+2]<<16;case 2:ut^=rt[it*4+1]<<8;case 1:ut^=rt[it*4],ut=ut*xt&j|ut*ft&_e,ut=ut<<15|ut>>>17,ut=ut*mt&j|ut*gt&_e,it&1?lt^=ut:ht^=ut}this.h1=lt,this.h2=ht}hexdigest(){let st=this.h1,rt=this.h2;return st^=rt>>>1,st=st*3981806797&j|st*36045&_e,rt=rt*4283543511&j|((rt<<16|st>>>16)*2950163797&j)>>>16,st^=rt>>>1,st=st*444984403&j|st*60499&_e,rt=rt*3301882366&j|((rt<<16|st>>>16)*3120437893&j)>>>16,st^=rt>>>1,(st>>>0).toString(16).padStart(8,"0")+(rt>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=nt},(i,e,s)=>{var _e;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0,s(125),s(136),s(138),s(141),s(143),s(145),s(147),s(89),s(149);var a=s(1);class o{constructor(tt){Dt(this,_e,new Set);let{ownerDocument:st=globalThis.document,styleElement:rt=null}=tt;this._document=st,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(tt){this.nativeFontFaces.add(tt),this._document.fonts.add(tt)}removeNativeFontFace(tt){this.nativeFontFaces.delete(tt),this._document.fonts.delete(tt)}insertRule(tt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const st=this.styleElement.sheet;st.insertRule(tt,st.cssRules.length)}clear(){for(const tt of this.nativeFontFaces)this._document.fonts.delete(tt);this.nativeFontFaces.clear(),et(this,_e).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(tt){if(!(!tt||et(this,_e).has(tt.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:st,src:rt,style:at}=tt,it=new FontFace(st,rt,at);this.addNativeFontFace(it);try{await it.load(),et(this,_e).add(st)}catch{(0,a.warn)(`Cannot load system font: ${tt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(it)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(tt){if(tt.attached||tt.missingFile&&!tt.systemFontInfo)return;if(tt.attached=!0,tt.systemFontInfo){await this.loadSystemFont(tt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const rt=tt.createNativeFontFace();if(rt){this.addNativeFontFace(rt);try{await rt.loaded}catch(at){throw(0,a.warn)(`Failed to load font '${rt.family}': '${at}'.`),tt.disableFontFace=!0,at}}return}const st=tt.createFontFaceRule();if(st){if(this.insertRule(st),this.isSyncFontLoadingSupported)return;await new Promise(rt=>{const at=this._queueLoadingCallback(rt);this._prepareFontLoadEvent(tt,at)})}}get isFontLoadingAPISupported(){var st;const tt=!!((st=this._document)!=null&&st.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",tt)}get isSyncFontLoadingSupported(){let tt=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(tt=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",tt)}_queueLoadingCallback(tt){function st(){for((0,a.assert)(!at.done,"completeRequest() cannot be called twice."),at.done=!0;rt.length>0&&rt[0].done;){const it=rt.shift();setTimeout(it.callback,0)}}const{loadingRequests:rt}=this,at={done:!1,complete:st,callback:tt};return rt.push(at),at}get _loadTestFont(){const tt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",tt)}_prepareFontLoadEvent(tt,st){function rt(bt,Tt){return bt.charCodeAt(Tt)<<24|bt.charCodeAt(Tt+1)<<16|bt.charCodeAt(Tt+2)<<8|bt.charCodeAt(Tt+3)&255}function at(bt,Tt,Lt,Yt){const zt=bt.substring(0,Tt),Wt=bt.substring(Tt+Lt);return zt+Yt+Wt}let it,ct;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const ut=ot.getContext("2d");let dt=0;function lt(bt,Tt){if(++dt>30){(0,a.warn)("Load test font never loaded."),Tt();return}if(ut.font="30px "+bt,ut.fillText(".",0,20),ut.getImageData(0,0,1,1).data[3]>0){Tt();return}setTimeout(lt.bind(null,bt,Tt))}const ht=`lt${Date.now()}${this.loadTestFontId++}`;let xt=this._loadTestFont;xt=at(xt,976,ht.length,ht);const ft=16,gt=1482184792;let pt=rt(xt,ft);for(it=0,ct=ht.length-3;it<ct;it+=4)pt=pt-gt+rt(ht,it)|0;it<ht.length&&(pt=pt-gt+rt(ht+"XXX",it)|0),xt=at(xt,ft,4,(0,a.string32)(pt));const vt=`url(data:font/opentype;base64,${btoa(xt)});`,At=`@font-face {font-family:"${ht}";src:${vt}}`;this.insertRule(At);const Rt=this._document.createElement("div");Rt.style.visibility="hidden",Rt.style.width=Rt.style.height="10px",Rt.style.position="absolute",Rt.style.top=Rt.style.left="0px";for(const bt of[tt.loadedName,ht]){const Tt=this._document.createElement("span");Tt.textContent="Hi",Tt.style.fontFamily=bt,Rt.append(Tt)}this._document.body.append(Rt),lt(ht,()=>{Rt.remove(),st.complete()})}}_e=new WeakMap,e.FontLoader=o;class j{constructor(tt,st){let{isEvalSupported:rt=!0,disableFontFace:at=!1,ignoreErrors:it=!1,inspectFont:ct=null}=st;this.compiledGlyphs=Object.create(null);for(const ot in tt)this[ot]=tt[ot];this.isEvalSupported=rt!==!1,this.disableFontFace=at===!0,this.ignoreErrors=it===!0,this._inspectFont=ct}createNativeFontFace(){var st;if(!this.data||this.disableFontFace)return null;let tt;if(!this.cssFontInfo)tt=new FontFace(this.loadedName,this.data,{});else{const rt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(rt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),tt=new FontFace(this.cssFontInfo.fontFamily,this.data,rt)}return(st=this._inspectFont)==null||st.call(this,this),tt}createFontFaceRule(){var at;if(!this.data||this.disableFontFace)return null;const tt=(0,a.bytesToString)(this.data),st=`url(data:${this.mimetype};base64,${btoa(tt)});`;let rt;if(!this.cssFontInfo)rt=`@font-face {font-family:"${this.loadedName}";src:${st}}`;else{let it=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(it+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${it}src:${st}}`}return(at=this._inspectFont)==null||at.call(this,this,st),rt}getPathGenerator(tt,st){if(this.compiledGlyphs[st]!==void 0)return this.compiledGlyphs[st];let rt;try{rt=tt.get(this.loadedName+"_path_"+st)}catch(at){if(!this.ignoreErrors)throw at;return(0,a.warn)(`getPathGenerator - ignoring character: "${at}".`),this.compiledGlyphs[st]=function(it,ct){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const at=[];for(const it of rt){const ct=it.args!==void 0?it.args.join(","):"";at.push("c.",it.cmd,"(",ct,`);
`)}return this.compiledGlyphs[st]=new Function("c","size",at.join(""))}return this.compiledGlyphs[st]=function(at,it){for(const ct of rt)ct.cmd==="scale"&&(ct.args=[it,-it]),at[ct.cmd].apply(at,ct.args)}}}e.FontFaceObject=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0,s(2),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123);var a=s(169),o=s(1);(function(){if(!(globalThis.DOMMatrix||!o.isNodeJS))try{globalThis.DOMMatrix=require$$6.DOMMatrix}catch(at){(0,o.warn)(`Cannot polyfill \`DOMMatrix\`, rendering may be broken: "${at}".`)}})(),function(){if(!(globalThis.Path2D||!o.isNodeJS))try{const{CanvasRenderingContext2D:at}=require$$6,{polyfillPath2D:it}=requirePath2dPolyfill_esm();globalThis.CanvasRenderingContext2D=at,it(globalThis)}catch(at){(0,o.warn)(`Cannot polyfill \`Path2D\`, rendering may be broken: "${at}".`)}}();const j=function(rt){return new Promise((at,it)=>{require$$6.readFile(rt,(ot,ut)=>{if(ot||!ut){it(new Error(ot));return}at(new Uint8Array(ut))})})};class _e extends a.BaseFilterFactory{}e.NodeFilterFactory=_e;class nt extends a.BaseCanvasFactory{_createCanvas(at,it){return require$$6.createCanvas(at,it)}}e.NodeCanvasFactory=nt;class tt extends a.BaseCMapReaderFactory{_fetchData(at,it){return j(at).then(ct=>({cMapData:ct,compressionType:it}))}}e.NodeCMapReaderFactory=tt;class st extends a.BaseStandardFontDataFactory{_fetchData(at){return j(at)}}e.NodeStandardFontDataFactory=st},(i,e,s)=>{var Ut,Mx,Dx;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0,s(2),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(89);var a=s(1),o=s(168),j=s(174),_e=s(175);const nt=16,tt=100,st=4096,rt=15,at=10,it=1e3,ct=16;function ot(Ct,yt){if(Ct._removeMirroring)throw new Error("Context is already forwarding operations.");Ct.__originalSave=Ct.save,Ct.__originalRestore=Ct.restore,Ct.__originalRotate=Ct.rotate,Ct.__originalScale=Ct.scale,Ct.__originalTranslate=Ct.translate,Ct.__originalTransform=Ct.transform,Ct.__originalSetTransform=Ct.setTransform,Ct.__originalResetTransform=Ct.resetTransform,Ct.__originalClip=Ct.clip,Ct.__originalMoveTo=Ct.moveTo,Ct.__originalLineTo=Ct.lineTo,Ct.__originalBezierCurveTo=Ct.bezierCurveTo,Ct.__originalRect=Ct.rect,Ct.__originalClosePath=Ct.closePath,Ct.__originalBeginPath=Ct.beginPath,Ct._removeMirroring=()=>{Ct.save=Ct.__originalSave,Ct.restore=Ct.__originalRestore,Ct.rotate=Ct.__originalRotate,Ct.scale=Ct.__originalScale,Ct.translate=Ct.__originalTranslate,Ct.transform=Ct.__originalTransform,Ct.setTransform=Ct.__originalSetTransform,Ct.resetTransform=Ct.__originalResetTransform,Ct.clip=Ct.__originalClip,Ct.moveTo=Ct.__originalMoveTo,Ct.lineTo=Ct.__originalLineTo,Ct.bezierCurveTo=Ct.__originalBezierCurveTo,Ct.rect=Ct.__originalRect,Ct.closePath=Ct.__originalClosePath,Ct.beginPath=Ct.__originalBeginPath,delete Ct._removeMirroring},Ct.save=function(){yt.save(),this.__originalSave()},Ct.restore=function(){yt.restore(),this.__originalRestore()},Ct.translate=function(St,Ft){yt.translate(St,Ft),this.__originalTranslate(St,Ft)},Ct.scale=function(St,Ft){yt.scale(St,Ft),this.__originalScale(St,Ft)},Ct.transform=function(St,Ft,kt,Ot,Gt,Vt){yt.transform(St,Ft,kt,Ot,Gt,Vt),this.__originalTransform(St,Ft,kt,Ot,Gt,Vt)},Ct.setTransform=function(St,Ft,kt,Ot,Gt,Vt){yt.setTransform(St,Ft,kt,Ot,Gt,Vt),this.__originalSetTransform(St,Ft,kt,Ot,Gt,Vt)},Ct.resetTransform=function(){yt.resetTransform(),this.__originalResetTransform()},Ct.rotate=function(St){yt.rotate(St),this.__originalRotate(St)},Ct.clip=function(St){yt.clip(St),this.__originalClip(St)},Ct.moveTo=function(Et,St){yt.moveTo(Et,St),this.__originalMoveTo(Et,St)},Ct.lineTo=function(Et,St){yt.lineTo(Et,St),this.__originalLineTo(Et,St)},Ct.bezierCurveTo=function(Et,St,Ft,kt,Ot,Gt){yt.bezierCurveTo(Et,St,Ft,kt,Ot,Gt),this.__originalBezierCurveTo(Et,St,Ft,kt,Ot,Gt)},Ct.rect=function(Et,St,Ft,kt){yt.rect(Et,St,Ft,kt),this.__originalRect(Et,St,Ft,kt)},Ct.closePath=function(){yt.closePath(),this.__originalClosePath()},Ct.beginPath=function(){yt.beginPath(),this.__originalBeginPath()}}class ut{constructor(yt){this.canvasFactory=yt,this.cache=Object.create(null)}getCanvas(yt,Et,St){let Ft;return this.cache[yt]!==void 0?(Ft=this.cache[yt],this.canvasFactory.reset(Ft,Et,St)):(Ft=this.canvasFactory.create(Et,St),this.cache[yt]=Ft),Ft}delete(yt){delete this.cache[yt]}clear(){for(const yt in this.cache){const Et=this.cache[yt];this.canvasFactory.destroy(Et),delete this.cache[yt]}}}function dt(Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn){const[an,ln,cn,dn,qt,sn]=(0,o.getCurrentTransform)(Ct);if(ln===0&&cn===0){const Qt=Ot*an+qt,tn=Math.round(Qt),un=Gt*dn+sn,mn=Math.round(un),vn=(Ot+Vt)*an+qt,Zt=Math.abs(Math.round(vn)-tn)||1,An=(Gt+rn)*dn+sn,En=Math.abs(Math.round(An)-mn)||1;return Ct.setTransform(Math.sign(an),0,0,Math.sign(dn),tn,mn),Ct.drawImage(yt,Et,St,Ft,kt,0,0,Zt,En),Ct.setTransform(an,ln,cn,dn,qt,sn),[Zt,En]}if(an===0&&dn===0){const Qt=Gt*cn+qt,tn=Math.round(Qt),un=Ot*ln+sn,mn=Math.round(un),vn=(Gt+rn)*cn+qt,Zt=Math.abs(Math.round(vn)-tn)||1,An=(Ot+Vt)*ln+sn,En=Math.abs(Math.round(An)-mn)||1;return Ct.setTransform(0,Math.sign(ln),Math.sign(cn),0,tn,mn),Ct.drawImage(yt,Et,St,Ft,kt,0,0,En,Zt),Ct.setTransform(an,ln,cn,dn,qt,sn),[En,Zt]}Ct.drawImage(yt,Et,St,Ft,kt,Ot,Gt,Vt,rn);const It=Math.hypot(an,ln),Ht=Math.hypot(cn,dn);return[It*Vt,Ht*rn]}function lt(Ct){const{width:yt,height:Et}=Ct;if(yt>it||Et>it)return null;const St=1e3,Ft=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),kt=yt+1;let Ot=new Uint8Array(kt*(Et+1)),Gt,Vt,rn;const an=yt+7&-8;let ln=new Uint8Array(an*Et),cn=0;for(const Ht of Ct.data){let Qt=128;for(;Qt>0;)ln[cn++]=Ht&Qt?0:255,Qt>>=1}let dn=0;for(cn=0,ln[cn]!==0&&(Ot[0]=1,++dn),Vt=1;Vt<yt;Vt++)ln[cn]!==ln[cn+1]&&(Ot[Vt]=ln[cn]?2:1,++dn),cn++;for(ln[cn]!==0&&(Ot[Vt]=2,++dn),Gt=1;Gt<Et;Gt++){cn=Gt*an,rn=Gt*kt,ln[cn-an]!==ln[cn]&&(Ot[rn]=ln[cn]?1:8,++dn);let Ht=(ln[cn]?4:0)+(ln[cn-an]?8:0);for(Vt=1;Vt<yt;Vt++)Ht=(Ht>>2)+(ln[cn+1]?4:0)+(ln[cn-an+1]?8:0),Ft[Ht]&&(Ot[rn+Vt]=Ft[Ht],++dn),cn++;if(ln[cn-an]!==ln[cn]&&(Ot[rn+Vt]=ln[cn]?2:4,++dn),dn>St)return null}for(cn=an*(Et-1),rn=Gt*kt,ln[cn]!==0&&(Ot[rn]=8,++dn),Vt=1;Vt<yt;Vt++)ln[cn]!==ln[cn+1]&&(Ot[rn+Vt]=ln[cn]?4:8,++dn),cn++;if(ln[cn]!==0&&(Ot[rn+Vt]=4,++dn),dn>St)return null;const qt=new Int32Array([0,kt,-1,0,-kt,0,0,0,1]),sn=new Path2D;for(Gt=0;dn&&Gt<=Et;Gt++){let Ht=Gt*kt;const Qt=Ht+yt;for(;Ht<Qt&&!Ot[Ht];)Ht++;if(Ht===Qt)continue;sn.moveTo(Ht%kt,Gt);const tn=Ht;let un=Ot[Ht];do{const mn=qt[un];do Ht+=mn;while(!Ot[Ht]);const vn=Ot[Ht];vn!==5&&vn!==10?(un=vn,Ot[Ht]=0):(un=vn&51*un>>4,Ot[Ht]&=un>>2|un<<2),sn.lineTo(Ht%kt,Ht/kt|0),Ot[Ht]||--dn}while(tn!==Ht);--Gt}return ln=null,Ot=null,function(Ht){Ht.save(),Ht.scale(1/yt,-1/Et),Ht.translate(0,-Et),Ht.fill(sn),Ht.beginPath(),Ht.restore()}}class ht{constructor(yt,Et){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,yt,Et])}clone(){const yt=Object.create(this);return yt.clipBox=this.clipBox.slice(),yt}setCurrentPoint(yt,Et){this.x=yt,this.y=Et}updatePathMinMax(yt,Et,St){[Et,St]=a.Util.applyTransform([Et,St],yt),this.minX=Math.min(this.minX,Et),this.minY=Math.min(this.minY,St),this.maxX=Math.max(this.maxX,Et),this.maxY=Math.max(this.maxY,St)}updateRectMinMax(yt,Et){const St=a.Util.applyTransform(Et,yt),Ft=a.Util.applyTransform(Et.slice(2),yt);this.minX=Math.min(this.minX,St[0],Ft[0]),this.minY=Math.min(this.minY,St[1],Ft[1]),this.maxX=Math.max(this.maxX,St[0],Ft[0]),this.maxY=Math.max(this.maxY,St[1],Ft[1])}updateScalingPathMinMax(yt,Et){a.Util.scaleMinMax(yt,Et),this.minX=Math.min(this.minX,Et[0]),this.maxX=Math.max(this.maxX,Et[1]),this.minY=Math.min(this.minY,Et[2]),this.maxY=Math.max(this.maxY,Et[3])}updateCurvePathMinMax(yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an){const ln=a.Util.bezierBoundingBox(Et,St,Ft,kt,Ot,Gt,Vt,rn);if(an){an[0]=Math.min(an[0],ln[0],ln[2]),an[1]=Math.max(an[1],ln[0],ln[2]),an[2]=Math.min(an[2],ln[1],ln[3]),an[3]=Math.max(an[3],ln[1],ln[3]);return}this.updateRectMinMax(yt,ln)}getPathBoundingBox(){let yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.PathType.FILL,Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const St=[this.minX,this.minY,this.maxX,this.maxY];if(yt===j.PathType.STROKE){Et||(0,a.unreachable)("Stroke bounding box must include transform.");const Ft=a.Util.singularValueDecompose2dScale(Et),kt=Ft[0]*this.lineWidth/2,Ot=Ft[1]*this.lineWidth/2;St[0]-=kt,St[1]-=Ot,St[2]+=kt,St[3]+=Ot}return St}updateClipFromPath(){const yt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(yt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(yt){this.clipBox=yt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.PathType.FILL,Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return a.Util.intersect(this.clipBox,this.getPathBoundingBox(yt,Et))}}function xt(Ct,yt){if(typeof ImageData<"u"&&yt instanceof ImageData){Ct.putImageData(yt,0,0);return}const Et=yt.height,St=yt.width,Ft=Et%ct,kt=(Et-Ft)/ct,Ot=Ft===0?kt:kt+1,Gt=Ct.createImageData(St,ct);let Vt=0,rn;const an=yt.data,ln=Gt.data;let cn,dn,qt,sn;if(yt.kind===a.ImageKind.GRAYSCALE_1BPP){const It=an.byteLength,Ht=new Uint32Array(ln.buffer,0,ln.byteLength>>2),Qt=Ht.length,tn=St+7>>3,un=4294967295,mn=a.FeatureTest.isLittleEndian?4278190080:255;for(cn=0;cn<Ot;cn++){for(qt=cn<kt?ct:Ft,rn=0,dn=0;dn<qt;dn++){const vn=It-Vt;let Zt=0;const An=vn>tn?St:vn*8-7,En=An&-8;let Fn=0,Mn=0;for(;Zt<En;Zt+=8)Mn=an[Vt++],Ht[rn++]=Mn&128?un:mn,Ht[rn++]=Mn&64?un:mn,Ht[rn++]=Mn&32?un:mn,Ht[rn++]=Mn&16?un:mn,Ht[rn++]=Mn&8?un:mn,Ht[rn++]=Mn&4?un:mn,Ht[rn++]=Mn&2?un:mn,Ht[rn++]=Mn&1?un:mn;for(;Zt<An;Zt++)Fn===0&&(Mn=an[Vt++],Fn=128),Ht[rn++]=Mn&Fn?un:mn,Fn>>=1}for(;rn<Qt;)Ht[rn++]=0;Ct.putImageData(Gt,0,cn*ct)}}else if(yt.kind===a.ImageKind.RGBA_32BPP){for(dn=0,sn=St*ct*4,cn=0;cn<kt;cn++)ln.set(an.subarray(Vt,Vt+sn)),Vt+=sn,Ct.putImageData(Gt,0,dn),dn+=ct;cn<Ot&&(sn=St*Ft*4,ln.set(an.subarray(Vt,Vt+sn)),Ct.putImageData(Gt,0,dn))}else if(yt.kind===a.ImageKind.RGB_24BPP)for(qt=ct,sn=St*qt,cn=0;cn<Ot;cn++){for(cn>=kt&&(qt=Ft,sn=St*qt),rn=0,dn=sn;dn--;)ln[rn++]=an[Vt++],ln[rn++]=an[Vt++],ln[rn++]=an[Vt++],ln[rn++]=255;Ct.putImageData(Gt,0,cn*ct)}else throw new Error(`bad image kind: ${yt.kind}`)}function mt(Ct,yt){if(yt.bitmap){Ct.drawImage(yt.bitmap,0,0);return}const Et=yt.height,St=yt.width,Ft=Et%ct,kt=(Et-Ft)/ct,Ot=Ft===0?kt:kt+1,Gt=Ct.createImageData(St,ct);let Vt=0;const rn=yt.data,an=Gt.data;for(let ln=0;ln<Ot;ln++){const cn=ln<kt?ct:Ft;({srcPos:Vt}=(0,_e.convertBlackAndWhiteToRGBA)({src:rn,srcPos:Vt,dest:an,width:St,height:cn,nonBlackColor:0})),Ct.putImageData(Gt,0,ln*ct)}}function ft(Ct,yt){const Et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const St of Et)Ct[St]!==void 0&&(yt[St]=Ct[St]);Ct.setLineDash!==void 0&&(yt.setLineDash(Ct.getLineDash()),yt.lineDashOffset=Ct.lineDashOffset)}function gt(Ct){if(Ct.strokeStyle=Ct.fillStyle="#000000",Ct.fillRule="nonzero",Ct.globalAlpha=1,Ct.lineWidth=1,Ct.lineCap="butt",Ct.lineJoin="miter",Ct.miterLimit=10,Ct.globalCompositeOperation="source-over",Ct.font="10px sans-serif",Ct.setLineDash!==void 0&&(Ct.setLineDash([]),Ct.lineDashOffset=0),!a.isNodeJS){const{filter:yt}=Ct;yt!=="none"&&yt!==""&&(Ct.filter="none")}}function pt(Ct,yt,Et,St){const Ft=Ct.length;for(let kt=3;kt<Ft;kt+=4){const Ot=Ct[kt];if(Ot===0)Ct[kt-3]=yt,Ct[kt-2]=Et,Ct[kt-1]=St;else if(Ot<255){const Gt=255-Ot;Ct[kt-3]=Ct[kt-3]*Ot+yt*Gt>>8,Ct[kt-2]=Ct[kt-2]*Ot+Et*Gt>>8,Ct[kt-1]=Ct[kt-1]*Ot+St*Gt>>8}}}function vt(Ct,yt,Et){const St=Ct.length,Ft=1/255;for(let kt=3;kt<St;kt+=4){const Ot=Et?Et[Ct[kt]]:Ct[kt];yt[kt]=yt[kt]*Ot*Ft|0}}function At(Ct,yt,Et){const St=Ct.length;for(let Ft=3;Ft<St;Ft+=4){const kt=Ct[Ft-3]*77+Ct[Ft-2]*152+Ct[Ft-1]*28;yt[Ft]=Et?yt[Ft]*Et[kt>>8]>>8:yt[Ft]*kt>>16}}function Rt(Ct,yt,Et,St,Ft,kt,Ot,Gt,Vt,rn,an){const ln=!!kt,cn=ln?kt[0]:0,dn=ln?kt[1]:0,qt=ln?kt[2]:0,sn=Ft==="Luminosity"?At:vt,Ht=Math.min(St,Math.ceil(1048576/Et));for(let Qt=0;Qt<St;Qt+=Ht){const tn=Math.min(Ht,St-Qt),un=Ct.getImageData(Gt-rn,Qt+(Vt-an),Et,tn),mn=yt.getImageData(Gt,Qt+Vt,Et,tn);ln&&pt(un.data,cn,dn,qt),sn(un.data,mn.data,Ot),yt.putImageData(mn,Gt,Qt+Vt)}}function bt(Ct,yt,Et,St){const Ft=St[0],kt=St[1],Ot=St[2]-Ft,Gt=St[3]-kt;Ot===0||Gt===0||(Rt(yt.context,Et,Ot,Gt,yt.subtype,yt.backdrop,yt.transferMap,Ft,kt,yt.offsetX,yt.offsetY),Ct.save(),Ct.globalAlpha=1,Ct.globalCompositeOperation="source-over",Ct.setTransform(1,0,0,1,0,0),Ct.drawImage(Et.canvas,0,0),Ct.restore())}function Tt(Ct,yt){const Et=a.Util.singularValueDecompose2dScale(Ct);Et[0]=Math.fround(Et[0]),Et[1]=Math.fround(Et[1]);const St=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return yt!==void 0?yt:Et[0]<=St||Et[1]<=St}const Lt=["butt","round","square"],Yt=["miter","round","bevel"],zt={},Wt={},Xt=class Xt{constructor(yt,Et,St,Ft,kt,Ot,Gt,Vt){Dt(this,Ut);let{optionalContentConfig:rn,markedContentStack:an=null}=Ot;this.ctx=yt,this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Et,this.objs=St,this.canvasFactory=Ft,this.filterFactory=kt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=an||[],this.optionalContentConfig=rn,this.cachedCanvases=new ut(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Gt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Vt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(yt){let Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof yt=="string"?yt.startsWith("g_")?this.commonObjs.get(yt):this.objs.get(yt):Et}beginDrawing(yt){let{transform:Et,viewport:St,transparency:Ft=!1,background:kt=null}=yt;const Ot=this.ctx.canvas.width,Gt=this.ctx.canvas.height,Vt=this.ctx.fillStyle;if(this.ctx.fillStyle=kt||"#ffffff",this.ctx.fillRect(0,0,Ot,Gt),this.ctx.fillStyle=Vt,Ft){const rn=this.cachedCanvases.getCanvas("transparent",Ot,Gt);this.compositeCtx=this.ctx,this.transparentCanvas=rn.canvas,this.ctx=rn.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),Et&&(this.ctx.transform(...Et),this.outputScaleX=Et[0],this.outputScaleY=Et[0]),this.ctx.transform(...St.transform),this.viewportScale=St.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(yt,Et,St,Ft){const kt=yt.argsArray,Ot=yt.fnArray;let Gt=Et||0;const Vt=kt.length;if(Vt===Gt)return Gt;const rn=Vt-Gt>at&&typeof St=="function",an=rn?Date.now()+rt:0;let ln=0;const cn=this.commonObjs,dn=this.objs;let qt;for(;;){if(Ft!==void 0&&Gt===Ft.nextBreakPoint)return Ft.breakIt(Gt,St),Gt;if(qt=Ot[Gt],qt!==a.OPS.dependency)this[qt].apply(this,kt[Gt]);else for(const sn of kt[Gt]){const It=sn.startsWith("g_")?cn:dn;if(!It.has(sn))return It.get(sn,St),Gt}if(Gt++,Gt===Vt)return Gt;if(rn&&++ln>at){if(Date.now()>an)return St(),Gt;ln=0}}}endDrawing(){wt(this,Ut,Mx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const yt of this._cachedBitmapsMap.values()){for(const Et of yt.values())typeof HTMLCanvasElement<"u"&&Et instanceof HTMLCanvasElement&&(Et.width=Et.height=0);yt.clear()}this._cachedBitmapsMap.clear(),wt(this,Ut,Dx).call(this)}_scaleImage(yt,Et){const St=yt.width,Ft=yt.height;let kt=Math.max(Math.hypot(Et[0],Et[1]),1),Ot=Math.max(Math.hypot(Et[2],Et[3]),1),Gt=St,Vt=Ft,rn="prescale1",an,ln;for(;kt>2&&Gt>1||Ot>2&&Vt>1;){let cn=Gt,dn=Vt;kt>2&&Gt>1&&(cn=Gt>=16384?Math.floor(Gt/2)-1||1:Math.ceil(Gt/2),kt/=Gt/cn),Ot>2&&Vt>1&&(dn=Vt>=16384?Math.floor(Vt/2)-1||1:Math.ceil(Vt)/2,Ot/=Vt/dn),an=this.cachedCanvases.getCanvas(rn,cn,dn),ln=an.context,ln.clearRect(0,0,cn,dn),ln.drawImage(yt,0,0,Gt,Vt,0,0,cn,dn),yt=an.canvas,Gt=cn,Vt=dn,rn=rn==="prescale1"?"prescale2":"prescale1"}return{img:yt,paintWidth:Gt,paintHeight:Vt}}_createMaskCanvas(yt){const Et=this.ctx,{width:St,height:Ft}=yt,kt=this.current.fillColor,Ot=this.current.patternFill,Gt=(0,o.getCurrentTransform)(Et);let Vt,rn,an,ln;if((yt.bitmap||yt.data)&&yt.count>1){const Zt=yt.bitmap||yt.data.buffer;rn=JSON.stringify(Ot?Gt:[Gt.slice(0,4),kt]),Vt=this._cachedBitmapsMap.get(Zt),Vt||(Vt=new Map,this._cachedBitmapsMap.set(Zt,Vt));const An=Vt.get(rn);if(An&&!Ot){const En=Math.round(Math.min(Gt[0],Gt[2])+Gt[4]),Fn=Math.round(Math.min(Gt[1],Gt[3])+Gt[5]);return{canvas:An,offsetX:En,offsetY:Fn}}an=An}an||(ln=this.cachedCanvases.getCanvas("maskCanvas",St,Ft),mt(ln.context,yt));let cn=a.Util.transform(Gt,[1/St,0,0,-1/Ft,0,0]);cn=a.Util.transform(cn,[1,0,0,1,0,-Ft]);const dn=a.Util.applyTransform([0,0],cn),qt=a.Util.applyTransform([St,Ft],cn),sn=a.Util.normalizeRect([dn[0],dn[1],qt[0],qt[1]]),It=Math.round(sn[2]-sn[0])||1,Ht=Math.round(sn[3]-sn[1])||1,Qt=this.cachedCanvases.getCanvas("fillCanvas",It,Ht),tn=Qt.context,un=Math.min(dn[0],qt[0]),mn=Math.min(dn[1],qt[1]);tn.translate(-un,-mn),tn.transform(...cn),an||(an=this._scaleImage(ln.canvas,(0,o.getCurrentTransformInverse)(tn)),an=an.img,Vt&&Ot&&Vt.set(rn,an)),tn.imageSmoothingEnabled=Tt((0,o.getCurrentTransform)(tn),yt.interpolate),dt(tn,an,0,0,an.width,an.height,0,0,St,Ft),tn.globalCompositeOperation="source-in";const vn=a.Util.transform((0,o.getCurrentTransformInverse)(tn),[1,0,0,1,-un,-mn]);return tn.fillStyle=Ot?kt.getPattern(Et,this,vn,j.PathType.FILL):kt,tn.fillRect(0,0,St,Ft),Vt&&!Ot&&(this.cachedCanvases.delete("fillCanvas"),Vt.set(rn,Qt.canvas)),{canvas:Qt.canvas,offsetX:Math.round(un),offsetY:Math.round(mn)}}setLineWidth(yt){yt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=yt,this.ctx.lineWidth=yt}setLineCap(yt){this.ctx.lineCap=Lt[yt]}setLineJoin(yt){this.ctx.lineJoin=Yt[yt]}setMiterLimit(yt){this.ctx.miterLimit=yt}setDash(yt,Et){const St=this.ctx;St.setLineDash!==void 0&&(St.setLineDash(yt),St.lineDashOffset=Et)}setRenderingIntent(yt){}setFlatness(yt){}setGState(yt){for(const[Et,St]of yt)switch(Et){case"LW":this.setLineWidth(St);break;case"LC":this.setLineCap(St);break;case"LJ":this.setLineJoin(St);break;case"ML":this.setMiterLimit(St);break;case"D":this.setDash(St[0],St[1]);break;case"RI":this.setRenderingIntent(St);break;case"FL":this.setFlatness(St);break;case"Font":this.setFont(St[0],St[1]);break;case"CA":this.current.strokeAlpha=St;break;case"ca":this.current.fillAlpha=St,this.ctx.globalAlpha=St;break;case"BM":this.ctx.globalCompositeOperation=St;break;case"SMask":this.current.activeSMask=St?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(St);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const yt=this.inSMaskMode;this.current.activeSMask&&!yt?this.beginSMaskMode():!this.current.activeSMask&&yt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const yt=this.ctx.canvas.width,Et=this.ctx.canvas.height,St="smaskGroupAt"+this.groupLevel,Ft=this.cachedCanvases.getCanvas(St,yt,Et);this.suspendedCtx=this.ctx,this.ctx=Ft.context;const kt=this.ctx;kt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,kt),ot(kt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(yt){if(!this.current.activeSMask)return;yt?(yt[0]=Math.floor(yt[0]),yt[1]=Math.floor(yt[1]),yt[2]=Math.ceil(yt[2]),yt[3]=Math.ceil(yt[3])):yt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Et=this.current.activeSMask,St=this.suspendedCtx;bt(St,Et,this.ctx,yt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const yt=this.current;this.stateStack.push(yt),this.current=yt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(yt,Et,St,Ft,kt,Ot){this.ctx.transform(yt,Et,St,Ft,kt,Ot),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(yt,Et,St){const Ft=this.ctx,kt=this.current;let Ot=kt.x,Gt=kt.y,Vt,rn;const an=(0,o.getCurrentTransform)(Ft),ln=an[0]===0&&an[3]===0||an[1]===0&&an[2]===0,cn=ln?St.slice(0):null;for(let dn=0,qt=0,sn=yt.length;dn<sn;dn++)switch(yt[dn]|0){case a.OPS.rectangle:Ot=Et[qt++],Gt=Et[qt++];const It=Et[qt++],Ht=Et[qt++],Qt=Ot+It,tn=Gt+Ht;Ft.moveTo(Ot,Gt),It===0||Ht===0?Ft.lineTo(Qt,tn):(Ft.lineTo(Qt,Gt),Ft.lineTo(Qt,tn),Ft.lineTo(Ot,tn)),ln||kt.updateRectMinMax(an,[Ot,Gt,Qt,tn]),Ft.closePath();break;case a.OPS.moveTo:Ot=Et[qt++],Gt=Et[qt++],Ft.moveTo(Ot,Gt),ln||kt.updatePathMinMax(an,Ot,Gt);break;case a.OPS.lineTo:Ot=Et[qt++],Gt=Et[qt++],Ft.lineTo(Ot,Gt),ln||kt.updatePathMinMax(an,Ot,Gt);break;case a.OPS.curveTo:Vt=Ot,rn=Gt,Ot=Et[qt+4],Gt=Et[qt+5],Ft.bezierCurveTo(Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],Ot,Gt),kt.updateCurvePathMinMax(an,Vt,rn,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],Ot,Gt,cn),qt+=6;break;case a.OPS.curveTo2:Vt=Ot,rn=Gt,Ft.bezierCurveTo(Ot,Gt,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3]),kt.updateCurvePathMinMax(an,Vt,rn,Ot,Gt,Et[qt],Et[qt+1],Et[qt+2],Et[qt+3],cn),Ot=Et[qt+2],Gt=Et[qt+3],qt+=4;break;case a.OPS.curveTo3:Vt=Ot,rn=Gt,Ot=Et[qt+2],Gt=Et[qt+3],Ft.bezierCurveTo(Et[qt],Et[qt+1],Ot,Gt,Ot,Gt),kt.updateCurvePathMinMax(an,Vt,rn,Et[qt],Et[qt+1],Ot,Gt,Ot,Gt,cn),qt+=4;break;case a.OPS.closePath:Ft.closePath();break}ln&&kt.updateScalingPathMinMax(an,cn),kt.setCurrentPoint(Ot,Gt)}closePath(){this.ctx.closePath()}stroke(){let yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Et=this.ctx,St=this.current.strokeColor;Et.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof St=="object"&&(St!=null&&St.getPattern)?(Et.save(),Et.strokeStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.STROKE),this.rescaleAndStroke(!1),Et.restore()):this.rescaleAndStroke(!0)),yt&&this.consumePath(this.current.getClippedPathBoundingBox()),Et.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Et=this.ctx,St=this.current.fillColor,Ft=this.current.patternFill;let kt=!1;Ft&&(Et.save(),Et.fillStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.FILL),kt=!0);const Ot=this.current.getClippedPathBoundingBox();this.contentVisible&&Ot!==null&&(this.pendingEOFill?(Et.fill("evenodd"),this.pendingEOFill=!1):Et.fill()),kt&&Et.restore(),yt&&this.consumePath(Ot)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=zt}eoClip(){this.pendingClip=Wt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const yt=this.pendingTextPaths,Et=this.ctx;if(yt===void 0){Et.beginPath();return}Et.save(),Et.beginPath();for(const St of yt)Et.setTransform(...St.transform),Et.translate(St.x,St.y),St.addToPath(Et,St.fontSize);Et.restore(),Et.clip(),Et.beginPath(),delete this.pendingTextPaths}setCharSpacing(yt){this.current.charSpacing=yt}setWordSpacing(yt){this.current.wordSpacing=yt}setHScale(yt){this.current.textHScale=yt/100}setLeading(yt){this.current.leading=-yt}setFont(yt,Et){var an;const St=this.commonObjs.get(yt),Ft=this.current;if(!St)throw new Error(`Can't find font for ${yt}`);if(Ft.fontMatrix=St.fontMatrix||a.FONT_IDENTITY_MATRIX,(Ft.fontMatrix[0]===0||Ft.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+yt),Et<0?(Et=-Et,Ft.fontDirection=-1):Ft.fontDirection=1,this.current.font=St,this.current.fontSize=Et,St.isType3Font)return;const kt=St.loadedName||"sans-serif",Ot=((an=St.systemFontInfo)==null?void 0:an.css)||`"${kt}", ${St.fallbackName}`;let Gt="normal";St.black?Gt="900":St.bold&&(Gt="bold");const Vt=St.italic?"italic":"normal";let rn=Et;Et<nt?rn=nt:Et>tt&&(rn=tt),this.current.fontSizeScale=Et/rn,this.ctx.font=`${Vt} ${Gt} ${rn}px ${Ot}`}setTextRenderingMode(yt){this.current.textRenderingMode=yt}setTextRise(yt){this.current.textRise=yt}moveText(yt,Et){this.current.x=this.current.lineX+=yt,this.current.y=this.current.lineY+=Et}setLeadingMoveText(yt,Et){this.setLeading(-Et),this.moveText(yt,Et)}setTextMatrix(yt,Et,St,Ft,kt,Ot){this.current.textMatrix=[yt,Et,St,Ft,kt,Ot],this.current.textMatrixScale=Math.hypot(yt,Et),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(yt,Et,St,Ft){const kt=this.ctx,Ot=this.current,Gt=Ot.font,Vt=Ot.textRenderingMode,rn=Ot.fontSize/Ot.fontSizeScale,an=Vt&a.TextRenderingMode.FILL_STROKE_MASK,ln=!!(Vt&a.TextRenderingMode.ADD_TO_PATH_FLAG),cn=Ot.patternFill&&!Gt.missingFile;let dn;(Gt.disableFontFace||ln||cn)&&(dn=Gt.getPathGenerator(this.commonObjs,yt)),Gt.disableFontFace||cn?(kt.save(),kt.translate(Et,St),kt.beginPath(),dn(kt,rn),Ft&&kt.setTransform(...Ft),(an===a.TextRenderingMode.FILL||an===a.TextRenderingMode.FILL_STROKE)&&kt.fill(),(an===a.TextRenderingMode.STROKE||an===a.TextRenderingMode.FILL_STROKE)&&kt.stroke(),kt.restore()):((an===a.TextRenderingMode.FILL||an===a.TextRenderingMode.FILL_STROKE)&&kt.fillText(yt,Et,St),(an===a.TextRenderingMode.STROKE||an===a.TextRenderingMode.FILL_STROKE)&&kt.strokeText(yt,Et,St)),ln&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(kt),x:Et,y:St,fontSize:rn,addToPath:dn})}get isFontSubpixelAAEnabled(){const{context:yt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);yt.scale(1.5,1),yt.fillText("I",0,10);const Et=yt.getImageData(0,0,10,10).data;let St=!1;for(let Ft=3;Ft<Et.length;Ft+=4)if(Et[Ft]>0&&Et[Ft]<255){St=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",St)}showText(yt){const Et=this.current,St=Et.font;if(St.isType3Font)return this.showType3Text(yt);const Ft=Et.fontSize;if(Ft===0)return;const kt=this.ctx,Ot=Et.fontSizeScale,Gt=Et.charSpacing,Vt=Et.wordSpacing,rn=Et.fontDirection,an=Et.textHScale*rn,ln=yt.length,cn=St.vertical,dn=cn?1:-1,qt=St.defaultVMetrics,sn=Ft*Et.fontMatrix[0],It=Et.textRenderingMode===a.TextRenderingMode.FILL&&!St.disableFontFace&&!Et.patternFill;kt.save(),kt.transform(...Et.textMatrix),kt.translate(Et.x,Et.y+Et.textRise),rn>0?kt.scale(an,-1):kt.scale(an,1);let Ht;if(Et.patternFill){kt.save();const vn=Et.fillColor.getPattern(kt,this,(0,o.getCurrentTransformInverse)(kt),j.PathType.FILL);Ht=(0,o.getCurrentTransform)(kt),kt.restore(),kt.fillStyle=vn}let Qt=Et.lineWidth;const tn=Et.textMatrixScale;if(tn===0||Qt===0){const vn=Et.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(vn===a.TextRenderingMode.STROKE||vn===a.TextRenderingMode.FILL_STROKE)&&(Qt=this.getSinglePixelWidth())}else Qt/=tn;if(Ot!==1&&(kt.scale(Ot,Ot),Qt/=Ot),kt.lineWidth=Qt,St.isInvalidPDFjsFont){const vn=[];let Zt=0;for(const An of yt)vn.push(An.unicode),Zt+=An.width;kt.fillText(vn.join(""),0,0),Et.x+=Zt*sn*an,kt.restore(),this.compose();return}let un=0,mn;for(mn=0;mn<ln;++mn){const vn=yt[mn];if(typeof vn=="number"){un+=dn*vn*Ft/1e3;continue}let Zt=!1;const An=(vn.isSpace?Vt:0)+Gt,En=vn.fontChar,Fn=vn.accent;let Mn,Bn,wn=vn.width;if(cn){const Un=vn.vmetric||qt,Wn=-(vn.vmetric?Un[1]:wn*.5)*sn,Tn=Un[2]*sn;wn=Un?-Un[0]:wn,Mn=Wn/Ot,Bn=(un+Tn)/Ot}else Mn=un/Ot,Bn=0;if(St.remeasure&&wn>0){const Un=kt.measureText(En).width*1e3/Ft*Ot;if(wn<Un&&this.isFontSubpixelAAEnabled){const Wn=wn/Un;Zt=!0,kt.save(),kt.scale(Wn,1),Mn/=Wn}else wn!==Un&&(Mn+=(wn-Un)/2e3*Ft/Ot)}if(this.contentVisible&&(vn.isInFont||St.missingFile)){if(It&&!Fn)kt.fillText(En,Mn,Bn);else if(this.paintChar(En,Mn,Bn,Ht),Fn){const Un=Mn+Ft*Fn.offset.x/Ot,Wn=Bn-Ft*Fn.offset.y/Ot;this.paintChar(Fn.fontChar,Un,Wn,Ht)}}const Dn=cn?wn*sn-An*rn:wn*sn+An*rn;un+=Dn,Zt&&kt.restore()}cn?Et.y-=un:Et.x+=un*an,kt.restore(),this.compose()}showType3Text(yt){const Et=this.ctx,St=this.current,Ft=St.font,kt=St.fontSize,Ot=St.fontDirection,Gt=Ft.vertical?1:-1,Vt=St.charSpacing,rn=St.wordSpacing,an=St.textHScale*Ot,ln=St.fontMatrix||a.FONT_IDENTITY_MATRIX,cn=yt.length,dn=St.textRenderingMode===a.TextRenderingMode.INVISIBLE;let qt,sn,It,Ht;if(!(dn||kt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Et.save(),Et.transform(...St.textMatrix),Et.translate(St.x,St.y),Et.scale(an,Ot),qt=0;qt<cn;++qt){if(sn=yt[qt],typeof sn=="number"){Ht=Gt*sn*kt/1e3,this.ctx.translate(Ht,0),St.x+=Ht*an;continue}const Qt=(sn.isSpace?rn:0)+Vt,tn=Ft.charProcOperatorList[sn.operatorListId];if(!tn){(0,a.warn)(`Type3 character "${sn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=sn,this.save(),Et.scale(kt,kt),Et.transform(...ln),this.executeOperatorList(tn),this.restore()),It=a.Util.applyTransform([sn.width,0],ln)[0]*kt+Qt,Et.translate(It,0),St.x+=It*an}Et.restore(),this.processingType3=null}}setCharWidth(yt,Et){}setCharWidthAndBounds(yt,Et,St,Ft,kt,Ot){this.ctx.rect(St,Ft,kt-St,Ot-Ft),this.ctx.clip(),this.endPath()}getColorN_Pattern(yt){let Et;if(yt[0]==="TilingPattern"){const St=yt[1],Ft=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),kt={createCanvasGraphics:Ot=>new Xt(Ot,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Et=new j.TilingPattern(yt,St,this.ctx,kt,Ft)}else Et=this._getPattern(yt[1],yt[2]);return Et}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(yt,Et,St){const Ft=a.Util.makeHexColor(yt,Et,St);this.ctx.strokeStyle=Ft,this.current.strokeColor=Ft}setFillRGBColor(yt,Et,St){const Ft=a.Util.makeHexColor(yt,Et,St);this.ctx.fillStyle=Ft,this.current.fillColor=Ft,this.current.patternFill=!1}_getPattern(yt){let Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,St;return this.cachedPatterns.has(yt)?St=this.cachedPatterns.get(yt):(St=(0,j.getShadingPattern)(this.getObject(yt)),this.cachedPatterns.set(yt,St)),Et&&(St.matrix=Et),St}shadingFill(yt){if(!this.contentVisible)return;const Et=this.ctx;this.save();const St=this._getPattern(yt);Et.fillStyle=St.getPattern(Et,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.SHADING);const Ft=(0,o.getCurrentTransformInverse)(Et);if(Ft){const{width:kt,height:Ot}=Et.canvas,[Gt,Vt,rn,an]=a.Util.getAxialAlignedBoundingBox([0,0,kt,Ot],Ft);this.ctx.fillRect(Gt,Vt,rn-Gt,an-Vt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(yt,Et){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(yt)&&yt.length===6&&this.transform(...yt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),Et)){const St=Et[2]-Et[0],Ft=Et[3]-Et[1];this.ctx.rect(Et[0],Et[1],St,Ft),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),Et),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(yt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Et=this.ctx;yt.isolated||(0,a.info)("TODO: Support non-isolated groups."),yt.knockout&&(0,a.warn)("Knockout groups not supported.");const St=(0,o.getCurrentTransform)(Et);if(yt.matrix&&Et.transform(...yt.matrix),!yt.bbox)throw new Error("Bounding box is required.");let Ft=a.Util.getAxialAlignedBoundingBox(yt.bbox,(0,o.getCurrentTransform)(Et));const kt=[0,0,Et.canvas.width,Et.canvas.height];Ft=a.Util.intersect(Ft,kt)||[0,0,0,0];const Ot=Math.floor(Ft[0]),Gt=Math.floor(Ft[1]);let Vt=Math.max(Math.ceil(Ft[2])-Ot,1),rn=Math.max(Math.ceil(Ft[3])-Gt,1),an=1,ln=1;Vt>st&&(an=Vt/st,Vt=st),rn>st&&(ln=rn/st,rn=st),this.current.startNewPathAndClipBox([0,0,Vt,rn]);let cn="groupAt"+this.groupLevel;yt.smask&&(cn+="_smask_"+this.smaskCounter++%2);const dn=this.cachedCanvases.getCanvas(cn,Vt,rn),qt=dn.context;qt.scale(1/an,1/ln),qt.translate(-Ot,-Gt),qt.transform(...St),yt.smask?this.smaskStack.push({canvas:dn.canvas,context:qt,offsetX:Ot,offsetY:Gt,scaleX:an,scaleY:ln,subtype:yt.smask.subtype,backdrop:yt.smask.backdrop,transferMap:yt.smask.transferMap||null,startTransformInverse:null}):(Et.setTransform(1,0,0,1,0,0),Et.translate(Ot,Gt),Et.scale(an,ln),Et.save()),ft(Et,qt),this.ctx=qt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Et),this.groupLevel++}endGroup(yt){if(!this.contentVisible)return;this.groupLevel--;const Et=this.ctx,St=this.groupStack.pop();if(this.ctx=St,this.ctx.imageSmoothingEnabled=!1,yt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Ft=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Ft);const kt=a.Util.getAxialAlignedBoundingBox([0,0,Et.canvas.width,Et.canvas.height],Ft);this.ctx.drawImage(Et.canvas,0,0),this.ctx.restore(),this.compose(kt)}}beginAnnotation(yt,Et,St,Ft,kt){if(wt(this,Ut,Mx).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Et)&&Et.length===4){const Ot=Et[2]-Et[0],Gt=Et[3]-Et[1];if(kt&&this.annotationCanvasMap){St=St.slice(),St[4]-=Et[0],St[5]-=Et[1],Et=Et.slice(),Et[0]=Et[1]=0,Et[2]=Ot,Et[3]=Gt;const[Vt,rn]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:an}=this,ln=Math.ceil(Ot*this.outputScaleX*an),cn=Math.ceil(Gt*this.outputScaleY*an);this.annotationCanvas=this.canvasFactory.create(ln,cn);const{canvas:dn,context:qt}=this.annotationCanvas;this.annotationCanvasMap.set(yt,dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=qt,this.ctx.save(),this.ctx.setTransform(Vt,0,0,-rn,0,Gt*rn),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(Et[0],Et[1],Ot,Gt),this.ctx.clip(),this.endPath()}this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...St),this.transform(...Ft)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),wt(this,Ut,Dx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(yt){if(!this.contentVisible)return;const Et=yt.count;yt=this.getObject(yt.data,yt),yt.count=Et;const St=this.ctx,Ft=this.processingType3;if(Ft&&(Ft.compiled===void 0&&(Ft.compiled=lt(yt)),Ft.compiled)){Ft.compiled(St);return}const kt=this._createMaskCanvas(yt),Ot=kt.canvas;St.save(),St.setTransform(1,0,0,1,0,0),St.drawImage(Ot,kt.offsetX,kt.offsetY),St.restore(),this.compose()}paintImageMaskXObjectRepeat(yt,Et){let St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ft=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,kt=arguments.length>4?arguments[4]:void 0,Ot=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;yt=this.getObject(yt.data,yt);const Gt=this.ctx;Gt.save();const Vt=(0,o.getCurrentTransform)(Gt);Gt.transform(Et,St,Ft,kt,0,0);const rn=this._createMaskCanvas(yt);Gt.setTransform(1,0,0,1,rn.offsetX-Vt[4],rn.offsetY-Vt[5]);for(let an=0,ln=Ot.length;an<ln;an+=2){const cn=a.Util.transform(Vt,[Et,St,Ft,kt,Ot[an],Ot[an+1]]),[dn,qt]=a.Util.applyTransform([0,0],cn);Gt.drawImage(rn.canvas,dn,qt)}Gt.restore(),this.compose()}paintImageMaskXObjectGroup(yt){if(!this.contentVisible)return;const Et=this.ctx,St=this.current.fillColor,Ft=this.current.patternFill;for(const kt of yt){const{data:Ot,width:Gt,height:Vt,transform:rn}=kt,an=this.cachedCanvases.getCanvas("maskCanvas",Gt,Vt),ln=an.context;ln.save();const cn=this.getObject(Ot,kt);mt(ln,cn),ln.globalCompositeOperation="source-in",ln.fillStyle=Ft?St.getPattern(ln,this,(0,o.getCurrentTransformInverse)(Et),j.PathType.FILL):St,ln.fillRect(0,0,Gt,Vt),ln.restore(),Et.save(),Et.transform(...rn),Et.scale(1,-1),dt(Et,an.canvas,0,0,Gt,Vt,0,-1,1,1),Et.restore()}this.compose()}paintImageXObject(yt){if(!this.contentVisible)return;const Et=this.getObject(yt);if(!Et){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Et)}paintImageXObjectRepeat(yt,Et,St,Ft){if(!this.contentVisible)return;const kt=this.getObject(yt);if(!kt){(0,a.warn)("Dependent image isn't ready yet");return}const Ot=kt.width,Gt=kt.height,Vt=[];for(let rn=0,an=Ft.length;rn<an;rn+=2)Vt.push({transform:[Et,0,0,St,Ft[rn],Ft[rn+1]],x:0,y:0,w:Ot,h:Gt});this.paintInlineImageXObjectGroup(kt,Vt)}applyTransferMapsToCanvas(yt){return this.current.transferMaps!=="none"&&(yt.filter=this.current.transferMaps,yt.drawImage(yt.canvas,0,0),yt.filter="none"),yt.canvas}applyTransferMapsToBitmap(yt){if(this.current.transferMaps==="none")return yt.bitmap;const{bitmap:Et,width:St,height:Ft}=yt,kt=this.cachedCanvases.getCanvas("inlineImage",St,Ft),Ot=kt.context;return Ot.filter=this.current.transferMaps,Ot.drawImage(Et,0,0),Ot.filter="none",kt.canvas}paintInlineImageXObject(yt){if(!this.contentVisible)return;const Et=yt.width,St=yt.height,Ft=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Gt}=Ft;Gt!=="none"&&Gt!==""&&(Ft.filter="none")}Ft.scale(1/Et,-1/St);let kt;if(yt.bitmap)kt=this.applyTransferMapsToBitmap(yt);else if(typeof HTMLElement=="function"&&yt instanceof HTMLElement||!yt.data)kt=yt;else{const Vt=this.cachedCanvases.getCanvas("inlineImage",Et,St).context;xt(Vt,yt),kt=this.applyTransferMapsToCanvas(Vt)}const Ot=this._scaleImage(kt,(0,o.getCurrentTransformInverse)(Ft));Ft.imageSmoothingEnabled=Tt((0,o.getCurrentTransform)(Ft),yt.interpolate),dt(Ft,Ot.img,0,0,Ot.paintWidth,Ot.paintHeight,0,-St,Et,St),this.compose(),this.restore()}paintInlineImageXObjectGroup(yt,Et){if(!this.contentVisible)return;const St=this.ctx;let Ft;if(yt.bitmap)Ft=yt.bitmap;else{const kt=yt.width,Ot=yt.height,Vt=this.cachedCanvases.getCanvas("inlineImage",kt,Ot).context;xt(Vt,yt),Ft=this.applyTransferMapsToCanvas(Vt)}for(const kt of Et)St.save(),St.transform(...kt.transform),St.scale(1,-1),dt(St,Ft,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),St.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(yt){}markPointProps(yt,Et){}beginMarkedContent(yt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(yt,Et){yt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Et)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(yt){const Et=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(yt);const St=this.ctx;this.pendingClip&&(Et||(this.pendingClip===Wt?St.clip("evenodd"):St.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),St.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const yt=(0,o.getCurrentTransform)(this.ctx);if(yt[1]===0&&yt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(yt[0]),Math.abs(yt[3]));else{const Et=Math.abs(yt[0]*yt[3]-yt[2]*yt[1]),St=Math.hypot(yt[0],yt[2]),Ft=Math.hypot(yt[1],yt[3]);this._cachedGetSinglePixelWidth=Math.max(St,Ft)/Et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:yt}=this.current,{a:Et,b:St,c:Ft,d:kt}=this.ctx.getTransform();let Ot,Gt;if(St===0&&Ft===0){const Vt=Math.abs(Et),rn=Math.abs(kt);if(Vt===rn)if(yt===0)Ot=Gt=1/Vt;else{const an=Vt*yt;Ot=Gt=an<1?1/an:1}else if(yt===0)Ot=1/Vt,Gt=1/rn;else{const an=Vt*yt,ln=rn*yt;Ot=an<1?1/an:1,Gt=ln<1?1/ln:1}}else{const Vt=Math.abs(Et*kt-St*Ft),rn=Math.hypot(Et,St),an=Math.hypot(Ft,kt);if(yt===0)Ot=an/Vt,Gt=rn/Vt;else{const ln=yt*Vt;Ot=an>ln?an/ln:1,Gt=rn>ln?rn/ln:1}}this._cachedScaleForStroking[0]=Ot,this._cachedScaleForStroking[1]=Gt}return this._cachedScaleForStroking}rescaleAndStroke(yt){const{ctx:Et}=this,{lineWidth:St}=this.current,[Ft,kt]=this.getScaleForStroking();if(Et.lineWidth=St||1,Ft===1&&kt===1){Et.stroke();return}const Ot=Et.getLineDash();if(yt&&Et.save(),Et.scale(Ft,kt),Ot.length>0){const Gt=Math.max(Ft,kt);Et.setLineDash(Ot.map(Vt=>Vt/Gt)),Et.lineDashOffset/=Gt}Et.stroke(),yt&&Et.restore()}isContentVisible(){for(let yt=this.markedContentStack.length-1;yt>=0;yt--)if(!this.markedContentStack[yt].visible)return!1;return!0}};Ut=new WeakSet,Mx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Dx=function(){if(this.pageColors){const yt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(yt!=="none"){const Et=this.ctx.filter;this.ctx.filter=yt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Et}}};let Bt=Xt;e.CanvasGraphics=Bt;for(const Ct in a.OPS)Bt.prototype[Ct]!==void 0&&(Bt.prototype[a.OPS[Ct]]=Bt.prototype[Ct])},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=ct,s(2);var a=s(1),o=s(168);const j={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=j;function _e(lt,ht){if(!ht)return;const xt=ht[2]-ht[0],mt=ht[3]-ht[1],ft=new Path2D;ft.rect(ht[0],ht[1],xt,mt),lt.clip(ft)}class nt{constructor(){this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class tt extends nt{constructor(ht){super(),this._type=ht[1],this._bbox=ht[2],this._colorStops=ht[3],this._p0=ht[4],this._p1=ht[5],this._r0=ht[6],this._r1=ht[7],this.matrix=null}_createGradient(ht){let xt;this._type==="axial"?xt=ht.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(xt=ht.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const mt of this._colorStops)xt.addColorStop(mt[0],mt[1]);return xt}getPattern(ht,xt,mt,ft){let gt;if(ft===j.STROKE||ft===j.FILL){const pt=xt.current.getClippedPathBoundingBox(ft,(0,o.getCurrentTransform)(ht))||[0,0,0,0],vt=Math.ceil(pt[2]-pt[0])||1,At=Math.ceil(pt[3]-pt[1])||1,Rt=xt.cachedCanvases.getCanvas("pattern",vt,At,!0),bt=Rt.context;bt.clearRect(0,0,bt.canvas.width,bt.canvas.height),bt.beginPath(),bt.rect(0,0,bt.canvas.width,bt.canvas.height),bt.translate(-pt[0],-pt[1]),mt=a.Util.transform(mt,[1,0,0,1,pt[0],pt[1]]),bt.transform(...xt.baseTransform),this.matrix&&bt.transform(...this.matrix),_e(bt,this._bbox),bt.fillStyle=this._createGradient(bt),bt.fill(),gt=ht.createPattern(Rt.canvas,"no-repeat");const Tt=new DOMMatrix(mt);gt.setTransform(Tt)}else _e(ht,this._bbox),gt=this._createGradient(ht);return gt}}function st(lt,ht,xt,mt,ft,gt,pt,vt){const At=ht.coords,Rt=ht.colors,bt=lt.data,Tt=lt.width*4;let Lt;At[xt+1]>At[mt+1]&&(Lt=xt,xt=mt,mt=Lt,Lt=gt,gt=pt,pt=Lt),At[mt+1]>At[ft+1]&&(Lt=mt,mt=ft,ft=Lt,Lt=pt,pt=vt,vt=Lt),At[xt+1]>At[mt+1]&&(Lt=xt,xt=mt,mt=Lt,Lt=gt,gt=pt,pt=Lt);const Yt=(At[xt]+ht.offsetX)*ht.scaleX,zt=(At[xt+1]+ht.offsetY)*ht.scaleY,Wt=(At[mt]+ht.offsetX)*ht.scaleX,Bt=(At[mt+1]+ht.offsetY)*ht.scaleY,Ut=(At[ft]+ht.offsetX)*ht.scaleX,_t=(At[ft+1]+ht.offsetY)*ht.scaleY;if(zt>=_t)return;const $t=Rt[gt],Xt=Rt[gt+1],Ct=Rt[gt+2],yt=Rt[pt],Et=Rt[pt+1],St=Rt[pt+2],Ft=Rt[vt],kt=Rt[vt+1],Ot=Rt[vt+2],Gt=Math.round(zt),Vt=Math.round(_t);let rn,an,ln,cn,dn,qt,sn,It;for(let Ht=Gt;Ht<=Vt;Ht++){if(Ht<Bt){const vn=Ht<zt?0:(zt-Ht)/(zt-Bt);rn=Yt-(Yt-Wt)*vn,an=$t-($t-yt)*vn,ln=Xt-(Xt-Et)*vn,cn=Ct-(Ct-St)*vn}else{let vn;Ht>_t?vn=1:Bt===_t?vn=0:vn=(Bt-Ht)/(Bt-_t),rn=Wt-(Wt-Ut)*vn,an=yt-(yt-Ft)*vn,ln=Et-(Et-kt)*vn,cn=St-(St-Ot)*vn}let Qt;Ht<zt?Qt=0:Ht>_t?Qt=1:Qt=(zt-Ht)/(zt-_t),dn=Yt-(Yt-Ut)*Qt,qt=$t-($t-Ft)*Qt,sn=Xt-(Xt-kt)*Qt,It=Ct-(Ct-Ot)*Qt;const tn=Math.round(Math.min(rn,dn)),un=Math.round(Math.max(rn,dn));let mn=Tt*Ht+tn*4;for(let vn=tn;vn<=un;vn++)Qt=(rn-vn)/(rn-dn),Qt<0?Qt=0:Qt>1&&(Qt=1),bt[mn++]=an-(an-qt)*Qt|0,bt[mn++]=ln-(ln-sn)*Qt|0,bt[mn++]=cn-(cn-It)*Qt|0,bt[mn++]=255}}function rt(lt,ht,xt){const mt=ht.coords,ft=ht.colors;let gt,pt;switch(ht.type){case"lattice":const vt=ht.verticesPerRow,At=Math.floor(mt.length/vt)-1,Rt=vt-1;for(gt=0;gt<At;gt++){let bt=gt*vt;for(let Tt=0;Tt<Rt;Tt++,bt++)st(lt,xt,mt[bt],mt[bt+1],mt[bt+vt],ft[bt],ft[bt+1],ft[bt+vt]),st(lt,xt,mt[bt+vt+1],mt[bt+1],mt[bt+vt],ft[bt+vt+1],ft[bt+1],ft[bt+vt])}break;case"triangles":for(gt=0,pt=mt.length;gt<pt;gt+=3)st(lt,xt,mt[gt],mt[gt+1],mt[gt+2],ft[gt],ft[gt+1],ft[gt+2]);break;default:throw new Error("illegal figure")}}class at extends nt{constructor(ht){super(),this._coords=ht[2],this._colors=ht[3],this._figures=ht[4],this._bounds=ht[5],this._bbox=ht[7],this._background=ht[8],this.matrix=null}_createMeshCanvas(ht,xt,mt){const vt=Math.floor(this._bounds[0]),At=Math.floor(this._bounds[1]),Rt=Math.ceil(this._bounds[2])-vt,bt=Math.ceil(this._bounds[3])-At,Tt=Math.min(Math.ceil(Math.abs(Rt*ht[0]*1.1)),3e3),Lt=Math.min(Math.ceil(Math.abs(bt*ht[1]*1.1)),3e3),Yt=Rt/Tt,zt=bt/Lt,Wt={coords:this._coords,colors:this._colors,offsetX:-vt,offsetY:-At,scaleX:1/Yt,scaleY:1/zt},Bt=Tt+2*2,Ut=Lt+2*2,_t=mt.getCanvas("mesh",Bt,Ut,!1),$t=_t.context,Xt=$t.createImageData(Tt,Lt);if(xt){const yt=Xt.data;for(let Et=0,St=yt.length;Et<St;Et+=4)yt[Et]=xt[0],yt[Et+1]=xt[1],yt[Et+2]=xt[2],yt[Et+3]=255}for(const yt of this._figures)rt(Xt,yt,Wt);return $t.putImageData(Xt,2,2),{canvas:_t.canvas,offsetX:vt-2*Yt,offsetY:At-2*zt,scaleX:Yt,scaleY:zt}}getPattern(ht,xt,mt,ft){_e(ht,this._bbox);let gt;if(ft===j.SHADING)gt=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(ht));else if(gt=a.Util.singularValueDecompose2dScale(xt.baseTransform),this.matrix){const vt=a.Util.singularValueDecompose2dScale(this.matrix);gt=[gt[0]*vt[0],gt[1]*vt[1]]}const pt=this._createMeshCanvas(gt,ft===j.SHADING?null:this._background,xt.cachedCanvases);return ft!==j.SHADING&&(ht.setTransform(...xt.baseTransform),this.matrix&&ht.transform(...this.matrix)),ht.translate(pt.offsetX,pt.offsetY),ht.scale(pt.scaleX,pt.scaleY),ht.createPattern(pt.canvas,"no-repeat")}}class it extends nt{getPattern(){return"hotpink"}}function ct(lt){switch(lt[0]){case"RadialAxial":return new tt(lt);case"Mesh":return new at(lt);case"Dummy":return new it}throw new Error(`Unknown IR type: ${lt[0]}`)}const ot={COLORED:1,UNCOLORED:2},dt=class dt{constructor(ht,xt,mt,ft,gt){this.operatorList=ht[2],this.matrix=ht[3]||[1,0,0,1,0,0],this.bbox=ht[4],this.xstep=ht[5],this.ystep=ht[6],this.paintType=ht[7],this.tilingType=ht[8],this.color=xt,this.ctx=mt,this.canvasGraphicsFactory=ft,this.baseTransform=gt}createPatternCanvas(ht){const xt=this.operatorList,mt=this.bbox,ft=this.xstep,gt=this.ystep,pt=this.paintType,vt=this.tilingType,At=this.color,Rt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+vt);const bt=mt[0],Tt=mt[1],Lt=mt[2],Yt=mt[3],zt=a.Util.singularValueDecompose2dScale(this.matrix),Wt=a.Util.singularValueDecompose2dScale(this.baseTransform),Bt=[zt[0]*Wt[0],zt[1]*Wt[1]],Ut=this.getSizeAndScale(ft,this.ctx.canvas.width,Bt[0]),_t=this.getSizeAndScale(gt,this.ctx.canvas.height,Bt[1]),$t=ht.cachedCanvases.getCanvas("pattern",Ut.size,_t.size,!0),Xt=$t.context,Ct=Rt.createCanvasGraphics(Xt);Ct.groupLevel=ht.groupLevel,this.setFillAndStrokeStyleToContext(Ct,pt,At);let yt=bt,Et=Tt,St=Lt,Ft=Yt;return bt<0&&(yt=0,St+=Math.abs(bt)),Tt<0&&(Et=0,Ft+=Math.abs(Tt)),Xt.translate(-(Ut.scale*yt),-(_t.scale*Et)),Ct.transform(Ut.scale,0,0,_t.scale,0,0),Xt.save(),this.clipBbox(Ct,yt,Et,St,Ft),Ct.baseTransform=(0,o.getCurrentTransform)(Ct.ctx),Ct.executeOperatorList(xt),Ct.endDrawing(),{canvas:$t.canvas,scaleX:Ut.scale,scaleY:_t.scale,offsetX:yt,offsetY:Et}}getSizeAndScale(ht,xt,mt){ht=Math.abs(ht);const ft=Math.max(dt.MAX_PATTERN_SIZE,xt);let gt=Math.ceil(ht*mt);return gt>=ft?gt=ft:mt=gt/ht,{scale:mt,size:gt}}clipBbox(ht,xt,mt,ft,gt){const pt=ft-xt,vt=gt-mt;ht.ctx.rect(xt,mt,pt,vt),ht.current.updateRectMinMax((0,o.getCurrentTransform)(ht.ctx),[xt,mt,ft,gt]),ht.clip(),ht.endPath()}setFillAndStrokeStyleToContext(ht,xt,mt){const ft=ht.ctx,gt=ht.current;switch(xt){case ot.COLORED:const pt=this.ctx;ft.fillStyle=pt.fillStyle,ft.strokeStyle=pt.strokeStyle,gt.fillColor=pt.fillStyle,gt.strokeColor=pt.strokeStyle;break;case ot.UNCOLORED:const vt=a.Util.makeHexColor(mt[0],mt[1],mt[2]);ft.fillStyle=vt,ft.strokeStyle=vt,gt.fillColor=vt,gt.strokeColor=vt;break;default:throw new a.FormatError(`Unsupported paint type: ${xt}`)}}getPattern(ht,xt,mt,ft){let gt=mt;ft!==j.SHADING&&(gt=a.Util.transform(gt,xt.baseTransform),this.matrix&&(gt=a.Util.transform(gt,this.matrix)));const pt=this.createPatternCanvas(xt);let vt=new DOMMatrix(gt);vt=vt.translate(pt.offsetX,pt.offsetY),vt=vt.scale(1/pt.scaleX,1/pt.scaleY);const At=ht.createPattern(pt.canvas,"repeat");return At.setTransform(vt),At}};Hn(dt,"MAX_PATTERN_SIZE",3e3);let ut=dt;e.TilingPattern=ut},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=j,e.convertToRGBA=o,e.grayToRGBA=nt,s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123);var a=s(1);function o(tt){switch(tt.kind){case a.ImageKind.GRAYSCALE_1BPP:return j(tt);case a.ImageKind.RGB_24BPP:return _e(tt)}return null}function j(tt){let{src:st,srcPos:rt=0,dest:at,width:it,height:ct,nonBlackColor:ot=4294967295,inverseDecode:ut=!1}=tt;const dt=a.FeatureTest.isLittleEndian?4278190080:255,[lt,ht]=ut?[ot,dt]:[dt,ot],xt=it>>3,mt=it&7,ft=st.length;at=new Uint32Array(at.buffer);let gt=0;for(let pt=0;pt<ct;pt++){for(const At=rt+xt;rt<At;rt++){const Rt=rt<ft?st[rt]:255;at[gt++]=Rt&128?ht:lt,at[gt++]=Rt&64?ht:lt,at[gt++]=Rt&32?ht:lt,at[gt++]=Rt&16?ht:lt,at[gt++]=Rt&8?ht:lt,at[gt++]=Rt&4?ht:lt,at[gt++]=Rt&2?ht:lt,at[gt++]=Rt&1?ht:lt}if(mt===0)continue;const vt=rt<ft?st[rt++]:255;for(let At=0;At<mt;At++)at[gt++]=vt&1<<7-At?ht:lt}return{srcPos:rt,destPos:gt}}function _e(tt){let{src:st,srcPos:rt=0,dest:at,destPos:it=0,width:ct,height:ot}=tt,ut=0;const dt=st.length>>2,lt=new Uint32Array(st.buffer,rt,dt);if(a.FeatureTest.isLittleEndian){for(;ut<dt-2;ut+=3,it+=4){const ht=lt[ut],xt=lt[ut+1],mt=lt[ut+2];at[it]=ht|4278190080,at[it+1]=ht>>>24|xt<<8|4278190080,at[it+2]=xt>>>16|mt<<16|4278190080,at[it+3]=mt>>>8|4278190080}for(let ht=ut*4,xt=st.length;ht<xt;ht+=3)at[it++]=st[ht]|st[ht+1]<<8|st[ht+2]<<16|4278190080}else{for(;ut<dt-2;ut+=3,it+=4){const ht=lt[ut],xt=lt[ut+1],mt=lt[ut+2];at[it]=ht|255,at[it+1]=ht<<24|xt>>>8|255,at[it+2]=xt<<16|mt>>>16|255,at[it+3]=mt<<8|255}for(let ht=ut*4,xt=st.length;ht<xt;ht+=3)at[it++]=st[ht]<<24|st[ht+1]<<16|st[ht+2]<<8|255}return{srcPos:rt,destPos:it}}function nt(tt,st){if(a.FeatureTest.isLittleEndian)for(let rt=0,at=tt.length;rt<at;rt++)st[rt]=tt[rt]*65793|4278190080;else for(let rt=0,at=tt.length;rt<at;rt++)st[rt]=tt[rt]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(i,e,s)=>{var tt,p1,g1,fy;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0,s(2);var a=s(1);const o={UNKNOWN:0,DATA:1,ERROR:2},j={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _e(it){switch(it instanceof Error||typeof it=="object"&&it!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new a.AbortException(it.message);case"MissingPDFException":return new a.MissingPDFException(it.message);case"PasswordException":return new a.PasswordException(it.message,it.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(it.message,it.status);case"UnknownErrorException":return new a.UnknownErrorException(it.message,it.details);default:return new a.UnknownErrorException(it.message,it.toString())}}class nt{constructor(ct,ot,ut){Dt(this,tt);this.sourceName=ct,this.targetName=ot,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=dt=>{const lt=dt.data;if(lt.targetName!==this.sourceName)return;if(lt.stream){wt(this,tt,g1).call(this,lt);return}if(lt.callback){const xt=lt.callbackId,mt=this.callbackCapabilities[xt];if(!mt)throw new Error(`Cannot resolve callback ${xt}`);if(delete this.callbackCapabilities[xt],lt.callback===o.DATA)mt.resolve(lt.data);else if(lt.callback===o.ERROR)mt.reject(_e(lt.reason));else throw new Error("Unexpected callback case");return}const ht=this.actionHandler[lt.action];if(!ht)throw new Error(`Unknown action from worker: ${lt.action}`);if(lt.callbackId){const xt=this.sourceName,mt=lt.sourceName;new Promise(function(ft){ft(ht(lt.data))}).then(function(ft){ut.postMessage({sourceName:xt,targetName:mt,callback:o.DATA,callbackId:lt.callbackId,data:ft})},function(ft){ut.postMessage({sourceName:xt,targetName:mt,callback:o.ERROR,callbackId:lt.callbackId,reason:_e(ft)})});return}if(lt.streamId){wt(this,tt,p1).call(this,lt);return}ht(lt.data)},ut.addEventListener("message",this._onComObjOnMessage)}on(ct,ot){const ut=this.actionHandler;if(ut[ct])throw new Error(`There is already an actionName called "${ct}"`);ut[ct]=ot}send(ct,ot,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,data:ot},ut)}sendWithPromise(ct,ot,ut){const dt=this.callbackId++,lt=new a.PromiseCapability;this.callbackCapabilities[dt]=lt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ct,callbackId:dt,data:ot},ut)}catch(ht){lt.reject(ht)}return lt.promise}sendWithStream(ct,ot,ut,dt){const lt=this.streamId++,ht=this.sourceName,xt=this.targetName,mt=this.comObj;return new ReadableStream({start:ft=>{const gt=new a.PromiseCapability;return this.streamControllers[lt]={controller:ft,startCall:gt,pullCall:null,cancelCall:null,isClosed:!1},mt.postMessage({sourceName:ht,targetName:xt,action:ct,streamId:lt,data:ot,desiredSize:ft.desiredSize},dt),gt.promise},pull:ft=>{const gt=new a.PromiseCapability;return this.streamControllers[lt].pullCall=gt,mt.postMessage({sourceName:ht,targetName:xt,stream:j.PULL,streamId:lt,desiredSize:ft.desiredSize}),gt.promise},cancel:ft=>{(0,a.assert)(ft instanceof Error,"cancel must have a valid reason");const gt=new a.PromiseCapability;return this.streamControllers[lt].cancelCall=gt,this.streamControllers[lt].isClosed=!0,mt.postMessage({sourceName:ht,targetName:xt,stream:j.CANCEL,streamId:lt,reason:_e(ft)}),gt.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}tt=new WeakSet,p1=function(ct){const ot=ct.streamId,ut=this.sourceName,dt=ct.sourceName,lt=this.comObj,ht=this,xt=this.actionHandler[ct.action],mt={enqueue(ft){let gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,pt=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const vt=this.desiredSize;this.desiredSize-=gt,vt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),lt.postMessage({sourceName:ut,targetName:dt,stream:j.ENQUEUE,streamId:ot,chunk:ft},pt)},close(){this.isCancelled||(this.isCancelled=!0,lt.postMessage({sourceName:ut,targetName:dt,stream:j.CLOSE,streamId:ot}),delete ht.streamSinks[ot])},error(ft){(0,a.assert)(ft instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,lt.postMessage({sourceName:ut,targetName:dt,stream:j.ERROR,streamId:ot,reason:_e(ft)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ct.desiredSize,ready:null};mt.sinkCapability.resolve(),mt.ready=mt.sinkCapability.promise,this.streamSinks[ot]=mt,new Promise(function(ft){ft(xt(ct.data,mt))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.START_COMPLETE,streamId:ot,success:!0})},function(ft){lt.postMessage({sourceName:ut,targetName:dt,stream:j.START_COMPLETE,streamId:ot,reason:_e(ft)})})},g1=function(ct){const ot=ct.streamId,ut=this.sourceName,dt=ct.sourceName,lt=this.comObj,ht=this.streamControllers[ot],xt=this.streamSinks[ot];switch(ct.stream){case j.START_COMPLETE:ct.success?ht.startCall.resolve():ht.startCall.reject(_e(ct.reason));break;case j.PULL_COMPLETE:ct.success?ht.pullCall.resolve():ht.pullCall.reject(_e(ct.reason));break;case j.PULL:if(!xt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,success:!0});break}xt.desiredSize<=0&&ct.desiredSize>0&&xt.sinkCapability.resolve(),xt.desiredSize=ct.desiredSize,new Promise(function(mt){var ft;mt((ft=xt.onPull)==null?void 0:ft.call(xt))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,success:!0})},function(mt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.PULL_COMPLETE,streamId:ot,reason:_e(mt)})});break;case j.ENQUEUE:if((0,a.assert)(ht,"enqueue should have stream controller"),ht.isClosed)break;ht.controller.enqueue(ct.chunk);break;case j.CLOSE:if((0,a.assert)(ht,"close should have stream controller"),ht.isClosed)break;ht.isClosed=!0,ht.controller.close(),wt(this,tt,fy).call(this,ht,ot);break;case j.ERROR:(0,a.assert)(ht,"error should have stream controller"),ht.controller.error(_e(ct.reason)),wt(this,tt,fy).call(this,ht,ot);break;case j.CANCEL_COMPLETE:ct.success?ht.cancelCall.resolve():ht.cancelCall.reject(_e(ct.reason)),wt(this,tt,fy).call(this,ht,ot);break;case j.CANCEL:if(!xt)break;new Promise(function(mt){var ft;mt((ft=xt.onCancel)==null?void 0:ft.call(xt,_e(ct.reason)))}).then(function(){lt.postMessage({sourceName:ut,targetName:dt,stream:j.CANCEL_COMPLETE,streamId:ot,success:!0})},function(mt){lt.postMessage({sourceName:ut,targetName:dt,stream:j.CANCEL_COMPLETE,streamId:ot,reason:_e(mt)})}),xt.sinkCapability.reject(_e(ct.reason)),xt.isCancelled=!0,delete this.streamSinks[ot];break;default:throw new Error("Unexpected stream case")}},fy=async function(ct,ot){var ut,dt,lt;await Promise.allSettled([(ut=ct.startCall)==null?void 0:ut.promise,(dt=ct.pullCall)==null?void 0:dt.promise,(lt=ct.cancelCall)==null?void 0:lt.promise]),delete this.streamControllers[ot]},e.MessageHandler=nt},(i,e,s)=>{var j,_e;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var a=s(1);class o{constructor(tt){Dt(this,j);Dt(this,_e);let{parsedData:st,rawData:rt}=tt;Pt(this,j,st),Pt(this,_e,rt)}getRaw(){return et(this,_e)}get(tt){return et(this,j).get(tt)??null}getAll(){return(0,a.objectFromMap)(et(this,j))}has(tt){return et(this,j).has(tt)}}j=new WeakMap,_e=new WeakMap,e.Metadata=o},(i,e,s)=>{var tt,st,rt,at,it,ct,Ix;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var a=s(1),o=s(170);const j=Symbol("INTERNAL");class _e{constructor(dt,lt){Dt(this,tt,!0);this.name=dt,this.intent=lt}get visible(){return et(this,tt)}_setVisible(dt,lt){dt!==j&&(0,a.unreachable)("Internal method `_setVisible` called."),Pt(this,tt,lt)}}tt=new WeakMap;class nt{constructor(dt){Dt(this,ct);Dt(this,st,null);Dt(this,rt,new Map);Dt(this,at,null);Dt(this,it,null);if(this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,Pt(this,it,dt.order);for(const lt of dt.groups)et(this,rt).set(lt.id,new _e(lt.name,lt.intent));if(dt.baseState==="OFF")for(const lt of et(this,rt).values())lt._setVisible(j,!1);for(const lt of dt.on)et(this,rt).get(lt)._setVisible(j,!0);for(const lt of dt.off)et(this,rt).get(lt)._setVisible(j,!1);Pt(this,at,this.getHash())}}isVisible(dt){if(et(this,rt).size===0)return!0;if(!dt)return(0,a.warn)("Optional content group not defined."),!0;if(dt.type==="OCG")return et(this,rt).has(dt.id)?et(this,rt).get(dt.id).visible:((0,a.warn)(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return wt(this,ct,Ix).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(et(this,rt).get(lt).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(!et(this,rt).get(lt).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(!et(this,rt).get(lt).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const lt of dt.ids){if(!et(this,rt).has(lt))return(0,a.warn)(`Optional content group not found: ${lt}`),!0;if(et(this,rt).get(lt).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${dt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${dt.type}.`),!0}setVisibility(dt){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!et(this,rt).has(dt)){(0,a.warn)(`Optional content group not found: ${dt}`);return}et(this,rt).get(dt)._setVisible(j,!!lt),Pt(this,st,null)}get hasInitialVisibility(){return et(this,at)===null||this.getHash()===et(this,at)}getOrder(){return et(this,rt).size?et(this,it)?et(this,it).slice():[...et(this,rt).keys()]:null}getGroups(){return et(this,rt).size>0?(0,a.objectFromMap)(et(this,rt)):null}getGroup(dt){return et(this,rt).get(dt)||null}getHash(){if(et(this,st)!==null)return et(this,st);const dt=new o.MurmurHash3_64;for(const[lt,ht]of et(this,rt))dt.update(`${lt}:${ht.visible}`);return Pt(this,st,dt.hexdigest())}}st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakSet,Ix=function(dt){const lt=dt.length;if(lt<2)return!0;const ht=dt[0];for(let xt=1;xt<lt;xt++){const mt=dt[xt];let ft;if(Array.isArray(mt))ft=wt(this,ct,Ix).call(this,mt);else if(et(this,rt).has(mt))ft=et(this,rt).get(mt).visible;else return(0,a.warn)(`Optional content group not found: ${mt}`),!0;switch(ht){case"And":if(!ft)return!1;break;case"Or":if(ft)return!0;break;case"Not":return!ft;default:return!0}}return ht==="And"},e.OptionalContentConfig=nt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0,s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(89);var a=s(1),o=s(168);class j{constructor(st,rt){let{length:at,initialData:it,progressiveDone:ct=!1,contentDispositionFilename:ot=null,disableRange:ut=!1,disableStream:dt=!1}=st;if((0,a.assert)(rt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ct,this._contentDispositionFilename=ot,(it==null?void 0:it.length)>0){const lt=it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength?it.buffer:new Uint8Array(it).buffer;this._queuedChunks.push(lt)}this._pdfDataRangeTransport=rt,this._isStreamingSupported=!dt,this._isRangeSupported=!ut,this._contentLength=at,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((lt,ht)=>{this._onReceiveData({begin:lt,chunk:ht})}),this._pdfDataRangeTransport.addProgressListener((lt,ht)=>{this._onProgress({loaded:lt,total:ht})}),this._pdfDataRangeTransport.addProgressiveReadListener(lt=>{this._onReceiveData({chunk:lt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(st){let{begin:rt,chunk:at}=st;const it=at instanceof Uint8Array&&at.byteLength===at.buffer.byteLength?at.buffer:new Uint8Array(at).buffer;if(rt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(it):this._queuedChunks.push(it);else{const ct=this._rangeReaders.some(function(ot){return ot._begin!==rt?!1:(ot._enqueue(it),!0)});(0,a.assert)(ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}_onProgress(st){var rt,at,it,ct;st.total===void 0?(at=(rt=this._rangeReaders[0])==null?void 0:rt.onProgress)==null||at.call(rt,{loaded:st.loaded}):(ct=(it=this._fullRequestReader)==null?void 0:it.onProgress)==null||ct.call(it,{loaded:st.loaded,total:st.total})}_onProgressiveDone(){var st;(st=this._fullRequestReader)==null||st.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(st){const rt=this._rangeReaders.indexOf(st);rt>=0&&this._rangeReaders.splice(rt,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const st=this._queuedChunks;return this._queuedChunks=null,new _e(this,st,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(st,rt){if(rt<=this._progressiveDataLength)return null;const at=new nt(this,st,rt);return this._pdfDataRangeTransport.requestDataRange(st,rt),this._rangeReaders.push(at),at}cancelAllRequests(st){var rt;(rt=this._fullRequestReader)==null||rt.cancel(st);for(const at of this._rangeReaders.slice(0))at.cancel(st);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=j;class _e{constructor(st,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=st,this._done=at||!1,this._filename=(0,o.isPdfFile)(it)?it:null,this._queuedChunks=rt||[],this._loaded=0;for(const ct of this._queuedChunks)this._loaded+=ct.byteLength;this._requests=[],this._headersReady=Promise.resolve(),st._fullRequestReader=this,this.onProgress=null}_enqueue(st){this._done||(this._requests.length>0?this._requests.shift().resolve({value:st,done:!1}):this._queuedChunks.push(st),this._loaded+=st.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nt{constructor(st,rt,at){this._stream=st,this._begin=rt,this._end=at,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(st){if(!this._done){if(this._requests.length===0)this._queuedChunk=st;else{this._requests.shift().resolve({value:st,done:!1});for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const rt=this._queuedChunk;return this._queuedChunk=null,{value:rt,done:!1}}if(this._done)return{value:void 0,done:!0};const st=new a.PromiseCapability;return this._requests.push(st),st.promise}cancel(st){this._done=!0;for(const rt of this._requests)rt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0,s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(89);var a=s(1),o=s(182);function j(at,it,ct){return{method:"GET",headers:at,signal:ct.signal,mode:"cors",credentials:it?"include":"same-origin",redirect:"follow"}}function _e(at){const it=new Headers;for(const ct in at){const ot=at[ct];ot!==void 0&&it.append(ct,ot)}return it}function nt(at){return at instanceof Uint8Array?at.buffer:at instanceof ArrayBuffer?at:((0,a.warn)(`getArrayBuffer - unexpected data format: ${at}`),new Uint8Array(at).buffer)}class tt{constructor(it){this.source=it,this.isHttp=/^https?:/i.test(it.url),this.httpHeaders=this.isHttp&&it.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var it;return((it=this._fullRequestReader)==null?void 0:it._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new st(this),this._fullRequestReader}getRangeReader(it,ct){if(ct<=this._progressiveDataLength)return null;const ot=new rt(this,it,ct);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(it){var ct;(ct=this._fullRequestReader)==null||ct.cancel(it);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(it)}}e.PDFFetchStream=tt;class st{constructor(it){this._stream=it,this._reader=null,this._loaded=0,this._filename=null;const ct=it.source;this._withCredentials=ct.withCredentials||!1,this._contentLength=ct.length,this._headersCapability=new a.PromiseCapability,this._disableRange=ct.disableRange||!1,this._rangeChunkSize=ct.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ct.disableStream,this._isRangeSupported=!ct.disableRange,this._headers=_e(this._stream.httpHeaders);const ot=ct.url;fetch(ot,j(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,o.validateResponseStatus)(ut.status))throw(0,o.createResponseStatusError)(ut.status,ot);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=xt=>ut.headers.get(xt),{allowRangeRequests:lt,suggestedLength:ht}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=lt,this._contentLength=ht||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:it,done:ct}=await this._reader.read();return ct?{value:it,done:ct}:(this._loaded+=it.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nt(it),done:!1})}cancel(it){var ct;(ct=this._reader)==null||ct.cancel(it),this._abortController.abort()}}class rt{constructor(it,ct,ot){this._stream=it,this._reader=null,this._loaded=0;const ut=it.source;this._withCredentials=ut.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ut.disableStream,this._abortController=new AbortController,this._headers=_e(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ct}-${ot-1}`);const dt=ut.url;fetch(dt,j(this._headers,this._withCredentials,this._abortController)).then(lt=>{if(!(0,o.validateResponseStatus)(lt.status))throw(0,o.createResponseStatusError)(lt.status,dt);this._readCapability.resolve(),this._reader=lt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:it,done:ct}=await this._reader.read();return ct?{value:it,done:ct}:(this._loaded+=it.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:nt(it),done:!1})}cancel(it){var ct;(ct=this._reader)==null||ct.cancel(it),this._abortController.abort()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=tt,e.extractFilenameFromHeader=nt,e.validateRangeRequestCapabilities=_e,e.validateResponseStatus=st;var a=s(1),o=s(183),j=s(168);function _e(rt){let{getResponseHeader:at,isHttp:it,rangeChunkSize:ct,disableRange:ot}=rt;const ut={allowRangeRequests:!1,suggestedLength:void 0},dt=parseInt(at("Content-Length"),10);return!Number.isInteger(dt)||(ut.suggestedLength=dt,dt<=2*ct)||ot||!it||at("Accept-Ranges")!=="bytes"||(at("Content-Encoding")||"identity")!=="identity"||(ut.allowRangeRequests=!0),ut}function nt(rt){const at=rt("Content-Disposition");if(at){let it=(0,o.getFilenameFromContentDispositionHeader)(at);if(it.includes("%"))try{it=decodeURIComponent(it)}catch{}if((0,j.isPdfFile)(it))return it}return null}function tt(rt,at){return rt===404||rt===0&&at.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+at+'".'):new a.UnexpectedResponseException(`Unexpected server response (${rt}) while retrieving PDF "${at}".`,rt)}function st(rt){return rt===200||rt===206}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o,s(89),s(149);var a=s(1);function o(j){let _e=!0,nt=tt("filename\\*","i").exec(j);if(nt){nt=nt[1];let ut=it(nt);return ut=unescape(ut),ut=ct(ut),ut=ot(ut),rt(ut)}if(nt=at(j),nt){const ut=ot(nt);return rt(ut)}if(nt=tt("filename","i").exec(j),nt){nt=nt[1];let ut=it(nt);return ut=ot(ut),rt(ut)}function tt(ut,dt){return new RegExp("(?:^|;)\\s*"+ut+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',dt)}function st(ut,dt){if(ut){if(!/^[\x00-\xFF]+$/.test(dt))return dt;try{const lt=new TextDecoder(ut,{fatal:!0}),ht=(0,a.stringToBytes)(dt);dt=lt.decode(ht),_e=!1}catch{}}return dt}function rt(ut){return _e&&/[\x80-\xff]/.test(ut)&&(ut=st("utf-8",ut),_e&&(ut=st("iso-8859-1",ut))),ut}function at(ut){const dt=[];let lt;const ht=tt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(lt=ht.exec(ut))!==null;){let[,mt,ft,gt]=lt;if(mt=parseInt(mt,10),mt in dt){if(mt===0)break;continue}dt[mt]=[ft,gt]}const xt=[];for(let mt=0;mt<dt.length&&mt in dt;++mt){let[ft,gt]=dt[mt];gt=it(gt),ft&&(gt=unescape(gt),mt===0&&(gt=ct(gt))),xt.push(gt)}return xt.join("")}function it(ut){if(ut.startsWith('"')){const dt=ut.slice(1).split('\\"');for(let lt=0;lt<dt.length;++lt){const ht=dt[lt].indexOf('"');ht!==-1&&(dt[lt]=dt[lt].slice(0,ht),dt.length=lt+1),dt[lt]=dt[lt].replaceAll(/\\(.)/g,"$1")}ut=dt.join('"')}return ut}function ct(ut){const dt=ut.indexOf("'");if(dt===-1)return ut;const lt=ut.slice(0,dt),xt=ut.slice(dt+1).replace(/^[^']*'/,"");return st(lt,xt)}function ot(ut){return!ut.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ut)?ut:ut.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(dt,lt,ht,xt){if(ht==="q"||ht==="Q")return xt=xt.replaceAll("_"," "),xt=xt.replaceAll(/=([0-9a-fA-F]{2})/g,function(mt,ft){return String.fromCharCode(parseInt(ft,16))}),st(lt,xt);try{xt=atob(xt)}catch{}return st(lt,xt)})}return""}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0,s(89);var a=s(1),o=s(182);const j=200,_e=206;function nt(it){const ct=it.response;return typeof ct!="string"?ct:(0,a.stringToBytes)(ct).buffer}class tt{constructor(ct){let ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=ct,this.isHttp=/^https?:/i.test(ct),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ct,ot,ut){const dt={begin:ct,end:ot};for(const lt in ut)dt[lt]=ut[lt];return this.request(dt)}requestFull(ct){return this.request(ct)}request(ct){const ot=new XMLHttpRequest,ut=this.currXhrId++,dt=this.pendingRequests[ut]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const lt in this.httpHeaders){const ht=this.httpHeaders[lt];ht!==void 0&&ot.setRequestHeader(lt,ht)}return this.isHttp&&"begin"in ct&&"end"in ct?(ot.setRequestHeader("Range",`bytes=${ct.begin}-${ct.end-1}`),dt.expectedStatus=_e):dt.expectedStatus=j,ot.responseType="arraybuffer",ct.onError&&(ot.onerror=function(lt){ct.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,ut),ot.onprogress=this.onProgress.bind(this,ut),dt.onHeadersReceived=ct.onHeadersReceived,dt.onDone=ct.onDone,dt.onError=ct.onError,dt.onProgress=ct.onProgress,ot.send(null),ut}onProgress(ct,ot){var dt;const ut=this.pendingRequests[ct];ut&&((dt=ut.onProgress)==null||dt.call(ut,ot))}onStateChange(ct,ot){var mt,ft,gt;const ut=this.pendingRequests[ct];if(!ut)return;const dt=ut.xhr;if(dt.readyState>=2&&ut.onHeadersReceived&&(ut.onHeadersReceived(),delete ut.onHeadersReceived),dt.readyState!==4||!(ct in this.pendingRequests))return;if(delete this.pendingRequests[ct],dt.status===0&&this.isHttp){(mt=ut.onError)==null||mt.call(ut,dt.status);return}const lt=dt.status||j;if(!(lt===j&&ut.expectedStatus===_e)&&lt!==ut.expectedStatus){(ft=ut.onError)==null||ft.call(ut,dt.status);return}const xt=nt(dt);if(lt===_e){const pt=dt.getResponseHeader("Content-Range"),vt=/bytes (\d+)-(\d+)\/(\d+)/.exec(pt);ut.onDone({begin:parseInt(vt[1],10),chunk:xt})}else xt?ut.onDone({begin:0,chunk:xt}):(gt=ut.onError)==null||gt.call(ut,dt.status)}getRequestXhr(ct){return this.pendingRequests[ct].xhr}isPendingRequest(ct){return ct in this.pendingRequests}abortRequest(ct){const ot=this.pendingRequests[ct].xhr;delete this.pendingRequests[ct],ot.abort()}}class st{constructor(ct){this._source=ct,this._manager=new tt(ct.url,{httpHeaders:ct.httpHeaders,withCredentials:ct.withCredentials}),this._rangeChunkSize=ct.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ct){const ot=this._rangeRequestReaders.indexOf(ct);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rt(this._manager,this._source),this._fullRequestReader}getRangeReader(ct,ot){const ut=new at(this._manager,ct,ot);return ut.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ut),ut}cancelAllRequests(ct){var ot;(ot=this._fullRequestReader)==null||ot.cancel(ct);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(ct)}}e.PDFNetworkStream=st;class rt{constructor(ct,ot){this._manager=ct;const ut={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=ct.requestFull(ut),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ct=this._fullRequestId,ot=this._manager.getRequestXhr(ct),ut=ht=>ot.getResponseHeader(ht),{allowRangeRequests:dt,suggestedLength:lt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ut,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});dt&&(this._isRangeSupported=!0),this._contentLength=lt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ut),this._isRangeSupported&&this._manager.abortRequest(ct),this._headersReceivedCapability.resolve()}_onDone(ct){if(ct&&(this._requests.length>0?this._requests.shift().resolve({value:ct.chunk,done:!1}):this._cachedChunks.push(ct.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ct){this._storedError=(0,o.createResponseStatusError)(ct,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ct){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:ct.loaded,total:ct.lengthComputable?ct.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ct=new a.PromiseCapability;return this._requests.push(ct),ct.promise}cancel(ct){this._done=!0,this._headersReceivedCapability.reject(ct);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class at{constructor(ct,ot,ut){this._manager=ct;const dt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ct.url,this._requestId=ct.requestRange(ot,ut,dt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ct;(ct=this.onClosed)==null||ct.call(this,this)}_onDone(ct){const ot=ct.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ct){this._storedError=(0,o.createResponseStatusError)(ct,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ct){var ot;this.isStreamingSupported||(ot=this.onProgress)==null||ot.call(this,{loaded:ct.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const ct=new a.PromiseCapability;return this._requests.push(ct),ct.promise}cancel(ct){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0,s(89),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123);var a=s(1),o=s(182);const j=/^file:\/\/\/[a-zA-Z]:\//;function _e(ut){const dt=require$$6,lt=dt.parse(ut);return lt.protocol==="file:"||lt.host?lt:/^[a-z]:[/\\]/i.test(ut)?dt.parse(`file:///${ut}`):(lt.host||(lt.protocol="file:"),lt)}class nt{constructor(dt){this.source=dt,this.url=_e(dt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ct(this):new at(this),this._fullRequestReader}getRangeReader(dt,lt){if(lt<=this._progressiveDataLength)return null;const ht=this.isFsUrl?new ot(this,dt,lt):new it(this,dt,lt);return this._rangeRequestReaders.push(ht),ht}cancelAllRequests(dt){var lt;(lt=this._fullRequestReader)==null||lt.cancel(dt);for(const ht of this._rangeRequestReaders.slice(0))ht.cancel(dt)}}e.PDFNodeStream=nt;class tt{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const lt=dt.source;this._contentLength=lt.length,this._loaded=0,this._filename=null,this._disableRange=lt.disableRange||!1,this._rangeChunkSize=lt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!lt.disableStream,this._isRangeSupported=!lt.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",lt=>{this._error(lt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class st{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const lt=dt.source;this._isStreamingSupported=!lt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",lt=>{this._error(lt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function rt(ut,dt){return{protocol:ut.protocol,auth:ut.auth,host:ut.hostname,port:ut.port,path:ut.path,method:"GET",headers:dt}}class at extends tt{constructor(dt){super(dt);const lt=ht=>{if(ht.statusCode===404){const gt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gt,this._headersCapability.reject(gt);return}this._headersCapability.resolve(),this._setReadableStream(ht);const xt=gt=>this._readableStream.headers[gt.toLowerCase()],{allowRangeRequests:mt,suggestedLength:ft}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:xt,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=mt,this._contentLength=ft||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(xt)};if(this._request=null,this._url.protocol==="http:"){const ht=require$$6;this._request=ht.request(rt(this._url,dt.httpHeaders),lt)}else{const ht=require$$6;this._request=ht.request(rt(this._url,dt.httpHeaders),lt)}this._request.on("error",ht=>{this._storedError=ht,this._headersCapability.reject(ht)}),this._request.end()}}class it extends st{constructor(dt,lt,ht){super(dt),this._httpHeaders={};for(const mt in dt.httpHeaders){const ft=dt.httpHeaders[mt];ft!==void 0&&(this._httpHeaders[mt]=ft)}this._httpHeaders.Range=`bytes=${lt}-${ht-1}`;const xt=mt=>{if(mt.statusCode===404){const ft=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ft;return}this._setReadableStream(mt)};if(this._request=null,this._url.protocol==="http:"){const mt=require$$6;this._request=mt.request(rt(this._url,this._httpHeaders),xt)}else{const mt=require$$6;this._request=mt.request(rt(this._url,this._httpHeaders),xt)}this._request.on("error",mt=>{this._storedError=mt}),this._request.end()}}class ct extends tt{constructor(dt){super(dt);let lt=decodeURIComponent(this._url.path);j.test(this._url.href)&&(lt=lt.replace(/^\//,""));const ht=require$$6;ht.lstat(lt,(xt,mt)=>{if(xt){xt.code==="ENOENT"&&(xt=new a.MissingPDFException(`Missing PDF "${lt}".`)),this._storedError=xt,this._headersCapability.reject(xt);return}this._contentLength=mt.size,this._setReadableStream(ht.createReadStream(lt)),this._headersCapability.resolve()})}}class ot extends st{constructor(dt,lt,ht){super(dt);let xt=decodeURIComponent(this._url.path);j.test(this._url.href)&&(xt=xt.replace(/^\//,""));const mt=require$$6;this._setReadableStream(mt.createReadStream(xt,{start:lt,end:ht-1}))}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0,s(84),s(86),s(87),s(93),s(101),s(102),s(105),s(107),s(109),s(113),s(116),s(123),s(2),s(89),s(187);var a=s(168),o=s(1);const j={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_e="http://www.w3.org/XML/1998/namespace",nt="http://www.w3.org/1999/xlink",tt=["butt","round","square"],st=["miter","round","bevel"],rt=function(mt){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!gt)return URL.createObjectURL(new Blob([mt],{type:ft}));const pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vt=`data:${ft};base64,`;for(let At=0,Rt=mt.length;At<Rt;At+=3){const bt=mt[At]&255,Tt=mt[At+1]&255,Lt=mt[At+2]&255,Yt=bt>>2,zt=(bt&3)<<4|Tt>>4,Wt=At+1<Rt?(Tt&15)<<2|Lt>>6:64,Bt=At+2<Rt?Lt&63:64;vt+=pt[Yt]+pt[zt]+pt[Wt]+pt[Bt]}return vt},at=function(){const mt=new Uint8Array([137,80,78,71,13,10,26,10]),ft=12,gt=new Int32Array(256);for(let Lt=0;Lt<256;Lt++){let Yt=Lt;for(let zt=0;zt<8;zt++)Yt=Yt&1?3988292384^Yt>>1&2147483647:Yt>>1&2147483647;gt[Lt]=Yt}function pt(Lt,Yt,zt){let Wt=-1;for(let Bt=Yt;Bt<zt;Bt++){const Ut=(Wt^Lt[Bt])&255,_t=gt[Ut];Wt=Wt>>>8^_t}return Wt^-1}function vt(Lt,Yt,zt,Wt){let Bt=Wt;const Ut=Yt.length;zt[Bt]=Ut>>24&255,zt[Bt+1]=Ut>>16&255,zt[Bt+2]=Ut>>8&255,zt[Bt+3]=Ut&255,Bt+=4,zt[Bt]=Lt.charCodeAt(0)&255,zt[Bt+1]=Lt.charCodeAt(1)&255,zt[Bt+2]=Lt.charCodeAt(2)&255,zt[Bt+3]=Lt.charCodeAt(3)&255,Bt+=4,zt.set(Yt,Bt),Bt+=Yt.length;const _t=pt(zt,Wt+4,Bt);zt[Bt]=_t>>24&255,zt[Bt+1]=_t>>16&255,zt[Bt+2]=_t>>8&255,zt[Bt+3]=_t&255}function At(Lt,Yt,zt){let Wt=1,Bt=0;for(let Ut=Yt;Ut<zt;++Ut)Wt=(Wt+(Lt[Ut]&255))%65521,Bt=(Bt+Wt)%65521;return Bt<<16|Wt}function Rt(Lt){if(!o.isNodeJS)return bt(Lt);try{const Yt=parseInt(process.versions.node)>=8?Lt:Buffer.from(Lt),zt=require$$6.deflateSync(Yt,{level:9});return zt instanceof Uint8Array?zt:new Uint8Array(zt)}catch(Yt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Yt)}return bt(Lt)}function bt(Lt){let Yt=Lt.length;const zt=65535,Wt=Math.ceil(Yt/zt),Bt=new Uint8Array(2+Yt+Wt*5+4);let Ut=0;Bt[Ut++]=120,Bt[Ut++]=156;let _t=0;for(;Yt>zt;)Bt[Ut++]=0,Bt[Ut++]=255,Bt[Ut++]=255,Bt[Ut++]=0,Bt[Ut++]=0,Bt.set(Lt.subarray(_t,_t+zt),Ut),Ut+=zt,_t+=zt,Yt-=zt;Bt[Ut++]=1,Bt[Ut++]=Yt&255,Bt[Ut++]=Yt>>8&255,Bt[Ut++]=~Yt&65535&255,Bt[Ut++]=(~Yt&65535)>>8&255,Bt.set(Lt.subarray(_t),Ut),Ut+=Lt.length-_t;const $t=At(Lt,0,Lt.length);return Bt[Ut++]=$t>>24&255,Bt[Ut++]=$t>>16&255,Bt[Ut++]=$t>>8&255,Bt[Ut++]=$t&255,Bt}function Tt(Lt,Yt,zt,Wt){const Bt=Lt.width,Ut=Lt.height;let _t,$t,Xt;const Ct=Lt.data;switch(Yt){case o.ImageKind.GRAYSCALE_1BPP:$t=0,_t=1,Xt=Bt+7>>3;break;case o.ImageKind.RGB_24BPP:$t=2,_t=8,Xt=Bt*3;break;case o.ImageKind.RGBA_32BPP:$t=6,_t=8,Xt=Bt*4;break;default:throw new Error("invalid format")}const yt=new Uint8Array((1+Xt)*Ut);let Et=0,St=0;for(let rn=0;rn<Ut;++rn)yt[Et++]=0,yt.set(Ct.subarray(St,St+Xt),Et),St+=Xt,Et+=Xt;if(Yt===o.ImageKind.GRAYSCALE_1BPP&&Wt){Et=0;for(let rn=0;rn<Ut;rn++){Et++;for(let an=0;an<Xt;an++)yt[Et++]^=255}}const Ft=new Uint8Array([Bt>>24&255,Bt>>16&255,Bt>>8&255,Bt&255,Ut>>24&255,Ut>>16&255,Ut>>8&255,Ut&255,_t,$t,0,0,0]),kt=Rt(yt),Ot=mt.length+ft*3+Ft.length+kt.length,Gt=new Uint8Array(Ot);let Vt=0;return Gt.set(mt,Vt),Vt+=mt.length,vt("IHDR",Ft,Gt,Vt),Vt+=ft+Ft.length,vt("IDATA",kt,Gt,Vt),Vt+=ft+kt.length,vt("IEND",new Uint8Array(0),Gt,Vt),rt(Gt,"image/png",zt)}return function(Yt,zt,Wt){const Bt=Yt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:Yt.kind;return Tt(Yt,Bt,zt,Wt)}}();class it{constructor(){this.fontSizeScale=1,this.fontWeight=j.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=j.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ft,gt){this.x=ft,this.y=gt}}function ct(mt){let ft=[];const gt=[];for(const pt of mt){if(pt.fn==="save"){ft.push({fnId:92,fn:"group",items:[]}),gt.push(ft),ft=ft.at(-1).items;continue}pt.fn==="restore"?ft=gt.pop():ft.push(pt)}return ft}function ot(mt){if(Number.isInteger(mt))return mt.toString();const ft=mt.toFixed(10);let gt=ft.length-1;if(ft[gt]!=="0")return ft;do gt--;while(ft[gt]==="0");return ft.substring(0,ft[gt]==="."?gt:gt+1)}function ut(mt){if(mt[4]===0&&mt[5]===0){if(mt[1]===0&&mt[2]===0)return mt[0]===1&&mt[3]===1?"":`scale(${ot(mt[0])} ${ot(mt[3])})`;if(mt[0]===mt[3]&&mt[1]===-mt[2]){const ft=Math.acos(mt[0])*180/Math.PI;return`rotate(${ot(ft)})`}}else if(mt[0]===1&&mt[1]===0&&mt[2]===0&&mt[3]===1)return`translate(${ot(mt[4])} ${ot(mt[5])})`;return`matrix(${ot(mt[0])} ${ot(mt[1])} ${ot(mt[2])} ${ot(mt[3])} ${ot(mt[4])} ${ot(mt[5])})`}let dt=0,lt=0,ht=0;class xt{constructor(ft,gt){let pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new it,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ft,this.objs=gt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!pt,this._operatorIdMapping=[];for(const vt in o.OPS)this._operatorIdMapping[o.OPS[vt]]=vt}getObject(ft){let gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof ft=="string"?ft.startsWith("g_")?this.commonObjs.get(ft):this.objs.get(ft):gt}save(){this.transformStack.push(this.transformMatrix);const ft=this.current;this.extraStack.push(ft),this.current=ft.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ft){this.save(),this.executeOpTree(ft),this.restore()}loadDependencies(ft){const gt=ft.fnArray,pt=ft.argsArray;for(let vt=0,At=gt.length;vt<At;vt++)if(gt[vt]===o.OPS.dependency)for(const Rt of pt[vt]){const bt=Rt.startsWith("g_")?this.commonObjs:this.objs,Tt=new Promise(Lt=>{bt.get(Rt,Lt)});this.current.dependencies.push(Tt)}return Promise.all(this.current.dependencies)}transform(ft,gt,pt,vt,At,Rt){const bt=[ft,gt,pt,vt,At,Rt];this.transformMatrix=o.Util.transform(this.transformMatrix,bt),this.tgrp=null}getSVG(ft,gt){this.viewport=gt;const pt=this._initialize(gt);return this.loadDependencies(ft).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ft)),pt))}convertOpList(ft){const gt=this._operatorIdMapping,pt=ft.argsArray,vt=ft.fnArray,At=[];for(let Rt=0,bt=vt.length;Rt<bt;Rt++){const Tt=vt[Rt];At.push({fnId:Tt,fn:gt[Tt],args:pt[Rt]})}return ct(At)}executeOpTree(ft){for(const gt of ft){const pt=gt.fn,vt=gt.fnId,At=gt.args;switch(vt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(At);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(At[0],At[1]);break;case o.OPS.setFont:this.setFont(At);break;case o.OPS.showText:this.showText(At[0]);break;case o.OPS.showSpacedText:this.showText(At[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(At[0],At[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(At[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(At[0]);break;case o.OPS.setHScale:this.setHScale(At[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(At[0],At[1],At[2],At[3],At[4],At[5]);break;case o.OPS.setTextRise:this.setTextRise(At[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(At[0]);break;case o.OPS.setLineWidth:this.setLineWidth(At[0]);break;case o.OPS.setLineJoin:this.setLineJoin(At[0]);break;case o.OPS.setLineCap:this.setLineCap(At[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(At[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(At[0],At[1],At[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(At[0],At[1],At[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(At);break;case o.OPS.setFillColorN:this.setFillColorN(At);break;case o.OPS.shadingFill:this.shadingFill(At[0]);break;case o.OPS.setDash:this.setDash(At[0],At[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(At[0]);break;case o.OPS.setFlatness:this.setFlatness(At[0]);break;case o.OPS.setGState:this.setGState(At[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(At[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(At[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(At[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(At[0],At[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(At[0],At[1],At[2],At[3],At[4],At[5]);break;case o.OPS.constructPath:this.constructPath(At[0],At[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(gt.items);break;default:(0,o.warn)(`Unimplemented operator ${pt}`);break}}}setWordSpacing(ft){this.current.wordSpacing=ft}setCharSpacing(ft){this.current.charSpacing=ft}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ft,gt,pt,vt,At,Rt){const bt=this.current;bt.textMatrix=bt.lineMatrix=[ft,gt,pt,vt,At,Rt],bt.textMatrixScale=Math.hypot(ft,gt),bt.x=bt.lineX=0,bt.y=bt.lineY=0,bt.xcoords=[],bt.ycoords=[],bt.tspan=this.svgFactory.createElement("svg:tspan"),bt.tspan.setAttributeNS(null,"font-family",bt.fontFamily),bt.tspan.setAttributeNS(null,"font-size",`${ot(bt.fontSize)}px`),bt.tspan.setAttributeNS(null,"y",ot(-bt.y)),bt.txtElement=this.svgFactory.createElement("svg:text"),bt.txtElement.append(bt.tspan)}beginText(){const ft=this.current;ft.x=ft.lineX=0,ft.y=ft.lineY=0,ft.textMatrix=o.IDENTITY_MATRIX,ft.lineMatrix=o.IDENTITY_MATRIX,ft.textMatrixScale=1,ft.tspan=this.svgFactory.createElement("svg:tspan"),ft.txtElement=this.svgFactory.createElement("svg:text"),ft.txtgrp=this.svgFactory.createElement("svg:g"),ft.xcoords=[],ft.ycoords=[]}moveText(ft,gt){const pt=this.current;pt.x=pt.lineX+=ft,pt.y=pt.lineY+=gt,pt.xcoords=[],pt.ycoords=[],pt.tspan=this.svgFactory.createElement("svg:tspan"),pt.tspan.setAttributeNS(null,"font-family",pt.fontFamily),pt.tspan.setAttributeNS(null,"font-size",`${ot(pt.fontSize)}px`),pt.tspan.setAttributeNS(null,"y",ot(-pt.y))}showText(ft){const gt=this.current,pt=gt.font,vt=gt.fontSize;if(vt===0)return;const At=gt.fontSizeScale,Rt=gt.charSpacing,bt=gt.wordSpacing,Tt=gt.fontDirection,Lt=gt.textHScale*Tt,Yt=pt.vertical,zt=Yt?1:-1,Wt=pt.defaultVMetrics,Bt=vt*gt.fontMatrix[0];let Ut=0;for(const Xt of ft){if(Xt===null){Ut+=Tt*bt;continue}else if(typeof Xt=="number"){Ut+=zt*Xt*vt/1e3;continue}const Ct=(Xt.isSpace?bt:0)+Rt,yt=Xt.fontChar;let Et,St,Ft=Xt.width;if(Yt){let Ot;const Gt=Xt.vmetric||Wt;Ot=Xt.vmetric?Gt[1]:Ft*.5,Ot=-Ot*Bt;const Vt=Gt[2]*Bt;Ft=Gt?-Gt[0]:Ft,Et=Ot/At,St=(Ut+Vt)/At}else Et=Ut/At,St=0;(Xt.isInFont||pt.missingFile)&&(gt.xcoords.push(gt.x+Et),Yt&&gt.ycoords.push(-gt.y+St),gt.tspan.textContent+=yt);const kt=Yt?Ft*Bt-Ct*Tt:Ft*Bt+Ct*Tt;Ut+=kt}gt.tspan.setAttributeNS(null,"x",gt.xcoords.map(ot).join(" ")),Yt?gt.tspan.setAttributeNS(null,"y",gt.ycoords.map(ot).join(" ")):gt.tspan.setAttributeNS(null,"y",ot(-gt.y)),Yt?gt.y-=Ut:gt.x+=Ut*Lt,gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${ot(gt.fontSize)}px`),gt.fontStyle!==j.fontStyle&&gt.tspan.setAttributeNS(null,"font-style",gt.fontStyle),gt.fontWeight!==j.fontWeight&&gt.tspan.setAttributeNS(null,"font-weight",gt.fontWeight);const _t=gt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(_t===o.TextRenderingMode.FILL||_t===o.TextRenderingMode.FILL_STROKE?(gt.fillColor!==j.fillColor&&gt.tspan.setAttributeNS(null,"fill",gt.fillColor),gt.fillAlpha<1&&gt.tspan.setAttributeNS(null,"fill-opacity",gt.fillAlpha)):gt.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?gt.tspan.setAttributeNS(null,"fill","transparent"):gt.tspan.setAttributeNS(null,"fill","none"),_t===o.TextRenderingMode.STROKE||_t===o.TextRenderingMode.FILL_STROKE){const Xt=1/(gt.textMatrixScale||1);this._setStrokeAttributes(gt.tspan,Xt)}let $t=gt.textMatrix;gt.textRise!==0&&($t=$t.slice(),$t[5]+=gt.textRise),gt.txtElement.setAttributeNS(null,"transform",`${ut($t)} scale(${ot(Lt)}, -1)`),gt.txtElement.setAttributeNS(_e,"xml:space","preserve"),gt.txtElement.append(gt.tspan),gt.txtgrp.append(gt.txtElement),this._ensureTransformGroup().append(gt.txtElement)}setLeadingMoveText(ft,gt){this.setLeading(-gt),this.moveText(ft,gt)}addFontStyle(ft){if(!ft.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const gt=rt(ft.data,ft.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ft.loadedName}"; src: url(${gt}); }
`}setFont(ft){const gt=this.current,pt=this.commonObjs.get(ft[0]);let vt=ft[1];gt.font=pt,this.embedFonts&&!pt.missingFile&&!this.embeddedFonts[pt.loadedName]&&(this.addFontStyle(pt),this.embeddedFonts[pt.loadedName]=pt),gt.fontMatrix=pt.fontMatrix||o.FONT_IDENTITY_MATRIX;let At="normal";pt.black?At="900":pt.bold&&(At="bold");const Rt=pt.italic?"italic":"normal";vt<0?(vt=-vt,gt.fontDirection=-1):gt.fontDirection=1,gt.fontSize=vt,gt.fontFamily=pt.loadedName,gt.fontWeight=At,gt.fontStyle=Rt,gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"y",ot(-gt.y)),gt.xcoords=[],gt.ycoords=[]}endText(){var gt;const ft=this.current;ft.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((gt=ft.txtElement)!=null&&gt.hasChildNodes())&&(ft.element=ft.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ft){ft>0&&(this.current.lineWidth=ft)}setLineCap(ft){this.current.lineCap=tt[ft]}setLineJoin(ft){this.current.lineJoin=st[ft]}setMiterLimit(ft){this.current.miterLimit=ft}setStrokeAlpha(ft){this.current.strokeAlpha=ft}setStrokeRGBColor(ft,gt,pt){this.current.strokeColor=o.Util.makeHexColor(ft,gt,pt)}setFillAlpha(ft){this.current.fillAlpha=ft}setFillRGBColor(ft,gt,pt){this.current.fillColor=o.Util.makeHexColor(ft,gt,pt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ft){this.current.strokeColor=this._makeColorN_Pattern(ft)}setFillColorN(ft){this.current.fillColor=this._makeColorN_Pattern(ft)}shadingFill(ft){const{width:gt,height:pt}=this.viewport,vt=o.Util.inverseTransform(this.transformMatrix),[At,Rt,bt,Tt]=o.Util.getAxialAlignedBoundingBox([0,0,gt,pt],vt),Lt=this.svgFactory.createElement("svg:rect");Lt.setAttributeNS(null,"x",At),Lt.setAttributeNS(null,"y",Rt),Lt.setAttributeNS(null,"width",bt-At),Lt.setAttributeNS(null,"height",Tt-Rt),Lt.setAttributeNS(null,"fill",this._makeShadingPattern(ft)),this.current.fillAlpha<1&&Lt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Lt)}_makeColorN_Pattern(ft){return ft[0]==="TilingPattern"?this._makeTilingPattern(ft):this._makeShadingPattern(ft)}_makeTilingPattern(ft){const gt=ft[1],pt=ft[2],vt=ft[3]||o.IDENTITY_MATRIX,[At,Rt,bt,Tt]=ft[4],Lt=ft[5],Yt=ft[6],zt=ft[7],Wt=`shading${ht++}`,[Bt,Ut,_t,$t]=o.Util.normalizeRect([...o.Util.applyTransform([At,Rt],vt),...o.Util.applyTransform([bt,Tt],vt)]),[Xt,Ct]=o.Util.singularValueDecompose2dScale(vt),yt=Lt*Xt,Et=Yt*Ct,St=this.svgFactory.createElement("svg:pattern");St.setAttributeNS(null,"id",Wt),St.setAttributeNS(null,"patternUnits","userSpaceOnUse"),St.setAttributeNS(null,"width",yt),St.setAttributeNS(null,"height",Et),St.setAttributeNS(null,"x",`${Bt}`),St.setAttributeNS(null,"y",`${Ut}`);const Ft=this.svg,kt=this.transformMatrix,Ot=this.current.fillColor,Gt=this.current.strokeColor,Vt=this.svgFactory.create(_t-Bt,$t-Ut);if(this.svg=Vt,this.transformMatrix=vt,zt===2){const rn=o.Util.makeHexColor(...gt);this.current.fillColor=rn,this.current.strokeColor=rn}return this.executeOpTree(this.convertOpList(pt)),this.svg=Ft,this.transformMatrix=kt,this.current.fillColor=Ot,this.current.strokeColor=Gt,St.append(Vt.childNodes[0]),this.defs.append(St),`url(#${Wt})`}_makeShadingPattern(ft){switch(typeof ft=="string"&&(ft=this.objs.get(ft)),ft[0]){case"RadialAxial":const gt=`shading${ht++}`,pt=ft[3];let vt;switch(ft[1]){case"axial":const At=ft[4],Rt=ft[5];vt=this.svgFactory.createElement("svg:linearGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"x1",At[0]),vt.setAttributeNS(null,"y1",At[1]),vt.setAttributeNS(null,"x2",Rt[0]),vt.setAttributeNS(null,"y2",Rt[1]);break;case"radial":const bt=ft[4],Tt=ft[5],Lt=ft[6],Yt=ft[7];vt=this.svgFactory.createElement("svg:radialGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"cx",Tt[0]),vt.setAttributeNS(null,"cy",Tt[1]),vt.setAttributeNS(null,"r",Yt),vt.setAttributeNS(null,"fx",bt[0]),vt.setAttributeNS(null,"fy",bt[1]),vt.setAttributeNS(null,"fr",Lt);break;default:throw new Error(`Unknown RadialAxial type: ${ft[1]}`)}for(const At of pt){const Rt=this.svgFactory.createElement("svg:stop");Rt.setAttributeNS(null,"offset",At[0]),Rt.setAttributeNS(null,"stop-color",At[1]),vt.append(Rt)}return this.defs.append(vt),`url(#${gt})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ft[0]}`)}}setDash(ft,gt){this.current.dashArray=ft,this.current.dashPhase=gt}constructPath(ft,gt){const pt=this.current;let vt=pt.x,At=pt.y,Rt=[],bt=0;for(const Tt of ft)switch(Tt|0){case o.OPS.rectangle:vt=gt[bt++],At=gt[bt++];const Lt=gt[bt++],Yt=gt[bt++],zt=vt+Lt,Wt=At+Yt;Rt.push("M",ot(vt),ot(At),"L",ot(zt),ot(At),"L",ot(zt),ot(Wt),"L",ot(vt),ot(Wt),"Z");break;case o.OPS.moveTo:vt=gt[bt++],At=gt[bt++],Rt.push("M",ot(vt),ot(At));break;case o.OPS.lineTo:vt=gt[bt++],At=gt[bt++],Rt.push("L",ot(vt),ot(At));break;case o.OPS.curveTo:vt=gt[bt+4],At=gt[bt+5],Rt.push("C",ot(gt[bt]),ot(gt[bt+1]),ot(gt[bt+2]),ot(gt[bt+3]),ot(vt),ot(At)),bt+=6;break;case o.OPS.curveTo2:Rt.push("C",ot(vt),ot(At),ot(gt[bt]),ot(gt[bt+1]),ot(gt[bt+2]),ot(gt[bt+3])),vt=gt[bt+2],At=gt[bt+3],bt+=4;break;case o.OPS.curveTo3:vt=gt[bt+2],At=gt[bt+3],Rt.push("C",ot(gt[bt]),ot(gt[bt+1]),ot(vt),ot(At),ot(vt),ot(At)),bt+=4;break;case o.OPS.closePath:Rt.push("Z");break}Rt=Rt.join(" "),pt.path&&ft.length>0&&ft[0]!==o.OPS.rectangle&&ft[0]!==o.OPS.moveTo?Rt=pt.path.getAttributeNS(null,"d")+Rt:(pt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(pt.path)),pt.path.setAttributeNS(null,"d",Rt),pt.path.setAttributeNS(null,"fill","none"),pt.element=pt.path,pt.setCurrentPoint(vt,At)}endPath(){const ft=this.current;if(ft.path=null,!this.pendingClip)return;if(!ft.element){this.pendingClip=null;return}const gt=`clippath${dt++}`,pt=this.svgFactory.createElement("svg:clipPath");pt.setAttributeNS(null,"id",gt),pt.setAttributeNS(null,"transform",ut(this.transformMatrix));const vt=ft.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vt.setAttributeNS(null,"clip-rule","evenodd"):vt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,pt.append(vt),this.defs.append(pt),ft.activeClipUrl){ft.clipGroup=null;for(const At of this.extraStack)At.clipGroup=null;pt.setAttributeNS(null,"clip-path",ft.activeClipUrl)}ft.activeClipUrl=`url(#${gt})`,this.tgrp=null}clip(ft){this.pendingClip=ft}closePath(){const ft=this.current;if(ft.path){const gt=`${ft.path.getAttributeNS(null,"d")}Z`;ft.path.setAttributeNS(null,"d",gt)}}setLeading(ft){this.current.leading=-ft}setTextRise(ft){this.current.textRise=ft}setTextRenderingMode(ft){this.current.textRenderingMode=ft}setHScale(ft){this.current.textHScale=ft/100}setRenderingIntent(ft){}setFlatness(ft){}setGState(ft){for(const[gt,pt]of ft)switch(gt){case"LW":this.setLineWidth(pt);break;case"LC":this.setLineCap(pt);break;case"LJ":this.setLineJoin(pt);break;case"ML":this.setMiterLimit(pt);break;case"D":this.setDash(pt[0],pt[1]);break;case"RI":this.setRenderingIntent(pt);break;case"FL":this.setFlatness(pt);break;case"Font":this.setFont(pt);break;case"CA":this.setStrokeAlpha(pt);break;case"ca":this.setFillAlpha(pt);break;default:(0,o.warn)(`Unimplemented graphic state operator ${gt}`);break}}fill(){const ft=this.current;ft.element&&(ft.element.setAttributeNS(null,"fill",ft.fillColor),ft.element.setAttributeNS(null,"fill-opacity",ft.fillAlpha),this.endPath())}stroke(){const ft=this.current;ft.element&&(this._setStrokeAttributes(ft.element),ft.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ft){let gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const pt=this.current;let vt=pt.dashArray;gt!==1&&vt.length>0&&(vt=vt.map(function(At){return gt*At})),ft.setAttributeNS(null,"stroke",pt.strokeColor),ft.setAttributeNS(null,"stroke-opacity",pt.strokeAlpha),ft.setAttributeNS(null,"stroke-miterlimit",ot(pt.miterLimit)),ft.setAttributeNS(null,"stroke-linecap",pt.lineCap),ft.setAttributeNS(null,"stroke-linejoin",pt.lineJoin),ft.setAttributeNS(null,"stroke-width",ot(gt*pt.lineWidth)+"px"),ft.setAttributeNS(null,"stroke-dasharray",vt.map(ot).join(" ")),ft.setAttributeNS(null,"stroke-dashoffset",ot(gt*pt.dashPhase)+"px")}eoFill(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width","1px"),ft.setAttributeNS(null,"height","1px"),ft.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ft)}paintImageXObject(ft){const gt=this.getObject(ft);if(!gt){(0,o.warn)(`Dependent image with object ID ${ft} is not ready yet`);return}this.paintInlineImageXObject(gt)}paintInlineImageXObject(ft,gt){const pt=ft.width,vt=ft.height,At=at(ft,this.forceDataSchema,!!gt),Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x","0"),Rt.setAttributeNS(null,"y","0"),Rt.setAttributeNS(null,"width",ot(pt)),Rt.setAttributeNS(null,"height",ot(vt)),this.current.element=Rt,this.clip("nonzero");const bt=this.svgFactory.createElement("svg:image");bt.setAttributeNS(nt,"xlink:href",At),bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y",ot(-vt)),bt.setAttributeNS(null,"width",ot(pt)+"px"),bt.setAttributeNS(null,"height",ot(vt)+"px"),bt.setAttributeNS(null,"transform",`scale(${ot(1/pt)} ${ot(-1/vt)})`),gt?gt.append(bt):this._ensureTransformGroup().append(bt)}paintImageMaskXObject(ft){const gt=this.getObject(ft.data,ft);if(gt.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const pt=this.current,vt=gt.width,At=gt.height,Rt=pt.fillColor;pt.maskId=`mask${lt++}`;const bt=this.svgFactory.createElement("svg:mask");bt.setAttributeNS(null,"id",pt.maskId);const Tt=this.svgFactory.createElement("svg:rect");Tt.setAttributeNS(null,"x","0"),Tt.setAttributeNS(null,"y","0"),Tt.setAttributeNS(null,"width",ot(vt)),Tt.setAttributeNS(null,"height",ot(At)),Tt.setAttributeNS(null,"fill",Rt),Tt.setAttributeNS(null,"mask",`url(#${pt.maskId})`),this.defs.append(bt),this._ensureTransformGroup().append(Tt),this.paintInlineImageXObject(gt,bt)}paintFormXObjectBegin(ft,gt){if(Array.isArray(ft)&&ft.length===6&&this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]),gt){const pt=gt[2]-gt[0],vt=gt[3]-gt[1],At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x",gt[0]),At.setAttributeNS(null,"y",gt[1]),At.setAttributeNS(null,"width",ot(pt)),At.setAttributeNS(null,"height",ot(vt)),this.current.element=At,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ft){const gt=this.svgFactory.create(ft.width,ft.height),pt=this.svgFactory.createElement("svg:defs");gt.append(pt),this.defs=pt;const vt=this.svgFactory.createElement("svg:g");return vt.setAttributeNS(null,"transform",ut(ft.transform)),gt.append(vt),this.svg=vt,gt}_ensureClipGroup(){if(!this.current.clipGroup){const ft=this.svgFactory.createElement("svg:g");ft.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ft),this.current.clipGroup=ft}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ut(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=xt},(i,e,s)=>{var a=s(3),o=s(188),j=s(193);a({target:"Array",proto:!0},{group:function(nt){var tt=arguments.length>1?arguments[1]:void 0;return o(this,nt,tt)}}),j("group")},(i,e,s)=>{var a=s(99),o=s(14),j=s(13),_e=s(40),nt=s(18),tt=s(64),st=s(189),rt=s(108),at=Array,it=o([].push);i.exports=function(ct,ot,ut,dt){for(var lt=_e(ct),ht=j(lt),xt=a(ot,ut),mt=st(null),ft=tt(ht),gt=0,pt,vt,At;ft>gt;gt++)At=ht[gt],vt=nt(xt(At,gt,lt)),vt in mt?it(mt[vt],At):mt[vt]=[At];if(dt&&(pt=dt(lt),pt!==at))for(vt in mt)mt[vt]=rt(pt,mt[vt]);return mt}},(i,e,s)=>{var a=s(47),o=s(190),j=s(66),_e=s(55),nt=s(192),tt=s(43),st=s(54),rt=">",at="<",it="prototype",ct="script",ot=st("IE_PROTO"),ut=function(){},dt=function(ft){return at+ct+rt+ft+at+"/"+ct+rt},lt=function(ft){ft.write(dt("")),ft.close();var gt=ft.parentWindow.Object;return ft=null,gt},ht=function(){var ft=tt("iframe"),gt="java"+ct+":",pt;return ft.style.display="none",nt.appendChild(ft),ft.src=String(gt),pt=ft.contentWindow.document,pt.open(),pt.write(dt("document.F=Object")),pt.close(),pt.F},xt,mt=function(){try{xt=new ActiveXObject("htmlfile")}catch{}mt=typeof document<"u"?document.domain&&xt?lt(xt):ht():lt(xt);for(var ft=j.length;ft--;)delete mt[it][j[ft]];return mt()};_e[ot]=!0,i.exports=Object.create||function(gt,pt){var vt;return gt!==null?(ut[it]=a(gt),vt=new ut,ut[it]=null,vt[ot]=gt):vt=mt(),pt===void 0?vt:o.f(vt,pt)}},(i,e,s)=>{var a=s(6),o=s(46),j=s(45),_e=s(47),nt=s(12),tt=s(191);e.f=a&&!o?Object.defineProperties:function(rt,at){_e(rt);for(var it=nt(at),ct=tt(at),ot=ct.length,ut=0,dt;ot>ut;)j.f(rt,dt=ct[ut++],it[dt]);return rt}},(i,e,s)=>{var a=s(59),o=s(66);i.exports=Object.keys||function(_e){return a(_e,o)}},(i,e,s)=>{var a=s(24);i.exports=a("document","documentElement")},(i,e,s)=>{var a=s(34),o=s(189),j=s(45).f,_e=a("unscopables"),nt=Array.prototype;nt[_e]===void 0&&j(nt,_e,{configurable:!0,value:o(null)}),i.exports=function(tt){nt[_e][tt]=!0}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0,s(89);class a{static textContent(j){const _e=[],nt={items:_e,styles:Object.create(null)};function tt(st){var it;if(!st)return;let rt=null;const at=st.name;if(at==="#text")rt=st.value;else if(a.shouldBuildText(at))(it=st==null?void 0:st.attributes)!=null&&it.textContent?rt=st.attributes.textContent:st.value&&(rt=st.value);else return;if(rt!==null&&_e.push({str:rt}),!!st.children)for(const ct of st.children)tt(ct)}return tt(j),nt}static shouldBuildText(j){return!(j==="textarea"||j==="input"||j==="option"||j==="select")}}e.XfaText=a},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=ut,e.updateTextLayer=dt,s(89),s(2);var a=s(1),o=s(168);const j=1e5,_e=30,nt=.8,tt=new Map;function st(lt,ht){let xt;if(ht&&a.FeatureTest.isOffscreenCanvasSupported)xt=new OffscreenCanvas(lt,lt).getContext("2d",{alpha:!1});else{const mt=document.createElement("canvas");mt.width=mt.height=lt,xt=mt.getContext("2d",{alpha:!1})}return xt}function rt(lt,ht){const xt=tt.get(lt);if(xt)return xt;const mt=st(_e,ht);mt.font=`${_e}px ${lt}`;const ft=mt.measureText("");let gt=ft.fontBoundingBoxAscent,pt=Math.abs(ft.fontBoundingBoxDescent);if(gt){const At=gt/(gt+pt);return tt.set(lt,At),mt.canvas.width=mt.canvas.height=0,At}mt.strokeStyle="red",mt.clearRect(0,0,_e,_e),mt.strokeText("g",0,0);let vt=mt.getImageData(0,0,_e,_e).data;pt=0;for(let At=vt.length-1-3;At>=0;At-=4)if(vt[At]>0){pt=Math.ceil(At/4/_e);break}mt.clearRect(0,0,_e,_e),mt.strokeText("A",0,_e),vt=mt.getImageData(0,0,_e,_e).data,gt=0;for(let At=0,Rt=vt.length;At<Rt;At+=4)if(vt[At]>0){gt=_e-Math.floor(At/4/_e);break}if(mt.canvas.width=mt.canvas.height=0,gt){const At=gt/(gt+pt);return tt.set(lt,At),At}return tt.set(lt,nt),nt}function at(lt,ht,xt){const mt=document.createElement("span"),ft={angle:0,canvasWidth:0,hasText:ht.str!=="",hasEOL:ht.hasEOL,fontSize:0};lt._textDivs.push(mt);const gt=a.Util.transform(lt._transform,ht.transform);let pt=Math.atan2(gt[1],gt[0]);const vt=xt[ht.fontName];vt.vertical&&(pt+=Math.PI/2);const At=Math.hypot(gt[2],gt[3]),Rt=At*rt(vt.fontFamily,lt._isOffscreenCanvasSupported);let bt,Tt;pt===0?(bt=gt[4],Tt=gt[5]-Rt):(bt=gt[4]+Rt*Math.sin(pt),Tt=gt[5]-Rt*Math.cos(pt));const Lt="calc(var(--scale-factor)*",Yt=mt.style;lt._container===lt._rootContainer?(Yt.left=`${(100*bt/lt._pageWidth).toFixed(2)}%`,Yt.top=`${(100*Tt/lt._pageHeight).toFixed(2)}%`):(Yt.left=`${Lt}${bt.toFixed(2)}px)`,Yt.top=`${Lt}${Tt.toFixed(2)}px)`),Yt.fontSize=`${Lt}${At.toFixed(2)}px)`,Yt.fontFamily=vt.fontFamily,ft.fontSize=At,mt.setAttribute("role","presentation"),mt.textContent=ht.str,mt.dir=ht.dir,lt._fontInspectorEnabled&&(mt.dataset.fontName=ht.fontName),pt!==0&&(ft.angle=pt*(180/Math.PI));let zt=!1;if(ht.str.length>1)zt=!0;else if(ht.str!==" "&&ht.transform[0]!==ht.transform[3]){const Wt=Math.abs(ht.transform[0]),Bt=Math.abs(ht.transform[3]);Wt!==Bt&&Math.max(Wt,Bt)/Math.min(Wt,Bt)>1.5&&(zt=!0)}zt&&(ft.canvasWidth=vt.vertical?ht.height:ht.width),lt._textDivProperties.set(mt,ft),lt._isReadableStream&&lt._layoutText(mt)}function it(lt){const{div:ht,scale:xt,properties:mt,ctx:ft,prevFontSize:gt,prevFontFamily:pt}=lt,{style:vt}=ht;let At="";if(mt.canvasWidth!==0&&mt.hasText){const{fontFamily:Rt}=vt,{canvasWidth:bt,fontSize:Tt}=mt;(gt!==Tt||pt!==Rt)&&(ft.font=`${Tt*xt}px ${Rt}`,lt.prevFontSize=Tt,lt.prevFontFamily=Rt);const{width:Lt}=ft.measureText(ht.textContent);Lt>0&&(At=`scaleX(${bt*xt/Lt})`)}mt.angle!==0&&(At=`rotate(${mt.angle}deg) ${At}`),At.length>0&&(vt.transform=At)}function ct(lt){if(lt._canceled)return;const ht=lt._textDivs,xt=lt._capability;if(ht.length>j){xt.resolve();return}if(!lt._isReadableStream)for(const ft of ht)lt._layoutText(ft);xt.resolve()}class ot{constructor(ht){var Yt;let{textContentSource:xt,container:mt,viewport:ft,textDivs:gt,textDivProperties:pt,textContentItemsStr:vt,isOffscreenCanvasSupported:At}=ht;this._textContentSource=xt,this._isReadableStream=xt instanceof ReadableStream,this._container=this._rootContainer=mt,this._textDivs=gt||[],this._textContentItemsStr=vt||[],this._isOffscreenCanvasSupported=At,this._fontInspectorEnabled=!!((Yt=globalThis.FontInspector)!=null&&Yt.enabled),this._reader=null,this._textDivProperties=pt||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:ft.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:st(0,At)};const{pageWidth:Rt,pageHeight:bt,pageX:Tt,pageY:Lt}=ft.rawDims;this._transform=[1,0,0,-1,-Tt,Lt+bt],this._pageWidth=Rt,this._pageHeight=bt,(0,o.setLayerDimensions)(mt,ft),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(ht,xt){for(const mt of ht){if(mt.str===void 0){if(mt.type==="beginMarkedContentProps"||mt.type==="beginMarkedContent"){const ft=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),mt.id!==null&&this._container.setAttribute("id",`${mt.id}`),ft.append(this._container)}else mt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(mt.str),at(this,mt,xt)}}_layoutText(ht){const xt=this._layoutTextParams.properties=this._textDivProperties.get(ht);if(this._layoutTextParams.div=ht,it(this._layoutTextParams),xt.hasText&&this._container.append(ht),xt.hasEOL){const mt=document.createElement("br");mt.setAttribute("role","presentation"),this._container.append(mt)}}_render(){const ht=new a.PromiseCapability;let xt=Object.create(null);if(this._isReadableStream){const mt=()=>{this._reader.read().then(ft=>{let{value:gt,done:pt}=ft;if(pt){ht.resolve();return}Object.assign(xt,gt.styles),this._processItems(gt.items,xt),mt()},ht.reject)};this._reader=this._textContentSource.getReader(),mt()}else if(this._textContentSource){const{items:mt,styles:ft}=this._textContentSource;this._processItems(mt,ft),ht.resolve()}else throw new Error('No "textContentSource" parameter specified.');ht.promise.then(()=>{xt=null,ct(this)},this._capability.reject)}}e.TextLayerRenderTask=ot;function ut(lt){!lt.textContentSource&&(lt.textContent||lt.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),lt.textContentSource=lt.textContent||lt.textContentStream);const{container:ht,viewport:xt}=lt,mt=getComputedStyle(ht),ft=mt.getPropertyValue("visibility"),gt=parseFloat(mt.getPropertyValue("--scale-factor"));ft==="visible"&&(!gt||Math.abs(gt-xt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const pt=new ot(lt);return pt._render(),pt}function dt(lt){let{container:ht,viewport:xt,textDivs:mt,textDivProperties:ft,isOffscreenCanvasSupported:gt,mustRotate:pt=!0,mustRescale:vt=!0}=lt;if(pt&&(0,o.setLayerDimensions)(ht,{rotation:xt.rotation}),vt){const At=st(0,gt),bt={prevFontSize:null,prevFontFamily:null,div:null,scale:xt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:At};for(const Tt of mt)bt.properties=ft.get(Tt),bt.div=Tt,it(bt)}}},(i,e,s)=>{var rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,Fx,py,Lx,Ox;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0,s(125),s(136),s(138),s(141),s(143),s(145),s(147);var a=s(1),o=s(164),j=s(197),_e=s(202),nt=s(168),tt=s(203);const At=class At{constructor(bt){Dt(this,mt);Dt(this,rt);Dt(this,at,!1);Dt(this,it,null);Dt(this,ct,this.pointerup.bind(this));Dt(this,ot,this.pointerdown.bind(this));Dt(this,ut,new Map);Dt(this,dt,!1);Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt);let{uiManager:Tt,pageIndex:Lt,div:Yt,accessibilityManager:zt,annotationLayer:Wt,viewport:Bt,l10n:Ut}=bt;const _t=[j.FreeTextEditor,_e.InkEditor,tt.StampEditor];if(!At._initialized){At._initialized=!0;for(const $t of _t)$t.initialize(Ut)}Tt.registerEditorTypes(_t),Pt(this,xt,Tt),this.pageIndex=Lt,this.div=Yt,Pt(this,rt,zt),Pt(this,it,Wt),this.viewport=Bt,et(this,xt).addLayer(this)}get isEmpty(){return et(this,ut).size===0}updateToolbar(bt){et(this,xt).updateToolbar(bt)}updateMode(){let bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:et(this,xt).getMode();wt(this,mt,Ox).call(this),bt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),bt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",bt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",bt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",bt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(bt){if(!bt&&et(this,xt).getMode()!==a.AnnotationEditorType.INK)return;if(!bt){for(const Lt of et(this,ut).values())if(Lt.isEmpty()){Lt.setInBackground();return}}wt(this,mt,py).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(bt){et(this,xt).setEditingState(bt)}addCommands(bt){et(this,xt).addCommands(bt)}enable(){this.div.style.pointerEvents="auto";const bt=new Set;for(const Lt of et(this,ut).values())Lt.enableEditing(),Lt.annotationElementId&&bt.add(Lt.annotationElementId);if(!et(this,it))return;const Tt=et(this,it).getEditableAnnotations();for(const Lt of Tt){if(Lt.hide(),et(this,xt).isDeletedAnnotationElement(Lt.data.id)||bt.has(Lt.data.id))continue;const Yt=this.deserialize(Lt);Yt&&(this.addOrRebuild(Yt),Yt.enableEditing())}}disable(){var Tt;Pt(this,ht,!0),this.div.style.pointerEvents="none";const bt=new Set;for(const Lt of et(this,ut).values()){if(Lt.disableEditing(),!Lt.annotationElementId||Lt.serialize()!==null){bt.add(Lt.annotationElementId);continue}(Tt=this.getEditableAnnotation(Lt.annotationElementId))==null||Tt.show(),Lt.remove()}if(et(this,it)){const Lt=et(this,it).getEditableAnnotations();for(const Yt of Lt){const{id:zt}=Yt.data;bt.has(zt)||et(this,xt).isDeletedAnnotationElement(zt)||Yt.show()}}wt(this,mt,Ox).call(this),this.isEmpty&&(this.div.hidden=!0),Pt(this,ht,!1)}getEditableAnnotation(bt){var Tt;return((Tt=et(this,it))==null?void 0:Tt.getEditableAnnotation(bt))||null}setActiveEditor(bt){et(this,xt).getActive()!==bt&&et(this,xt).setActiveEditor(bt)}enableClick(){this.div.addEventListener("pointerdown",et(this,ot)),this.div.addEventListener("pointerup",et(this,ct))}disableClick(){this.div.removeEventListener("pointerdown",et(this,ot)),this.div.removeEventListener("pointerup",et(this,ct))}attach(bt){et(this,ut).set(bt.id,bt);const{annotationElementId:Tt}=bt;Tt&&et(this,xt).isDeletedAnnotationElement(Tt)&&et(this,xt).removeDeletedAnnotationElement(bt)}detach(bt){var Tt;et(this,ut).delete(bt.id),(Tt=et(this,rt))==null||Tt.removePointerInTextLayer(bt.contentDiv),!et(this,ht)&&bt.annotationElementId&&et(this,xt).addDeletedAnnotationElement(bt)}remove(bt){this.detach(bt),et(this,xt).removeEditor(bt),bt.div.contains(document.activeElement)&&setTimeout(()=>{et(this,xt).focusMainContainer()},0),bt.div.remove(),bt.isAttachedToDOM=!1,et(this,lt)||this.addInkEditorIfNeeded(!1)}changeParent(bt){var Tt;bt.parent!==this&&(bt.annotationElementId&&(et(this,xt).addDeletedAnnotationElement(bt.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(bt),bt.annotationElementId=null),this.attach(bt),(Tt=bt.parent)==null||Tt.detach(bt),bt.setParent(this),bt.div&&bt.isAttachedToDOM&&(bt.div.remove(),this.div.append(bt.div)))}add(bt){if(this.changeParent(bt),et(this,xt).addEditor(bt),this.attach(bt),!bt.isAttachedToDOM){const Tt=bt.render();this.div.append(Tt),bt.isAttachedToDOM=!0}bt.fixAndSetPosition(),bt.onceAdded(),et(this,xt).addToAnnotationStorage(bt)}moveEditorInDOM(bt){var Lt;if(!bt.isAttachedToDOM)return;const{activeElement:Tt}=document;bt.div.contains(Tt)&&(bt._focusEventsAllowed=!1,setTimeout(()=>{bt.div.contains(document.activeElement)?bt._focusEventsAllowed=!0:(bt.div.addEventListener("focusin",()=>{bt._focusEventsAllowed=!0},{once:!0}),Tt.focus())},0)),bt._structTreeParentId=(Lt=et(this,rt))==null?void 0:Lt.moveElementInDOM(this.div,bt.div,bt.contentDiv,!0)}addOrRebuild(bt){bt.needsToBeRebuilt()?bt.rebuild():this.add(bt)}addUndoableEditor(bt){const Tt=()=>bt._uiManager.rebuild(bt),Lt=()=>{bt.remove()};this.addCommands({cmd:Tt,undo:Lt,mustExec:!1})}getNextId(){return et(this,xt).getId()}pasteEditor(bt,Tt){et(this,xt).updateToolbar(bt),et(this,xt).updateMode(bt);const{offsetX:Lt,offsetY:Yt}=wt(this,mt,Lx).call(this),zt=this.getNextId(),Wt=wt(this,mt,Fx).call(this,{parent:this,id:zt,x:Lt,y:Yt,uiManager:et(this,xt),isCentered:!0,...Tt});Wt&&this.add(Wt)}deserialize(bt){switch(bt.annotationType??bt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return j.FreeTextEditor.deserialize(bt,this,et(this,xt));case a.AnnotationEditorType.INK:return _e.InkEditor.deserialize(bt,this,et(this,xt));case a.AnnotationEditorType.STAMP:return tt.StampEditor.deserialize(bt,this,et(this,xt))}return null}addNewEditor(){wt(this,mt,py).call(this,wt(this,mt,Lx).call(this),!0)}setSelected(bt){et(this,xt).setSelected(bt)}toggleSelected(bt){et(this,xt).toggleSelected(bt)}isSelected(bt){return et(this,xt).isSelected(bt)}unselect(bt){et(this,xt).unselect(bt)}pointerup(bt){const{isMac:Tt}=a.FeatureTest.platform;if(!(bt.button!==0||bt.ctrlKey&&Tt)&&bt.target===this.div&&et(this,dt)){if(Pt(this,dt,!1),!et(this,at)){Pt(this,at,!0);return}if(et(this,xt).getMode()===a.AnnotationEditorType.STAMP){et(this,xt).unselectAll();return}wt(this,mt,py).call(this,bt,!1)}}pointerdown(bt){if(et(this,dt)){Pt(this,dt,!1);return}const{isMac:Tt}=a.FeatureTest.platform;if(bt.button!==0||bt.ctrlKey&&Tt||bt.target!==this.div)return;Pt(this,dt,!0);const Lt=et(this,xt).getActive();Pt(this,at,!Lt||Lt.isEmpty())}findNewParent(bt,Tt,Lt){const Yt=et(this,xt).findParent(Tt,Lt);return Yt===null||Yt===this?!1:(Yt.changeParent(bt),!0)}destroy(){var bt,Tt;((bt=et(this,xt).getActive())==null?void 0:bt.parent)===this&&(et(this,xt).commitOrRemove(),et(this,xt).setActiveEditor(null));for(const Lt of et(this,ut).values())(Tt=et(this,rt))==null||Tt.removePointerInTextLayer(Lt.contentDiv),Lt.setParent(null),Lt.isAttachedToDOM=!1,Lt.div.remove();this.div=null,et(this,ut).clear(),et(this,xt).removeLayer(this)}render(bt){let{viewport:Tt}=bt;this.viewport=Tt,(0,nt.setLayerDimensions)(this.div,Tt);for(const Lt of et(this,xt).getEditors(this.pageIndex))this.add(Lt);this.updateMode()}update(bt){let{viewport:Tt}=bt;et(this,xt).commitOrRemove(),this.viewport=Tt,(0,nt.setLayerDimensions)(this.div,{rotation:Tt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:bt,pageHeight:Tt}=this.viewport.rawDims;return[bt,Tt]}};rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakSet,Fx=function(bt){switch(et(this,xt).getMode()){case a.AnnotationEditorType.FREETEXT:return new j.FreeTextEditor(bt);case a.AnnotationEditorType.INK:return new _e.InkEditor(bt);case a.AnnotationEditorType.STAMP:return new tt.StampEditor(bt)}return null},py=function(bt,Tt){const Lt=this.getNextId(),Yt=wt(this,mt,Fx).call(this,{parent:this,id:Lt,x:bt.offsetX,y:bt.offsetY,uiManager:et(this,xt),isCentered:Tt});return Yt&&this.add(Yt),Yt},Lx=function(){const{x:bt,y:Tt,width:Lt,height:Yt}=this.div.getBoundingClientRect(),zt=Math.max(0,bt),Wt=Math.max(0,Tt),Bt=Math.min(window.innerWidth,bt+Lt),Ut=Math.min(window.innerHeight,Tt+Yt),_t=(zt+Bt)/2-bt,$t=(Wt+Ut)/2-Tt,[Xt,Ct]=this.viewport.rotation%180===0?[_t,$t]:[$t,_t];return{offsetX:Xt,offsetY:Ct}},Ox=function(){Pt(this,lt,!0);for(const bt of et(this,ut).values())bt.isEmpty()&&bt.remove();Pt(this,lt,!1)},Hn(At,"_initialized",!1);let st=At;e.AnnotationEditorLayer=st},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,m1,v1,y1,Hp,Nx,x1,jx;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0,s(89);var a=s(1),o=s(165),j=s(164),_e=s(198);const At=class At extends j.AnnotationEditor{constructor(Tt){super({...Tt,name:"freeTextEditor"});Dt(this,lt);Dt(this,tt,this.editorDivBlur.bind(this));Dt(this,st,this.editorDivFocus.bind(this));Dt(this,rt,this.editorDivInput.bind(this));Dt(this,at,this.editorDivKeydown.bind(this));Dt(this,it);Dt(this,ct,"");Dt(this,ot,`${this.id}-editor`);Dt(this,ut);Dt(this,dt,null);Pt(this,it,Tt.color||At._defaultColor||j.AnnotationEditor._defaultLineColor),Pt(this,ut,Tt.fontSize||At._defaultFontSize)}static get _keyboardManager(){const Tt=At.prototype,Lt=Wt=>Wt.isEmpty(),Yt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,zt=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Tt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Tt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Tt._translateEmpty,{args:[-Yt,0],checker:Lt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Tt._translateEmpty,{args:[-zt,0],checker:Lt}],[["ArrowRight","mac+ArrowRight"],Tt._translateEmpty,{args:[Yt,0],checker:Lt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Tt._translateEmpty,{args:[zt,0],checker:Lt}],[["ArrowUp","mac+ArrowUp"],Tt._translateEmpty,{args:[0,-Yt],checker:Lt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Tt._translateEmpty,{args:[0,-zt],checker:Lt}],[["ArrowDown","mac+ArrowDown"],Tt._translateEmpty,{args:[0,Yt],checker:Lt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Tt._translateEmpty,{args:[0,zt],checker:Lt}]]))}static initialize(Tt){j.AnnotationEditor.initialize(Tt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Lt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Lt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Tt,Lt){switch(Tt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:At._defaultFontSize=Lt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:At._defaultColor=Lt;break}}updateParams(Tt,Lt){switch(Tt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:wt(this,lt,m1).call(this,Lt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:wt(this,lt,v1).call(this,Lt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,At._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,At._defaultColor||j.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,et(this,ut)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,et(this,it)]]}_translateEmpty(Tt,Lt){this._uiManager.translateSelectedEditors(Tt,Lt,!0)}getInitialTranslation(){const Tt=this.parentScale;return[-At._internalPadding*Tt,-(At._internalPadding+et(this,ut))*Tt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",et(this,at)),this.editorDiv.addEventListener("focus",et(this,st)),this.editorDiv.addEventListener("blur",et(this,tt)),this.editorDiv.addEventListener("input",et(this,rt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",et(this,ot)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",et(this,at)),this.editorDiv.removeEventListener("focus",et(this,st)),this.editorDiv.removeEventListener("blur",et(this,tt)),this.editorDiv.removeEventListener("input",et(this,rt)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Tt){this._focusEventsAllowed&&(super.focusin(Tt),Tt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Tt;if(this.width){wt(this,lt,jx).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Tt=this._initialOptions)!=null&&Tt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Tt=et(this,ct),Lt=Pt(this,ct,wt(this,lt,y1).call(this).trimEnd());if(Tt===Lt)return;const Yt=zt=>{if(Pt(this,ct,zt),!zt){this.remove();return}wt(this,lt,Nx).call(this),this._uiManager.rebuild(this),wt(this,lt,Hp).call(this)};this.addCommands({cmd:()=>{Yt(Lt)},undo:()=>{Yt(Tt)},mustExec:!1}),wt(this,lt,Hp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Tt){this.enterInEditMode()}keydown(Tt){Tt.target===this.div&&Tt.key==="Enter"&&(this.enterInEditMode(),Tt.preventDefault())}editorDivKeydown(Tt){At._keyboardManager.exec(this,Tt)}editorDivFocus(Tt){this.isEditing=!0}editorDivBlur(Tt){this.isEditing=!1}editorDivInput(Tt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Tt,Lt;this.width&&(Tt=this.x,Lt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",et(this,ot)),this.enableEditing(),j.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(zt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("aria-label",zt)}),j.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(zt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("default-content",zt)}),this.editorDiv.contentEditable=!0;const{style:Yt}=this.editorDiv;if(Yt.fontSize=`calc(${et(this,ut)}px * var(--scale-factor))`,Yt.color=et(this,it),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[zt,Wt]=this.parentDimensions;if(this.annotationElementId){const{position:Bt}=et(this,dt);let[Ut,_t]=this.getInitialTranslation();[Ut,_t]=this.pageTranslationToScreen(Ut,_t);const[$t,Xt]=this.pageDimensions,[Ct,yt]=this.pageTranslation;let Et,St;switch(this.rotation){case 0:Et=Tt+(Bt[0]-Ct)/$t,St=Lt+this.height-(Bt[1]-yt)/Xt;break;case 90:Et=Tt+(Bt[0]-Ct)/$t,St=Lt-(Bt[1]-yt)/Xt,[Ut,_t]=[_t,-Ut];break;case 180:Et=Tt-this.width+(Bt[0]-Ct)/$t,St=Lt-(Bt[1]-yt)/Xt,[Ut,_t]=[-Ut,-_t];break;case 270:Et=Tt+(Bt[0]-Ct-this.height*Xt)/$t,St=Lt+(Bt[1]-yt-this.width*$t)/Xt,[Ut,_t]=[-_t,Ut];break}this.setAt(Et*zt,St*Wt,Ut,_t)}else this.setAt(Tt*zt,Lt*Wt,this.width*zt,this.height*Wt);wt(this,lt,Nx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Tt,Lt,Yt){let zt=null;if(Tt instanceof _e.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Bt,fontColor:Ut},rect:_t,rotation:$t,id:Xt},textContent:Ct,textPosition:yt,parent:{page:{pageNumber:Et}}}=Tt;if(!Ct||Ct.length===0)return null;zt=Tt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(Ut),fontSize:Bt,value:Ct.join(`
`),position:yt,pageIndex:Et-1,rect:_t,rotation:$t,id:Xt,deleted:!1}}const Wt=super.deserialize(Tt,Lt,Yt);return Pt(Wt,ut,Tt.fontSize),Pt(Wt,it,a.Util.makeHexColor(...Tt.color)),Pt(Wt,ct,Tt.value),Wt.annotationElementId=Tt.id||null,Pt(Wt,dt,zt),Wt}serialize(){let Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Lt=At._internalPadding*this.parentScale,Yt=this.getRect(Lt,Lt),zt=j.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:et(this,it)),Wt={annotationType:a.AnnotationEditorType.FREETEXT,color:zt,fontSize:et(this,ut),value:et(this,ct),pageIndex:this.pageIndex,rect:Yt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Tt?Wt:this.annotationElementId&&!wt(this,lt,x1).call(this,Wt)?null:(Wt.id=this.annotationElementId,Wt)}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakSet,m1=function(Tt){const Lt=zt=>{this.editorDiv.style.fontSize=`calc(${zt}px * var(--scale-factor))`,this.translate(0,-(zt-et(this,ut))*this.parentScale),Pt(this,ut,zt),wt(this,lt,Hp).call(this)},Yt=et(this,ut);this.addCommands({cmd:()=>{Lt(Tt)},undo:()=>{Lt(Yt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},v1=function(Tt){const Lt=et(this,it);this.addCommands({cmd:()=>{Pt(this,it,this.editorDiv.style.color=Tt)},undo:()=>{Pt(this,it,this.editorDiv.style.color=Lt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},y1=function(){const Tt=this.editorDiv.getElementsByTagName("div");if(Tt.length===0)return this.editorDiv.innerText;const Lt=[];for(const Yt of Tt)Lt.push(Yt.innerText.replace(/\r\n?|\n/,""));return Lt.join(`
`)},Hp=function(){const[Tt,Lt]=this.parentDimensions;let Yt;if(this.isAttachedToDOM)Yt=this.div.getBoundingClientRect();else{const{currentLayer:zt,div:Wt}=this,Bt=Wt.style.display;Wt.style.display="hidden",zt.div.append(this.div),Yt=Wt.getBoundingClientRect(),Wt.remove(),Wt.style.display=Bt}this.rotation%180===this.parentRotation%180?(this.width=Yt.width/Tt,this.height=Yt.height/Lt):(this.width=Yt.height/Tt,this.height=Yt.width/Lt),this.fixAndSetPosition()},Nx=function(){if(this.editorDiv.replaceChildren(),!!et(this,ct))for(const Tt of et(this,ct).split(`
`)){const Lt=document.createElement("div");Lt.append(Tt?document.createTextNode(Tt):document.createElement("br")),this.editorDiv.append(Lt)}},x1=function(Tt){const{value:Lt,fontSize:Yt,color:zt,rect:Wt,pageIndex:Bt}=et(this,dt);return Tt.value!==Lt||Tt.fontSize!==Yt||Tt.rect.some((Ut,_t)=>Math.abs(Ut-Wt[_t])>=1)||Tt.color.some((Ut,_t)=>Ut!==zt[_t])||Tt.pageIndex!==Bt},jx=function(){let Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.annotationElementId)return;if(wt(this,lt,Hp).call(this),!Tt&&(this.width===0||this.height===0)){setTimeout(()=>wt(this,lt,jx).call(this,!0),0);return}const Lt=At._internalPadding*this.parentScale;et(this,dt).rect=this.getRect(Lt,Lt)},Hn(At,"_freeTextDefaultContent",""),Hn(At,"_internalPadding",0),Hn(At,"_defaultColor",null),Hn(At,"_defaultFontSize",10),Hn(At,"_type","freetext");let nt=At;e.FreeTextEditor=nt},(i,e,s)=>{var St,kt,Ho,b1,Vt,rn,an,ln,cn,dn,qt,sn,It,Ht,Qt,tn,un,mn,vn,Zt,An,En,E1,gy,$x,Bx,Dn,Un,Wn,Tn,hn,nn,gn,Ux,Ln,Mt,Jt,pn,A1,Hx;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0,s(89),s(125),s(136),s(138),s(141),s(143),s(145),s(147);var a=s(1),o=s(168),j=s(163),_e=s(199),nt=s(200),tt=s(201);const st=1e3,rt=9,at=new WeakSet;function it(xn){return{width:xn[2]-xn[0],height:xn[3]-xn[1]}}class ct{static create(Nt){switch(Nt.data.annotationType){case a.AnnotationType.LINK:return new ut(Nt);case a.AnnotationType.TEXT:return new dt(Nt);case a.AnnotationType.WIDGET:switch(Nt.data.fieldType){case"Tx":return new ht(Nt);case"Btn":return Nt.data.radioButton?new ft(Nt):Nt.data.checkBox?new mt(Nt):new gt(Nt);case"Ch":return new pt(Nt);case"Sig":return new xt(Nt)}return new lt(Nt);case a.AnnotationType.POPUP:return new vt(Nt);case a.AnnotationType.FREETEXT:return new Rt(Nt);case a.AnnotationType.LINE:return new bt(Nt);case a.AnnotationType.SQUARE:return new Tt(Nt);case a.AnnotationType.CIRCLE:return new Lt(Nt);case a.AnnotationType.POLYLINE:return new Yt(Nt);case a.AnnotationType.CARET:return new Wt(Nt);case a.AnnotationType.INK:return new Bt(Nt);case a.AnnotationType.POLYGON:return new zt(Nt);case a.AnnotationType.HIGHLIGHT:return new Ut(Nt);case a.AnnotationType.UNDERLINE:return new _t(Nt);case a.AnnotationType.SQUIGGLY:return new $t(Nt);case a.AnnotationType.STRIKEOUT:return new Xt(Nt);case a.AnnotationType.STAMP:return new Ct(Nt);case a.AnnotationType.FILEATTACHMENT:return new yt(Nt);default:return new ot(Nt)}}}const Ft=class Ft{constructor(Nt){Dt(this,St,!1);let{isRenderable:jt=!1,ignoreBorder:Kt=!1,createQuadrilaterals:en=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=jt,this.data=Nt.data,this.layer=Nt.layer,this.linkService=Nt.linkService,this.downloadManager=Nt.downloadManager,this.imageResourcesPath=Nt.imageResourcesPath,this.renderForms=Nt.renderForms,this.svgFactory=Nt.svgFactory,this.annotationStorage=Nt.annotationStorage,this.enableScripting=Nt.enableScripting,this.hasJSActions=Nt.hasJSActions,this._fieldObjects=Nt.fieldObjects,this.parent=Nt.parent,jt&&(this.container=this._createContainer(Kt)),en&&this._createQuadrilaterals()}static _hasPopupData(Nt){let{titleObj:jt,contentsObj:Kt,richText:en}=Nt;return!!(jt!=null&&jt.str||Kt!=null&&Kt.str||en!=null&&en.str)}get hasPopupData(){return Ft._hasPopupData(this.data)}_createContainer(Nt){const{data:jt,parent:{page:Kt,viewport:en}}=this,on=document.createElement("section");on.setAttribute("data-annotation-id",jt.id),this instanceof lt||(on.tabIndex=st),on.style.zIndex=this.parent.zIndex++,this.data.popupRef&&on.setAttribute("aria-haspopup","dialog"),jt.noRotate&&on.classList.add("norotate");const{pageWidth:fn,pageHeight:yn,pageX:Rn,pageY:kn}=en.rawDims;if(!jt.rect||this instanceof vt){const{rotation:On}=jt;return!jt.hasOwnCanvas&&On!==0&&this.setRotation(On,on),on}const{width:Sn,height:jn}=it(jt.rect),Cn=a.Util.normalizeRect([jt.rect[0],Kt.view[3]-jt.rect[1]+Kt.view[1],jt.rect[2],Kt.view[3]-jt.rect[3]+Kt.view[1]]);if(!Nt&&jt.borderStyle.width>0){on.style.borderWidth=`${jt.borderStyle.width}px`;const On=jt.borderStyle.horizontalCornerRadius,$n=jt.borderStyle.verticalCornerRadius;if(On>0||$n>0){const zn=`calc(${On}px * var(--scale-factor)) / calc(${$n}px * var(--scale-factor))`;on.style.borderRadius=zn}else if(this instanceof ft){const zn=`calc(${Sn}px * var(--scale-factor)) / calc(${jn}px * var(--scale-factor))`;on.style.borderRadius=zn}switch(jt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:on.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:on.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:on.style.borderBottomStyle="solid";break}const Nn=jt.borderColor||null;Nn?(Pt(this,St,!0),on.style.borderColor=a.Util.makeHexColor(Nn[0]|0,Nn[1]|0,Nn[2]|0)):on.style.borderWidth=0}on.style.left=`${100*(Cn[0]-Rn)/fn}%`,on.style.top=`${100*(Cn[1]-kn)/yn}%`;const{rotation:Pn}=jt;return jt.hasOwnCanvas||Pn===0?(on.style.width=`${100*Sn/fn}%`,on.style.height=`${100*jn/yn}%`):this.setRotation(Pn,on),on}setRotation(Nt){let jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:Kt,pageHeight:en}=this.parent.viewport.rawDims,{width:on,height:fn}=it(this.data.rect);let yn,Rn;Nt%180===0?(yn=100*on/Kt,Rn=100*fn/en):(yn=100*fn/Kt,Rn=100*on/en),jt.style.width=`${yn}%`,jt.style.height=`${Rn}%`,jt.setAttribute("data-main-rotation",(360-Nt)%360)}get _commonActions(){const Nt=(jt,Kt,en)=>{const on=en.detail[jt],fn=on[0],yn=on.slice(1);en.target.style[Kt]=_e.ColorConverters[`${fn}_HTML`](yn),this.annotationStorage.setValue(this.data.id,{[Kt]:_e.ColorConverters[`${fn}_rgb`](yn)})};return(0,a.shadow)(this,"_commonActions",{display:jt=>{const{display:Kt}=jt.detail,en=Kt%2===1;this.container.style.visibility=en?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:en,noPrint:Kt===1||Kt===2})},print:jt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!jt.detail.print})},hidden:jt=>{const{hidden:Kt}=jt.detail;this.container.style.visibility=Kt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Kt,noView:Kt})},focus:jt=>{setTimeout(()=>jt.target.focus({preventScroll:!1}),0)},userName:jt=>{jt.target.title=jt.detail.userName},readonly:jt=>{jt.target.disabled=jt.detail.readonly},required:jt=>{this._setRequired(jt.target,jt.detail.required)},bgColor:jt=>{Nt("bgColor","backgroundColor",jt)},fillColor:jt=>{Nt("fillColor","backgroundColor",jt)},fgColor:jt=>{Nt("fgColor","color",jt)},textColor:jt=>{Nt("textColor","color",jt)},borderColor:jt=>{Nt("borderColor","borderColor",jt)},strokeColor:jt=>{Nt("strokeColor","borderColor",jt)},rotation:jt=>{const Kt=jt.detail.rotation;this.setRotation(Kt),this.annotationStorage.setValue(this.data.id,{rotation:Kt})}})}_dispatchEventFromSandbox(Nt,jt){const Kt=this._commonActions;for(const en of Object.keys(jt.detail)){const on=Nt[en]||Kt[en];on==null||on(jt)}}_setDefaultPropertiesFromJS(Nt){if(!this.enableScripting)return;const jt=this.annotationStorage.getRawValue(this.data.id);if(!jt)return;const Kt=this._commonActions;for(const[en,on]of Object.entries(jt)){const fn=Kt[en];if(fn){const yn={detail:{[en]:on},target:Nt};fn(yn),delete jt[en]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Nt}=this.data;if(!Nt)return;const[jt,Kt,en,on]=this.data.rect;if(Nt.length===1){const[,{x:$n,y:Nn},{x:zn,y:Kn}]=Nt[0];if(en===$n&&on===Nn&&jt===zn&&Kt===Kn)return}const{style:fn}=this.container;let yn;if(et(this,St)){const{borderColor:$n,borderWidth:Nn}=fn;fn.borderWidth=0,yn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$n}" stroke-width="${Nn}">`],this.container.classList.add("hasBorder")}const Rn=en-jt,kn=on-Kt,{svgFactory:Sn}=this,jn=Sn.createElement("svg");jn.classList.add("quadrilateralsContainer"),jn.setAttribute("width",0),jn.setAttribute("height",0);const Cn=Sn.createElement("defs");jn.append(Cn);const Pn=Sn.createElement("clipPath"),On=`clippath_${this.data.id}`;Pn.setAttribute("id",On),Pn.setAttribute("clipPathUnits","objectBoundingBox"),Cn.append(Pn);for(const[,{x:$n,y:Nn},{x:zn,y:Kn}]of Nt){const Yn=Sn.createElement("rect"),ts=(zn-jt)/Rn,hs=(on-Nn)/kn,gs=($n-zn)/Rn,No=(Nn-Kn)/kn;Yn.setAttribute("x",ts),Yn.setAttribute("y",hs),Yn.setAttribute("width",gs),Yn.setAttribute("height",No),Pn.append(Yn),yn==null||yn.push(`<rect vector-effect="non-scaling-stroke" x="${ts}" y="${hs}" width="${gs}" height="${No}"/>`)}et(this,St)&&(yn.push("</g></svg>')"),fn.backgroundImage=yn.join("")),this.container.append(jn),this.container.style.clipPath=`url(#${On})`}_createPopup(){const{container:Nt,data:jt}=this;Nt.setAttribute("aria-haspopup","dialog");const Kt=new vt({data:{color:jt.color,titleObj:jt.titleObj,modificationDate:jt.modificationDate,contentsObj:jt.contentsObj,richText:jt.richText,parentRect:jt.rect,borderStyle:0,id:`popup_${jt.id}`,rotation:jt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Kt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Nt){let jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const Kt=[];if(this._fieldObjects){const en=this._fieldObjects[Nt];if(en)for(const{page:on,id:fn,exportValues:yn}of en){if(on===-1||fn===jt)continue;const Rn=typeof yn=="string"?yn:null,kn=document.querySelector(`[data-element-id="${fn}"]`);if(kn&&!at.has(kn)){(0,a.warn)(`_getElementsByName - element not allowed: ${fn}`);continue}Kt.push({id:fn,exportValue:Rn,domElement:kn})}return Kt}for(const en of document.getElementsByName(Nt)){const{exportValue:on}=en,fn=en.getAttribute("data-element-id");fn!==jt&&at.has(en)&&Kt.push({id:fn,exportValue:on,domElement:en})}return Kt}show(){var Nt;this.container&&(this.container.hidden=!1),(Nt=this.popup)==null||Nt.maybeShow()}hide(){var Nt;this.container&&(this.container.hidden=!0),(Nt=this.popup)==null||Nt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Nt=this.getElementsToTriggerPopup();if(Array.isArray(Nt))for(const jt of Nt)jt.classList.add("highlightArea");else Nt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Nt,data:{id:jt}}=this;this.container.addEventListener("dblclick",()=>{var Kt;(Kt=this.linkService.eventBus)==null||Kt.dispatch("switchannotationeditormode",{source:this,mode:Nt,editId:jt})})}};St=new WeakMap;let ot=Ft;class ut extends ot{constructor(jt){let Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(jt,{isRenderable:!0,ignoreBorder:!!(Kt!=null&&Kt.ignoreBorder),createQuadrilaterals:!0});Dt(this,kt);this.isTooltipOnly=jt.data.isTooltipOnly}render(){const{data:jt,linkService:Kt}=this,en=document.createElement("a");en.setAttribute("data-element-id",jt.id);let on=!1;return jt.url?(Kt.addLinkAttributes(en,jt.url,jt.newWindow),on=!0):jt.action?(this._bindNamedAction(en,jt.action),on=!0):jt.attachment?(this._bindAttachment(en,jt.attachment),on=!0):jt.setOCGState?(wt(this,kt,b1).call(this,en,jt.setOCGState),on=!0):jt.dest?(this._bindLink(en,jt.dest),on=!0):(jt.actions&&(jt.actions.Action||jt.actions["Mouse Up"]||jt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(en,jt),on=!0),jt.resetForm?(this._bindResetFormAction(en,jt.resetForm),on=!0):this.isTooltipOnly&&!on&&(this._bindLink(en,""),on=!0)),this.container.classList.add("linkAnnotation"),on&&this.container.append(en),this.container}_bindLink(jt,Kt){jt.href=this.linkService.getDestinationHash(Kt),jt.onclick=()=>(Kt&&this.linkService.goToDestination(Kt),!1),(Kt||Kt==="")&&wt(this,kt,Ho).call(this)}_bindNamedAction(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>(this.linkService.executeNamedAction(Kt),!1),wt(this,kt,Ho).call(this)}_bindAttachment(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>{var en;return(en=this.downloadManager)==null||en.openOrDownloadData(this.container,Kt.content,Kt.filename),!1},wt(this,kt,Ho).call(this)}_bindJSAction(jt,Kt){jt.href=this.linkService.getAnchorUrl("");const en=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const on of Object.keys(Kt.actions)){const fn=en.get(on);fn&&(jt[fn]=()=>{var yn;return(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Kt.id,name:on}}),!1})}jt.onclick||(jt.onclick=()=>!1),wt(this,kt,Ho).call(this)}_bindResetFormAction(jt,Kt){const en=jt.onclick;if(en||(jt.href=this.linkService.getAnchorUrl("")),wt(this,kt,Ho).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),en||(jt.onclick=()=>!1);return}jt.onclick=()=>{var jn;en==null||en();const{fields:on,refs:fn,include:yn}=Kt,Rn=[];if(on.length!==0||fn.length!==0){const Cn=new Set(fn);for(const Pn of on){const On=this._fieldObjects[Pn]||[];for(const{id:$n}of On)Cn.add($n)}for(const Pn of Object.values(this._fieldObjects))for(const On of Pn)Cn.has(On.id)===yn&&Rn.push(On)}else for(const Cn of Object.values(this._fieldObjects))Rn.push(...Cn);const kn=this.annotationStorage,Sn=[];for(const Cn of Rn){const{id:Pn}=Cn;switch(Sn.push(Pn),Cn.type){case"text":{const $n=Cn.defaultValue||"";kn.setValue(Pn,{value:$n});break}case"checkbox":case"radiobutton":{const $n=Cn.defaultValue===Cn.exportValues;kn.setValue(Pn,{value:$n});break}case"combobox":case"listbox":{const $n=Cn.defaultValue||"";kn.setValue(Pn,{value:$n});break}default:continue}const On=document.querySelector(`[data-element-id="${Pn}"]`);if(On){if(!at.has(On)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Pn}`);continue}}else continue;On.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Sn,name:"ResetForm"}})),!1}}}kt=new WeakSet,Ho=function(){this.container.setAttribute("data-internal-link","")},b1=function(jt,Kt){jt.href=this.linkService.getAnchorUrl(""),jt.onclick=()=>(this.linkService.executeSetOCGState(Kt),!1),wt(this,kt,Ho).call(this)};class dt extends ot{constructor(Nt){super(Nt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Nt=document.createElement("img");return Nt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Nt.alt="[{{type}} Annotation]",Nt.dataset.l10nId="text_annotation_type",Nt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Nt),this.container}}class lt extends ot{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Nt){var jt;this.data.hasOwnCanvas&&(((jt=Nt.previousSibling)==null?void 0:jt.nodeName)==="CANVAS"&&(Nt.previousSibling.hidden=!0),Nt.hidden=!1)}_getKeyModifier(Nt){const{isWin:jt,isMac:Kt}=a.FeatureTest.platform;return jt&&Nt.ctrlKey||Kt&&Nt.metaKey}_setEventListener(Nt,jt,Kt,en,on){Kt.includes("mouse")?Nt.addEventListener(Kt,fn=>{var yn;(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:on(fn),shift:fn.shiftKey,modifier:this._getKeyModifier(fn)}})}):Nt.addEventListener(Kt,fn=>{var yn;if(Kt==="blur"){if(!jt.focused||!fn.relatedTarget)return;jt.focused=!1}else if(Kt==="focus"){if(jt.focused)return;jt.focused=!0}on&&((yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:on(fn)}}))})}_setEventListeners(Nt,jt,Kt,en){var on,fn,yn;for(const[Rn,kn]of Kt)(kn==="Action"||(on=this.data.actions)!=null&&on[kn])&&((kn==="Focus"||kn==="Blur")&&(jt||(jt={focused:!1})),this._setEventListener(Nt,jt,Rn,kn,en),kn==="Focus"&&!((fn=this.data.actions)!=null&&fn.Blur)?this._setEventListener(Nt,jt,"blur","Blur",null):kn==="Blur"&&!((yn=this.data.actions)!=null&&yn.Focus)&&this._setEventListener(Nt,jt,"focus","Focus",null))}_setBackgroundColor(Nt){const jt=this.data.backgroundColor||null;Nt.style.backgroundColor=jt===null?"transparent":a.Util.makeHexColor(jt[0],jt[1],jt[2])}_setTextStyle(Nt){const jt=["left","center","right"],{fontColor:Kt}=this.data.defaultAppearanceData,en=this.data.defaultAppearanceData.fontSize||rt,on=Nt.style;let fn;const yn=2,Rn=kn=>Math.round(10*kn)/10;if(this.data.multiLine){const kn=Math.abs(this.data.rect[3]-this.data.rect[1]-yn),Sn=Math.round(kn/(a.LINE_FACTOR*en))||1,jn=kn/Sn;fn=Math.min(en,Rn(jn/a.LINE_FACTOR))}else{const kn=Math.abs(this.data.rect[3]-this.data.rect[1]-yn);fn=Math.min(en,Rn(kn/a.LINE_FACTOR))}on.fontSize=`calc(${fn}px * var(--scale-factor))`,on.color=a.Util.makeHexColor(Kt[0],Kt[1],Kt[2]),this.data.textAlignment!==null&&(on.textAlign=jt[this.data.textAlignment])}_setRequired(Nt,jt){jt?Nt.setAttribute("required",!0):Nt.removeAttribute("required"),Nt.setAttribute("aria-required",jt)}}class ht extends lt{constructor(Nt){const jt=Nt.renderForms||!Nt.data.hasAppearance&&!!Nt.data.fieldValue;super(Nt,{isRenderable:jt})}setPropertyOnSiblings(Nt,jt,Kt,en){const on=this.annotationStorage;for(const fn of this._getElementsByName(Nt.name,Nt.id))fn.domElement&&(fn.domElement[jt]=Kt),on.setValue(fn.id,{[en]:Kt})}render(){var en,on;const Nt=this.annotationStorage,jt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Kt=null;if(this.renderForms){const fn=Nt.getValue(jt,{value:this.data.fieldValue});let yn=fn.value||"";const Rn=Nt.getValue(jt,{charLimit:this.data.maxLen}).charLimit;Rn&&yn.length>Rn&&(yn=yn.slice(0,Rn));let kn=fn.formattedValue||((en=this.data.textContent)==null?void 0:en.join(`
`))||null;kn&&this.data.comb&&(kn=kn.replaceAll(/\s+/g,""));const Sn={userValue:yn,formattedValue:kn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Kt=document.createElement("textarea"),Kt.textContent=kn??yn,this.data.doNotScroll&&(Kt.style.overflowY="hidden")):(Kt=document.createElement("input"),Kt.type="text",Kt.setAttribute("value",kn??yn),this.data.doNotScroll&&(Kt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Kt.hidden=!0),at.add(Kt),Kt.setAttribute("data-element-id",jt),Kt.disabled=this.data.readOnly,Kt.name=this.data.fieldName,Kt.tabIndex=st,this._setRequired(Kt,this.data.required),Rn&&(Kt.maxLength=Rn),Kt.addEventListener("input",Cn=>{Nt.setValue(jt,{value:Cn.target.value}),this.setPropertyOnSiblings(Kt,"value",Cn.target.value,"value"),Sn.formattedValue=null}),Kt.addEventListener("resetform",Cn=>{const Pn=this.data.defaultFieldValue??"";Kt.value=Sn.userValue=Pn,Sn.formattedValue=null});let jn=Cn=>{const{formattedValue:Pn}=Sn;Pn!=null&&(Cn.target.value=Pn),Cn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Kt.addEventListener("focus",Pn=>{if(Sn.focused)return;const{target:On}=Pn;Sn.userValue&&(On.value=Sn.userValue),Sn.lastCommittedValue=On.value,Sn.commitKey=1,Sn.focused=!0}),Kt.addEventListener("updatefromsandbox",Pn=>{this.showElementAndHideCanvas(Pn.target);const On={value($n){Sn.userValue=$n.detail.value??"",Nt.setValue(jt,{value:Sn.userValue.toString()}),$n.target.value=Sn.userValue},formattedValue($n){const{formattedValue:Nn}=$n.detail;Sn.formattedValue=Nn,Nn!=null&&$n.target!==document.activeElement&&($n.target.value=Nn),Nt.setValue(jt,{formattedValue:Nn})},selRange($n){$n.target.setSelectionRange(...$n.detail.selRange)},charLimit:$n=>{var Yn;const{charLimit:Nn}=$n.detail,{target:zn}=$n;if(Nn===0){zn.removeAttribute("maxLength");return}zn.setAttribute("maxLength",Nn);let Kn=Sn.userValue;!Kn||Kn.length<=Nn||(Kn=Kn.slice(0,Nn),zn.value=Sn.userValue=Kn,Nt.setValue(jt,{value:Kn}),(Yn=this.linkService.eventBus)==null||Yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Kn,willCommit:!0,commitKey:1,selStart:zn.selectionStart,selEnd:zn.selectionEnd}}))}};this._dispatchEventFromSandbox(On,Pn)}),Kt.addEventListener("keydown",Pn=>{var Nn;Sn.commitKey=1;let On=-1;if(Pn.key==="Escape"?On=0:Pn.key==="Enter"&&!this.data.multiLine?On=2:Pn.key==="Tab"&&(Sn.commitKey=3),On===-1)return;const{value:$n}=Pn.target;Sn.lastCommittedValue!==$n&&(Sn.lastCommittedValue=$n,Sn.userValue=$n,(Nn=this.linkService.eventBus)==null||Nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:$n,willCommit:!0,commitKey:On,selStart:Pn.target.selectionStart,selEnd:Pn.target.selectionEnd}}))});const Cn=jn;jn=null,Kt.addEventListener("blur",Pn=>{var $n;if(!Sn.focused||!Pn.relatedTarget)return;Sn.focused=!1;const{value:On}=Pn.target;Sn.userValue=On,Sn.lastCommittedValue!==On&&(($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:On,willCommit:!0,commitKey:Sn.commitKey,selStart:Pn.target.selectionStart,selEnd:Pn.target.selectionEnd}})),Cn(Pn)}),(on=this.data.actions)!=null&&on.Keystroke&&Kt.addEventListener("beforeinput",Pn=>{var hs;Sn.lastCommittedValue=null;const{data:On,target:$n}=Pn,{value:Nn,selectionStart:zn,selectionEnd:Kn}=$n;let Yn=zn,ts=Kn;switch(Pn.inputType){case"deleteWordBackward":{const gs=Nn.substring(0,zn).match(/\w*[^\w]*$/);gs&&(Yn-=gs[0].length);break}case"deleteWordForward":{const gs=Nn.substring(zn).match(/^[^\w]*\w*/);gs&&(ts+=gs[0].length);break}case"deleteContentBackward":zn===Kn&&(Yn-=1);break;case"deleteContentForward":zn===Kn&&(ts+=1);break}Pn.preventDefault(),(hs=this.linkService.eventBus)==null||hs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Nn,change:On||"",willCommit:!1,selStart:Yn,selEnd:ts}})}),this._setEventListeners(Kt,Sn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pn=>Pn.target.value)}if(jn&&Kt.addEventListener("blur",jn),this.data.comb){const Pn=(this.data.rect[2]-this.data.rect[0])/Rn;Kt.classList.add("comb"),Kt.style.letterSpacing=`calc(${Pn}px * var(--scale-factor) - 1ch)`}}else Kt=document.createElement("div"),Kt.textContent=this.data.fieldValue,Kt.style.verticalAlign="middle",Kt.style.display="table-cell";return this._setTextStyle(Kt),this._setBackgroundColor(Kt),this._setDefaultPropertiesFromJS(Kt),this.container.append(Kt),this.container}}class xt extends lt{constructor(Nt){super(Nt,{isRenderable:!!Nt.data.hasOwnCanvas})}}class mt extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){const Nt=this.annotationStorage,jt=this.data,Kt=jt.id;let en=Nt.getValue(Kt,{value:jt.exportValue===jt.fieldValue}).value;typeof en=="string"&&(en=en!=="Off",Nt.setValue(Kt,{value:en})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const on=document.createElement("input");return at.add(on),on.setAttribute("data-element-id",Kt),on.disabled=jt.readOnly,this._setRequired(on,this.data.required),on.type="checkbox",on.name=jt.fieldName,en&&on.setAttribute("checked",!0),on.setAttribute("exportValue",jt.exportValue),on.tabIndex=st,on.addEventListener("change",fn=>{const{name:yn,checked:Rn}=fn.target;for(const kn of this._getElementsByName(yn,Kt)){const Sn=Rn&&kn.exportValue===jt.exportValue;kn.domElement&&(kn.domElement.checked=Sn),Nt.setValue(kn.id,{value:Sn})}Nt.setValue(Kt,{value:Rn})}),on.addEventListener("resetform",fn=>{const yn=jt.defaultFieldValue||"Off";fn.target.checked=yn===jt.exportValue}),this.enableScripting&&this.hasJSActions&&(on.addEventListener("updatefromsandbox",fn=>{const yn={value(Rn){Rn.target.checked=Rn.detail.value!=="Off",Nt.setValue(Kt,{value:Rn.target.checked})}};this._dispatchEventFromSandbox(yn,fn)}),this._setEventListeners(on,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fn=>fn.target.checked)),this._setBackgroundColor(on),this._setDefaultPropertiesFromJS(on),this.container.append(on),this.container}}class ft extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Nt=this.annotationStorage,jt=this.data,Kt=jt.id;let en=Nt.getValue(Kt,{value:jt.fieldValue===jt.buttonValue}).value;typeof en=="string"&&(en=en!==jt.buttonValue,Nt.setValue(Kt,{value:en}));const on=document.createElement("input");if(at.add(on),on.setAttribute("data-element-id",Kt),on.disabled=jt.readOnly,this._setRequired(on,this.data.required),on.type="radio",on.name=jt.fieldName,en&&on.setAttribute("checked",!0),on.tabIndex=st,on.addEventListener("change",fn=>{const{name:yn,checked:Rn}=fn.target;for(const kn of this._getElementsByName(yn,Kt))Nt.setValue(kn.id,{value:!1});Nt.setValue(Kt,{value:Rn})}),on.addEventListener("resetform",fn=>{const yn=jt.defaultFieldValue;fn.target.checked=yn!=null&&yn===jt.buttonValue}),this.enableScripting&&this.hasJSActions){const fn=jt.buttonValue;on.addEventListener("updatefromsandbox",yn=>{const Rn={value:kn=>{const Sn=fn===kn.detail.value;for(const jn of this._getElementsByName(kn.target.name)){const Cn=Sn&&jn.id===Kt;jn.domElement&&(jn.domElement.checked=Cn),Nt.setValue(jn.id,{value:Cn})}}};this._dispatchEventFromSandbox(Rn,yn)}),this._setEventListeners(on,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yn=>yn.target.checked)}return this._setBackgroundColor(on),this._setDefaultPropertiesFromJS(on),this.container.append(on),this.container}}class gt extends ut{constructor(Nt){super(Nt,{ignoreBorder:Nt.data.hasAppearance})}render(){const Nt=super.render();Nt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Nt.title=this.data.alternativeText);const jt=Nt.lastChild;return this.enableScripting&&this.hasJSActions&&jt&&(this._setDefaultPropertiesFromJS(jt),jt.addEventListener("updatefromsandbox",Kt=>{this._dispatchEventFromSandbox({},Kt)})),Nt}}class pt extends lt{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Nt=this.annotationStorage,jt=this.data.id,Kt=Nt.getValue(jt,{value:this.data.fieldValue}),en=document.createElement("select");at.add(en),en.setAttribute("data-element-id",jt),en.disabled=this.data.readOnly,this._setRequired(en,this.data.required),en.name=this.data.fieldName,en.tabIndex=st;let on=this.data.combo&&this.data.options.length>0;this.data.combo||(en.size=this.data.options.length,this.data.multiSelect&&(en.multiple=!0)),en.addEventListener("resetform",Sn=>{const jn=this.data.defaultFieldValue;for(const Cn of en.options)Cn.selected=Cn.value===jn});for(const Sn of this.data.options){const jn=document.createElement("option");jn.textContent=Sn.displayValue,jn.value=Sn.exportValue,Kt.value.includes(Sn.exportValue)&&(jn.setAttribute("selected",!0),on=!1),en.append(jn)}let fn=null;if(on){const Sn=document.createElement("option");Sn.value=" ",Sn.setAttribute("hidden",!0),Sn.setAttribute("selected",!0),en.prepend(Sn),fn=()=>{Sn.remove(),en.removeEventListener("input",fn),fn=null},en.addEventListener("input",fn)}const yn=Sn=>{const jn=Sn?"value":"textContent",{options:Cn,multiple:Pn}=en;return Pn?Array.prototype.filter.call(Cn,On=>On.selected).map(On=>On[jn]):Cn.selectedIndex===-1?null:Cn[Cn.selectedIndex][jn]};let Rn=yn(!1);const kn=Sn=>{const jn=Sn.target.options;return Array.prototype.map.call(jn,Cn=>({displayValue:Cn.textContent,exportValue:Cn.value}))};return this.enableScripting&&this.hasJSActions?(en.addEventListener("updatefromsandbox",Sn=>{const jn={value(Cn){fn==null||fn();const Pn=Cn.detail.value,On=new Set(Array.isArray(Pn)?Pn:[Pn]);for(const $n of en.options)$n.selected=On.has($n.value);Nt.setValue(jt,{value:yn(!0)}),Rn=yn(!1)},multipleSelection(Cn){en.multiple=!0},remove(Cn){const Pn=en.options,On=Cn.detail.remove;Pn[On].selected=!1,en.remove(On),Pn.length>0&&Array.prototype.findIndex.call(Pn,Nn=>Nn.selected)===-1&&(Pn[0].selected=!0),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},clear(Cn){for(;en.length!==0;)en.remove(0);Nt.setValue(jt,{value:null,items:[]}),Rn=yn(!1)},insert(Cn){const{index:Pn,displayValue:On,exportValue:$n}=Cn.detail.insert,Nn=en.children[Pn],zn=document.createElement("option");zn.textContent=On,zn.value=$n,Nn?Nn.before(zn):en.append(zn),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},items(Cn){const{items:Pn}=Cn.detail;for(;en.length!==0;)en.remove(0);for(const On of Pn){const{displayValue:$n,exportValue:Nn}=On,zn=document.createElement("option");zn.textContent=$n,zn.value=Nn,en.append(zn)}en.options.length>0&&(en.options[0].selected=!0),Nt.setValue(jt,{value:yn(!0),items:kn(Cn)}),Rn=yn(!1)},indices(Cn){const Pn=new Set(Cn.detail.indices);for(const On of Cn.target.options)On.selected=Pn.has(On.index);Nt.setValue(jt,{value:yn(!0)}),Rn=yn(!1)},editable(Cn){Cn.target.disabled=!Cn.detail.editable}};this._dispatchEventFromSandbox(jn,Sn)}),en.addEventListener("input",Sn=>{var Cn;const jn=yn(!0);Nt.setValue(jt,{value:jn}),Sn.preventDefault(),(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:jt,name:"Keystroke",value:Rn,changeEx:jn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(en,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Sn=>Sn.target.value)):en.addEventListener("input",function(Sn){Nt.setValue(jt,{value:yn(!0)})}),this.data.combo&&this._setTextStyle(en),this._setBackgroundColor(en),this._setDefaultPropertiesFromJS(en),this.container.append(en),this.container}}class vt extends ot{constructor(Nt){const{data:jt,elements:Kt}=Nt;super(Nt,{isRenderable:ot._hasPopupData(jt)}),this.elements=Kt}render(){this.container.classList.add("popupAnnotation");const Nt=new At({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),jt=[];for(const Kt of this.elements)Kt.popup=Nt,jt.push(Kt.data.id),Kt.addHighlightArea();return this.container.setAttribute("aria-controls",jt.map(Kt=>`${a.AnnotationPrefix}${Kt}`).join(",")),this.container}}class At{constructor(Nt){Dt(this,En);Dt(this,Vt,null);Dt(this,rn,wt(this,En,E1).bind(this));Dt(this,an,wt(this,En,Bx).bind(this));Dt(this,ln,wt(this,En,$x).bind(this));Dt(this,cn,wt(this,En,gy).bind(this));Dt(this,dn,null);Dt(this,qt,null);Dt(this,sn,null);Dt(this,It,null);Dt(this,Ht,null);Dt(this,Qt,null);Dt(this,tn,!1);Dt(this,un,null);Dt(this,mn,null);Dt(this,vn,null);Dt(this,Zt,null);Dt(this,An,!1);var On;let{container:jt,color:Kt,elements:en,titleObj:on,modificationDate:fn,contentsObj:yn,richText:Rn,parent:kn,rect:Sn,parentRect:jn,open:Cn}=Nt;Pt(this,qt,jt),Pt(this,Zt,on),Pt(this,sn,yn),Pt(this,vn,Rn),Pt(this,Ht,kn),Pt(this,dn,Kt),Pt(this,mn,Sn),Pt(this,Qt,jn),Pt(this,It,en);const Pn=o.PDFDateString.toDateObject(fn);Pn&&Pt(this,Vt,kn.l10n.get("annotation_date_string",{date:Pn.toLocaleDateString(),time:Pn.toLocaleTimeString()})),this.trigger=en.flatMap($n=>$n.getElementsToTriggerPopup());for(const $n of this.trigger)$n.addEventListener("click",et(this,cn)),$n.addEventListener("mouseenter",et(this,ln)),$n.addEventListener("mouseleave",et(this,an)),$n.classList.add("popupTriggerArea");for(const $n of en)(On=$n.container)==null||On.addEventListener("keydown",et(this,rn));et(this,qt).hidden=!0,Cn&&wt(this,En,gy).call(this)}render(){if(et(this,un))return;const{page:{view:Nt},viewport:{rawDims:{pageWidth:jt,pageHeight:Kt,pageX:en,pageY:on}}}=et(this,Ht),fn=Pt(this,un,document.createElement("div"));if(fn.className="popup",et(this,dn)){const Yn=fn.style.outlineColor=a.Util.makeHexColor(...et(this,dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?fn.style.backgroundColor=`color-mix(in srgb, ${Yn} 30%, white)`:fn.style.backgroundColor=a.Util.makeHexColor(...et(this,dn).map(hs=>Math.floor(.7*(255-hs)+hs)))}const yn=document.createElement("span");yn.className="header";const Rn=document.createElement("h1");if(yn.append(Rn),{dir:Rn.dir,str:Rn.textContent}=et(this,Zt),fn.append(yn),et(this,Vt)){const Yn=document.createElement("span");Yn.classList.add("popupDate"),et(this,Vt).then(ts=>{Yn.textContent=ts}),yn.append(Yn)}const kn=et(this,sn),Sn=et(this,vn);if(Sn!=null&&Sn.str&&(!(kn!=null&&kn.str)||kn.str===Sn.str))tt.XfaLayer.render({xfaHtml:Sn.html,intent:"richText",div:fn}),fn.lastChild.classList.add("richText","popupContent");else{const Yn=this._formatContents(kn);fn.append(Yn)}let jn=!!et(this,Qt),Cn=jn?et(this,Qt):et(this,mn);for(const Yn of et(this,It))if(!Cn||a.Util.intersect(Yn.data.rect,Cn)!==null){Cn=Yn.data.rect,jn=!0;break}const Pn=a.Util.normalizeRect([Cn[0],Nt[3]-Cn[1]+Nt[1],Cn[2],Nt[3]-Cn[3]+Nt[1]]),$n=jn?Cn[2]-Cn[0]+5:0,Nn=Pn[0]+$n,zn=Pn[1],{style:Kn}=et(this,qt);Kn.left=`${100*(Nn-en)/jt}%`,Kn.top=`${100*(zn-on)/Kt}%`,et(this,qt).append(fn)}_formatContents(Nt){let{str:jt,dir:Kt}=Nt;const en=document.createElement("p");en.classList.add("popupContent"),en.dir=Kt;const on=jt.split(/(?:\r\n?|\n)/);for(let fn=0,yn=on.length;fn<yn;++fn){const Rn=on[fn];en.append(document.createTextNode(Rn)),fn<yn-1&&en.append(document.createElement("br"))}return en}forceHide(){Pt(this,An,this.isVisible),et(this,An)&&(et(this,qt).hidden=!0)}maybeShow(){et(this,An)&&(Pt(this,An,!1),et(this,qt).hidden=!1)}get isVisible(){return et(this,qt).hidden===!1}}Vt=new WeakMap,rn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,qt=new WeakMap,sn=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,un=new WeakMap,mn=new WeakMap,vn=new WeakMap,Zt=new WeakMap,An=new WeakMap,En=new WeakSet,E1=function(Nt){Nt.altKey||Nt.shiftKey||Nt.ctrlKey||Nt.metaKey||(Nt.key==="Enter"||Nt.key==="Escape"&&et(this,tn))&&wt(this,En,gy).call(this)},gy=function(){Pt(this,tn,!et(this,tn)),et(this,tn)?(wt(this,En,$x).call(this),et(this,qt).addEventListener("click",et(this,cn)),et(this,qt).addEventListener("keydown",et(this,rn))):(wt(this,En,Bx).call(this),et(this,qt).removeEventListener("click",et(this,cn)),et(this,qt).removeEventListener("keydown",et(this,rn)))},$x=function(){et(this,un)||this.render(),this.isVisible?et(this,tn)&&et(this,qt).classList.add("focused"):(et(this,qt).hidden=!1,et(this,qt).style.zIndex=parseInt(et(this,qt).style.zIndex)+1e3)},Bx=function(){et(this,qt).classList.remove("focused"),!(et(this,tn)||!this.isVisible)&&(et(this,qt).hidden=!0,et(this,qt).style.zIndex=parseInt(et(this,qt).style.zIndex)-1e3)};class Rt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Nt.data.textContent,this.textPosition=Nt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Nt=document.createElement("div");Nt.classList.add("annotationTextContent"),Nt.setAttribute("role","comment");for(const jt of this.textContent){const Kt=document.createElement("span");Kt.textContent=jt,Nt.append(Kt)}this.container.append(Nt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=Rt;class bt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Dn,null)}render(){this.container.classList.add("lineAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=Pt(this,Dn,this.svgFactory.createElement("svg:line"));return fn.setAttribute("x1",jt.rect[2]-jt.lineCoordinates[0]),fn.setAttribute("y1",jt.rect[3]-jt.lineCoordinates[1]),fn.setAttribute("x2",jt.rect[2]-jt.lineCoordinates[2]),fn.setAttribute("y2",jt.rect[3]-jt.lineCoordinates[3]),fn.setAttribute("stroke-width",jt.borderStyle.width||1),fn.setAttribute("stroke","transparent"),fn.setAttribute("fill","transparent"),on.append(fn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Dn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dn=new WeakMap;class Tt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Un,null)}render(){this.container.classList.add("squareAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=jt.borderStyle.width,yn=Pt(this,Un,this.svgFactory.createElement("svg:rect"));return yn.setAttribute("x",fn/2),yn.setAttribute("y",fn/2),yn.setAttribute("width",Kt-fn),yn.setAttribute("height",en-fn),yn.setAttribute("stroke-width",fn||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Un)}addHighlightArea(){this.container.classList.add("highlightArea")}}Un=new WeakMap;class Lt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Wn,null)}render(){this.container.classList.add("circleAnnotation");const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0),fn=jt.borderStyle.width,yn=Pt(this,Wn,this.svgFactory.createElement("svg:ellipse"));return yn.setAttribute("cx",Kt/2),yn.setAttribute("cy",en/2),yn.setAttribute("rx",Kt/2-fn/2),yn.setAttribute("ry",en/2-fn/2),yn.setAttribute("stroke-width",fn||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Wn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wn=new WeakMap;class Yt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,Tn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0);let fn=[];for(const Rn of jt.vertices){const kn=Rn.x-jt.rect[0],Sn=jt.rect[3]-Rn.y;fn.push(kn+","+Sn)}fn=fn.join(" ");const yn=Pt(this,Tn,this.svgFactory.createElement(this.svgElementName));return yn.setAttribute("points",fn),yn.setAttribute("stroke-width",jt.borderStyle.width||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),on.append(yn),this.container.append(on),!jt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return et(this,Tn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tn=new WeakMap;class zt extends Yt{constructor(Nt){super(Nt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bt extends ot{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0});Dt(this,hn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const jt=this.data,{width:Kt,height:en}=it(jt.rect),on=this.svgFactory.create(Kt,en,!0);for(const fn of jt.inkLists){let yn=[];for(const kn of fn){const Sn=kn.x-jt.rect[0],jn=jt.rect[3]-kn.y;yn.push(`${Sn},${jn}`)}yn=yn.join(" ");const Rn=this.svgFactory.createElement(this.svgElementName);et(this,hn).push(Rn),Rn.setAttribute("points",yn),Rn.setAttribute("stroke-width",jt.borderStyle.width||1),Rn.setAttribute("stroke","transparent"),Rn.setAttribute("fill","transparent"),!jt.popupRef&&this.hasPopupData&&this._createPopup(),on.append(Rn)}return this.container.append(on),this.container}getElementsToTriggerPopup(){return et(this,hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}hn=new WeakMap,e.InkAnnotationElement=Bt;class Ut extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _t extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $t extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Xt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ct extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Ct;class yt extends ot{constructor(jt){var on;super(jt,{isRenderable:!0});Dt(this,gn);Dt(this,nn,null);const{filename:Kt,content:en}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(Kt,!0),this.content=en,(on=this.linkService.eventBus)==null||on.dispatch("fileattachmentannotation",{source:this,filename:Kt,content:en})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:jt,data:Kt}=this;let en;Kt.hasAppearance||Kt.fillAlpha===0?en=document.createElement("div"):(en=document.createElement("img"),en.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Kt.name)?"paperclip":"pushpin"}.svg`,Kt.fillAlpha&&Kt.fillAlpha<1&&(en.style=`filter: opacity(${Math.round(Kt.fillAlpha*100)}%);`)),en.addEventListener("dblclick",wt(this,gn,Ux).bind(this)),Pt(this,nn,en);const{isMac:on}=a.FeatureTest.platform;return jt.addEventListener("keydown",fn=>{fn.key==="Enter"&&(on?fn.metaKey:fn.ctrlKey)&&wt(this,gn,Ux).call(this)}),!Kt.popupRef&&this.hasPopupData?this._createPopup():en.classList.add("popupTriggerArea"),jt.append(en),jt}getElementsToTriggerPopup(){return et(this,nn)}addHighlightArea(){this.container.classList.add("highlightArea")}}nn=new WeakMap,gn=new WeakSet,Ux=function(){var jt;(jt=this.downloadManager)==null||jt.openOrDownloadData(this.container,this.content,this.filename)};class Et{constructor(Nt){Dt(this,pn);Dt(this,Ln,null);Dt(this,Mt,null);Dt(this,Jt,new Map);let{div:jt,accessibilityManager:Kt,annotationCanvasMap:en,l10n:on,page:fn,viewport:yn}=Nt;this.div=jt,Pt(this,Ln,Kt),Pt(this,Mt,en),this.l10n=on,this.page=fn,this.viewport=yn,this.zIndex=0,this.l10n||(this.l10n=nt.NullL10n)}async render(Nt){const{annotations:jt}=Nt,Kt=this.div;(0,o.setLayerDimensions)(Kt,this.viewport);const en=new Map,on={data:null,layer:Kt,linkService:Nt.linkService,downloadManager:Nt.downloadManager,imageResourcesPath:Nt.imageResourcesPath||"",renderForms:Nt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Nt.annotationStorage||new j.AnnotationStorage,enableScripting:Nt.enableScripting===!0,hasJSActions:Nt.hasJSActions,fieldObjects:Nt.fieldObjects,parent:this,elements:null};for(const fn of jt){if(fn.noHTML)continue;const yn=fn.annotationType===a.AnnotationType.POPUP;if(yn){const Sn=en.get(fn.id);if(!Sn)continue;on.elements=Sn}else{const{width:Sn,height:jn}=it(fn.rect);if(Sn<=0||jn<=0)continue}on.data=fn;const Rn=ct.create(on);if(!Rn.isRenderable)continue;if(!yn&&fn.popupRef){const Sn=en.get(fn.popupRef);Sn?Sn.push(Rn):en.set(fn.popupRef,[Rn])}Rn.annotationEditorType>0&&et(this,Jt).set(Rn.data.id,Rn);const kn=Rn.render();fn.hidden&&(kn.style.visibility="hidden"),wt(this,pn,A1).call(this,kn,fn.id)}wt(this,pn,Hx).call(this),await this.l10n.translate(Kt)}update(Nt){let{viewport:jt}=Nt;const Kt=this.div;this.viewport=jt,(0,o.setLayerDimensions)(Kt,{rotation:jt.rotation}),wt(this,pn,Hx).call(this),Kt.hidden=!1}getEditableAnnotations(){return Array.from(et(this,Jt).values())}getEditableAnnotation(Nt){return et(this,Jt).get(Nt)}}Ln=new WeakMap,Mt=new WeakMap,Jt=new WeakMap,pn=new WeakSet,A1=function(Nt,jt){var en;const Kt=Nt.firstChild||Nt;Kt.id=`${a.AnnotationPrefix}${jt}`,this.div.append(Nt),(en=et(this,Ln))==null||en.moveElementInDOM(this.div,Nt,Kt,!1)},Hx=function(){if(!et(this,Mt))return;const Nt=this.div;for(const[jt,Kt]of et(this,Mt)){const en=Nt.querySelector(`[data-annotation-id="${jt}"]`);if(!en)continue;const{firstChild:on}=en;on?on.nodeName==="CANVAS"?on.replaceWith(Kt):on.before(Kt):en.append(Kt)}et(this,Mt).clear()},e.AnnotationLayer=Et},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(j){return Math.floor(Math.max(0,Math.min(1,j))*255).toString(16).padStart(2,"0")}function a(j){return Math.max(0,Math.min(255,255*j))}class o{static CMYK_G(_e){let[nt,tt,st,rt]=_e;return["G",1-Math.min(1,.3*nt+.59*st+.11*tt+rt)]}static G_CMYK(_e){let[nt]=_e;return["CMYK",0,0,0,1-nt]}static G_RGB(_e){let[nt]=_e;return["RGB",nt,nt,nt]}static G_rgb(_e){let[nt]=_e;return nt=a(nt),[nt,nt,nt]}static G_HTML(_e){let[nt]=_e;const tt=s(nt);return`#${tt}${tt}${tt}`}static RGB_G(_e){let[nt,tt,st]=_e;return["G",.3*nt+.59*tt+.11*st]}static RGB_rgb(_e){return _e.map(a)}static RGB_HTML(_e){return`#${_e.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(_e){let[nt,tt,st,rt]=_e;return["RGB",1-Math.min(1,nt+rt),1-Math.min(1,st+rt),1-Math.min(1,tt+rt)]}static CMYK_rgb(_e){let[nt,tt,st,rt]=_e;return[a(1-Math.min(1,nt+rt)),a(1-Math.min(1,st+rt)),a(1-Math.min(1,tt+rt))]}static CMYK_HTML(_e){const nt=this.CMYK_RGB(_e).slice(1);return this.RGB_HTML(nt)}static RGB_CMYK(_e){let[nt,tt,st]=_e;const rt=1-nt,at=1-tt,it=1-st,ct=Math.min(rt,at,it);return["CMYK",rt,at,it,ct]}}e.ColorConverters=o},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=a;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function a(_e,nt){switch(_e){case"find_match_count":_e=`find_match_count[${nt.total===1?"one":"other"}]`;break;case"find_match_count_limit":_e=`find_match_count_limit[${nt.limit===1?"one":"other"}]`;break}return s[_e]||""}function o(_e,nt){return nt?_e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(tt,st)=>st in nt?nt[st]:"{{"+st+"}}"):_e}const j={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(_e){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a(_e,nt);return o(tt,nt)},async translate(_e){}};e.NullL10n=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0,s(89);var a=s(194);class o{static setupStorage(_e,nt,tt,st,rt){const at=st.getValue(nt,{value:null});switch(tt.name){case"textarea":if(at.value!==null&&(_e.textContent=at.value),rt==="print")break;_e.addEventListener("input",it=>{st.setValue(nt,{value:it.target.value})});break;case"input":if(tt.attributes.type==="radio"||tt.attributes.type==="checkbox"){if(at.value===tt.attributes.xfaOn?_e.setAttribute("checked",!0):at.value===tt.attributes.xfaOff&&_e.removeAttribute("checked"),rt==="print")break;_e.addEventListener("change",it=>{st.setValue(nt,{value:it.target.checked?it.target.getAttribute("xfaOn"):it.target.getAttribute("xfaOff")})})}else{if(at.value!==null&&_e.setAttribute("value",at.value),rt==="print")break;_e.addEventListener("input",it=>{st.setValue(nt,{value:it.target.value})})}break;case"select":if(at.value!==null){_e.setAttribute("value",at.value);for(const it of tt.children)it.attributes.value===at.value?it.attributes.selected=!0:it.attributes.hasOwnProperty("selected")&&delete it.attributes.selected}_e.addEventListener("input",it=>{const ct=it.target.options,ot=ct.selectedIndex===-1?"":ct[ct.selectedIndex].value;st.setValue(nt,{value:ot})});break}}static setAttributes(_e){let{html:nt,element:tt,storage:st=null,intent:rt,linkService:at}=_e;const{attributes:it}=tt,ct=nt instanceof HTMLAnchorElement;it.type==="radio"&&(it.name=`${it.name}-${rt}`);for(const[ot,ut]of Object.entries(it))if(ut!=null)switch(ot){case"class":ut.length&&nt.setAttribute(ot,ut.join(" "));break;case"dataId":break;case"id":nt.setAttribute("data-element-id",ut);break;case"style":Object.assign(nt.style,ut);break;case"textContent":nt.textContent=ut;break;default:(!ct||ot!=="href"&&ot!=="newWindow")&&nt.setAttribute(ot,ut)}ct&&at.addLinkAttributes(nt,it.href,it.newWindow),st&&it.dataId&&this.setupStorage(nt,it.dataId,tt,st)}static render(_e){var ut;const nt=_e.annotationStorage,tt=_e.linkService,st=_e.xfaHtml,rt=_e.intent||"display",at=document.createElement(st.name);st.attributes&&this.setAttributes({html:at,element:st,intent:rt,linkService:tt});const it=[[st,-1,at]],ct=_e.div;if(ct.append(at),_e.viewport){const dt=`matrix(${_e.viewport.transform.join(",")})`;ct.style.transform=dt}rt!=="richText"&&ct.setAttribute("class","xfaLayer xfaFont");const ot=[];for(;it.length>0;){const[dt,lt,ht]=it.at(-1);if(lt+1===dt.children.length){it.pop();continue}const xt=dt.children[++it.at(-1)[1]];if(xt===null)continue;const{name:mt}=xt;if(mt==="#text"){const gt=document.createTextNode(xt.value);ot.push(gt),ht.append(gt);continue}const ft=(ut=xt==null?void 0:xt.attributes)!=null&&ut.xmlns?document.createElementNS(xt.attributes.xmlns,mt):document.createElement(mt);if(ht.append(ft),xt.attributes&&this.setAttributes({html:ft,element:xt,storage:nt,intent:rt,linkService:tt}),xt.children&&xt.children.length>0)it.push([xt,-1,ft]);else if(xt.value){const gt=document.createTextNode(xt.value);a.XfaText.shouldBuildText(mt)&&ot.push(gt),ft.append(gt)}}for(const dt of ct.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))dt.setAttribute("readOnly",!0);return{textDivs:ot}}static update(_e){const nt=`matrix(${_e.viewport.transform.join(",")})`;_e.div.style.transform=nt,_e.div.hidden=!1}}e.XfaLayer=o},(i,e,s)=>{var st,rt,at,it,ct,ot,ut,dt,lt,ht,xt,mt,ft,gt,pt,S1,_1,w1,T1,zx,C1,Wx,R1,k1,P1,M1,D1,$r,Vx,my,vy,Su,Gx,yy,kt,I1,Xx,F1,L1,Yx,xy,_u;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,s(89),s(2);var a=s(1),o=s(164),j=s(198),_e=s(168),nt=s(165);const dn=class dn extends o.AnnotationEditor{constructor(It){super({...It,name:"inkEditor"});Dt(this,pt);Dt(this,st,0);Dt(this,rt,0);Dt(this,at,this.canvasPointermove.bind(this));Dt(this,it,this.canvasPointerleave.bind(this));Dt(this,ct,this.canvasPointerup.bind(this));Dt(this,ot,this.canvasPointerdown.bind(this));Dt(this,ut,new Path2D);Dt(this,dt,!1);Dt(this,lt,!1);Dt(this,ht,!1);Dt(this,xt,null);Dt(this,mt,0);Dt(this,ft,0);Dt(this,gt,null);this.color=It.color||null,this.thickness=It.thickness||null,this.opacity=It.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(It){o.AnnotationEditor.initialize(It,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(It,Ht){switch(It){case a.AnnotationEditorParamsType.INK_THICKNESS:dn._defaultThickness=Ht;break;case a.AnnotationEditorParamsType.INK_COLOR:dn._defaultColor=Ht;break;case a.AnnotationEditorParamsType.INK_OPACITY:dn._defaultOpacity=Ht/100;break}}updateParams(It,Ht){switch(It){case a.AnnotationEditorParamsType.INK_THICKNESS:wt(this,pt,S1).call(this,Ht);break;case a.AnnotationEditorParamsType.INK_COLOR:wt(this,pt,_1).call(this,Ht);break;case a.AnnotationEditorParamsType.INK_OPACITY:wt(this,pt,w1).call(this,Ht);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,dn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,dn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||dn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||dn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(wt(this,pt,my).call(this),wt(this,pt,vy).call(this)),this.isAttachedToDOM||(this.parent.add(this),wt(this,pt,Su).call(this)),wt(this,pt,_u).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,et(this,xt).disconnect(),Pt(this,xt,null),super.remove())}setParent(It){!this.parent&&It?this._uiManager.removeShouldRescale(this):this.parent&&It===null&&this._uiManager.addShouldRescale(this),super.setParent(It)}onScaleChanging(){const[It,Ht]=this.parentDimensions,Qt=this.width*It,tn=this.height*Ht;this.setDimensions(Qt,tn)}enableEditMode(){et(this,dt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",et(this,ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",et(this,ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){et(this,dt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Pt(this,dt,!0),this.div.classList.add("disabled"),wt(this,pt,_u).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(It){this._focusEventsAllowed&&(super.focusin(It),this.enableEditMode())}canvasPointerdown(It){It.button!==0||!this.isInEditMode()||et(this,dt)||(this.setInForeground(),It.preventDefault(),It.type!=="mouse"&&this.div.focus(),wt(this,pt,C1).call(this,It.offsetX,It.offsetY))}canvasPointermove(It){It.preventDefault(),wt(this,pt,Wx).call(this,It.offsetX,It.offsetY)}canvasPointerup(It){It.preventDefault(),wt(this,pt,Vx).call(this,It)}canvasPointerleave(It){wt(this,pt,Vx).call(this,It)}get isResizable(){return!this.isEmpty()&&et(this,dt)}render(){if(this.div)return this.div;let It,Ht;this.width&&(It=this.x,Ht=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(vn=>{var Zt;return(Zt=this.div)==null?void 0:Zt.setAttribute("aria-label",vn)});const[Qt,tn,un,mn]=wt(this,pt,T1).call(this);if(this.setAt(Qt,tn,0,0),this.setDims(un,mn),wt(this,pt,my).call(this),this.width){const[vn,Zt]=this.parentDimensions;this.setAspectRatio(this.width*vn,this.height*Zt),this.setAt(It*vn,Ht*Zt,this.width*vn,this.height*Zt),Pt(this,ht,!0),wt(this,pt,Su).call(this),this.setDims(this.width*vn,this.height*Zt),wt(this,pt,$r).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return wt(this,pt,vy).call(this),this.div}setDimensions(It,Ht){const Qt=Math.round(It),tn=Math.round(Ht);if(et(this,mt)===Qt&&et(this,ft)===tn)return;Pt(this,mt,Qt),Pt(this,ft,tn),this.canvas.style.visibility="hidden";const[un,mn]=this.parentDimensions;this.width=It/un,this.height=Ht/mn,this.fixAndSetPosition(),et(this,dt)&&wt(this,pt,Gx).call(this,It,Ht),wt(this,pt,Su).call(this),wt(this,pt,$r).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(It,Ht,Qt){var Dn,Un,Wn;if(It instanceof j.InkAnnotationElement)return null;const tn=super.deserialize(It,Ht,Qt);tn.thickness=It.thickness,tn.color=a.Util.makeHexColor(...It.color),tn.opacity=It.opacity;const[un,mn]=tn.pageDimensions,vn=tn.width*un,Zt=tn.height*mn,An=tn.parentScale,En=It.thickness/2;Pt(tn,dt,!0),Pt(tn,mt,Math.round(vn)),Pt(tn,ft,Math.round(Zt));const{paths:Fn,rect:Mn,rotation:Bn}=It;for(let{bezier:Tn}of Fn){Tn=wt(Dn=dn,kt,F1).call(Dn,Tn,Mn,Bn);const hn=[];tn.paths.push(hn);let nn=An*(Tn[0]-En),gn=An*(Tn[1]-En);for(let Ln=2,Mt=Tn.length;Ln<Mt;Ln+=6){const Jt=An*(Tn[Ln]-En),pn=An*(Tn[Ln+1]-En),bn=An*(Tn[Ln+2]-En),_n=An*(Tn[Ln+3]-En),xn=An*(Tn[Ln+4]-En),Nt=An*(Tn[Ln+5]-En);hn.push([[nn,gn],[Jt,pn],[bn,_n],[xn,Nt]]),nn=xn,gn=Nt}const In=wt(this,kt,I1).call(this,hn);tn.bezierPath2D.push(In)}const wn=wt(Un=tn,pt,Yx).call(Un);return Pt(tn,rt,Math.max(o.AnnotationEditor.MIN_SIZE,wn[2]-wn[0])),Pt(tn,st,Math.max(o.AnnotationEditor.MIN_SIZE,wn[3]-wn[1])),wt(Wn=tn,pt,Gx).call(Wn,vn,Zt),tn}serialize(){if(this.isEmpty())return null;const It=this.getRect(0,0),Ht=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Ht,thickness:this.thickness,opacity:this.opacity,paths:wt(this,pt,L1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,It),pageIndex:this.pageIndex,rect:It,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakMap,xt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,pt=new WeakSet,S1=function(It){const Ht=this.thickness;this.addCommands({cmd:()=>{this.thickness=It,wt(this,pt,_u).call(this)},undo:()=>{this.thickness=Ht,wt(this,pt,_u).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_1=function(It){const Ht=this.color;this.addCommands({cmd:()=>{this.color=It,wt(this,pt,$r).call(this)},undo:()=>{this.color=Ht,wt(this,pt,$r).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w1=function(It){It/=100;const Ht=this.opacity;this.addCommands({cmd:()=>{this.opacity=It,wt(this,pt,$r).call(this)},undo:()=>{this.opacity=Ht,wt(this,pt,$r).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},T1=function(){const{parentRotation:It,parentDimensions:[Ht,Qt]}=this;switch(It){case 90:return[0,Qt,Qt,Ht];case 180:return[Ht,Qt,Ht,Qt];case 270:return[Ht,0,Qt,Ht];default:return[0,0,Ht,Qt]}},zx=function(){const{ctx:It,color:Ht,opacity:Qt,thickness:tn,parentScale:un,scaleFactor:mn}=this;It.lineWidth=tn*un/mn,It.lineCap="round",It.lineJoin="round",It.miterLimit=10,It.strokeStyle=`${Ht}${(0,nt.opacityToHex)(Qt)}`},C1=function(It,Ht){this.canvas.addEventListener("contextmenu",_e.noContextMenu),this.canvas.addEventListener("pointerleave",et(this,it)),this.canvas.addEventListener("pointermove",et(this,at)),this.canvas.addEventListener("pointerup",et(this,ct)),this.canvas.removeEventListener("pointerdown",et(this,ot)),this.isEditing=!0,et(this,ht)||(Pt(this,ht,!0),wt(this,pt,Su).call(this),this.thickness||(this.thickness=dn._defaultThickness),this.color||(this.color=dn._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=dn._defaultOpacity)),this.currentPath.push([It,Ht]),Pt(this,lt,!1),wt(this,pt,zx).call(this),Pt(this,gt,()=>{wt(this,pt,P1).call(this),et(this,gt)&&window.requestAnimationFrame(et(this,gt))}),window.requestAnimationFrame(et(this,gt))},Wx=function(It,Ht){const[Qt,tn]=this.currentPath.at(-1);if(this.currentPath.length>1&&It===Qt&&Ht===tn)return;const un=this.currentPath;let mn=et(this,ut);if(un.push([It,Ht]),Pt(this,lt,!0),un.length<=2){mn.moveTo(...un[0]),mn.lineTo(It,Ht);return}un.length===3&&(Pt(this,ut,mn=new Path2D),mn.moveTo(...un[0])),wt(this,pt,M1).call(this,mn,...un.at(-3),...un.at(-2),It,Ht)},R1=function(){if(this.currentPath.length===0)return;const It=this.currentPath.at(-1);et(this,ut).lineTo(...It)},k1=function(It,Ht){Pt(this,gt,null),It=Math.min(Math.max(It,0),this.canvas.width),Ht=Math.min(Math.max(Ht,0),this.canvas.height),wt(this,pt,Wx).call(this,It,Ht),wt(this,pt,R1).call(this);let Qt;if(this.currentPath.length!==1)Qt=wt(this,pt,D1).call(this);else{const Zt=[It,Ht];Qt=[[Zt,Zt.slice(),Zt.slice(),Zt]]}const tn=et(this,ut),un=this.currentPath;this.currentPath=[],Pt(this,ut,new Path2D);const mn=()=>{this.allRawPaths.push(un),this.paths.push(Qt),this.bezierPath2D.push(tn),this.rebuild()},vn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(wt(this,pt,my).call(this),wt(this,pt,vy).call(this)),wt(this,pt,_u).call(this))};this.addCommands({cmd:mn,undo:vn,mustExec:!0})},P1=function(){if(!et(this,lt))return;Pt(this,lt,!1);const It=Math.ceil(this.thickness*this.parentScale),Ht=this.currentPath.slice(-3),Qt=Ht.map(mn=>mn[0]),tn=Ht.map(mn=>mn[1]);Math.min(...Qt)-It,Math.max(...Qt)+It,Math.min(...tn)-It,Math.max(...tn)+It;const{ctx:un}=this;un.save(),un.clearRect(0,0,this.canvas.width,this.canvas.height);for(const mn of this.bezierPath2D)un.stroke(mn);un.stroke(et(this,ut)),un.restore()},M1=function(It,Ht,Qt,tn,un,mn,vn){const Zt=(Ht+tn)/2,An=(Qt+un)/2,En=(tn+mn)/2,Fn=(un+vn)/2;It.bezierCurveTo(Zt+2*(tn-Zt)/3,An+2*(un-An)/3,En+2*(tn-En)/3,Fn+2*(un-Fn)/3,En,Fn)},D1=function(){const It=this.currentPath;if(It.length<=2)return[[It[0],It[0],It.at(-1),It.at(-1)]];const Ht=[];let Qt,[tn,un]=It[0];for(Qt=1;Qt<It.length-2;Qt++){const[Mn,Bn]=It[Qt],[wn,Dn]=It[Qt+1],Un=(Mn+wn)/2,Wn=(Bn+Dn)/2,Tn=[tn+2*(Mn-tn)/3,un+2*(Bn-un)/3],hn=[Un+2*(Mn-Un)/3,Wn+2*(Bn-Wn)/3];Ht.push([[tn,un],Tn,hn,[Un,Wn]]),[tn,un]=[Un,Wn]}const[mn,vn]=It[Qt],[Zt,An]=It[Qt+1],En=[tn+2*(mn-tn)/3,un+2*(vn-un)/3],Fn=[Zt+2*(mn-Zt)/3,An+2*(vn-An)/3];return Ht.push([[tn,un],En,Fn,[Zt,An]]),Ht},$r=function(){if(this.isEmpty()){wt(this,pt,yy).call(this);return}wt(this,pt,zx).call(this);const{canvas:It,ctx:Ht}=this;Ht.setTransform(1,0,0,1,0,0),Ht.clearRect(0,0,It.width,It.height),wt(this,pt,yy).call(this);for(const Qt of this.bezierPath2D)Ht.stroke(Qt)},Vx=function(It){this.canvas.removeEventListener("pointerleave",et(this,it)),this.canvas.removeEventListener("pointermove",et(this,at)),this.canvas.removeEventListener("pointerup",et(this,ct)),this.canvas.addEventListener("pointerdown",et(this,ot)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",_e.noContextMenu)},10),wt(this,pt,k1).call(this,It.offsetX,It.offsetY),this.addToAnnotationStorage(),this.setInBackground()},my=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(It=>{var Ht;return(Ht=this.canvas)==null?void 0:Ht.setAttribute("aria-label",It)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},vy=function(){Pt(this,xt,new ResizeObserver(It=>{const Ht=It[0].contentRect;Ht.width&&Ht.height&&this.setDimensions(Ht.width,Ht.height)})),et(this,xt).observe(this.div)},Su=function(){if(!et(this,ht))return;const[It,Ht]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*It),this.canvas.height=Math.ceil(this.height*Ht),wt(this,pt,yy).call(this)},Gx=function(It,Ht){const Qt=wt(this,pt,xy).call(this),tn=(It-Qt)/et(this,rt),un=(Ht-Qt)/et(this,st);this.scaleFactor=Math.min(tn,un)},yy=function(){const It=wt(this,pt,xy).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+It,this.translationY*this.scaleFactor+It)},kt=new WeakSet,I1=function(It){const Ht=new Path2D;for(let Qt=0,tn=It.length;Qt<tn;Qt++){const[un,mn,vn,Zt]=It[Qt];Qt===0&&Ht.moveTo(...un),Ht.bezierCurveTo(mn[0],mn[1],vn[0],vn[1],Zt[0],Zt[1])}return Ht},Xx=function(It,Ht,Qt){const[tn,un,mn,vn]=Ht;switch(Qt){case 0:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]+=tn,It[Zt+1]=vn-It[Zt+1];break;case 90:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=It[Zt+1]+tn,It[Zt+1]=En+un}break;case 180:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]=mn-It[Zt],It[Zt+1]+=un;break;case 270:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=mn-It[Zt+1],It[Zt+1]=vn-En}break;default:throw new Error("Invalid rotation")}return It},F1=function(It,Ht,Qt){const[tn,un,mn,vn]=Ht;switch(Qt){case 0:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]-=tn,It[Zt+1]=vn-It[Zt+1];break;case 90:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=It[Zt+1]-un,It[Zt+1]=En-tn}break;case 180:for(let Zt=0,An=It.length;Zt<An;Zt+=2)It[Zt]=mn-It[Zt],It[Zt+1]-=un;break;case 270:for(let Zt=0,An=It.length;Zt<An;Zt+=2){const En=It[Zt];It[Zt]=vn-It[Zt+1],It[Zt+1]=mn-En}break;default:throw new Error("Invalid rotation")}return It},L1=function(It,Ht,Qt,tn){var An,En;const un=[],mn=this.thickness/2,vn=It*Ht+mn,Zt=It*Qt+mn;for(const Fn of this.paths){const Mn=[],Bn=[];for(let wn=0,Dn=Fn.length;wn<Dn;wn++){const[Un,Wn,Tn,hn]=Fn[wn],nn=It*Un[0]+vn,gn=It*Un[1]+Zt,In=It*Wn[0]+vn,Ln=It*Wn[1]+Zt,Mt=It*Tn[0]+vn,Jt=It*Tn[1]+Zt,pn=It*hn[0]+vn,bn=It*hn[1]+Zt;wn===0&&(Mn.push(nn,gn),Bn.push(nn,gn)),Mn.push(In,Ln,Mt,Jt,pn,bn),Bn.push(In,Ln),wn===Dn-1&&Bn.push(pn,bn)}un.push({bezier:wt(An=dn,kt,Xx).call(An,Mn,tn,this.rotation),points:wt(En=dn,kt,Xx).call(En,Bn,tn,this.rotation)})}return un},Yx=function(){let It=1/0,Ht=-1/0,Qt=1/0,tn=-1/0;for(const un of this.paths)for(const[mn,vn,Zt,An]of un){const En=a.Util.bezierBoundingBox(...mn,...vn,...Zt,...An);It=Math.min(It,En[0]),Qt=Math.min(Qt,En[1]),Ht=Math.max(Ht,En[2]),tn=Math.max(tn,En[3])}return[It,Qt,Ht,tn]},xy=function(){return et(this,dt)?Math.ceil(this.thickness*this.parentScale):0},_u=function(){let It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!et(this,dt)){wt(this,pt,$r).call(this);return}const Ht=wt(this,pt,Yx).call(this),Qt=wt(this,pt,xy).call(this);Pt(this,rt,Math.max(o.AnnotationEditor.MIN_SIZE,Ht[2]-Ht[0])),Pt(this,st,Math.max(o.AnnotationEditor.MIN_SIZE,Ht[3]-Ht[1]));const tn=Math.ceil(Qt+et(this,rt)*this.scaleFactor),un=Math.ceil(Qt+et(this,st)*this.scaleFactor),[mn,vn]=this.parentDimensions;this.width=tn/mn,this.height=un/vn,this.setAspectRatio(tn,un);const Zt=this.translationX,An=this.translationY;this.translationX=-Ht[0],this.translationY=-Ht[1],wt(this,pt,Su).call(this),wt(this,pt,$r).call(this),Pt(this,mt,tn),Pt(this,ft,un),this.setDims(tn,un);const En=It?Qt/this.scaleFactor/2:0;this.translate(Zt-this.translationX-En,An-this.translationY-En)},Dt(dn,kt),Hn(dn,"_defaultColor",null),Hn(dn,"_defaultOpacity",1),Hn(dn,"_defaultThickness",1),Hn(dn,"_type","ink");let tt=dn;e.InkEditor=tt},(i,e,s)=>{var tt,st,rt,at,it,ct,ot,ut,dt,lt,ht,zp,Wp,by,Kx,O1,N1,qx,Ey,j1;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0,s(149),s(152);var a=s(1),o=s(164),j=s(168),_e=s(198);const Tt=class Tt extends o.AnnotationEditor{constructor(zt){super({...zt,name:"stampEditor"});Dt(this,ht);Dt(this,tt,null);Dt(this,st,null);Dt(this,rt,null);Dt(this,at,null);Dt(this,it,null);Dt(this,ct,null);Dt(this,ot,null);Dt(this,ut,null);Dt(this,dt,!1);Dt(this,lt,!1);Pt(this,at,zt.bitmapUrl),Pt(this,it,zt.bitmapFile)}static initialize(zt){o.AnnotationEditor.initialize(zt)}static get supportedTypes(){const zt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",zt.map(Wt=>`image/${Wt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(zt){return this.supportedTypes.includes(zt)}static paste(zt,Wt){Wt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:zt.getAsFile()})}remove(){var zt,Wt;et(this,st)&&(Pt(this,tt,null),this._uiManager.imageManager.deleteId(et(this,st)),(zt=et(this,ct))==null||zt.remove(),Pt(this,ct,null),(Wt=et(this,ot))==null||Wt.disconnect(),Pt(this,ot,null)),super.remove()}rebuild(){if(!this.parent){et(this,st)&&wt(this,ht,by).call(this);return}super.rebuild(),this.div!==null&&(et(this,st)&&wt(this,ht,by).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(et(this,rt)||et(this,tt)||et(this,at)||et(this,it))}get isResizable(){return!0}render(){if(this.div)return this.div;let zt,Wt;if(this.width&&(zt=this.x,Wt=this.y),super.render(),this.div.hidden=!0,et(this,tt)?wt(this,ht,Kx).call(this):wt(this,ht,by).call(this),this.width){const[Bt,Ut]=this.parentDimensions;this.setAt(zt*Bt,Wt*Ut,this.width*Bt,this.height*Ut)}return this.div}static deserialize(zt,Wt,Bt){if(zt instanceof _e.StampAnnotationElement)return null;const Ut=super.deserialize(zt,Wt,Bt),{rect:_t,bitmapUrl:$t,bitmapId:Xt,isSvg:Ct,accessibilityData:yt}=zt;Xt&&Bt.imageManager.isValidId(Xt)?Pt(Ut,st,Xt):Pt(Ut,at,$t),Pt(Ut,dt,Ct);const[Et,St]=Ut.pageDimensions;return Ut.width=(_t[2]-_t[0])/Et,Ut.height=(_t[3]-_t[1])/St,yt&&(Ut.altTextData=yt),Ut}serialize(){let zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const Bt={annotationType:a.AnnotationEditorType.STAMP,bitmapId:et(this,st),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:et(this,dt),structTreeParentId:this._structTreeParentId};if(zt)return Bt.bitmapUrl=wt(this,ht,Ey).call(this,!0),Bt.accessibilityData=this.altTextData,Bt;const{decorative:Ut,altText:_t}=this.altTextData;if(!Ut&&_t&&(Bt.accessibilityData={type:"Figure",alt:_t}),Wt===null)return Bt;Wt.stamps||(Wt.stamps=new Map);const $t=et(this,dt)?(Bt.rect[2]-Bt.rect[0])*(Bt.rect[3]-Bt.rect[1]):null;if(!Wt.stamps.has(et(this,st)))Wt.stamps.set(et(this,st),{area:$t,serialized:Bt}),Bt.bitmap=wt(this,ht,Ey).call(this,!1);else if(et(this,dt)){const Xt=Wt.stamps.get(et(this,st));$t>Xt.area&&(Xt.area=$t,Xt.serialized.bitmap.close(),Xt.serialized.bitmap=wt(this,ht,Ey).call(this,!1))}return Bt}};tt=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,ct=new WeakMap,ot=new WeakMap,ut=new WeakMap,dt=new WeakMap,lt=new WeakMap,ht=new WeakSet,zp=function(zt){let Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!zt){this.remove();return}Pt(this,tt,zt.bitmap),Wt||(Pt(this,st,zt.id),Pt(this,dt,zt.isSvg)),wt(this,ht,Kx).call(this)},Wp=function(){Pt(this,rt,null),this._uiManager.enableWaiting(!1),et(this,ct)&&this.div.focus()},by=function(){if(et(this,st)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(et(this,st)).then(Wt=>wt(this,ht,zp).call(this,Wt,!0)).finally(()=>wt(this,ht,Wp).call(this));return}if(et(this,at)){const Wt=et(this,at);Pt(this,at,null),this._uiManager.enableWaiting(!0),Pt(this,rt,this._uiManager.imageManager.getFromUrl(Wt).then(Bt=>wt(this,ht,zp).call(this,Bt)).finally(()=>wt(this,ht,Wp).call(this)));return}if(et(this,it)){const Wt=et(this,it);Pt(this,it,null),this._uiManager.enableWaiting(!0),Pt(this,rt,this._uiManager.imageManager.getFromFile(Wt).then(Bt=>wt(this,ht,zp).call(this,Bt)).finally(()=>wt(this,ht,Wp).call(this)));return}const zt=document.createElement("input");zt.type="file",zt.accept=Tt.supportedTypesStr,Pt(this,rt,new Promise(Wt=>{zt.addEventListener("change",async()=>{if(!zt.files||zt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Bt=await this._uiManager.imageManager.getFromFile(zt.files[0]);wt(this,ht,zp).call(this,Bt)}Wt()}),zt.addEventListener("cancel",()=>{this.remove(),Wt()})}).finally(()=>wt(this,ht,Wp).call(this))),zt.click()},Kx=function(){const{div:zt}=this;let{width:Wt,height:Bt}=et(this,tt);const[Ut,_t]=this.pageDimensions,$t=.75;if(this.width)Wt=this.width*Ut,Bt=this.height*_t;else if(Wt>$t*Ut||Bt>$t*_t){const Et=Math.min($t*Ut/Wt,$t*_t/Bt);Wt*=Et,Bt*=Et}const[Xt,Ct]=this.parentDimensions;this.setDims(Wt*Xt/Ut,Bt*Ct/_t),this._uiManager.enableWaiting(!1);const yt=Pt(this,ct,document.createElement("canvas"));zt.append(yt),zt.hidden=!1,wt(this,ht,qx).call(this,Wt,Bt),wt(this,ht,j1).call(this),et(this,lt)||(this.parent.addUndoableEditor(this),Pt(this,lt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},O1=function(zt,Wt){var $t;const[Bt,Ut]=this.parentDimensions;this.width=zt/Bt,this.height=Wt/Ut,this.setDims(zt,Wt),($t=this._initialOptions)!=null&&$t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,et(this,ut)!==null&&clearTimeout(et(this,ut)),Pt(this,ut,setTimeout(()=>{Pt(this,ut,null),wt(this,ht,qx).call(this,zt,Wt)},200))},N1=function(zt,Wt){const{width:Bt,height:Ut}=et(this,tt);let _t=Bt,$t=Ut,Xt=et(this,tt);for(;_t>2*zt||$t>2*Wt;){const Ct=_t,yt=$t;_t>2*zt&&(_t=_t>=16384?Math.floor(_t/2)-1:Math.ceil(_t/2)),$t>2*Wt&&($t=$t>=16384?Math.floor($t/2)-1:Math.ceil($t/2));const Et=new OffscreenCanvas(_t,$t);Et.getContext("2d").drawImage(Xt,0,0,Ct,yt,0,0,_t,$t),Xt=Et.transferToImageBitmap()}return Xt},qx=function(zt,Wt){zt=Math.ceil(zt),Wt=Math.ceil(Wt);const Bt=et(this,ct);if(!Bt||Bt.width===zt&&Bt.height===Wt)return;Bt.width=zt,Bt.height=Wt;const Ut=et(this,dt)?et(this,tt):wt(this,ht,N1).call(this,zt,Wt),_t=Bt.getContext("2d");_t.filter=this._uiManager.hcmFilter,_t.drawImage(Ut,0,0,Ut.width,Ut.height,0,0,zt,Wt)},Ey=function(zt){if(zt){if(et(this,dt)){const Ut=this._uiManager.imageManager.getSvgUrl(et(this,st));if(Ut)return Ut}const Wt=document.createElement("canvas");return{width:Wt.width,height:Wt.height}=et(this,tt),Wt.getContext("2d").drawImage(et(this,tt),0,0),Wt.toDataURL()}if(et(this,dt)){const[Wt,Bt]=this.pageDimensions,Ut=Math.round(this.width*Wt*j.PixelsPerInch.PDF_TO_CSS_UNITS),_t=Math.round(this.height*Bt*j.PixelsPerInch.PDF_TO_CSS_UNITS),$t=new OffscreenCanvas(Ut,_t);return $t.getContext("2d").drawImage(et(this,tt),0,0,et(this,tt).width,et(this,tt).height,0,0,Ut,_t),$t.transferToImageBitmap()}return structuredClone(et(this,tt))},j1=function(){Pt(this,ot,new ResizeObserver(zt=>{const Wt=zt[0].contentRect;Wt.width&&Wt.height&&wt(this,ht,O1).call(this,Wt.width,Wt.height)})),et(this,ot).observe(this.div)},Hn(Tt,"_type","stamp");let nt=Tt;e.StampEditor=nt}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i].call(s.exports,s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return j.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _e.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return nt.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return tt.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return st.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(124),a=__w_pdfjs_require__(168),o=__w_pdfjs_require__(195),j=__w_pdfjs_require__(196),_e=__w_pdfjs_require__(165),nt=__w_pdfjs_require__(198),tt=__w_pdfjs_require__(176),st=__w_pdfjs_require__(201)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;const PdfThumbnail=({pdfUrl:i})=>{const[e,s]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{const j=await(await pdfExports.getDocument(i).promise).getPage(1),_e=document.createElement("canvas"),nt=_e.getContext("2d"),tt=j.getViewport({scale:.5});_e.width=tt.width,_e.height=tt.height;const st={canvasContext:nt,viewport:tt};await j.render(st).promise;const rt=_e.toDataURL();s(rt)}catch(o){console.error("Error loading PDF thumbnail:",o)}})()},[i]),jsxRuntimeExports.jsx("div",{children:e?jsxRuntimeExports.jsx("img",{src:e,alt:"PDF Thumbnail",style:{width:"100px",height:"auto"}}):jsxRuntimeExports.jsx("p",{children:"Loading..."})})};pdfExports$1.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const serverUrl$2="https://iiitr-connect.onrender.com",Items=["Stream","Classwork","People","Grades"],months$2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Stream=i=>{const{classRoomDetails:e}=i,s=e.assignments,[a,o]=reactExports.useState(!1),j=reactExports.useRef(null),_e=reactExports.useRef(null),[nt,tt]=reactExports.useState(""),[st,rt]=reactExports.useState(""),[at,it]=reactExports.useState(null),[ct,ot]=reactExports.useState(null),[ut,dt]=reactExports.useState([]),[lt,ht]=reactExports.useState(!0),[xt,mt]=reactExports.useState(!1),[ft,gt]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{try{const Yt=api.get("IIITRID"),zt=await fetch(`/api/classroom/${e._id}/stream`,{method:"GET",headers:{Authorization:`Bearer ${Yt}`}});if(zt.ok){const Wt=await zt.json();console.log(Wt),dt(Wt),ht(!1)}else{const Wt=await zt.text();console.log(Wt)}}catch(Yt){console.log(Yt)}})()},[]);const pt=async Lt=>{const Yt=Lt.target.files[0];if(ot(Yt),Yt){const zt=new FileReader;zt.onload=async function(){const Wt=new Uint8Array(this.result),Ut=await(await pdfExports$1.getDocument(Wt).promise).getPage(1),_t=document.createElement("canvas"),$t=_t.getContext("2d"),Xt=Ut.getViewport({scale:1});_t.width=Xt.width,_t.height=Xt.height,await Ut.render({canvasContext:$t,viewport:Xt}).promise;const Ct=_t.toDataURL("image/png");it(Ct)},zt.readAsArrayBuffer(Yt)}},vt=async Lt=>{const Yt=Lt.target.files[0];if(ot(Yt),Yt){const zt=new FileReader;zt.onload=async function(){const Wt=new Uint8Array(this.result),Ut=await(await pdfExports$1.getDocument(Wt).promise).getPage(1),_t=document.createElement("canvas"),$t=_t.getContext("2d"),Xt=Ut.getViewport({scale:1});_t.width=Xt.width,_t.height=Xt.height,await Ut.render({canvasContext:$t,viewport:Xt}).promise;const Ct=_t.toDataURL("image/png");it(Ct)},zt.readAsArrayBuffer(Yt)}},At=async()=>{const Lt=new FormData;ct&&Lt.append("media",ct),Lt.append("postContent",nt);const Yt=api.get("IIITRID");console.log("Data",Lt);const zt=await fetch(`/api/${e._id}/announcement`,{method:"POST",headers:{Authorization:`Bearer ${Yt}`},body:Lt});if(zt.ok)ot(null),it(null),rt("");else{const Wt=await zt.text();console.log("error",Wt)}},Rt=async Lt=>{const Yt=new FormData;ct&&Yt.append("media",ct),Yt.append("commentContent",st);const zt=api.get("IIITRID");console.log("Data",Yt);const Wt=await fetch(`/api/${e._id}/announcement/${ut[Lt].id}/comment`,{method:"POST",headers:{Authorization:`Bearer ${zt}`},body:Yt});if(Wt.ok)o(!1),ot(null),it(null),tt("");else{const Bt=await Wt.text();console.log("error",Bt)}},bt=()=>{document.getElementById("fileInput").click()},Tt=()=>{document.getElementById("fileInput2").click()};return s.reverse(),lt?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"100vw",justifyContent:"center"},children:[jsxRuntimeExports.jsxs(Popup,{modal:!0,open:xt,onClose:()=>{mt(!1)},contentStyle:{border:"solid red 1px",width:"50%",position:"relative"},children:[jsxRuntimeExports.jsx("button",{style:{position:"absolute",left:"-26px",backgroundColor:"#4C4C4C",border:"none"},onClick:()=>{const Lt=`${serverUrl$2}/download/classrooms/${e._id}/announcements/${ft}`,Yt=document.createElement("a");Yt.href=Lt,Yt.setAttribute("download",""),Yt.target="_blank",document.body.appendChild(Yt),Yt.click(),document.body.removeChild(Yt)},children:jsxRuntimeExports.jsx(LuDownload,{})}),jsxRuntimeExports.jsx(PDFViewer,{fileUrl:`${serverUrl$2}/uploads/classrooms/${e._id}/announcements/${ft}.pdf`})]}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[a&&jsxRuntimeExports.jsxs("div",{className:"olk",children:[jsxRuntimeExports.jsx("div",{contentEditable:"true",className:"editor kou","data-placeholder":"Announce something to your class",ref:j,onInput:Lt=>{tt(Lt.target.innerHTML)},onPaste:Lt=>{Lt.preventDefault();const Yt=Lt.clipboardData.getData("text/plain");console.log("entered"),document.execCommand("insertText",!1,Yt)}}),jsxRuntimeExports.jsxs("div",{className:"uikl mt-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{className:"uikl1",onClick:bt,children:jsxRuntimeExports.jsx(MdFileUpload,{size:30})}),jsxRuntimeExports.jsx("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:pt})]}),jsxRuntimeExports.jsx("div",{className:"plp",children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:nt==="",onClick:()=>{At()},children:"Post"})})]}),at&&jsxRuntimeExports.jsx("div",{style:{marginTop:"20px"},children:jsxRuntimeExports.jsx("img",{src:at,alt:"PDF Thumbnail",style:{width:"200px"}})})]}),!a&&jsxRuntimeExports.jsxs("div",{className:"lop",onClick:()=>{o(!0)},children:[jsxRuntimeExports.jsx("img",{src:"${serverUrl}/uploads/default.png",style:{width:"40px",borderRadius:"20px"}}),jsxRuntimeExports.jsx("div",{children:"Announce something to your class"})]}),ut.map((Lt,Yt)=>{const zt=new Date(Lt.postedAt),Wt=zt.getMonth()+1,Bt=zt.getDate();return Lt.type==="assignment"?jsxRuntimeExports.jsxs("div",{className:"pp",style:{display:"flex",alignItems:"center",border:"solid 1px grey",padding:"15px",borderRadius:"10px",width:"80%",cursor:"pointer",marginBottom:"10px"},children:[jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#5F6368",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"20px",marginRight:"15px"},children:jsxRuntimeExports.jsx(MdOutlineAssignment,{size:20,color:"white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:[e.faculty," posted a new assignment:",Lt.title]}),jsxRuntimeExports.jsxs("p",{style:{marginTop:"-15px"},children:[months$2[Wt]," ",Bt]})]})]}):jsxRuntimeExports.jsxs("div",{className:"ioo",children:[jsxRuntimeExports.jsxs("div",{className:"ploim",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",onClick:()=>{},children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$2}/uploads/profile/${Lt.postedBy.userId}.png`,className:"pop",onError:Ut=>{Ut.target.onerror=null,Ut.target.src="${serverUrl}/uploads/default.png"}}),jsxRuntimeExports.jsxs("span",{children:[Lt.postedBy.firstName," ",Lt.postedBy.surName]})]})}),jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:Lt.postContent}}),Lt.isMediaPresent&&jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",style:{cursor:"pointer"},onClick:()=>{mt(!0),gt(Lt.id)},children:[jsxRuntimeExports.jsx(PdfThumbnail,{pdfUrl:`${serverUrl$2}/uploads/classrooms/${e._id}/announcements/${Lt.id}.pdf`}),jsxRuntimeExports.jsxs("p",{children:[Lt.id,".pdf"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{children:[Lt.comments.length," comments"]}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",marginBottom:"10px"},children:Lt.comments.map(Ut=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",onClick:()=>{},children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$2}/uploads/profile/${Ut.postedBy}.png`,className:"pop",onError:_t=>{_t.target.onerror=null,_t.target.src=`${serverUrl$2}/uploads/default.png`}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{children:[Ut.userInfo.firstName," ",Ut.userInfo.surName]}),jsxRuntimeExports.jsx("p",{children:Ut.comment})]})]}),Ut.isMediaPresent&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",style:{cursor:"pointer"},onClick:()=>{mt(!0),gt(Lt.id)},children:[jsxRuntimeExports.jsx(PdfThumbnail,{pdfUrl:`${serverUrl$2}/uploads/classrooms/${e._id}/announcements/${Lt.id}/comments/${Ut.id}.pdf`}),jsxRuntimeExports.jsxs("p",{children:[Lt.id,".pdf"]})]})})]}))}),jsxRuntimeExports.jsx("div",{contentEditable:"true",className:"editor kou","data-placeholder":"Add a class comment",ref:_e,onInput:Ut=>{rt(Ut.target.innerHTML)},onPaste:Ut=>{Ut.preventDefault();const _t=Ut.clipboardData.getData("text/plain");console.log("entered"),document.execCommand("insertText",!1,_t)}}),jsxRuntimeExports.jsxs("div",{className:"uikl mt-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{className:"uikl1",onClick:Tt,children:jsxRuntimeExports.jsx(MdFileUpload,{size:30})}),jsxRuntimeExports.jsx("input",{id:"fileInput2",type:"file",style:{display:"none"},onChange:vt})]}),jsxRuntimeExports.jsx("div",{className:"plp",children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:st==="",onClick:()=>{Rt(Yt)},children:"Post"})})]}),jsxRuntimeExports.jsx("div",{children:at&&jsxRuntimeExports.jsx("div",{style:{marginTop:"20px"},children:jsxRuntimeExports.jsx("img",{src:at,alt:"PDF Thumbnail",style:{width:"200px"}})})})]})]})})]})]})},Classwork=({setshowAssignment:i,role:e,classRoomDetails:s})=>{const a=s.assignments;a.reverse();const[o,j]=reactExports.useState(new Array(a.length).fill(!1)),_e={backgroundColor:"rgba(0, 0, 0, 0.7)"},[nt,tt]=reactExports.useState(!1),[st,rt]=reactExports.useState("");return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Popup,{modal:!0,open:nt,overlayStyle:_e,onClose:()=>{tt(!1)},contentStyle:{border:"solid red 1px",width:"50%",position:"relative"},children:[jsxRuntimeExports.jsx("button",{style:{position:"absolute",left:"-26px",backgroundColor:"#4C4C4C",border:"none"},onClick:()=>{const at=`${serverUrl$2}/download/classrooms/${s._id}/assignments/${st}`,it=document.createElement("a");it.href=at,it.setAttribute("download",""),it.target="_blank",document.body.appendChild(it),it.click(),document.body.removeChild(it)},children:jsxRuntimeExports.jsx(LuDownload,{})}),jsxRuntimeExports.jsx(PDFViewer,{fileUrl:`${serverUrl$2}/uploads/classrooms/${s._id}/assignments/${st}.pdf`})]}),jsxRuntimeExports.jsxs("div",{className:"w-100",children:[e==="faculty"&&jsxRuntimeExports.jsx(Popup,{arrow:!1,position:"bottom left",trigger:jsxRuntimeExports.jsxs("button",{className:"btn btn-primary pol",children:[jsxRuntimeExports.jsx(FaPlus,{}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:"Create"})]}),children:jsxRuntimeExports.jsx("ul",{className:"hjk",children:jsxRuntimeExports.jsx("li",{className:"polkg",onClick:()=>{i(!0)},children:"Assignment"})})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",width:"100vw",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:a.map((at,it)=>{const ct=new Date,ot=new Date(at.postedAt),ut=new Date(at.duedate),dt=ut.getMonth(),lt=ut.getDate(),ht=ot.getMonth(),xt=ot.getDate();return console.log(ct,ut),jsxRuntimeExports.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[jsxRuntimeExports.jsxs("div",{onClick:()=>{console.log("yyyyyyykkkkkkk");let mt=[...o];mt[it]=!mt[it],j(mt)},className:"pp",style:{marginBottom:"10px",marginTop:"10px",display:"flex",alignItems:"center",border:"solid 1px grey",padding:"15px",borderRadius:"10px",width:"80%",cursor:"pointer",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row",children:[jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#5F6368",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"20px",marginRight:"15px"},children:jsxRuntimeExports.jsx(MdOutlineAssignment,{size:20,color:"white"})}),jsxRuntimeExports.jsxs("p",{children:[" ",at.title]})]}),jsxRuntimeExports.jsxs("p",{children:["Due ",months$2[dt]," ",lt]})]}),o[it]&&jsxRuntimeExports.jsx("div",{style:{marginTop:"solid 1px grey",width:"80%"},children:jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column",style:{position:"relative"},children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[jsxRuntimeExports.jsxs("p",{children:["posted ",months$2[ht]," ",xt]}),jsxRuntimeExports.jsx("p",{children:ct<ut?"Assigned":"Missed"})]}),jsxRuntimeExports.jsx("p",{children:at.instructions}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",style:{cursor:"pointer"},onClick:()=>{tt(!0),rt(at.id)},children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$2}/uploads/classrooms/${s._id}/assignments/${at.id}_thumbnail.png`,style:{width:"100px",height:"50px"}}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"20px"},children:[jsxRuntimeExports.jsxs("p",{style:{marginBottom:"0px"},children:[at.id,".pdf"]}),jsxRuntimeExports.jsx("p",{style:{marginBottom:"0px"},children:"PDF"})]})]}),e==="faculty"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"kfk",children:[jsxRuntimeExports.jsxs("div",{className:"pll",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"25px"},children:at.submitted.length}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px"},children:"Turned In"})]}),jsxRuntimeExports.jsxs("div",{className:"pll",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"25px"},children:s.students.length}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px"},children:"Assigned"})]})]}),jsxRuntimeExports.jsx("button",{style:{marginTop:"10px"},className:"btn btn-primary",onClick:()=>window.open(`${window.location.origin}/classroom/${s._id}/${at.id}/review`,"_blank"),children:"Review Work"})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:`/classroom/${s._id}/a/${at.id}/details`,state:{role:e,classRoomDetails:s,assignment:at},children:jsxRuntimeExports.jsx("p",{children:"View instructions"})})})]})})]})})})})]})]})},People=i=>{const{classRoomDetails:e}=i,[s,a]=reactExports.useState(!1),[o,j]=reactExports.useState(""),[_e,nt]=reactExports.useState([]),tt=it=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(it),st=it=>{if(it.key==="Enter"||it.key===","||it.key===" "){const ct=o.trim().replace(",","");tt(ct)?(_e.includes(ct)||nt([..._e,ct]),j("")):alert("Please enter a valid email address")}},rt=it=>{nt(_e.filter(ct=>ct!==it))},at=async it=>{console.log("called");try{const ct=api.get("IIITRID"),ot=await fetch("/api/classroom/invite",{method:"POST",headers:{Authorization:`Bearer ${ct}`,"Content-Type":"application/json"},body:JSON.stringify({emails:_e,classroom:e._id})});if(ot.ok)it();else{const ut=await ot.text();console.log(ut)}}catch(ct){console.log(ct)}};return e?(console.log("classRoomDetails",e),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Popup,{open:s,onClose:()=>{a(!1)},contentStyle:{height:"500px",width:"400px"},children:it=>jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h6",{children:"Invite Students"}),jsxRuntimeExports.jsx("input",{type:"text",value:o,placeholder:"Enter email and press Enter",onChange:ct=>j(ct.target.value),onKeyDown:st,className:"email-input",style:{minWidth:"200px"}}),jsxRuntimeExports.jsx("div",{className:"email-container",children:_e.map((ct,ot)=>jsxRuntimeExports.jsxs("div",{className:"email-tag",children:[ct,jsxRuntimeExports.jsx(IoIosClose,{className:"remove-email-icon",onClick:()=>rt(ct)})]},ot))}),jsxRuntimeExports.jsxs("div",{className:"mt-3 d-flex flex-row ",children:[jsxRuntimeExports.jsx("button",{className:"btn",onClick:()=>{it(),nt([]),j("")},children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:_e.length===0,onClick:()=>{at(it)},children:"Send"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"d-flex flkex-row justify-content-between p-3",children:[jsxRuntimeExports.jsx("h2",{children:"Teachers"}),jsxRuntimeExports.jsx("button",{className:"yui",children:jsxRuntimeExports.jsx(FaUserPlus,{})})]}),jsxRuntimeExports.jsx("ul",{style:{listStyleType:"none"},children:e.teachers.map(it=>jsxRuntimeExports.jsx("li",{children:it}))}),jsxRuntimeExports.jsxs("div",{className:"d-flex flkex-row justify-content-between p-3",children:[jsxRuntimeExports.jsx("h2",{children:"Students"}),jsxRuntimeExports.jsx("button",{className:"yui",onClick:()=>{console.log("fufuf"),a(!0)},children:jsxRuntimeExports.jsx(FaUserPlus,{})})]}),jsxRuntimeExports.jsx("ul",{style:{listStyleType:"none"},children:e.students.map(it=>jsxRuntimeExports.jsx("li",{children:it}))}),e.students.length===0&&jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center",children:[jsxRuntimeExports.jsx("h5",{children:"Add students to this classroom"}),jsxRuntimeExports.jsxs("button",{className:"tyu",onClick:()=>{console.log("fufuf"),a(!0)},children:[jsxRuntimeExports.jsx(FaUserPlus,{})," ",jsxRuntimeExports.jsx("span",{children:"Invite students"})]})]})]})):null},Grades=()=>jsxRuntimeExports.jsx("div",{}),Classroom=()=>{const{id:i}=useParams(),[e,s]=reactExports.useState("Stream"),[a,o]=reactExports.useState(!1),[j,_e]=reactExports.useState("student"),[nt,tt]=reactExports.useState(!0),[st,rt]=reactExports.useState({});reactExports.useEffect(()=>{(async()=>{try{const ht=api.get("IIITRID"),xt=await fetch(`/api/classroom/${i}`,{method:"GET",headers:{Authorization:`Bearer ${ht}`}});if(xt.ok){const ft=await xt.json();console.log(ft),rt(ft),tt(!1)}else{const ft=await xt.text();console.log(ft)}const mt=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${ht}`}});if(mt.ok){const ft=await mt.text();console.log(ft),_e(ft)}else{const ft=await mt.text();console.log(ft)}}catch(ht){console.log(ht)}})()},[]);const at=lt=>e==="Stream"?jsxRuntimeExports.jsx(Stream,{classRoomDetails:st}):e==="Classwork"?jsxRuntimeExports.jsx(Classwork,{setshowAssignment:lt,role:j,classRoomDetails:st}):e==="People"?(console.log("classRoomDetails kkkkk",st),jsxRuntimeExports.jsx(People,{classRoomDetails:st})):e==="Grades"?jsxRuntimeExports.jsx(Grades,{}):null,it=reactExports.useRef(),ct=lt=>{lt.target.name!="media"?dt(ht=>({...ht,[lt.target.name]:lt.target.value})):it.current=lt.target.files[0]},ot=async lt=>{lt.preventDefault();const ht=new FormData;for(let ft in ut)ht.append(ft,ut[ft]);ht.append("assignment",it.current);const xt=api.get("IIITRID");console.log("Data",ht);const mt=await fetch(`/api/${i}/assignment`,{method:"POST",headers:{Authorization:`Bearer ${xt}`},body:ht});if(mt.ok)o(!1);else{const ft=await mt.text();console.log("error",ft)}},[ut,dt]=reactExports.useState({title:"",instructions:"",points:"",duedate:""});return nt?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):a?jsxRuntimeExports.jsxs("div",{className:"nmg",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-start p-3 ll7",children:[jsxRuntimeExports.jsx("button",{style:{background:"transparent",border:"none"},onClick:()=>{o(!1)},children:jsxRuntimeExports.jsx(RxCross2,{})}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",children:[jsxRuntimeExports.jsx("div",{className:"plo",children:jsxRuntimeExports.jsx(MdOutlineAssignment,{})}),jsxRuntimeExports.jsx("p",{children:"Assignment"})]})]}),jsxRuntimeExports.jsx("div",{className:"iol",children:jsxRuntimeExports.jsxs("form",{className:"plol",onSubmit:ot,children:[jsxRuntimeExports.jsx("input",{placeholder:"title",required:!0,name:"title",value:ut.title,onChange:ct}),jsxRuntimeExports.jsx("textarea",{cols:70,rows:10,style:{resize:"none",paddingLeft:"10px"},placeholder:"instructions(optional)",name:"instructions",value:ut.instructions,onChange:ct}),jsxRuntimeExports.jsxs("label",{class:"custom-file-upload lp",children:[jsxRuntimeExports.jsx("i",{class:"fas fa-upload"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(MdFileUpload,{size:30}),"upload assignment"]}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",name:"assignment",onChange:lt=>{it.current=lt.target.files[0],console.log(MdAssignmentAdd)},required:!0})]}),jsxRuntimeExports.jsx("input",{placeholder:"points",type:"number",min:"1",max:"100",name:"points",value:ut.points,required:!0,onChange:ct}),jsxRuntimeExports.jsx("label",{children:"due date"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",name:"duedate",value:ut.duedate,required:!0,onChange:ct}),jsxRuntimeExports.jsx("button",{style:{width:"100px"},className:"btn btn-primary",type:"submit",children:"Assign"})]})})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Link,{to:"/classrooms",style:{position:"fixed",top:"10px",left:"5px"},children:jsxRuntimeExports.jsx(IoIosArrowRoundBack,{size:30})}),jsxRuntimeExports.jsxs("div",{className:"classroom2",children:[jsxRuntimeExports.jsx("ul",{className:"classroom-bar",children:Items.map(lt=>{let ht;return lt===e?ht="active":ht="inactive",jsxRuntimeExports.jsx("li",{className:ht,onClick:()=>{s(lt)},children:lt})})}),at(o)]})]})};function AcceptInvite(){const[i,e]=reactExports.useState(!0),{id:s}=useParams(),[a,o]=reactExports.useState(),j=useNavigate(),_e=async()=>{try{const nt=api.get("IIITRID"),tt=await fetch("/api/join-class",{method:"POST",headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"},body:JSON.stringify({token:s})});if(tt.ok){const st=await tt.text();j(`/classroom/${st}`)}else{const st=await tt.text();B.error(st)}}catch(nt){console.log(nt)}};return reactExports.useEffect(()=>{(async()=>{try{const tt=api.get("IIITRID"),st=await fetch(`/api/invite/${s}`,{method:"GET",headers:{Authorization:`Bearer ${tt}`}});if(st.ok){const rt=await st.json();console.log(rt),o(rt),e(!1)}else{const rt=await st.text();console.log(rt)}}catch(tt){console.log(tt)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{className:"r4",children:[jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsxs("div",{className:"b4",children:[jsxRuntimeExports.jsx("h4",{children:"Join Class?"}),jsxRuntimeExports.jsxs("p",{children:["You've been invited to join ",a.className]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:_e,children:"Join"})]})]})}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(i,e=0){return(byteToHex[i[e+0]]+byteToHex[i[e+1]]+byteToHex[i[e+2]]+byteToHex[i[e+3]]+"-"+byteToHex[i[e+4]]+byteToHex[i[e+5]]+"-"+byteToHex[i[e+6]]+byteToHex[i[e+7]]+"-"+byteToHex[i[e+8]]+byteToHex[i[e+9]]+"-"+byteToHex[i[e+10]]+byteToHex[i[e+11]]+byteToHex[i[e+12]]+byteToHex[i[e+13]]+byteToHex[i[e+14]]+byteToHex[i[e+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(i,e,s){if(native.randomUUID&&!e&&!i)return native.randomUUID();i=i||{};const a=i.random||(i.rng||rng)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,unsafeStringify(a)}const serverUrl$1="https://iiitr-connect.onrender.com",months$1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AssignmentDetails=({})=>{const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState({}),[o,j]=reactExports.useState(!1),_e=useLocation();console.log("location.state",_e.state);const nt=_e.state.role,tt=_e.state.classRoomDetails,st=_e.state.assignment,rt=new Date(st.postedAt),at=rt.getMonth(),it=rt.getDate(),ct=new Date(st.duedate),ot=ct.getMonth(),ut=ct.getDate(),dt=ct.getHours(),lt=ct.getMinutes(),[ht,xt]=reactExports.useState([]),[mt,ft]=reactExports.useState(""),gt={backgroundColor:"rgba(0, 0, 0, 0.7)"},[pt,vt]=reactExports.useState(!1),At=reactExports.useRef(null),[Rt,bt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(st!=null&&st.submitted&&(s!=null&&s.userId)){const Wt=st.submitted.some(Bt=>Bt.user===s.userId);bt(Wt)}},[st,s]);const Tt=()=>{At.current.click()};console.log(ht);const Lt=Wt=>{const Bt=Wt.target.files[0];Bt&&(console.log("Selected file:",Bt),xt(Ut=>[...Ut,{file:Bt,id:v4()}]))},Yt=async(Wt,Bt)=>{const Ut=new FormData,_t=api.get("IIITRID");Array.from(ht).forEach($t=>{Ut.append("files",$t.file)});try{(await fetch(`${serverUrl$1}/submit/${tt._id}/${Bt}`,{method:"POST",body:Ut,headers:{Authorization:`Bearer ${_t}`}})).ok?(alert("Files uploaded successfully!"),bt(!0)):console.error("Upload failed")}catch($t){console.log($t)}},zt=async(Wt,Bt)=>{const Ut=api.get("IIITRID");try{(await fetch(`${serverUrl$1}/unsubmit/${tt._id}/${Bt}`,{method:"POST",headers:{Authorization:`Bearer ${Ut}`}})).ok?(bt(!1),xt([])):console.error("Upload failed")}catch(_t){console.log(_t)}};return reactExports.useEffect(()=>{(async()=>{try{const Bt=api.get("IIITRID"),Ut=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${Bt}`}});if(Ut.ok){const $t=await Ut.json();console.log("data.data.isVerified",$t.data.isVerified),e(!1),a($t.data);const Xt=await fetch(`/api/${tt._id}/${st.id}/submissions`,{headers:{Authorization:`Bearer ${Bt}`}});if(Xt.ok){const Ct=await Xt.json();xt(Ct),console.log(Ct)}}else{const $t=await Ut.text();console.log($t)}const _t=await fetch(`/api/${tt._id}/${st.id}/grade`,{headers:{Authorization:`Bearer ${Bt}`}});if(_t.ok){const $t=await _t.text();ft($t),console.log($t)}else{const $t=await Ut.text();console.log($t)}}catch(Bt){console.log(Bt)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):(console.log("assignment",st),jsxRuntimeExports.jsxs("div",{style:{width:"100%"},children:[jsxRuntimeExports.jsxs(Popup,{modal:!0,open:o,overlayStyle:gt,onClose:()=>{j(!1)},contentStyle:{border:"solid red 1px",width:"50%",position:"relative"},children:[jsxRuntimeExports.jsx("button",{style:{position:"absolute",left:"-26px",backgroundColor:"#4C4C4C",border:"none"},onClick:()=>{const Wt=`${serverUrl$1}/download/classrooms/${tt._id}/assignments/${st.id}`,Bt=document.createElement("a");Bt.href=Wt,Bt.setAttribute("download",""),Bt.target="_blank",document.body.appendChild(Bt),Bt.click(),document.body.removeChild(Bt)},children:jsxRuntimeExports.jsx(LuDownload,{})}),jsxRuntimeExports.jsx(PDFViewer,{fileUrl:`${serverUrl$1}/uploads/classrooms/${tt._id}/assignments/${st.id}.pdf`})]}),jsxRuntimeExports.jsx(Popup,{onClose:()=>{vt(!1)},open:pt,contentStyle:{width:"500px",height:"400px"},children:Wt=>jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-center align-items-center h-100",children:[jsxRuntimeExports.jsx("input",{type:"file",ref:At,style:{display:"none"},onChange:Lt}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>{Tt()},children:"Browse"})]})}),jsxRuntimeExports.jsxs("div",{children:[nt=="faculty"&&jsxRuntimeExports.jsxs("div",{className:"d-flex",children:[jsxRuntimeExports.jsx("span",{style:{marginRight:"10px"},children:"Instructions"}),jsxRuntimeExports.jsx("span",{children:"Student work"})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex p-4 w-100",children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"#5F6368",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"20px",marginRight:"20px"},children:jsxRuntimeExports.jsx(MdOutlineAssignment,{size:25,color:"white"})}),jsxRuntimeExports.jsxs("div",{style:{flexGrow:"1",marginRight:"10px"},children:[jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[jsxRuntimeExports.jsxs("div",{style:{borderBottom:"solid 1px black"},children:[jsxRuntimeExports.jsx("p",{children:st.title}),jsxRuntimeExports.jsxs("p",{children:[tt.faculty,"  ",months$1[at]," ",it]}),mt===""&&jsxRuntimeExports.jsxs("p",{children:[st.points," points"]}),mt!==""&&jsxRuntimeExports.jsxs("p",{children:[mt,"/",st.points]})]}),jsxRuntimeExports.jsx("div",{className:"d-flex flex-column justify-content-end",children:jsxRuntimeExports.jsxs("span",{children:["Due ",months$1[ot]," ",ut," ",dt,":",lt]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:st.instructions}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row align-items-center",style:{cursor:"pointer"},onClick:()=>{j(!0)},children:[jsxRuntimeExports.jsx("img",{src:`${serverUrl$1}/uploads/classrooms/${tt._id}/assignments/${st.id}_thumbnail.png`,style:{width:"100px",height:"50px"}}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"20px"},children:[jsxRuntimeExports.jsxs("p",{style:{marginBottom:"0px"},children:[st.id,".pdf"]}),jsxRuntimeExports.jsx("p",{style:{marginBottom:"0px"},children:"PDF"})]})]})]})]}),nt==="student"&&jsxRuntimeExports.jsxs("div",{className:"rrr",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between",children:[jsxRuntimeExports.jsx("p",{children:"Your Work"}),jsxRuntimeExports.jsx("p",{children:Rt?mt!==""?"Graded":"Turned In":new Date>ct?"Missing":"Assigned"})]}),jsxRuntimeExports.jsx("div",{children:ht.map(Wt=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:"solid 1px #DADCE0",borderRadius:"10px",padding:"5px",marginBottom:"10px"},children:[jsxRuntimeExports.jsx("span",{children:Wt.file.name.slice(0,20)}),!Rt&&jsxRuntimeExports.jsx("button",{style:{background:"trasparent",border:"none",cursor:"pointer"},onClick:()=>{let Bt=[...ht],Ut=Bt.findIndex(_t=>_t.id===Wt.id);Ut!==-1&&Bt.splice(Ut,1),xt(Bt)},children:jsxRuntimeExports.jsx(RxCross1,{})})]}))}),!Rt&&jsxRuntimeExports.jsx(Popup,{arrow:!1,trigger:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",style:{width:"100%"},children:"Add or create"}),children:jsxRuntimeExports.jsx("ul",{style:{listStyleType:"none"},children:jsxRuntimeExports.jsx("li",{onClick:()=>{vt(!0)},children:"File"})})}),!Rt&&ht.length!==0&&new Date<ct&&jsxRuntimeExports.jsx("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"10px"},onClick:Wt=>{Yt(Wt,st.id)},children:"Turn In"}),console.log("grade gssgrg",mt),Rt&&mt==""&&jsxRuntimeExports.jsx("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"10px"},onClick:Wt=>{zt(Wt,st.id)},children:"Unsubmit"})]})]})]})]}))},months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ReviewWork=()=>{const[i,e]=reactExports.useState(!0),{classroomId:s,assId:a}=useParams(),[o,j]=reactExports.useState({}),[_e,nt]=reactExports.useState(0),[tt,st]=reactExports.useState(0),[rt,at]=reactExports.useState(0),it=reactExports.useRef(null),[ct,ot]=reactExports.useState(""),ut=async()=>{try{const ft=api.get("IIITRID"),gt=await fetch(`/api/grade?classroomId=${s}&assId=${a}&grade=${ct}&userId=${o.submissions[_e].userInfo.userId}`,{method:"POST",headers:{Authorization:`Bearer ${ft}`}});if(gt.ok){const pt=await gt.text();B("graded")}else{const pt=await gt.text();console.log(pt)}}catch(ft){console.log(ft)}};if(reactExports.useEffect(()=>{(async()=>{try{const gt=api.get("IIITRID"),pt=await fetch(`/api/${s}/${a}/submissionDetails`,{method:"GET",headers:{Authorization:`Bearer ${gt}`}});if(pt.ok){const vt=await pt.json();j(vt),e(!1),console.log("data.submissions.files[0].id",vt.submissions[0].files[0].id),at(vt.submissions[0].files[0].id),ot(vt.submissions[0].grade)}else{const vt=await pt.text();console.log(vt)}}catch(gt){console.log(gt)}})()},[]),i)return jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})});const dt=new Date(o.submissions[_e].submittedAt);console.log("turnedDateturnedDate",dt);const lt=dt.getMonth(),ht=dt.getDate(),xt=dt.getHours(),mt=dt.getMinutes();return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsxs("div",{className:"tol",children:[jsxRuntimeExports.jsx("span",{children:o.assignmentDetails.title}),jsxRuntimeExports.jsxs("div",{className:"mio",children:[jsxRuntimeExports.jsxs("div",{className:"lki",children:[jsxRuntimeExports.jsxs("p",{className:"ll7",children:[o.submissions[_e].userInfo.firstName," ",o.submissions[_e].userInfo.surName]}),jsxRuntimeExports.jsx("p",{children:"Turned In"})]}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"20px"},children:[jsxRuntimeExports.jsx("button",{style:{background:"transparent",cursor:"pointer",border:"none"},disabled:_e===0,onClick:()=>{st(ft=>ft-1),at(0)},children:jsxRuntimeExports.jsx(IoIosArrowBack,{})}),jsxRuntimeExports.jsx("button",{style:{background:"transparent",cursor:"pointer",border:"none"},disabled:o.submissions.length-1===_e,onClick:()=>{st(ft=>ft+1),at(0)},children:jsxRuntimeExports.jsx(IoIosArrowForward,{})})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>{ut()},children:"Return"})]})]}),jsxRuntimeExports.jsxs("div",{className:"kkkk",children:[jsxRuntimeExports.jsxs("div",{className:"left-assign",children:[console.log(o,_e," submissionData.submissions[currStudent].files[currAssign]",o.submissions[_e]),jsxRuntimeExports.jsx(PDFViewer,{fileUrl:o.submissions[_e].files[tt].file.path})]}),jsxRuntimeExports.jsxs("div",{className:"right-info",children:[jsxRuntimeExports.jsx("h4",{children:"Files"}),jsxRuntimeExports.jsxs("p",{children:["Turned in on ",months[lt]," ",ht,", ",xt,":",mt," "]}),jsxRuntimeExports.jsx("div",{children:o.submissions[_e].files.map((ft,gt)=>{let pt;return console.log("currFile",rt,ft.id),ft.id===rt?pt="activek":pt="inactivek",jsxRuntimeExports.jsxs("div",{className:"nml",children:[jsxRuntimeExports.jsx("div",{className:pt}),jsxRuntimeExports.jsx("p",{className:"polk",onClick:()=>{at(ft.id),st(gt)},children:ft.file.name})]})})}),jsxRuntimeExports.jsxs("div",{className:"nbh",children:[jsxRuntimeExports.jsx("p",{children:"Grade"}),jsxRuntimeExports.jsxs("div",{className:"kkkp",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:o.assignmentDetails.points,ref:it,value:ct,onChange:ft=>{ot(ft.target.value)}}),jsxRuntimeExports.jsxs("div",{children:["/",o.assignmentDetails.points]})]})]})]})]})]})},CreatePoll=()=>{const i=useNavigate(),[e,s]=reactExports.useState([]),[a,o]=reactExports.useState(!0),[j,_e]=reactExports.useState(""),[nt,tt]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{try{const ct=api.get("IIITRID"),ot=await fetch("/api/role",{method:"GET",headers:{Authorization:`Bearer ${ct}`}});if(ot.ok){const ut=await ot.text();if(console.log("datadata",ut),o(!1),ut!=="admin")return i("/")}}catch(ct){console.log(ct)}})()},[]),console.log("options",e);const[st,rt]=reactExports.useState(""),at=async it=>{it.preventDefault();try{const ct=api.get("IIITRID"),ot=await fetch("/api/poll",{method:"POSt",headers:{Authorization:`Bearer ${ct}`,"Content-Type":"application/json"},body:JSON.stringify({pollDescription:st,options:e,allowMultipleOptions:nt})});if(ot.ok){const ut=await ot.text();B("posted successfully"),rt(""),s([]),tt("")}}catch(ct){console.log(ct)}};return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx(FaArrowLeft,{style:{position:"fixed",top:"10px",left:"10px"}})}),jsxRuntimeExports.jsx(Q,{}),jsxRuntimeExports.jsx("h3",{style:{marginBottom:"20px"},children:"create a poll"}),jsxRuntimeExports.jsxs("form",{className:"d-flex flex-column align-items-start",onSubmit:at,children:[jsxRuntimeExports.jsx("textarea",{className:"ooo",placeholder:"enter poll desciption",value:st,onChange:it=>{rt(it.target.value)}}),jsxRuntimeExports.jsx("p",{className:"text-center",children:"options"}),jsxRuntimeExports.jsx("div",{children:e.map((it,ct)=>jsxRuntimeExports.jsxs("div",{className:"oop",children:[jsxRuntimeExports.jsx("span",{children:it}),jsxRuntimeExports.jsx("button",{onClick:()=>{const ot=[...e];ot.splice(ct),s(ot)},children:jsxRuntimeExports.jsx(RxCross1,{})})]}))}),jsxRuntimeExports.jsx("p",{className:"text-center",children:"Add options"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{value:j,style:{marginRight:"10px",height:"40px"},onChange:it=>{_e(it.target.value)}}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{j!==""&&(s(it=>[...it,j]),_e(""))},children:"Add"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{style:{marginRight:"10px"},children:"Allow multiple answers"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:nt,onChange:it=>{console.log(nt),tt(it.target.checked)}})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary mt-3",type:"submit",children:"Submit"})]})]})},serverUrl="https://iiitr-connect.onrender.com",Polls=()=>{const[i,e]=reactExports.useState(!0),[s,a]=reactExports.useState(!0),[o,j]=reactExports.useState({}),[_e,nt]=reactExports.useState([]),[tt,st]=reactExports.useState([]),rt=async(it,ct)=>{const ot=api.get("IIITRID"),ut=await fetch("/api/poll",{method:"PUT",headers:{Authorization:`Bearer ${ot}`,"Content-Type":"application/json"},body:JSON.stringify({id:it,value:ct})});console.log("responsedjvdvj",ut),ut.ok&&await ut.text()},at=async it=>{console.log("dsgdsgdggre");const ct=api.get("IIITRID"),ot=await fetch(`/api/poll/${it}/votes`,{method:"GET",headers:{Authorization:`Bearer ${ct}`,"Content-Type":"application/json"}});if(console.log("responsedjvdvj",ot),ot.ok){const ut=await ot.json();a(!1),st(ut),console.log("datavotes",ut)}};return reactExports.useEffect(()=>{(async()=>{try{const ct=api.get("IIITRID"),ot=await fetch("/api/status",{method:"GET",headers:{Authorization:`Bearer ${ct}`}});if(ot.ok){const ut=await ot.json();console.log("data.data.isVerified",ut.data.isVerified),e(!1),j(ut.data);const dt=await fetch("/api/polls",{headers:{Authorization:`Bearer ${ct}`}});if(dt.ok){const lt=await dt.json();nt(lt),console.log(lt)}else{const lt=await ot.text();console.log(lt)}}}catch(ct){console.log(ct)}})()},[]),i?jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:jsxRuntimeExports.jsx(Loader,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center ll",children:[jsxRuntimeExports.jsx("h1",{children:"Polls"}),jsxRuntimeExports.jsx("div",{className:"kio",children:_e.map(it=>jsxRuntimeExports.jsxs("div",{className:"kkl",children:[jsxRuntimeExports.jsx("h6",{children:it.pollDescription}),it.allowMultipleOptions&&jsxRuntimeExports.jsxs("div",{children:[it.options.map(ct=>jsxRuntimeExports.jsxs("div",{className:"d-flex align-items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:ct,style:{marginRight:"10px"},value:ct,onChange:ot=>{rt(it._id,ot.target.value)},defaultChecked:it.userResponse.options.includes(ct),disabled:o.role==="admin"}),jsxRuntimeExports.jsx("label",{htmlFor:ct,style:{marginTop:"-4px"},children:ct})]})),jsxRuntimeExports.jsx("div",{className:"text-center mt-3",children:jsxRuntimeExports.jsx(Popup,{onOpen:()=>{at(it._id)},onClose:()=>{st([])},position:"top right",trigger:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",children:"View Votes"}),children:!s&&jsxRuntimeExports.jsx("div",{children:Object.keys(tt).map(ct=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:ct}),jsxRuntimeExports.jsx("span",{children:tt[ct].length})]}),jsxRuntimeExports.jsx("ul",{style:{listStyleType:"none"},children:tt[ct].map(ot=>jsxRuntimeExports.jsxs("li",{style:{marginBottom:"10px"},children:[jsxRuntimeExports.jsx("img",{width:40,height:40,style:{borderRadius:"20px",marginRight:"10px"},src:`${serverUrl}/uploads/profile/${ot.userId}.png`,onError:ut=>{ut.target.onerror=null,ut.target.src=`${serverUrl}/uploads/default.png`}}),ot.surName," ",ot.firstName]}))})]}))})})})]}),!it.allowMultipleOptions&&jsxRuntimeExports.jsxs("div",{children:[it.options.map(ct=>jsxRuntimeExports.jsxs("div",{className:"d-flex align-items-center",children:[jsxRuntimeExports.jsx("input",{name:"rad",type:"radio",id:ct,style:{marginRight:"10px"},value:ct,onChange:ot=>{rt(it._id,ot.target.value)},defaultChecked:it.userResponse.options.includes(ct),disabled:o.role==="admin"}),jsxRuntimeExports.jsx("label",{htmlFor:ct,style:{marginTop:"-4px"},children:ct})]})),jsxRuntimeExports.jsx("div",{className:"text-center mt-3",children:jsxRuntimeExports.jsx(Popup,{onOpen:()=>{at(it._id)},onClose:()=>{st([])},position:"top right",trigger:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",children:"View Votes"}),children:!s&&jsxRuntimeExports.jsx("div",{children:Object.keys(tt).map(ct=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:ct}),jsxRuntimeExports.jsx("span",{children:tt[ct].length})]}),jsxRuntimeExports.jsx("ul",{style:{listStyleType:"none"},children:tt[ct].map(ot=>jsxRuntimeExports.jsxs("li",{style:{marginBottom:"10px"},children:[jsxRuntimeExports.jsx("img",{width:40,height:40,style:{borderRadius:"20px",marginRight:"10px"},src:`${serverUrl}/uploads/profile/${ot.userId}.png`,onError:ut=>{ut.target.onerror=null,ut.target.src="${serverUrl}/uploads/default.png"}}),ot.surName," ",ot.firstName]}))})]}))})})})]})]}))})]})};function App(){return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"/register",element:jsxRuntimeExports.jsx(Register,{})}),jsxRuntimeExports.jsx(Route,{path:"/verify",element:jsxRuntimeExports.jsx(Verify,{})}),jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(ProtectedRoute,{}),children:[jsxRuntimeExports.jsx(Route,{path:"",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"announcements",element:jsxRuntimeExports.jsx(Announcement,{})}),jsxRuntimeExports.jsx(Route,{path:"profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"friends",element:jsxRuntimeExports.jsx(Friends,{})}),jsxRuntimeExports.jsx(Route,{path:"friends/requests",element:jsxRuntimeExports.jsx(FriendRequests,{})}),jsxRuntimeExports.jsx(Route,{path:"friends/suggestions",element:jsxRuntimeExports.jsx(FriendSuggestions,{})}),jsxRuntimeExports.jsx(Route,{path:"friends/list",element:jsxRuntimeExports.jsx(AllFriends,{})}),jsxRuntimeExports.jsx(Route,{path:"exam-announcement",element:jsxRuntimeExports.jsx(PostExamAnnouncement,{})}),jsxRuntimeExports.jsx(Route,{path:"classrooms",element:jsxRuntimeExports.jsx(Classrooms,{})}),jsxRuntimeExports.jsx(Route,{path:"/classroom/:id",element:jsxRuntimeExports.jsx(Classroom,{})}),jsxRuntimeExports.jsx(Route,{path:"/invite/accept_token/:id",element:jsxRuntimeExports.jsx(AcceptInvite,{})}),jsxRuntimeExports.jsx(Route,{path:"/polls",element:jsxRuntimeExports.jsx(Polls,{})}),jsxRuntimeExports.jsx(Route,{path:"classroom/:classroomId/:assId/review",element:jsxRuntimeExports.jsx(ReviewWork,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/admin/",element:jsxRuntimeExports.jsx(ProtectedRoute,{}),children:[jsxRuntimeExports.jsx(Route,{path:"",element:jsxRuntimeExports.jsx(Admin,{})}),jsxRuntimeExports.jsx(Route,{path:"post-announcement",element:jsxRuntimeExports.jsx(PostAnnouncement,{})}),jsxRuntimeExports.jsx(Route,{path:"delete-post",element:jsxRuntimeExports.jsx(DeletePost,{})}),jsxRuntimeExports.jsx(Route,{path:"edit-rooms",element:jsxRuntimeExports.jsx(EditRooms,{})}),jsxRuntimeExports.jsx(Route,{path:"create-poll",element:jsxRuntimeExports.jsx(CreatePoll,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/classroom/:id/a/:aid/details",element:jsxRuntimeExports.jsx(AssignmentDetails,{})}),jsxRuntimeExports.jsx(Route,{path:"/*",element:jsxRuntimeExports.jsx("h1",{children:"404 not found"})})]})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[" ",jsxRuntimeExports.jsx(App,{})]})}));
//# sourceMappingURL=index-BpiP-H4Y.js.map
